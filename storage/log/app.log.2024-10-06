[2024-10-06 00:25:17,685.685] _internal.py -> _log line:96 [INFO]:  * Restarting with stat
[2024-10-06 00:25:36,049.049] _internal.py -> _log line:96 [WARNING]:  * Debugger is active!
[2024-10-06 00:25:36,052.052] _internal.py -> _log line:96 [INFO]:  * Debugger PIN: 102-324-223
[2024-10-06 00:25:37,003.003] http.py -> _register_error_handler line:66 [ERROR]: An error occurred: Object of type Document is not JSON serializable
Traceback (most recent call last):
  File "D:\Code\llmops\llmops-api\venv\lib\site-packages\flask\app.py", line 870, in full_dispatch_request
    rv = self.dispatch_request()
  File "D:\Code\llmops\llmops-api\venv\lib\site-packages\flask\app.py", line 855, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
  File "D:\Code\llmops\llmops-api\internal\handler\app_handler.py", line 118, in ping
    return success_json({"documents": documents})
  File "D:\Code\llmops\llmops-api\pkg\response\response.py", line 31, in success_json
    return json(Response(code=HttpCode.SUCCESS, message="", data=data))
  File "D:\Code\llmops\llmops-api\pkg\response\response.py", line 26, in json
    return jsonify(data), 200
  File "D:\Code\llmops\llmops-api\venv\lib\site-packages\flask\json\__init__.py", line 170, in jsonify
    return current_app.json.response(*args, **kwargs)  # type: ignore[return-value]
  File "D:\Code\llmops\llmops-api\venv\lib\site-packages\flask\json\provider.py", line 214, in response
    f"{self.dumps(obj, **dump_args)}\n", mimetype=self.mimetype
  File "D:\Code\llmops\llmops-api\venv\lib\site-packages\flask\json\provider.py", line 179, in dumps
    return json.dumps(obj, **kwargs)
  File "D:\Env\python\python310\lib\json\__init__.py", line 238, in dumps
    **kw).encode(obj)
  File "D:\Env\python\python310\lib\json\encoder.py", line 201, in encode
    chunks = list(chunks)
  File "D:\Env\python\python310\lib\json\encoder.py", line 439, in _iterencode
    yield from _iterencode(o, _current_indent_level)
  File "D:\Env\python\python310\lib\json\encoder.py", line 431, in _iterencode
    yield from _iterencode_dict(o, _current_indent_level)
  File "D:\Env\python\python310\lib\json\encoder.py", line 405, in _iterencode_dict
    yield from chunks
  File "D:\Env\python\python310\lib\json\encoder.py", line 405, in _iterencode_dict
    yield from chunks
  File "D:\Env\python\python310\lib\json\encoder.py", line 325, in _iterencode_list
    yield from chunks
  File "D:\Env\python\python310\lib\json\encoder.py", line 438, in _iterencode
    o = _default(o)
  File "D:\Code\llmops\llmops-api\venv\lib\site-packages\flask\json\provider.py", line 121, in _default
    raise TypeError(f"Object of type {type(o).__name__} is not JSON serializable")
TypeError: Object of type Document is not JSON serializable
[2024-10-06 00:25:37,028.028] _internal.py -> _log line:96 [INFO]: 127.0.0.1 - - [06/Oct/2024 00:25:37] "[35m[1mGET /ping HTTP/1.1[0m" 500 -
[2024-10-06 00:26:07,518.518] _internal.py -> _log line:96 [INFO]:  * Detected change in 'D:\\Code\\llmops\\llmops-api\\internal\\handler\\app_handler.py', reloading
[2024-10-06 00:26:08,152.152] _internal.py -> _log line:96 [INFO]:  * Restarting with stat
[2024-10-06 00:26:22,907.907] _internal.py -> _log line:96 [WARNING]:  * Debugger is active!
[2024-10-06 00:26:22,909.909] _internal.py -> _log line:96 [INFO]:  * Debugger PIN: 102-324-223
[2024-10-06 00:26:23,921.921] _internal.py -> _log line:96 [INFO]: 127.0.0.1 - - [06/Oct/2024 00:26:23] "GET /ping HTTP/1.1" 200 -
[2024-10-06 00:26:57,458.458] _internal.py -> _log line:96 [INFO]:  * Detected change in 'D:\\Code\\llmops\\llmops-api\\internal\\handler\\app_handler.py', reloading
[2024-10-06 00:26:58,124.124] _internal.py -> _log line:96 [INFO]:  * Restarting with stat
[2024-10-06 00:27:13,952.952] _internal.py -> _log line:96 [WARNING]:  * Debugger is active!
[2024-10-06 00:27:13,954.954] _internal.py -> _log line:96 [INFO]:  * Debugger PIN: 102-324-223
[2024-10-06 00:41:28,332.332] base.py -> _exec_single_context line:1903 [INFO]: select pg_catalog.version()
[2024-10-06 00:41:28,332.332] base.py -> _exec_single_context line:1908 [INFO]: [raw sql] {}
[2024-10-06 00:41:28,333.333] base.py -> _exec_single_context line:1903 [INFO]: select current_schema()
[2024-10-06 00:41:28,333.333] base.py -> _exec_single_context line:1908 [INFO]: [raw sql] {}
[2024-10-06 00:41:28,334.334] base.py -> _exec_single_context line:1903 [INFO]: show standard_conforming_strings
[2024-10-06 00:41:28,334.334] base.py -> _exec_single_context line:1908 [INFO]: [raw sql] {}
[2024-10-06 00:41:28,334.334] base.py -> _begin_impl line:1103 [INFO]: BEGIN (implicit)
[2024-10-06 00:41:28,336.336] base.py -> _exec_single_context line:1903 [INFO]: SELECT api_tool.id AS api_tool_id, api_tool.account_id AS api_tool_account_id, api_tool.provider_id AS api_tool_provider_id, api_tool.name AS api_tool_name, api_tool.description AS api_tool_description, api_tool.url AS api_tool_url, api_tool.method AS api_tool_method, api_tool.parameters AS api_tool_parameters, api_tool.updated_at AS api_tool_updated_at, api_tool.created_at AS api_tool_created_at 
FROM api_tool 
WHERE api_tool.provider_id = %(provider_id_1)s::UUID AND api_tool.name = %(name_1)s
[2024-10-06 00:41:28,336.336] base.py -> _exec_single_context line:1908 [INFO]: [generated in 0.00014s] {'provider_id_1': 'd72bb9d7-8794-4caf-bd60-1f992c537065', 'name_1': 'YoudaoSuggest'}
[2024-10-06 00:41:28,339.339] base.py -> _exec_single_context line:1903 [INFO]: SELECT api_tool_provider.id AS api_tool_provider_id, api_tool_provider.account_id AS api_tool_provider_account_id, api_tool_provider.name AS api_tool_provider_name, api_tool_provider.icon AS api_tool_provider_icon, api_tool_provider.description AS api_tool_provider_description, api_tool_provider.openapi_schema AS api_tool_provider_openapi_schema, api_tool_provider.headers AS api_tool_provider_headers, api_tool_provider.updated_at AS api_tool_provider_updated_at, api_tool_provider.created_at AS api_tool_provider_created_at 
FROM api_tool_provider 
WHERE api_tool_provider.id = %(pk_1)s::UUID
[2024-10-06 00:41:28,339.339] base.py -> _exec_single_context line:1908 [INFO]: [generated in 0.00013s] {'pk_1': UUID('d72bb9d7-8794-4caf-bd60-1f992c537065')}
[2024-10-06 00:41:28,918.918] base.py -> _rollback_impl line:1129 [INFO]: ROLLBACK
[2024-10-06 00:41:28,919.919] _internal.py -> _log line:96 [INFO]: 127.0.0.1 - - [06/Oct/2024 00:41:28] "GET /ping HTTP/1.1" 200 -
[2024-10-06 09:20:29,116.116] _internal.py -> _log line:96 [INFO]:  * Detected change in 'D:\\Code\\llmops\\llmops-api\\internal\\handler\\app_handler.py', reloading
[2024-10-06 09:20:29,778.778] _internal.py -> _log line:96 [INFO]:  * Restarting with stat
[2024-10-06 09:20:40,138.138] _internal.py -> _log line:96 [INFO]:  * Restarting with stat
[2024-10-06 09:20:56,509.509] _internal.py -> _log line:96 [WARNING]:  * Debugger is active!
[2024-10-06 09:20:56,512.512] _internal.py -> _log line:96 [INFO]:  * Debugger PIN: 102-324-223
[2024-10-06 09:21:02,282.282] _internal.py -> _log line:96 [INFO]:  * Detected change in 'D:\\Code\\llmops\\llmops-api\\internal\\handler\\app_handler.py', reloading
[2024-10-06 09:21:02,874.874] _internal.py -> _log line:96 [INFO]:  * Restarting with stat
[2024-10-06 09:21:18,038.038] _internal.py -> _log line:96 [WARNING]:  * Debugger is active!
[2024-10-06 09:21:18,040.040] _internal.py -> _log line:96 [INFO]:  * Debugger PIN: 102-324-223
[2024-10-06 09:21:35,504.504] _internal.py -> _log line:96 [INFO]:  * Detected change in 'D:\\Code\\llmops\\llmops-api\\internal\\handler\\app_handler.py', reloading
[2024-10-06 09:21:36,141.141] _internal.py -> _log line:96 [INFO]:  * Restarting with stat
[2024-10-06 09:21:53,508.508] _internal.py -> _log line:96 [WARNING]:  * Debugger is active!
[2024-10-06 09:21:53,513.513] _internal.py -> _log line:96 [INFO]:  * Debugger PIN: 102-324-223
[2024-10-06 09:22:33,920.920] _internal.py -> _log line:96 [INFO]:  * Detected change in 'D:\\Code\\llmops\\llmops-api\\internal\\handler\\app_handler.py', reloading
[2024-10-06 09:22:34,515.515] _internal.py -> _log line:96 [INFO]:  * Restarting with stat
[2024-10-06 09:22:39,075.075] _internal.py -> _log line:96 [INFO]:  * Restarting with stat
[2024-10-06 09:22:54,551.551] _internal.py -> _log line:96 [WARNING]:  * Debugger is active!
[2024-10-06 09:22:54,554.554] _internal.py -> _log line:96 [INFO]:  * Debugger PIN: 102-324-223
[2024-10-06 09:23:23,348.348] _internal.py -> _log line:96 [INFO]:  * Detected change in 'D:\\Code\\llmops\\llmops-api\\internal\\handler\\app_handler.py', reloading
[2024-10-06 09:23:23,999.999] _internal.py -> _log line:96 [INFO]:  * Restarting with stat
[2024-10-06 09:23:40,014.014] _internal.py -> _log line:96 [WARNING]:  * Debugger is active!
[2024-10-06 09:23:40,017.017] _internal.py -> _log line:96 [INFO]:  * Debugger PIN: 102-324-223
[2024-10-06 09:24:16,554.554] _internal.py -> _log line:96 [INFO]:  * Detected change in 'D:\\Code\\llmops\\llmops-api\\internal\\handler\\app_handler.py', reloading
[2024-10-06 09:24:17,165.165] _internal.py -> _log line:96 [INFO]:  * Restarting with stat
[2024-10-06 09:24:33,629.629] _internal.py -> _log line:96 [WARNING]:  * Debugger is active!
[2024-10-06 09:24:33,631.631] _internal.py -> _log line:96 [INFO]:  * Debugger PIN: 102-324-223
[2024-10-06 09:24:37,873.873] http.py -> _register_error_handler line:66 [ERROR]: An error occurred: _HybridQuery.hybrid() got an unexpected keyword argument 'filter'
Traceback (most recent call last):
  File "D:\Code\llmops\llmops-api\venv\lib\site-packages\flask\app.py", line 870, in full_dispatch_request
    rv = self.dispatch_request()
  File "D:\Code\llmops\llmops-api\venv\lib\site-packages\flask\app.py", line 855, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
  File "D:\Code\llmops\llmops-api\internal\handler\app_handler.py", line 129, in ping
    documents = retriever.invoke("慕课")
  File "D:\Code\llmops\llmops-api\venv\lib\site-packages\langchain_core\retrievers.py", line 252, in invoke
    raise e
  File "D:\Code\llmops\llmops-api\venv\lib\site-packages\langchain_core\retrievers.py", line 245, in invoke
    result = self._get_relevant_documents(
  File "D:\Code\llmops\llmops-api\venv\lib\site-packages\langchain_core\vectorstores\base.py", line 1051, in _get_relevant_documents
    docs = self.vectorstore.max_marginal_relevance_search(
  File "D:\Code\llmops\llmops-api\venv\lib\site-packages\langchain_weaviate\vectorstores.py", line 358, in max_marginal_relevance_search
    return self.max_marginal_relevance_search_by_vector(
  File "D:\Code\llmops\llmops-api\venv\lib\site-packages\langchain_weaviate\vectorstores.py", line 388, in max_marginal_relevance_search_by_vector
    results = self._perform_search(
  File "D:\Code\llmops\llmops-api\venv\lib\site-packages\langchain_weaviate\vectorstores.py", line 279, in _perform_search
    result = collection.query.hybrid(
TypeError: _HybridQuery.hybrid() got an unexpected keyword argument 'filter'
[2024-10-06 09:24:37,894.894] _internal.py -> _log line:96 [INFO]: 127.0.0.1 - - [06/Oct/2024 09:24:37] "[35m[1mGET /ping HTTP/1.1[0m" 500 -
[2024-10-06 09:26:15,606.606] http.py -> _register_error_handler line:66 [ERROR]: An error occurred: _HybridQuery.hybrid() got an unexpected keyword argument 'filter'
Traceback (most recent call last):
  File "D:\Code\llmops\llmops-api\venv\lib\site-packages\flask\app.py", line 870, in full_dispatch_request
    rv = self.dispatch_request()
  File "D:\Code\llmops\llmops-api\venv\lib\site-packages\flask\app.py", line 855, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
  File "D:\Code\llmops\llmops-api\internal\handler\app_handler.py", line 129, in ping
    documents = retriever.invoke("慕课")
  File "D:\Code\llmops\llmops-api\venv\lib\site-packages\langchain_core\retrievers.py", line 252, in invoke
    raise e
  File "D:\Code\llmops\llmops-api\venv\lib\site-packages\langchain_core\retrievers.py", line 245, in invoke
    result = self._get_relevant_documents(
  File "D:\Code\llmops\llmops-api\venv\lib\site-packages\langchain_core\vectorstores\base.py", line 1051, in _get_relevant_documents
    docs = self.vectorstore.max_marginal_relevance_search(
  File "D:\Code\llmops\llmops-api\venv\lib\site-packages\langchain_weaviate\vectorstores.py", line 358, in max_marginal_relevance_search
    return self.max_marginal_relevance_search_by_vector(
  File "D:\Code\llmops\llmops-api\venv\lib\site-packages\langchain_weaviate\vectorstores.py", line 388, in max_marginal_relevance_search_by_vector
    results = self._perform_search(
  File "D:\Code\llmops\llmops-api\venv\lib\site-packages\langchain_weaviate\vectorstores.py", line 279, in _perform_search
    result = collection.query.hybrid(
TypeError: _HybridQuery.hybrid() got an unexpected keyword argument 'filter'
[2024-10-06 09:26:15,625.625] _internal.py -> _log line:96 [INFO]: 127.0.0.1 - - [06/Oct/2024 09:26:15] "[35m[1mGET /ping HTTP/1.1[0m" 500 -
[2024-10-06 09:29:23,880.880] _internal.py -> _log line:96 [INFO]:  * Detected change in 'D:\\Code\\llmops\\llmops-api\\internal\\handler\\app_handler.py', reloading
[2024-10-06 09:29:24,516.516] _internal.py -> _log line:96 [INFO]:  * Restarting with stat
[2024-10-06 09:29:41,302.302] _internal.py -> _log line:96 [WARNING]:  * Debugger is active!
[2024-10-06 09:29:41,304.304] _internal.py -> _log line:96 [INFO]:  * Debugger PIN: 102-324-223
[2024-10-06 09:29:42,342.342] http.py -> _register_error_handler line:66 [ERROR]: An error occurred: 'Document' object has no attribute 'model_dump'
Traceback (most recent call last):
  File "D:\Code\llmops\llmops-api\venv\lib\site-packages\flask\app.py", line 870, in full_dispatch_request
    rv = self.dispatch_request()
  File "D:\Code\llmops\llmops-api\venv\lib\site-packages\flask\app.py", line 855, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
  File "D:\Code\llmops\llmops-api\internal\handler\app_handler.py", line 131, in ping
    return success_json({"documents": [
  File "D:\Code\llmops\llmops-api\internal\handler\app_handler.py", line 132, in <listcomp>
    document.model_dump() for document in documents
AttributeError: 'Document' object has no attribute 'model_dump'
[2024-10-06 09:29:42,354.354] _internal.py -> _log line:96 [INFO]: 127.0.0.1 - - [06/Oct/2024 09:29:42] "[35m[1mGET /ping HTTP/1.1[0m" 500 -
[2024-10-06 09:30:05,545.545] _internal.py -> _log line:96 [INFO]:  * Detected change in 'D:\\Code\\llmops\\llmops-api\\internal\\handler\\app_handler.py', reloading
[2024-10-06 09:30:06,234.234] _internal.py -> _log line:96 [INFO]:  * Restarting with stat
[2024-10-06 09:30:22,378.378] _internal.py -> _log line:96 [WARNING]:  * Debugger is active!
[2024-10-06 09:30:22,381.381] _internal.py -> _log line:96 [INFO]:  * Debugger PIN: 102-324-223
[2024-10-06 09:30:44,223.223] _internal.py -> _log line:96 [INFO]: 127.0.0.1 - - [06/Oct/2024 09:30:44] "GET /ping HTTP/1.1" 200 -
[2024-10-06 09:31:03,289.289] _internal.py -> _log line:96 [INFO]:  * Detected change in 'D:\\Code\\llmops\\llmops-api\\internal\\handler\\app_handler.py', reloading
[2024-10-06 09:31:04,026.026] _internal.py -> _log line:96 [INFO]:  * Restarting with stat
[2024-10-06 09:31:20,096.096] _internal.py -> _log line:96 [WARNING]:  * Debugger is active!
[2024-10-06 09:31:20,098.098] _internal.py -> _log line:96 [INFO]:  * Debugger PIN: 102-324-223
[2024-10-06 09:31:40,742.742] http.py -> _register_error_handler line:66 [ERROR]: An error occurred: weaviate.collections.queries.hybrid.query._HybridQuery.hybrid() got multiple values for keyword argument 'limit'
Traceback (most recent call last):
  File "D:\Code\llmops\llmops-api\venv\lib\site-packages\flask\app.py", line 870, in full_dispatch_request
    rv = self.dispatch_request()
  File "D:\Code\llmops\llmops-api\venv\lib\site-packages\flask\app.py", line 855, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
  File "D:\Code\llmops\llmops-api\internal\handler\app_handler.py", line 129, in ping
    documents = retriever.invoke("慕课")
  File "D:\Code\llmops\llmops-api\venv\lib\site-packages\langchain_core\retrievers.py", line 252, in invoke
    raise e
  File "D:\Code\llmops\llmops-api\venv\lib\site-packages\langchain_core\retrievers.py", line 245, in invoke
    result = self._get_relevant_documents(
  File "D:\Code\llmops\llmops-api\venv\lib\site-packages\langchain_core\vectorstores\base.py", line 1051, in _get_relevant_documents
    docs = self.vectorstore.max_marginal_relevance_search(
  File "D:\Code\llmops\llmops-api\venv\lib\site-packages\langchain_weaviate\vectorstores.py", line 358, in max_marginal_relevance_search
    return self.max_marginal_relevance_search_by_vector(
  File "D:\Code\llmops\llmops-api\venv\lib\site-packages\langchain_weaviate\vectorstores.py", line 388, in max_marginal_relevance_search_by_vector
    results = self._perform_search(
  File "D:\Code\llmops\llmops-api\venv\lib\site-packages\langchain_weaviate\vectorstores.py", line 279, in _perform_search
    result = collection.query.hybrid(
TypeError: weaviate.collections.queries.hybrid.query._HybridQuery.hybrid() got multiple values for keyword argument 'limit'
[2024-10-06 09:31:40,757.757] _internal.py -> _log line:96 [INFO]: 127.0.0.1 - - [06/Oct/2024 09:31:40] "[35m[1mGET /ping HTTP/1.1[0m" 500 -
[2024-10-06 09:32:17,001.001] _internal.py -> _log line:96 [INFO]: [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5000
[2024-10-06 09:32:17,002.002] _internal.py -> _log line:96 [INFO]: [33mPress CTRL+C to quit[0m
[2024-10-06 09:32:17,003.003] _internal.py -> _log line:96 [INFO]:  * Restarting with stat
[2024-10-06 09:32:34,303.303] _internal.py -> _log line:96 [WARNING]:  * Debugger is active!
[2024-10-06 09:32:34,307.307] _internal.py -> _log line:96 [INFO]:  * Debugger PIN: 102-324-223
[2024-10-06 09:32:36,284.284] _internal.py -> _log line:96 [INFO]: 127.0.0.1 - - [06/Oct/2024 09:32:36] "GET /ping HTTP/1.1" 200 -
[2024-10-06 09:33:22,755.755] _internal.py -> _log line:96 [INFO]:  * Detected change in 'D:\\Code\\llmops\\llmops-api\\internal\\handler\\app_handler.py', reloading
[2024-10-06 09:33:23,486.486] _internal.py -> _log line:96 [INFO]:  * Restarting with stat
[2024-10-06 09:33:39,567.567] _internal.py -> _log line:96 [WARNING]:  * Debugger is active!
[2024-10-06 09:33:39,569.569] _internal.py -> _log line:96 [INFO]:  * Debugger PIN: 102-324-223
[2024-10-06 09:33:53,112.112] _internal.py -> _log line:96 [INFO]: 127.0.0.1 - - [06/Oct/2024 09:33:53] "GET /ping HTTP/1.1" 200 -
[2024-10-06 10:02:06,642.642] _internal.py -> _log line:96 [INFO]:  * Detected change in 'D:\\Code\\llmops\\llmops-api\\internal\\handler\\app_handler.py', reloading
[2024-10-06 10:02:07,512.512] _internal.py -> _log line:96 [INFO]:  * Restarting with stat
[2024-10-06 10:02:23,423.423] _internal.py -> _log line:96 [WARNING]:  * Debugger is active!
[2024-10-06 10:02:23,425.425] _internal.py -> _log line:96 [INFO]:  * Debugger PIN: 102-324-223
[2024-10-06 10:02:30,433.433] _internal.py -> _log line:96 [INFO]:  * Detected change in 'D:\\Code\\llmops\\llmops-api\\internal\\handler\\app_handler.py', reloading
[2024-10-06 10:02:31,026.026] _internal.py -> _log line:96 [INFO]:  * Restarting with stat
[2024-10-06 10:02:48,388.388] _internal.py -> _log line:96 [WARNING]:  * Debugger is active!
[2024-10-06 10:02:48,393.393] _internal.py -> _log line:96 [INFO]:  * Debugger PIN: 102-324-223
[2024-10-06 10:02:50,362.362] _internal.py -> _log line:96 [INFO]: 127.0.0.1 - - [06/Oct/2024 10:02:50] "GET /ping HTTP/1.1" 200 -
[2024-10-06 10:07:50,477.477] _internal.py -> _log line:96 [INFO]:  * Detected change in 'D:\\Code\\llmops\\llmops-api\\internal\\handler\\app_handler.py', reloading
[2024-10-06 10:07:51,156.156] _internal.py -> _log line:96 [INFO]:  * Restarting with stat
[2024-10-06 10:08:06,283.283] _internal.py -> _log line:96 [WARNING]:  * Debugger is active!
[2024-10-06 10:08:06,285.285] _internal.py -> _log line:96 [INFO]:  * Debugger PIN: 102-324-223
[2024-10-06 11:12:43,598.598] _internal.py -> _log line:96 [INFO]:  * Detected change in 'D:\\Code\\llmops\\llmops-api\\internal\\service\\indexing_service.py', reloading
[2024-10-06 11:12:44,246.246] _internal.py -> _log line:96 [INFO]:  * Restarting with stat
[2024-10-06 11:13:00,465.465] _internal.py -> _log line:96 [WARNING]:  * Debugger is active!
[2024-10-06 11:13:00,467.467] _internal.py -> _log line:96 [INFO]:  * Debugger PIN: 102-324-223
[2024-10-06 11:16:26,604.604] _internal.py -> _log line:96 [INFO]:  * Detected change in 'D:\\Code\\llmops\\llmops-api\\internal\\service\\indexing_service.py', reloading
[2024-10-06 11:16:27,273.273] _internal.py -> _log line:96 [INFO]:  * Restarting with stat
[2024-10-06 11:16:42,866.866] _internal.py -> _log line:96 [WARNING]:  * Debugger is active!
[2024-10-06 11:16:42,868.868] _internal.py -> _log line:96 [INFO]:  * Debugger PIN: 102-324-223
[2024-10-06 11:17:32,069.069] _internal.py -> _log line:96 [INFO]:  * Detected change in 'D:\\Code\\llmops\\llmops-api\\internal\\service\\indexing_service.py', reloading
[2024-10-06 11:17:32,653.653] _internal.py -> _log line:96 [INFO]:  * Restarting with stat
[2024-10-06 11:17:48,409.409] _internal.py -> _log line:96 [WARNING]:  * Debugger is active!
[2024-10-06 11:17:48,411.411] _internal.py -> _log line:96 [INFO]:  * Debugger PIN: 102-324-223
[2024-10-06 11:18:15,856.856] _internal.py -> _log line:96 [INFO]:  * Detected change in 'D:\\Code\\llmops\\llmops-api\\internal\\service\\indexing_service.py', reloading
[2024-10-06 11:18:16,437.437] _internal.py -> _log line:96 [INFO]:  * Restarting with stat
[2024-10-06 11:18:32,521.521] _internal.py -> _log line:96 [WARNING]:  * Debugger is active!
[2024-10-06 11:18:32,523.523] _internal.py -> _log line:96 [INFO]:  * Debugger PIN: 102-324-223
[2024-10-06 11:19:57,047.047] base.py -> _exec_single_context line:1903 [INFO]: select pg_catalog.version()
[2024-10-06 11:19:57,047.047] base.py -> _exec_single_context line:1908 [INFO]: [raw sql] {}
[2024-10-06 11:19:57,048.048] base.py -> _exec_single_context line:1903 [INFO]: select current_schema()
[2024-10-06 11:19:57,049.049] base.py -> _exec_single_context line:1908 [INFO]: [raw sql] {}
[2024-10-06 11:19:57,049.049] base.py -> _exec_single_context line:1903 [INFO]: show standard_conforming_strings
[2024-10-06 11:19:57,049.049] base.py -> _exec_single_context line:1908 [INFO]: [raw sql] {}
[2024-10-06 11:19:57,050.050] base.py -> _begin_impl line:1103 [INFO]: BEGIN (implicit)
[2024-10-06 11:19:57,052.052] base.py -> _exec_single_context line:1903 [INFO]: INSERT INTO upload_file (account_id, name, key, size, extension, mime_type, hash) VALUES (%(account_id)s::UUID, %(name)s, %(key)s, %(size)s, %(extension)s, %(mime_type)s, %(hash)s) RETURNING upload_file.id, upload_file.updated_at, upload_file.created_at
[2024-10-06 11:19:57,052.052] base.py -> _exec_single_context line:1908 [INFO]: [generated in 0.00024s] {'account_id': '46db30d1-3199-4e79-a0cd-abf12fa6858f', 'name': '项目API文档-完整.md', 'key': '2024/10/06/adcfed45-be65-4a96-858a-368ba0f8ee2e.md', 'size': 94003, 'extension': 'md', 'mime_type': 'text/markdown', 'hash': 'f6cb33757f54eff8657045657c8123a8175d36f4be4db2cea80731856d021e03'}
[2024-10-06 11:19:57,054.054] base.py -> _commit_impl line:1146 [INFO]: COMMIT
[2024-10-06 11:19:57,057.057] base.py -> _begin_impl line:1103 [INFO]: BEGIN (implicit)
[2024-10-06 11:19:57,059.059] base.py -> _exec_single_context line:1903 [INFO]: SELECT upload_file.id AS upload_file_id, upload_file.account_id AS upload_file_account_id, upload_file.name AS upload_file_name, upload_file.key AS upload_file_key, upload_file.size AS upload_file_size, upload_file.extension AS upload_file_extension, upload_file.mime_type AS upload_file_mime_type, upload_file.hash AS upload_file_hash, upload_file.updated_at AS upload_file_updated_at, upload_file.created_at AS upload_file_created_at 
FROM upload_file 
WHERE upload_file.id = %(pk_1)s::UUID
[2024-10-06 11:19:57,059.059] base.py -> _exec_single_context line:1908 [INFO]: [generated in 0.00028s] {'pk_1': UUID('7b82638b-83ac-4590-b413-5dce0a799e7e')}
[2024-10-06 11:19:57,061.061] base.py -> _rollback_impl line:1129 [INFO]: ROLLBACK
[2024-10-06 11:19:57,061.061] _internal.py -> _log line:96 [INFO]: 127.0.0.1 - - [06/Oct/2024 11:19:57] "POST /upload-files/file HTTP/1.1" 200 -
[2024-10-06 11:20:09,547.547] base.py -> _begin_impl line:1103 [INFO]: BEGIN (implicit)
[2024-10-06 11:20:09,549.549] base.py -> _exec_single_context line:1903 [INFO]: SELECT dataset.id AS dataset_id, dataset.account_id AS dataset_account_id, dataset.name AS dataset_name, dataset.icon AS dataset_icon, dataset.description AS dataset_description, dataset.updated_at AS dataset_updated_at, dataset.created_at AS dataset_created_at 
FROM dataset 
WHERE dataset.id = %(pk_1)s::UUID
[2024-10-06 11:20:09,549.549] base.py -> _exec_single_context line:1908 [INFO]: [generated in 0.00021s] {'pk_1': UUID('f3f28f75-8e60-4eba-b6df-4d1b390bbd89')}
[2024-10-06 11:20:09,552.552] base.py -> _exec_single_context line:1903 [INFO]: SELECT upload_file.id AS upload_file_id, upload_file.account_id AS upload_file_account_id, upload_file.name AS upload_file_name, upload_file.key AS upload_file_key, upload_file.size AS upload_file_size, upload_file.extension AS upload_file_extension, upload_file.mime_type AS upload_file_mime_type, upload_file.hash AS upload_file_hash, upload_file.updated_at AS upload_file_updated_at, upload_file.created_at AS upload_file_created_at 
FROM upload_file 
WHERE upload_file.account_id = %(account_id_1)s::UUID AND upload_file.id IN (%(id_1_1)s::UUID)
[2024-10-06 11:20:09,553.553] base.py -> _exec_single_context line:1908 [INFO]: [generated in 0.00028s] {'account_id_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f', 'id_1_1': '7b82638b-83ac-4590-b413-5dce0a799e7e'}
[2024-10-06 11:20:09,555.555] base.py -> _exec_single_context line:1903 [INFO]: INSERT INTO process_rule (account_id, dataset_id, mode, rule) VALUES (%(account_id)s::UUID, %(dataset_id)s::UUID, %(mode)s, %(rule)s) RETURNING process_rule.id, process_rule.updated_at, process_rule.created_at
[2024-10-06 11:20:09,555.555] base.py -> _exec_single_context line:1908 [INFO]: [generated in 0.00024s] {'account_id': '46db30d1-3199-4e79-a0cd-abf12fa6858f', 'dataset_id': UUID('f3f28f75-8e60-4eba-b6df-4d1b390bbd89'), 'mode': 'automatic', 'rule': '{"pre_process_rules": [{"id": "remove_extra_space", "enabled": true}, {"id": "remove_url_and_email", "enabled": true}], "segment": {"separators": ["\ ... (15 characters truncated) ... "\\u3002|\\uff01|\\uff1f", "\\\\.\\\\s|\\\\!\\\\s|\\\\?\\\\s", "\\uff1b|;\\\\s", "\\uff0c|,\\\\s", " ", ""], "chunk_size": 500, "chunk_overlap": 50}}'}
[2024-10-06 11:20:09,556.556] base.py -> _commit_impl line:1146 [INFO]: COMMIT
[2024-10-06 11:20:09,558.558] base.py -> _begin_impl line:1103 [INFO]: BEGIN (implicit)
[2024-10-06 11:20:09,561.561] base.py -> _exec_single_context line:1903 [INFO]: SELECT document.id AS document_id, document.account_id AS document_account_id, document.dataset_id AS document_dataset_id, document.upload_file_id AS document_upload_file_id, document.process_rule_id AS document_process_rule_id, document.batch AS document_batch, document.name AS document_name, document.position AS document_position, document.character_count AS document_character_count, document.token_count AS document_token_count, document.processing_started_at AS document_processing_started_at, document.parsing_completed_at AS document_parsing_completed_at, document.splitting_completed_at AS document_splitting_completed_at, document.indexing_completed_at AS document_indexing_completed_at, document.completed_at AS document_completed_at, document.stopped_at AS document_stopped_at, document.error AS document_error, document.enabled AS document_enabled, document.disabled_at AS document_disabled_at, document.status AS document_status, document.updated_at AS document_updated_at, document.created_at AS document_created_at 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID ORDER BY document.position DESC 
 LIMIT %(param_1)s
[2024-10-06 11:20:09,561.561] base.py -> _exec_single_context line:1908 [INFO]: [generated in 0.00027s] {'dataset_id_1': UUID('f3f28f75-8e60-4eba-b6df-4d1b390bbd89'), 'param_1': 1}
[2024-10-06 11:20:09,563.563] base.py -> _exec_single_context line:1903 [INFO]: SELECT upload_file.id AS upload_file_id, upload_file.account_id AS upload_file_account_id, upload_file.name AS upload_file_name, upload_file.key AS upload_file_key, upload_file.size AS upload_file_size, upload_file.extension AS upload_file_extension, upload_file.mime_type AS upload_file_mime_type, upload_file.hash AS upload_file_hash, upload_file.updated_at AS upload_file_updated_at, upload_file.created_at AS upload_file_created_at 
FROM upload_file 
WHERE upload_file.id = %(pk_1)s::UUID
[2024-10-06 11:20:09,563.563] base.py -> _exec_single_context line:1908 [INFO]: [cached since 12.5s ago] {'pk_1': UUID('7b82638b-83ac-4590-b413-5dce0a799e7e')}
[2024-10-06 11:20:09,565.565] base.py -> _exec_single_context line:1903 [INFO]: SELECT process_rule.id AS process_rule_id, process_rule.account_id AS process_rule_account_id, process_rule.dataset_id AS process_rule_dataset_id, process_rule.mode AS process_rule_mode, process_rule.rule AS process_rule_rule, process_rule.updated_at AS process_rule_updated_at, process_rule.created_at AS process_rule_created_at 
FROM process_rule 
WHERE process_rule.id = %(pk_1)s::UUID
[2024-10-06 11:20:09,565.565] base.py -> _exec_single_context line:1908 [INFO]: [generated in 0.00019s] {'pk_1': UUID('0caa012e-c233-453b-993d-47e00bdea3e5')}
[2024-10-06 11:20:09,567.567] base.py -> _exec_single_context line:1903 [INFO]: INSERT INTO document (account_id, dataset_id, upload_file_id, process_rule_id, batch, name, position, processing_started_at, parsing_completed_at, splitting_completed_at, indexing_completed_at, completed_at, stopped_at, disabled_at) VALUES (%(account_id)s::UUID, %(dataset_id)s::UUID, %(upload_file_id)s::UUID, %(process_rule_id)s::UUID, %(batch)s, %(name)s, %(position)s, %(processing_started_at)s, %(parsing_completed_at)s, %(splitting_completed_at)s, %(indexing_completed_at)s, %(completed_at)s, %(stopped_at)s, %(disabled_at)s) RETURNING document.id, document.character_count, document.token_count, document.error, document.enabled, document.status, document.updated_at, document.created_at
[2024-10-06 11:20:09,567.567] base.py -> _exec_single_context line:1908 [INFO]: [generated in 0.00034s] {'account_id': '46db30d1-3199-4e79-a0cd-abf12fa6858f', 'dataset_id': UUID('f3f28f75-8e60-4eba-b6df-4d1b390bbd89'), 'upload_file_id': UUID('7b82638b-83ac-4590-b413-5dce0a799e7e'), 'process_rule_id': UUID('0caa012e-c233-453b-993d-47e00bdea3e5'), 'batch': '20241006112009516193', 'name': '项目API文档-完整.md', 'position': 2, 'processing_started_at': None, 'parsing_completed_at': None, 'splitting_completed_at': None, 'indexing_completed_at': None, 'completed_at': None, 'stopped_at': None, 'disabled_at': None}
[2024-10-06 11:20:09,569.569] base.py -> _commit_impl line:1146 [INFO]: COMMIT
[2024-10-06 11:20:09,575.575] base.py -> _begin_impl line:1103 [INFO]: BEGIN (implicit)
[2024-10-06 11:20:09,576.576] base.py -> _exec_single_context line:1903 [INFO]: SELECT document.id AS document_id, document.account_id AS document_account_id, document.dataset_id AS document_dataset_id, document.upload_file_id AS document_upload_file_id, document.process_rule_id AS document_process_rule_id, document.batch AS document_batch, document.name AS document_name, document.position AS document_position, document.character_count AS document_character_count, document.token_count AS document_token_count, document.processing_started_at AS document_processing_started_at, document.parsing_completed_at AS document_parsing_completed_at, document.splitting_completed_at AS document_splitting_completed_at, document.indexing_completed_at AS document_indexing_completed_at, document.completed_at AS document_completed_at, document.stopped_at AS document_stopped_at, document.error AS document_error, document.enabled AS document_enabled, document.disabled_at AS document_disabled_at, document.status AS document_status, document.updated_at AS document_updated_at, document.created_at AS document_created_at 
FROM document 
WHERE document.id = %(pk_1)s::UUID
[2024-10-06 11:20:09,576.576] base.py -> _exec_single_context line:1908 [INFO]: [generated in 0.00028s] {'pk_1': UUID('2673371a-1c35-4a4d-8260-0939c4b70cb5')}
[2024-10-06 11:20:09,644.644] base.py -> _rollback_impl line:1129 [INFO]: ROLLBACK
[2024-10-06 11:20:09,644.644] _internal.py -> _log line:96 [INFO]: 127.0.0.1 - - [06/Oct/2024 11:20:09] "POST /datasets/f3f28f75-8e60-4eba-b6df-4d1b390bbd89/documents HTTP/1.1" 200 -
[2024-10-06 11:21:46,923.923] base.py -> _begin_impl line:1103 [INFO]: BEGIN (implicit)
[2024-10-06 11:21:46,923.923] base.py -> _exec_single_context line:1903 [INFO]: SELECT dataset.id AS dataset_id, dataset.account_id AS dataset_account_id, dataset.name AS dataset_name, dataset.icon AS dataset_icon, dataset.description AS dataset_description, dataset.updated_at AS dataset_updated_at, dataset.created_at AS dataset_created_at 
FROM dataset 
WHERE dataset.id = %(pk_1)s::UUID
[2024-10-06 11:21:46,923.923] base.py -> _exec_single_context line:1908 [INFO]: [cached since 97.37s ago] {'pk_1': UUID('f3f28f75-8e60-4eba-b6df-4d1b390bbd89')}
[2024-10-06 11:21:46,924.924] base.py -> _exec_single_context line:1903 [INFO]: SELECT upload_file.id AS upload_file_id, upload_file.account_id AS upload_file_account_id, upload_file.name AS upload_file_name, upload_file.key AS upload_file_key, upload_file.size AS upload_file_size, upload_file.extension AS upload_file_extension, upload_file.mime_type AS upload_file_mime_type, upload_file.hash AS upload_file_hash, upload_file.updated_at AS upload_file_updated_at, upload_file.created_at AS upload_file_created_at 
FROM upload_file 
WHERE upload_file.account_id = %(account_id_1)s::UUID AND upload_file.id IN (%(id_1_1)s::UUID)
[2024-10-06 11:21:46,925.925] base.py -> _exec_single_context line:1908 [INFO]: [cached since 97.37s ago] {'account_id_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f', 'id_1_1': '7b82638b-83ac-4590-b413-5dce0a799e7e'}
[2024-10-06 11:21:46,925.925] base.py -> _exec_single_context line:1903 [INFO]: INSERT INTO process_rule (account_id, dataset_id, mode, rule) VALUES (%(account_id)s::UUID, %(dataset_id)s::UUID, %(mode)s, %(rule)s) RETURNING process_rule.id, process_rule.updated_at, process_rule.created_at
[2024-10-06 11:21:46,926.926] base.py -> _exec_single_context line:1908 [INFO]: [cached since 97.37s ago] {'account_id': '46db30d1-3199-4e79-a0cd-abf12fa6858f', 'dataset_id': UUID('f3f28f75-8e60-4eba-b6df-4d1b390bbd89'), 'mode': 'automatic', 'rule': '{"pre_process_rules": [{"id": "remove_extra_space", "enabled": true}, {"id": "remove_url_and_email", "enabled": true}], "segment": {"separators": ["\ ... (15 characters truncated) ... "\\u3002|\\uff01|\\uff1f", "\\\\.\\\\s|\\\\!\\\\s|\\\\?\\\\s", "\\uff1b|;\\\\s", "\\uff0c|,\\\\s", " ", ""], "chunk_size": 500, "chunk_overlap": 50}}'}
[2024-10-06 11:21:46,926.926] base.py -> _commit_impl line:1146 [INFO]: COMMIT
[2024-10-06 11:21:46,929.929] base.py -> _begin_impl line:1103 [INFO]: BEGIN (implicit)
[2024-10-06 11:21:46,929.929] base.py -> _exec_single_context line:1903 [INFO]: SELECT document.id AS document_id, document.account_id AS document_account_id, document.dataset_id AS document_dataset_id, document.upload_file_id AS document_upload_file_id, document.process_rule_id AS document_process_rule_id, document.batch AS document_batch, document.name AS document_name, document.position AS document_position, document.character_count AS document_character_count, document.token_count AS document_token_count, document.processing_started_at AS document_processing_started_at, document.parsing_completed_at AS document_parsing_completed_at, document.splitting_completed_at AS document_splitting_completed_at, document.indexing_completed_at AS document_indexing_completed_at, document.completed_at AS document_completed_at, document.stopped_at AS document_stopped_at, document.error AS document_error, document.enabled AS document_enabled, document.disabled_at AS document_disabled_at, document.status AS document_status, document.updated_at AS document_updated_at, document.created_at AS document_created_at 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID ORDER BY document.position DESC 
 LIMIT %(param_1)s
[2024-10-06 11:21:46,929.929] base.py -> _exec_single_context line:1908 [INFO]: [cached since 97.37s ago] {'dataset_id_1': UUID('f3f28f75-8e60-4eba-b6df-4d1b390bbd89'), 'param_1': 1}
[2024-10-06 11:21:46,930.930] base.py -> _exec_single_context line:1903 [INFO]: SELECT upload_file.id AS upload_file_id, upload_file.account_id AS upload_file_account_id, upload_file.name AS upload_file_name, upload_file.key AS upload_file_key, upload_file.size AS upload_file_size, upload_file.extension AS upload_file_extension, upload_file.mime_type AS upload_file_mime_type, upload_file.hash AS upload_file_hash, upload_file.updated_at AS upload_file_updated_at, upload_file.created_at AS upload_file_created_at 
FROM upload_file 
WHERE upload_file.id = %(pk_1)s::UUID
[2024-10-06 11:21:46,930.930] base.py -> _exec_single_context line:1908 [INFO]: [cached since 109.9s ago] {'pk_1': UUID('7b82638b-83ac-4590-b413-5dce0a799e7e')}
[2024-10-06 11:21:46,931.931] base.py -> _exec_single_context line:1903 [INFO]: SELECT process_rule.id AS process_rule_id, process_rule.account_id AS process_rule_account_id, process_rule.dataset_id AS process_rule_dataset_id, process_rule.mode AS process_rule_mode, process_rule.rule AS process_rule_rule, process_rule.updated_at AS process_rule_updated_at, process_rule.created_at AS process_rule_created_at 
FROM process_rule 
WHERE process_rule.id = %(pk_1)s::UUID
[2024-10-06 11:21:46,931.931] base.py -> _exec_single_context line:1908 [INFO]: [cached since 97.37s ago] {'pk_1': UUID('adbf9008-3499-45fe-b72f-b7ce873a2deb')}
[2024-10-06 11:21:46,931.931] base.py -> _exec_single_context line:1903 [INFO]: INSERT INTO document (account_id, dataset_id, upload_file_id, process_rule_id, batch, name, position, processing_started_at, parsing_completed_at, splitting_completed_at, indexing_completed_at, completed_at, stopped_at, disabled_at) VALUES (%(account_id)s::UUID, %(dataset_id)s::UUID, %(upload_file_id)s::UUID, %(process_rule_id)s::UUID, %(batch)s, %(name)s, %(position)s, %(processing_started_at)s, %(parsing_completed_at)s, %(splitting_completed_at)s, %(indexing_completed_at)s, %(completed_at)s, %(stopped_at)s, %(disabled_at)s) RETURNING document.id, document.character_count, document.token_count, document.error, document.enabled, document.status, document.updated_at, document.created_at
[2024-10-06 11:21:46,931.931] base.py -> _exec_single_context line:1908 [INFO]: [cached since 97.36s ago] {'account_id': '46db30d1-3199-4e79-a0cd-abf12fa6858f', 'dataset_id': UUID('f3f28f75-8e60-4eba-b6df-4d1b390bbd89'), 'upload_file_id': UUID('7b82638b-83ac-4590-b413-5dce0a799e7e'), 'process_rule_id': UUID('adbf9008-3499-45fe-b72f-b7ce873a2deb'), 'batch': '20241006112146526513', 'name': '项目API文档-完整.md', 'position': 2, 'processing_started_at': None, 'parsing_completed_at': None, 'splitting_completed_at': None, 'indexing_completed_at': None, 'completed_at': None, 'stopped_at': None, 'disabled_at': None}
[2024-10-06 11:21:46,932.932] base.py -> _commit_impl line:1146 [INFO]: COMMIT
[2024-10-06 11:21:46,933.933] base.py -> _begin_impl line:1103 [INFO]: BEGIN (implicit)
[2024-10-06 11:21:46,933.933] base.py -> _exec_single_context line:1903 [INFO]: SELECT document.id AS document_id, document.account_id AS document_account_id, document.dataset_id AS document_dataset_id, document.upload_file_id AS document_upload_file_id, document.process_rule_id AS document_process_rule_id, document.batch AS document_batch, document.name AS document_name, document.position AS document_position, document.character_count AS document_character_count, document.token_count AS document_token_count, document.processing_started_at AS document_processing_started_at, document.parsing_completed_at AS document_parsing_completed_at, document.splitting_completed_at AS document_splitting_completed_at, document.indexing_completed_at AS document_indexing_completed_at, document.completed_at AS document_completed_at, document.stopped_at AS document_stopped_at, document.error AS document_error, document.enabled AS document_enabled, document.disabled_at AS document_disabled_at, document.status AS document_status, document.updated_at AS document_updated_at, document.created_at AS document_created_at 
FROM document 
WHERE document.id = %(pk_1)s::UUID
[2024-10-06 11:21:46,933.933] base.py -> _exec_single_context line:1908 [INFO]: [cached since 97.36s ago] {'pk_1': UUID('e214d5ba-1f0a-43d4-8fe8-05f2044e5221')}
[2024-10-06 11:21:46,954.954] base.py -> _rollback_impl line:1129 [INFO]: ROLLBACK
[2024-10-06 11:21:46,954.954] _internal.py -> _log line:96 [INFO]: 127.0.0.1 - - [06/Oct/2024 11:21:46] "POST /datasets/f3f28f75-8e60-4eba-b6df-4d1b390bbd89/documents HTTP/1.1" 200 -
[2024-10-06 11:23:34,834.834] base.py -> _begin_impl line:1103 [INFO]: BEGIN (implicit)
[2024-10-06 11:23:34,834.834] base.py -> _exec_single_context line:1903 [INFO]: SELECT dataset.id AS dataset_id, dataset.account_id AS dataset_account_id, dataset.name AS dataset_name, dataset.icon AS dataset_icon, dataset.description AS dataset_description, dataset.updated_at AS dataset_updated_at, dataset.created_at AS dataset_created_at 
FROM dataset 
WHERE dataset.id = %(pk_1)s::UUID
[2024-10-06 11:23:34,834.834] base.py -> _exec_single_context line:1908 [INFO]: [cached since 205.3s ago] {'pk_1': UUID('f3f28f75-8e60-4eba-b6df-4d1b390bbd89')}
[2024-10-06 11:23:34,835.835] base.py -> _exec_single_context line:1903 [INFO]: SELECT upload_file.id AS upload_file_id, upload_file.account_id AS upload_file_account_id, upload_file.name AS upload_file_name, upload_file.key AS upload_file_key, upload_file.size AS upload_file_size, upload_file.extension AS upload_file_extension, upload_file.mime_type AS upload_file_mime_type, upload_file.hash AS upload_file_hash, upload_file.updated_at AS upload_file_updated_at, upload_file.created_at AS upload_file_created_at 
FROM upload_file 
WHERE upload_file.account_id = %(account_id_1)s::UUID AND upload_file.id IN (%(id_1_1)s::UUID)
[2024-10-06 11:23:34,835.835] base.py -> _exec_single_context line:1908 [INFO]: [cached since 205.3s ago] {'account_id_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f', 'id_1_1': '7b82638b-83ac-4590-b413-5dce0a799e7e'}
[2024-10-06 11:23:34,836.836] base.py -> _exec_single_context line:1903 [INFO]: INSERT INTO process_rule (account_id, dataset_id, mode, rule) VALUES (%(account_id)s::UUID, %(dataset_id)s::UUID, %(mode)s, %(rule)s) RETURNING process_rule.id, process_rule.updated_at, process_rule.created_at
[2024-10-06 11:23:34,836.836] base.py -> _exec_single_context line:1908 [INFO]: [cached since 205.3s ago] {'account_id': '46db30d1-3199-4e79-a0cd-abf12fa6858f', 'dataset_id': UUID('f3f28f75-8e60-4eba-b6df-4d1b390bbd89'), 'mode': 'automatic', 'rule': '{"pre_process_rules": [{"id": "remove_extra_space", "enabled": true}, {"id": "remove_url_and_email", "enabled": true}], "segment": {"separators": ["\ ... (15 characters truncated) ... "\\u3002|\\uff01|\\uff1f", "\\\\.\\\\s|\\\\!\\\\s|\\\\?\\\\s", "\\uff1b|;\\\\s", "\\uff0c|,\\\\s", " ", ""], "chunk_size": 500, "chunk_overlap": 50}}'}
[2024-10-06 11:23:34,837.837] base.py -> _commit_impl line:1146 [INFO]: COMMIT
[2024-10-06 11:23:34,840.840] base.py -> _begin_impl line:1103 [INFO]: BEGIN (implicit)
[2024-10-06 11:23:34,840.840] base.py -> _exec_single_context line:1903 [INFO]: SELECT document.id AS document_id, document.account_id AS document_account_id, document.dataset_id AS document_dataset_id, document.upload_file_id AS document_upload_file_id, document.process_rule_id AS document_process_rule_id, document.batch AS document_batch, document.name AS document_name, document.position AS document_position, document.character_count AS document_character_count, document.token_count AS document_token_count, document.processing_started_at AS document_processing_started_at, document.parsing_completed_at AS document_parsing_completed_at, document.splitting_completed_at AS document_splitting_completed_at, document.indexing_completed_at AS document_indexing_completed_at, document.completed_at AS document_completed_at, document.stopped_at AS document_stopped_at, document.error AS document_error, document.enabled AS document_enabled, document.disabled_at AS document_disabled_at, document.status AS document_status, document.updated_at AS document_updated_at, document.created_at AS document_created_at 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID ORDER BY document.position DESC 
 LIMIT %(param_1)s
[2024-10-06 11:23:34,840.840] base.py -> _exec_single_context line:1908 [INFO]: [cached since 205.3s ago] {'dataset_id_1': UUID('f3f28f75-8e60-4eba-b6df-4d1b390bbd89'), 'param_1': 1}
[2024-10-06 11:23:34,841.841] base.py -> _exec_single_context line:1903 [INFO]: SELECT upload_file.id AS upload_file_id, upload_file.account_id AS upload_file_account_id, upload_file.name AS upload_file_name, upload_file.key AS upload_file_key, upload_file.size AS upload_file_size, upload_file.extension AS upload_file_extension, upload_file.mime_type AS upload_file_mime_type, upload_file.hash AS upload_file_hash, upload_file.updated_at AS upload_file_updated_at, upload_file.created_at AS upload_file_created_at 
FROM upload_file 
WHERE upload_file.id = %(pk_1)s::UUID
[2024-10-06 11:23:34,841.841] base.py -> _exec_single_context line:1908 [INFO]: [cached since 217.8s ago] {'pk_1': UUID('7b82638b-83ac-4590-b413-5dce0a799e7e')}
[2024-10-06 11:23:34,841.841] base.py -> _exec_single_context line:1903 [INFO]: SELECT process_rule.id AS process_rule_id, process_rule.account_id AS process_rule_account_id, process_rule.dataset_id AS process_rule_dataset_id, process_rule.mode AS process_rule_mode, process_rule.rule AS process_rule_rule, process_rule.updated_at AS process_rule_updated_at, process_rule.created_at AS process_rule_created_at 
FROM process_rule 
WHERE process_rule.id = %(pk_1)s::UUID
[2024-10-06 11:23:34,841.841] base.py -> _exec_single_context line:1908 [INFO]: [cached since 205.3s ago] {'pk_1': UUID('790a93b0-b439-4458-a3be-f75e12922029')}
[2024-10-06 11:23:34,842.842] base.py -> _exec_single_context line:1903 [INFO]: INSERT INTO document (account_id, dataset_id, upload_file_id, process_rule_id, batch, name, position, processing_started_at, parsing_completed_at, splitting_completed_at, indexing_completed_at, completed_at, stopped_at, disabled_at) VALUES (%(account_id)s::UUID, %(dataset_id)s::UUID, %(upload_file_id)s::UUID, %(process_rule_id)s::UUID, %(batch)s, %(name)s, %(position)s, %(processing_started_at)s, %(parsing_completed_at)s, %(splitting_completed_at)s, %(indexing_completed_at)s, %(completed_at)s, %(stopped_at)s, %(disabled_at)s) RETURNING document.id, document.character_count, document.token_count, document.error, document.enabled, document.status, document.updated_at, document.created_at
[2024-10-06 11:23:34,842.842] base.py -> _exec_single_context line:1908 [INFO]: [cached since 205.3s ago] {'account_id': '46db30d1-3199-4e79-a0cd-abf12fa6858f', 'dataset_id': UUID('f3f28f75-8e60-4eba-b6df-4d1b390bbd89'), 'upload_file_id': UUID('7b82638b-83ac-4590-b413-5dce0a799e7e'), 'process_rule_id': UUID('790a93b0-b439-4458-a3be-f75e12922029'), 'batch': '20241006112334650682', 'name': '项目API文档-完整.md', 'position': 3, 'processing_started_at': None, 'parsing_completed_at': None, 'splitting_completed_at': None, 'indexing_completed_at': None, 'completed_at': None, 'stopped_at': None, 'disabled_at': None}
[2024-10-06 11:23:34,846.846] base.py -> _commit_impl line:1146 [INFO]: COMMIT
[2024-10-06 11:23:34,848.848] base.py -> _begin_impl line:1103 [INFO]: BEGIN (implicit)
[2024-10-06 11:23:34,848.848] base.py -> _exec_single_context line:1903 [INFO]: SELECT document.id AS document_id, document.account_id AS document_account_id, document.dataset_id AS document_dataset_id, document.upload_file_id AS document_upload_file_id, document.process_rule_id AS document_process_rule_id, document.batch AS document_batch, document.name AS document_name, document.position AS document_position, document.character_count AS document_character_count, document.token_count AS document_token_count, document.processing_started_at AS document_processing_started_at, document.parsing_completed_at AS document_parsing_completed_at, document.splitting_completed_at AS document_splitting_completed_at, document.indexing_completed_at AS document_indexing_completed_at, document.completed_at AS document_completed_at, document.stopped_at AS document_stopped_at, document.error AS document_error, document.enabled AS document_enabled, document.disabled_at AS document_disabled_at, document.status AS document_status, document.updated_at AS document_updated_at, document.created_at AS document_created_at 
FROM document 
WHERE document.id = %(pk_1)s::UUID
[2024-10-06 11:23:34,849.849] base.py -> _exec_single_context line:1908 [INFO]: [cached since 205.3s ago] {'pk_1': UUID('2324f7d2-5eb9-492c-924c-f4d0a0bdbc87')}
[2024-10-06 11:23:34,866.866] base.py -> _rollback_impl line:1129 [INFO]: ROLLBACK
[2024-10-06 11:23:34,867.867] _internal.py -> _log line:96 [INFO]: 127.0.0.1 - - [06/Oct/2024 11:23:34] "POST /datasets/f3f28f75-8e60-4eba-b6df-4d1b390bbd89/documents HTTP/1.1" 200 -
[2024-10-06 11:25:24,285.285] base.py -> _begin_impl line:1103 [INFO]: BEGIN (implicit)
[2024-10-06 11:25:24,286.286] base.py -> _exec_single_context line:1903 [INFO]: SELECT dataset.id AS dataset_id, dataset.account_id AS dataset_account_id, dataset.name AS dataset_name, dataset.icon AS dataset_icon, dataset.description AS dataset_description, dataset.updated_at AS dataset_updated_at, dataset.created_at AS dataset_created_at 
FROM dataset 
WHERE dataset.id = %(pk_1)s::UUID
[2024-10-06 11:25:24,286.286] base.py -> _exec_single_context line:1908 [INFO]: [cached since 314.7s ago] {'pk_1': UUID('f3f28f75-8e60-4eba-b6df-4d1b390bbd89')}
[2024-10-06 11:25:24,287.287] base.py -> _exec_single_context line:1903 [INFO]: SELECT upload_file.id AS upload_file_id, upload_file.account_id AS upload_file_account_id, upload_file.name AS upload_file_name, upload_file.key AS upload_file_key, upload_file.size AS upload_file_size, upload_file.extension AS upload_file_extension, upload_file.mime_type AS upload_file_mime_type, upload_file.hash AS upload_file_hash, upload_file.updated_at AS upload_file_updated_at, upload_file.created_at AS upload_file_created_at 
FROM upload_file 
WHERE upload_file.account_id = %(account_id_1)s::UUID AND upload_file.id IN (%(id_1_1)s::UUID)
[2024-10-06 11:25:24,287.287] base.py -> _exec_single_context line:1908 [INFO]: [cached since 314.7s ago] {'account_id_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f', 'id_1_1': '7b82638b-83ac-4590-b413-5dce0a799e7e'}
[2024-10-06 11:25:24,288.288] base.py -> _exec_single_context line:1903 [INFO]: INSERT INTO process_rule (account_id, dataset_id, mode, rule) VALUES (%(account_id)s::UUID, %(dataset_id)s::UUID, %(mode)s, %(rule)s) RETURNING process_rule.id, process_rule.updated_at, process_rule.created_at
[2024-10-06 11:25:24,288.288] base.py -> _exec_single_context line:1908 [INFO]: [cached since 314.7s ago] {'account_id': '46db30d1-3199-4e79-a0cd-abf12fa6858f', 'dataset_id': UUID('f3f28f75-8e60-4eba-b6df-4d1b390bbd89'), 'mode': 'automatic', 'rule': '{"pre_process_rules": [{"id": "remove_extra_space", "enabled": true}, {"id": "remove_url_and_email", "enabled": true}], "segment": {"separators": ["\ ... (15 characters truncated) ... "\\u3002|\\uff01|\\uff1f", "\\\\.\\\\s|\\\\!\\\\s|\\\\?\\\\s", "\\uff1b|;\\\\s", "\\uff0c|,\\\\s", " ", ""], "chunk_size": 500, "chunk_overlap": 50}}'}
[2024-10-06 11:25:24,289.289] base.py -> _commit_impl line:1146 [INFO]: COMMIT
[2024-10-06 11:25:24,320.320] base.py -> _begin_impl line:1103 [INFO]: BEGIN (implicit)
[2024-10-06 11:25:24,321.321] base.py -> _exec_single_context line:1903 [INFO]: SELECT document.id AS document_id, document.account_id AS document_account_id, document.dataset_id AS document_dataset_id, document.upload_file_id AS document_upload_file_id, document.process_rule_id AS document_process_rule_id, document.batch AS document_batch, document.name AS document_name, document.position AS document_position, document.character_count AS document_character_count, document.token_count AS document_token_count, document.processing_started_at AS document_processing_started_at, document.parsing_completed_at AS document_parsing_completed_at, document.splitting_completed_at AS document_splitting_completed_at, document.indexing_completed_at AS document_indexing_completed_at, document.completed_at AS document_completed_at, document.stopped_at AS document_stopped_at, document.error AS document_error, document.enabled AS document_enabled, document.disabled_at AS document_disabled_at, document.status AS document_status, document.updated_at AS document_updated_at, document.created_at AS document_created_at 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID ORDER BY document.position DESC 
 LIMIT %(param_1)s
[2024-10-06 11:25:24,321.321] base.py -> _exec_single_context line:1908 [INFO]: [cached since 314.8s ago] {'dataset_id_1': UUID('f3f28f75-8e60-4eba-b6df-4d1b390bbd89'), 'param_1': 1}
[2024-10-06 11:25:24,322.322] base.py -> _exec_single_context line:1903 [INFO]: SELECT upload_file.id AS upload_file_id, upload_file.account_id AS upload_file_account_id, upload_file.name AS upload_file_name, upload_file.key AS upload_file_key, upload_file.size AS upload_file_size, upload_file.extension AS upload_file_extension, upload_file.mime_type AS upload_file_mime_type, upload_file.hash AS upload_file_hash, upload_file.updated_at AS upload_file_updated_at, upload_file.created_at AS upload_file_created_at 
FROM upload_file 
WHERE upload_file.id = %(pk_1)s::UUID
[2024-10-06 11:25:24,322.322] base.py -> _exec_single_context line:1908 [INFO]: [cached since 327.3s ago] {'pk_1': UUID('7b82638b-83ac-4590-b413-5dce0a799e7e')}
[2024-10-06 11:25:24,323.323] base.py -> _exec_single_context line:1903 [INFO]: SELECT process_rule.id AS process_rule_id, process_rule.account_id AS process_rule_account_id, process_rule.dataset_id AS process_rule_dataset_id, process_rule.mode AS process_rule_mode, process_rule.rule AS process_rule_rule, process_rule.updated_at AS process_rule_updated_at, process_rule.created_at AS process_rule_created_at 
FROM process_rule 
WHERE process_rule.id = %(pk_1)s::UUID
[2024-10-06 11:25:24,323.323] base.py -> _exec_single_context line:1908 [INFO]: [cached since 314.8s ago] {'pk_1': UUID('c8503308-344a-4979-a6fb-b8ba3f600600')}
[2024-10-06 11:25:24,323.323] base.py -> _exec_single_context line:1903 [INFO]: INSERT INTO document (account_id, dataset_id, upload_file_id, process_rule_id, batch, name, position, processing_started_at, parsing_completed_at, splitting_completed_at, indexing_completed_at, completed_at, stopped_at, disabled_at) VALUES (%(account_id)s::UUID, %(dataset_id)s::UUID, %(upload_file_id)s::UUID, %(process_rule_id)s::UUID, %(batch)s, %(name)s, %(position)s, %(processing_started_at)s, %(parsing_completed_at)s, %(splitting_completed_at)s, %(indexing_completed_at)s, %(completed_at)s, %(stopped_at)s, %(disabled_at)s) RETURNING document.id, document.character_count, document.token_count, document.error, document.enabled, document.status, document.updated_at, document.created_at
[2024-10-06 11:25:24,323.323] base.py -> _exec_single_context line:1908 [INFO]: [cached since 314.8s ago] {'account_id': '46db30d1-3199-4e79-a0cd-abf12fa6858f', 'dataset_id': UUID('f3f28f75-8e60-4eba-b6df-4d1b390bbd89'), 'upload_file_id': UUID('7b82638b-83ac-4590-b413-5dce0a799e7e'), 'process_rule_id': UUID('c8503308-344a-4979-a6fb-b8ba3f600600'), 'batch': '20241006112524893587', 'name': '项目API文档-完整.md', 'position': 4, 'processing_started_at': None, 'parsing_completed_at': None, 'splitting_completed_at': None, 'indexing_completed_at': None, 'completed_at': None, 'stopped_at': None, 'disabled_at': None}
[2024-10-06 11:25:24,324.324] base.py -> _commit_impl line:1146 [INFO]: COMMIT
[2024-10-06 11:25:24,344.344] base.py -> _begin_impl line:1103 [INFO]: BEGIN (implicit)
[2024-10-06 11:25:24,344.344] base.py -> _exec_single_context line:1903 [INFO]: SELECT document.id AS document_id, document.account_id AS document_account_id, document.dataset_id AS document_dataset_id, document.upload_file_id AS document_upload_file_id, document.process_rule_id AS document_process_rule_id, document.batch AS document_batch, document.name AS document_name, document.position AS document_position, document.character_count AS document_character_count, document.token_count AS document_token_count, document.processing_started_at AS document_processing_started_at, document.parsing_completed_at AS document_parsing_completed_at, document.splitting_completed_at AS document_splitting_completed_at, document.indexing_completed_at AS document_indexing_completed_at, document.completed_at AS document_completed_at, document.stopped_at AS document_stopped_at, document.error AS document_error, document.enabled AS document_enabled, document.disabled_at AS document_disabled_at, document.status AS document_status, document.updated_at AS document_updated_at, document.created_at AS document_created_at 
FROM document 
WHERE document.id = %(pk_1)s::UUID
[2024-10-06 11:25:24,345.345] base.py -> _exec_single_context line:1908 [INFO]: [cached since 314.8s ago] {'pk_1': UUID('fd208ae9-130c-4f6a-857a-6264f788efd6')}
[2024-10-06 11:25:24,362.362] base.py -> _rollback_impl line:1129 [INFO]: ROLLBACK
[2024-10-06 11:25:24,362.362] _internal.py -> _log line:96 [INFO]: 127.0.0.1 - - [06/Oct/2024 11:25:24] "POST /datasets/f3f28f75-8e60-4eba-b6df-4d1b390bbd89/documents HTTP/1.1" 200 -
[2024-10-06 11:27:16,332.332] _internal.py -> _log line:96 [INFO]:  * Detected change in 'D:\\Code\\llmops\\llmops-api\\internal\\handler\\app_handler.py', reloading
[2024-10-06 11:27:16,964.964] _internal.py -> _log line:96 [INFO]:  * Restarting with stat
[2024-10-06 11:27:33,847.847] _internal.py -> _log line:96 [WARNING]:  * Debugger is active!
[2024-10-06 11:27:33,852.852] _internal.py -> _log line:96 [INFO]:  * Debugger PIN: 102-324-223
[2024-10-06 11:27:34,615.615] base.py -> _exec_single_context line:1903 [INFO]: select pg_catalog.version()
[2024-10-06 11:27:34,616.616] base.py -> _exec_single_context line:1908 [INFO]: [raw sql] {}
[2024-10-06 11:27:34,616.616] base.py -> _exec_single_context line:1903 [INFO]: select current_schema()
[2024-10-06 11:27:34,617.617] base.py -> _exec_single_context line:1908 [INFO]: [raw sql] {}
[2024-10-06 11:27:34,617.617] base.py -> _exec_single_context line:1903 [INFO]: show standard_conforming_strings
[2024-10-06 11:27:34,618.618] base.py -> _exec_single_context line:1908 [INFO]: [raw sql] {}
[2024-10-06 11:27:34,618.618] base.py -> _begin_impl line:1103 [INFO]: BEGIN (implicit)
[2024-10-06 11:27:34,621.621] base.py -> _exec_single_context line:1903 [INFO]: SELECT api_tool.id AS api_tool_id, api_tool.account_id AS api_tool_account_id, api_tool.provider_id AS api_tool_provider_id, api_tool.name AS api_tool_name, api_tool.description AS api_tool_description, api_tool.url AS api_tool_url, api_tool.method AS api_tool_method, api_tool.parameters AS api_tool_parameters, api_tool.updated_at AS api_tool_updated_at, api_tool.created_at AS api_tool_created_at 
FROM api_tool 
WHERE api_tool.provider_id = %(provider_id_1)s::UUID AND api_tool.name = %(name_1)s
[2024-10-06 11:27:34,621.621] base.py -> _exec_single_context line:1908 [INFO]: [generated in 0.00025s] {'provider_id_1': 'd72bb9d7-8794-4caf-bd60-1f992c537065', 'name_1': 'YoudaoSuggest'}
[2024-10-06 11:27:34,625.625] base.py -> _exec_single_context line:1903 [INFO]: SELECT api_tool_provider.id AS api_tool_provider_id, api_tool_provider.account_id AS api_tool_provider_account_id, api_tool_provider.name AS api_tool_provider_name, api_tool_provider.icon AS api_tool_provider_icon, api_tool_provider.description AS api_tool_provider_description, api_tool_provider.openapi_schema AS api_tool_provider_openapi_schema, api_tool_provider.headers AS api_tool_provider_headers, api_tool_provider.updated_at AS api_tool_provider_updated_at, api_tool_provider.created_at AS api_tool_provider_created_at 
FROM api_tool_provider 
WHERE api_tool_provider.id = %(pk_1)s::UUID
[2024-10-06 11:27:34,625.625] base.py -> _exec_single_context line:1908 [INFO]: [generated in 0.00029s] {'pk_1': UUID('d72bb9d7-8794-4caf-bd60-1f992c537065')}
[2024-10-06 11:27:34,740.740] base.py -> _rollback_impl line:1129 [INFO]: ROLLBACK
[2024-10-06 11:27:34,741.741] _internal.py -> _log line:96 [INFO]: 127.0.0.1 - - [06/Oct/2024 11:27:34] "GET /ping HTTP/1.1" 200 -
[2024-10-06 11:27:37,653.653] _internal.py -> _log line:96 [INFO]:  * Detected change in 'D:\\Code\\llmops\\llmops-api\\internal\\handler\\app_handler.py', reloading
[2024-10-06 11:27:38,311.311] _internal.py -> _log line:96 [INFO]:  * Restarting with stat
[2024-10-06 11:28:11,786.786] _internal.py -> _log line:96 [INFO]: [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5000
[2024-10-06 11:28:11,786.786] _internal.py -> _log line:96 [INFO]: [33mPress CTRL+C to quit[0m
[2024-10-06 11:28:11,787.787] _internal.py -> _log line:96 [INFO]:  * Restarting with stat
[2024-10-06 11:28:26,830.830] _internal.py -> _log line:96 [WARNING]:  * Debugger is active!
[2024-10-06 11:28:26,835.835] _internal.py -> _log line:96 [INFO]:  * Debugger PIN: 102-324-223
[2024-10-06 11:28:27,488.488] base.py -> _exec_single_context line:1903 [INFO]: select pg_catalog.version()
[2024-10-06 11:28:27,488.488] base.py -> _exec_single_context line:1908 [INFO]: [raw sql] {}
[2024-10-06 11:28:27,489.489] base.py -> _exec_single_context line:1903 [INFO]: select current_schema()
[2024-10-06 11:28:27,489.489] base.py -> _exec_single_context line:1908 [INFO]: [raw sql] {}
[2024-10-06 11:28:27,492.492] base.py -> _exec_single_context line:1903 [INFO]: show standard_conforming_strings
[2024-10-06 11:28:27,492.492] base.py -> _exec_single_context line:1908 [INFO]: [raw sql] {}
[2024-10-06 11:28:27,502.502] base.py -> _begin_impl line:1103 [INFO]: BEGIN (implicit)
[2024-10-06 11:28:27,504.504] base.py -> _exec_single_context line:1903 [INFO]: SELECT dataset.id AS dataset_id, dataset.account_id AS dataset_account_id, dataset.name AS dataset_name, dataset.icon AS dataset_icon, dataset.description AS dataset_description, dataset.updated_at AS dataset_updated_at, dataset.created_at AS dataset_created_at 
FROM dataset 
WHERE dataset.id = %(pk_1)s::UUID
[2024-10-06 11:28:27,504.504] base.py -> _exec_single_context line:1908 [INFO]: [generated in 0.00025s] {'pk_1': UUID('f3f28f75-8e60-4eba-b6df-4d1b390bbd89')}
[2024-10-06 11:28:27,508.508] base.py -> _exec_single_context line:1903 [INFO]: SELECT upload_file.id AS upload_file_id, upload_file.account_id AS upload_file_account_id, upload_file.name AS upload_file_name, upload_file.key AS upload_file_key, upload_file.size AS upload_file_size, upload_file.extension AS upload_file_extension, upload_file.mime_type AS upload_file_mime_type, upload_file.hash AS upload_file_hash, upload_file.updated_at AS upload_file_updated_at, upload_file.created_at AS upload_file_created_at 
FROM upload_file 
WHERE upload_file.account_id = %(account_id_1)s::UUID AND upload_file.id IN (%(id_1_1)s::UUID)
[2024-10-06 11:28:27,508.508] base.py -> _exec_single_context line:1908 [INFO]: [generated in 0.00030s] {'account_id_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f', 'id_1_1': '7b82638b-83ac-4590-b413-5dce0a799e7e'}
[2024-10-06 11:28:27,510.510] base.py -> _exec_single_context line:1903 [INFO]: INSERT INTO process_rule (account_id, dataset_id, mode, rule) VALUES (%(account_id)s::UUID, %(dataset_id)s::UUID, %(mode)s, %(rule)s) RETURNING process_rule.id, process_rule.updated_at, process_rule.created_at
[2024-10-06 11:28:27,510.510] base.py -> _exec_single_context line:1908 [INFO]: [generated in 0.00026s] {'account_id': '46db30d1-3199-4e79-a0cd-abf12fa6858f', 'dataset_id': UUID('f3f28f75-8e60-4eba-b6df-4d1b390bbd89'), 'mode': 'automatic', 'rule': '{"pre_process_rules": [{"id": "remove_extra_space", "enabled": true}, {"id": "remove_url_and_email", "enabled": true}], "segment": {"separators": ["\ ... (15 characters truncated) ... "\\u3002|\\uff01|\\uff1f", "\\\\.\\\\s|\\\\!\\\\s|\\\\?\\\\s", "\\uff1b|;\\\\s", "\\uff0c|,\\\\s", " ", ""], "chunk_size": 500, "chunk_overlap": 50}}'}
[2024-10-06 11:28:27,512.512] base.py -> _commit_impl line:1146 [INFO]: COMMIT
[2024-10-06 11:28:27,515.515] base.py -> _begin_impl line:1103 [INFO]: BEGIN (implicit)
[2024-10-06 11:28:27,519.519] base.py -> _exec_single_context line:1903 [INFO]: SELECT document.id AS document_id, document.account_id AS document_account_id, document.dataset_id AS document_dataset_id, document.upload_file_id AS document_upload_file_id, document.process_rule_id AS document_process_rule_id, document.batch AS document_batch, document.name AS document_name, document.position AS document_position, document.character_count AS document_character_count, document.token_count AS document_token_count, document.processing_started_at AS document_processing_started_at, document.parsing_completed_at AS document_parsing_completed_at, document.splitting_completed_at AS document_splitting_completed_at, document.indexing_completed_at AS document_indexing_completed_at, document.completed_at AS document_completed_at, document.stopped_at AS document_stopped_at, document.error AS document_error, document.enabled AS document_enabled, document.disabled_at AS document_disabled_at, document.status AS document_status, document.updated_at AS document_updated_at, document.created_at AS document_created_at 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID ORDER BY document.position DESC 
 LIMIT %(param_1)s
[2024-10-06 11:28:27,519.519] base.py -> _exec_single_context line:1908 [INFO]: [generated in 0.00026s] {'dataset_id_1': UUID('f3f28f75-8e60-4eba-b6df-4d1b390bbd89'), 'param_1': 1}
[2024-10-06 11:28:27,520.520] base.py -> _exec_single_context line:1903 [INFO]: SELECT upload_file.id AS upload_file_id, upload_file.account_id AS upload_file_account_id, upload_file.name AS upload_file_name, upload_file.key AS upload_file_key, upload_file.size AS upload_file_size, upload_file.extension AS upload_file_extension, upload_file.mime_type AS upload_file_mime_type, upload_file.hash AS upload_file_hash, upload_file.updated_at AS upload_file_updated_at, upload_file.created_at AS upload_file_created_at 
FROM upload_file 
WHERE upload_file.id = %(pk_1)s::UUID
[2024-10-06 11:28:27,520.520] base.py -> _exec_single_context line:1908 [INFO]: [generated in 0.00021s] {'pk_1': UUID('7b82638b-83ac-4590-b413-5dce0a799e7e')}
[2024-10-06 11:28:27,522.522] base.py -> _exec_single_context line:1903 [INFO]: SELECT process_rule.id AS process_rule_id, process_rule.account_id AS process_rule_account_id, process_rule.dataset_id AS process_rule_dataset_id, process_rule.mode AS process_rule_mode, process_rule.rule AS process_rule_rule, process_rule.updated_at AS process_rule_updated_at, process_rule.created_at AS process_rule_created_at 
FROM process_rule 
WHERE process_rule.id = %(pk_1)s::UUID
[2024-10-06 11:28:27,522.522] base.py -> _exec_single_context line:1908 [INFO]: [generated in 0.00022s] {'pk_1': UUID('3952aa6f-35a6-49a6-be10-ac33104ab051')}
[2024-10-06 11:28:27,524.524] base.py -> _exec_single_context line:1903 [INFO]: INSERT INTO document (account_id, dataset_id, upload_file_id, process_rule_id, batch, name, position, processing_started_at, parsing_completed_at, splitting_completed_at, indexing_completed_at, completed_at, stopped_at, disabled_at) VALUES (%(account_id)s::UUID, %(dataset_id)s::UUID, %(upload_file_id)s::UUID, %(process_rule_id)s::UUID, %(batch)s, %(name)s, %(position)s, %(processing_started_at)s, %(parsing_completed_at)s, %(splitting_completed_at)s, %(indexing_completed_at)s, %(completed_at)s, %(stopped_at)s, %(disabled_at)s) RETURNING document.id, document.character_count, document.token_count, document.error, document.enabled, document.status, document.updated_at, document.created_at
[2024-10-06 11:28:27,524.524] base.py -> _exec_single_context line:1908 [INFO]: [generated in 0.00026s] {'account_id': '46db30d1-3199-4e79-a0cd-abf12fa6858f', 'dataset_id': UUID('f3f28f75-8e60-4eba-b6df-4d1b390bbd89'), 'upload_file_id': UUID('7b82638b-83ac-4590-b413-5dce0a799e7e'), 'process_rule_id': UUID('3952aa6f-35a6-49a6-be10-ac33104ab051'), 'batch': '20241006112827345725', 'name': '项目API文档-完整.md', 'position': 5, 'processing_started_at': None, 'parsing_completed_at': None, 'splitting_completed_at': None, 'indexing_completed_at': None, 'completed_at': None, 'stopped_at': None, 'disabled_at': None}
[2024-10-06 11:28:27,526.526] base.py -> _commit_impl line:1146 [INFO]: COMMIT
[2024-10-06 11:28:27,548.548] base.py -> _begin_impl line:1103 [INFO]: BEGIN (implicit)
[2024-10-06 11:28:27,549.549] base.py -> _exec_single_context line:1903 [INFO]: SELECT document.id AS document_id, document.account_id AS document_account_id, document.dataset_id AS document_dataset_id, document.upload_file_id AS document_upload_file_id, document.process_rule_id AS document_process_rule_id, document.batch AS document_batch, document.name AS document_name, document.position AS document_position, document.character_count AS document_character_count, document.token_count AS document_token_count, document.processing_started_at AS document_processing_started_at, document.parsing_completed_at AS document_parsing_completed_at, document.splitting_completed_at AS document_splitting_completed_at, document.indexing_completed_at AS document_indexing_completed_at, document.completed_at AS document_completed_at, document.stopped_at AS document_stopped_at, document.error AS document_error, document.enabled AS document_enabled, document.disabled_at AS document_disabled_at, document.status AS document_status, document.updated_at AS document_updated_at, document.created_at AS document_created_at 
FROM document 
WHERE document.id = %(pk_1)s::UUID
[2024-10-06 11:28:27,549.549] base.py -> _exec_single_context line:1908 [INFO]: [generated in 0.00024s] {'pk_1': UUID('b4a1991c-353e-478e-9e36-b770eabc4a46')}
[2024-10-06 11:28:27,626.626] base.py -> _rollback_impl line:1129 [INFO]: ROLLBACK
[2024-10-06 11:28:27,626.626] _internal.py -> _log line:96 [INFO]: 127.0.0.1 - - [06/Oct/2024 11:28:27] "POST /datasets/f3f28f75-8e60-4eba-b6df-4d1b390bbd89/documents HTTP/1.1" 200 -
[2024-10-06 11:30:12,105.105] _internal.py -> _log line:96 [INFO]:  * Detected change in 'D:\\Code\\llmops\\llmops-api\\internal\\service\\indexing_service.py', reloading
[2024-10-06 11:30:12,705.705] _internal.py -> _log line:96 [INFO]:  * Restarting with stat
[2024-10-06 11:30:27,393.393] _internal.py -> _log line:96 [WARNING]:  * Debugger is active!
[2024-10-06 11:30:27,395.395] _internal.py -> _log line:96 [INFO]:  * Debugger PIN: 102-324-223
[2024-10-06 11:30:36,816.816] base.py -> _exec_single_context line:1903 [INFO]: select pg_catalog.version()
[2024-10-06 11:30:36,816.816] base.py -> _exec_single_context line:1908 [INFO]: [raw sql] {}
[2024-10-06 11:30:36,817.817] base.py -> _exec_single_context line:1903 [INFO]: select current_schema()
[2024-10-06 11:30:36,817.817] base.py -> _exec_single_context line:1908 [INFO]: [raw sql] {}
[2024-10-06 11:30:36,817.817] base.py -> _exec_single_context line:1903 [INFO]: show standard_conforming_strings
[2024-10-06 11:30:36,817.817] base.py -> _exec_single_context line:1908 [INFO]: [raw sql] {}
[2024-10-06 11:30:36,818.818] base.py -> _begin_impl line:1103 [INFO]: BEGIN (implicit)
[2024-10-06 11:30:36,819.819] base.py -> _exec_single_context line:1903 [INFO]: SELECT dataset.id AS dataset_id, dataset.account_id AS dataset_account_id, dataset.name AS dataset_name, dataset.icon AS dataset_icon, dataset.description AS dataset_description, dataset.updated_at AS dataset_updated_at, dataset.created_at AS dataset_created_at 
FROM dataset 
WHERE dataset.id = %(pk_1)s::UUID
[2024-10-06 11:30:36,819.819] base.py -> _exec_single_context line:1908 [INFO]: [generated in 0.00015s] {'pk_1': UUID('f3f28f75-8e60-4eba-b6df-4d1b390bbd89')}
[2024-10-06 11:30:36,822.822] base.py -> _exec_single_context line:1903 [INFO]: SELECT upload_file.id AS upload_file_id, upload_file.account_id AS upload_file_account_id, upload_file.name AS upload_file_name, upload_file.key AS upload_file_key, upload_file.size AS upload_file_size, upload_file.extension AS upload_file_extension, upload_file.mime_type AS upload_file_mime_type, upload_file.hash AS upload_file_hash, upload_file.updated_at AS upload_file_updated_at, upload_file.created_at AS upload_file_created_at 
FROM upload_file 
WHERE upload_file.account_id = %(account_id_1)s::UUID AND upload_file.id IN (%(id_1_1)s::UUID)
[2024-10-06 11:30:36,822.822] base.py -> _exec_single_context line:1908 [INFO]: [generated in 0.00019s] {'account_id_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f', 'id_1_1': '7b82638b-83ac-4590-b413-5dce0a799e7e'}
[2024-10-06 11:30:36,824.824] base.py -> _exec_single_context line:1903 [INFO]: INSERT INTO process_rule (account_id, dataset_id, mode, rule) VALUES (%(account_id)s::UUID, %(dataset_id)s::UUID, %(mode)s, %(rule)s) RETURNING process_rule.id, process_rule.updated_at, process_rule.created_at
[2024-10-06 11:30:36,824.824] base.py -> _exec_single_context line:1908 [INFO]: [generated in 0.00022s] {'account_id': '46db30d1-3199-4e79-a0cd-abf12fa6858f', 'dataset_id': UUID('f3f28f75-8e60-4eba-b6df-4d1b390bbd89'), 'mode': 'automatic', 'rule': '{"pre_process_rules": [{"id": "remove_extra_space", "enabled": true}, {"id": "remove_url_and_email", "enabled": true}], "segment": {"separators": ["\ ... (15 characters truncated) ... "\\u3002|\\uff01|\\uff1f", "\\\\.\\\\s|\\\\!\\\\s|\\\\?\\\\s", "\\uff1b|;\\\\s", "\\uff0c|,\\\\s", " ", ""], "chunk_size": 500, "chunk_overlap": 50}}'}
[2024-10-06 11:30:36,825.825] base.py -> _commit_impl line:1146 [INFO]: COMMIT
[2024-10-06 11:30:36,838.838] base.py -> _begin_impl line:1103 [INFO]: BEGIN (implicit)
[2024-10-06 11:30:36,840.840] base.py -> _exec_single_context line:1903 [INFO]: SELECT document.id AS document_id, document.account_id AS document_account_id, document.dataset_id AS document_dataset_id, document.upload_file_id AS document_upload_file_id, document.process_rule_id AS document_process_rule_id, document.batch AS document_batch, document.name AS document_name, document.position AS document_position, document.character_count AS document_character_count, document.token_count AS document_token_count, document.processing_started_at AS document_processing_started_at, document.parsing_completed_at AS document_parsing_completed_at, document.splitting_completed_at AS document_splitting_completed_at, document.indexing_completed_at AS document_indexing_completed_at, document.completed_at AS document_completed_at, document.stopped_at AS document_stopped_at, document.error AS document_error, document.enabled AS document_enabled, document.disabled_at AS document_disabled_at, document.status AS document_status, document.updated_at AS document_updated_at, document.created_at AS document_created_at 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID ORDER BY document.position DESC 
 LIMIT %(param_1)s
[2024-10-06 11:30:36,840.840] base.py -> _exec_single_context line:1908 [INFO]: [generated in 0.00019s] {'dataset_id_1': UUID('f3f28f75-8e60-4eba-b6df-4d1b390bbd89'), 'param_1': 1}
[2024-10-06 11:30:36,842.842] base.py -> _exec_single_context line:1903 [INFO]: SELECT upload_file.id AS upload_file_id, upload_file.account_id AS upload_file_account_id, upload_file.name AS upload_file_name, upload_file.key AS upload_file_key, upload_file.size AS upload_file_size, upload_file.extension AS upload_file_extension, upload_file.mime_type AS upload_file_mime_type, upload_file.hash AS upload_file_hash, upload_file.updated_at AS upload_file_updated_at, upload_file.created_at AS upload_file_created_at 
FROM upload_file 
WHERE upload_file.id = %(pk_1)s::UUID
[2024-10-06 11:30:36,842.842] base.py -> _exec_single_context line:1908 [INFO]: [generated in 0.00019s] {'pk_1': UUID('7b82638b-83ac-4590-b413-5dce0a799e7e')}
[2024-10-06 11:30:36,843.843] base.py -> _exec_single_context line:1903 [INFO]: SELECT process_rule.id AS process_rule_id, process_rule.account_id AS process_rule_account_id, process_rule.dataset_id AS process_rule_dataset_id, process_rule.mode AS process_rule_mode, process_rule.rule AS process_rule_rule, process_rule.updated_at AS process_rule_updated_at, process_rule.created_at AS process_rule_created_at 
FROM process_rule 
WHERE process_rule.id = %(pk_1)s::UUID
[2024-10-06 11:30:36,844.844] base.py -> _exec_single_context line:1908 [INFO]: [generated in 0.00015s] {'pk_1': UUID('f4234bc1-50ea-466c-8d23-5b81e1069aea')}
[2024-10-06 11:30:36,844.844] base.py -> _exec_single_context line:1903 [INFO]: INSERT INTO document (account_id, dataset_id, upload_file_id, process_rule_id, batch, name, position, processing_started_at, parsing_completed_at, splitting_completed_at, indexing_completed_at, completed_at, stopped_at, disabled_at) VALUES (%(account_id)s::UUID, %(dataset_id)s::UUID, %(upload_file_id)s::UUID, %(process_rule_id)s::UUID, %(batch)s, %(name)s, %(position)s, %(processing_started_at)s, %(parsing_completed_at)s, %(splitting_completed_at)s, %(indexing_completed_at)s, %(completed_at)s, %(stopped_at)s, %(disabled_at)s) RETURNING document.id, document.character_count, document.token_count, document.error, document.enabled, document.status, document.updated_at, document.created_at
[2024-10-06 11:30:36,844.844] base.py -> _exec_single_context line:1908 [INFO]: [generated in 0.00017s] {'account_id': '46db30d1-3199-4e79-a0cd-abf12fa6858f', 'dataset_id': UUID('f3f28f75-8e60-4eba-b6df-4d1b390bbd89'), 'upload_file_id': UUID('7b82638b-83ac-4590-b413-5dce0a799e7e'), 'process_rule_id': UUID('f4234bc1-50ea-466c-8d23-5b81e1069aea'), 'batch': '20241006113036568370', 'name': '项目API文档-完整.md', 'position': 6, 'processing_started_at': None, 'parsing_completed_at': None, 'splitting_completed_at': None, 'indexing_completed_at': None, 'completed_at': None, 'stopped_at': None, 'disabled_at': None}
[2024-10-06 11:30:36,845.845] base.py -> _commit_impl line:1146 [INFO]: COMMIT
[2024-10-06 11:30:36,849.849] base.py -> _begin_impl line:1103 [INFO]: BEGIN (implicit)
[2024-10-06 11:30:36,850.850] base.py -> _exec_single_context line:1903 [INFO]: SELECT document.id AS document_id, document.account_id AS document_account_id, document.dataset_id AS document_dataset_id, document.upload_file_id AS document_upload_file_id, document.process_rule_id AS document_process_rule_id, document.batch AS document_batch, document.name AS document_name, document.position AS document_position, document.character_count AS document_character_count, document.token_count AS document_token_count, document.processing_started_at AS document_processing_started_at, document.parsing_completed_at AS document_parsing_completed_at, document.splitting_completed_at AS document_splitting_completed_at, document.indexing_completed_at AS document_indexing_completed_at, document.completed_at AS document_completed_at, document.stopped_at AS document_stopped_at, document.error AS document_error, document.enabled AS document_enabled, document.disabled_at AS document_disabled_at, document.status AS document_status, document.updated_at AS document_updated_at, document.created_at AS document_created_at 
FROM document 
WHERE document.id = %(pk_1)s::UUID
[2024-10-06 11:30:36,850.850] base.py -> _exec_single_context line:1908 [INFO]: [generated in 0.00014s] {'pk_1': UUID('8c6f9f6e-ba3b-430e-94aa-bb597e6071f3')}
[2024-10-06 11:30:36,888.888] base.py -> _rollback_impl line:1129 [INFO]: ROLLBACK
[2024-10-06 11:30:36,888.888] _internal.py -> _log line:96 [INFO]: 127.0.0.1 - - [06/Oct/2024 11:30:36] "POST /datasets/f3f28f75-8e60-4eba-b6df-4d1b390bbd89/documents HTTP/1.1" 200 -
[2024-10-06 11:33:24,090.090] _internal.py -> _log line:96 [INFO]:  * Detected change in 'D:\\Code\\llmops\\llmops-api\\internal\\service\\indexing_service.py', reloading
[2024-10-06 11:33:24,750.750] _internal.py -> _log line:96 [INFO]:  * Restarting with stat
[2024-10-06 11:33:40,703.703] _internal.py -> _log line:96 [WARNING]:  * Debugger is active!
[2024-10-06 11:33:40,705.705] _internal.py -> _log line:96 [INFO]:  * Debugger PIN: 102-324-223
[2024-10-06 11:33:54,030.030] base.py -> _exec_single_context line:1903 [INFO]: select pg_catalog.version()
[2024-10-06 11:33:54,030.030] base.py -> _exec_single_context line:1908 [INFO]: [raw sql] {}
[2024-10-06 11:33:54,031.031] base.py -> _exec_single_context line:1903 [INFO]: select current_schema()
[2024-10-06 11:33:54,031.031] base.py -> _exec_single_context line:1908 [INFO]: [raw sql] {}
[2024-10-06 11:33:54,032.032] base.py -> _exec_single_context line:1903 [INFO]: show standard_conforming_strings
[2024-10-06 11:33:54,032.032] base.py -> _exec_single_context line:1908 [INFO]: [raw sql] {}
[2024-10-06 11:33:54,033.033] base.py -> _begin_impl line:1103 [INFO]: BEGIN (implicit)
[2024-10-06 11:33:54,034.034] base.py -> _exec_single_context line:1903 [INFO]: SELECT dataset.id AS dataset_id, dataset.account_id AS dataset_account_id, dataset.name AS dataset_name, dataset.icon AS dataset_icon, dataset.description AS dataset_description, dataset.updated_at AS dataset_updated_at, dataset.created_at AS dataset_created_at 
FROM dataset 
WHERE dataset.id = %(pk_1)s::UUID
[2024-10-06 11:33:54,034.034] base.py -> _exec_single_context line:1908 [INFO]: [generated in 0.00015s] {'pk_1': UUID('f3f28f75-8e60-4eba-b6df-4d1b390bbd89')}
[2024-10-06 11:33:54,036.036] base.py -> _exec_single_context line:1903 [INFO]: SELECT upload_file.id AS upload_file_id, upload_file.account_id AS upload_file_account_id, upload_file.name AS upload_file_name, upload_file.key AS upload_file_key, upload_file.size AS upload_file_size, upload_file.extension AS upload_file_extension, upload_file.mime_type AS upload_file_mime_type, upload_file.hash AS upload_file_hash, upload_file.updated_at AS upload_file_updated_at, upload_file.created_at AS upload_file_created_at 
FROM upload_file 
WHERE upload_file.account_id = %(account_id_1)s::UUID AND upload_file.id IN (%(id_1_1)s::UUID)
[2024-10-06 11:33:54,036.036] base.py -> _exec_single_context line:1908 [INFO]: [generated in 0.00018s] {'account_id_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f', 'id_1_1': '7b82638b-83ac-4590-b413-5dce0a799e7e'}
[2024-10-06 11:33:54,038.038] base.py -> _exec_single_context line:1903 [INFO]: INSERT INTO process_rule (account_id, dataset_id, mode, rule) VALUES (%(account_id)s::UUID, %(dataset_id)s::UUID, %(mode)s, %(rule)s) RETURNING process_rule.id, process_rule.updated_at, process_rule.created_at
[2024-10-06 11:33:54,039.039] base.py -> _exec_single_context line:1908 [INFO]: [generated in 0.00026s] {'account_id': '46db30d1-3199-4e79-a0cd-abf12fa6858f', 'dataset_id': UUID('f3f28f75-8e60-4eba-b6df-4d1b390bbd89'), 'mode': 'automatic', 'rule': '{"pre_process_rules": [{"id": "remove_extra_space", "enabled": true}, {"id": "remove_url_and_email", "enabled": true}], "segment": {"separators": ["\ ... (15 characters truncated) ... "\\u3002|\\uff01|\\uff1f", "\\\\.\\\\s|\\\\!\\\\s|\\\\?\\\\s", "\\uff1b|;\\\\s", "\\uff0c|,\\\\s", " ", ""], "chunk_size": 500, "chunk_overlap": 50}}'}
[2024-10-06 11:33:54,040.040] base.py -> _commit_impl line:1146 [INFO]: COMMIT
[2024-10-06 11:33:54,061.061] base.py -> _begin_impl line:1103 [INFO]: BEGIN (implicit)
[2024-10-06 11:33:54,063.063] base.py -> _exec_single_context line:1903 [INFO]: SELECT document.id AS document_id, document.account_id AS document_account_id, document.dataset_id AS document_dataset_id, document.upload_file_id AS document_upload_file_id, document.process_rule_id AS document_process_rule_id, document.batch AS document_batch, document.name AS document_name, document.position AS document_position, document.character_count AS document_character_count, document.token_count AS document_token_count, document.processing_started_at AS document_processing_started_at, document.parsing_completed_at AS document_parsing_completed_at, document.splitting_completed_at AS document_splitting_completed_at, document.indexing_completed_at AS document_indexing_completed_at, document.completed_at AS document_completed_at, document.stopped_at AS document_stopped_at, document.error AS document_error, document.enabled AS document_enabled, document.disabled_at AS document_disabled_at, document.status AS document_status, document.updated_at AS document_updated_at, document.created_at AS document_created_at 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID ORDER BY document.position DESC 
 LIMIT %(param_1)s
[2024-10-06 11:33:54,063.063] base.py -> _exec_single_context line:1908 [INFO]: [generated in 0.00021s] {'dataset_id_1': UUID('f3f28f75-8e60-4eba-b6df-4d1b390bbd89'), 'param_1': 1}
[2024-10-06 11:33:54,065.065] base.py -> _exec_single_context line:1903 [INFO]: SELECT upload_file.id AS upload_file_id, upload_file.account_id AS upload_file_account_id, upload_file.name AS upload_file_name, upload_file.key AS upload_file_key, upload_file.size AS upload_file_size, upload_file.extension AS upload_file_extension, upload_file.mime_type AS upload_file_mime_type, upload_file.hash AS upload_file_hash, upload_file.updated_at AS upload_file_updated_at, upload_file.created_at AS upload_file_created_at 
FROM upload_file 
WHERE upload_file.id = %(pk_1)s::UUID
[2024-10-06 11:33:54,065.065] base.py -> _exec_single_context line:1908 [INFO]: [generated in 0.00016s] {'pk_1': UUID('7b82638b-83ac-4590-b413-5dce0a799e7e')}
[2024-10-06 11:33:54,066.066] base.py -> _exec_single_context line:1903 [INFO]: SELECT process_rule.id AS process_rule_id, process_rule.account_id AS process_rule_account_id, process_rule.dataset_id AS process_rule_dataset_id, process_rule.mode AS process_rule_mode, process_rule.rule AS process_rule_rule, process_rule.updated_at AS process_rule_updated_at, process_rule.created_at AS process_rule_created_at 
FROM process_rule 
WHERE process_rule.id = %(pk_1)s::UUID
[2024-10-06 11:33:54,067.067] base.py -> _exec_single_context line:1908 [INFO]: [generated in 0.00014s] {'pk_1': UUID('bb5c933f-adbc-4c34-a7b2-980ef6d95c22')}
[2024-10-06 11:33:54,068.068] base.py -> _exec_single_context line:1903 [INFO]: INSERT INTO document (account_id, dataset_id, upload_file_id, process_rule_id, batch, name, position, processing_started_at, parsing_completed_at, splitting_completed_at, indexing_completed_at, completed_at, stopped_at, disabled_at) VALUES (%(account_id)s::UUID, %(dataset_id)s::UUID, %(upload_file_id)s::UUID, %(process_rule_id)s::UUID, %(batch)s, %(name)s, %(position)s, %(processing_started_at)s, %(parsing_completed_at)s, %(splitting_completed_at)s, %(indexing_completed_at)s, %(completed_at)s, %(stopped_at)s, %(disabled_at)s) RETURNING document.id, document.character_count, document.token_count, document.error, document.enabled, document.status, document.updated_at, document.created_at
[2024-10-06 11:33:54,068.068] base.py -> _exec_single_context line:1908 [INFO]: [generated in 0.00016s] {'account_id': '46db30d1-3199-4e79-a0cd-abf12fa6858f', 'dataset_id': UUID('f3f28f75-8e60-4eba-b6df-4d1b390bbd89'), 'upload_file_id': UUID('7b82638b-83ac-4590-b413-5dce0a799e7e'), 'process_rule_id': UUID('bb5c933f-adbc-4c34-a7b2-980ef6d95c22'), 'batch': '20241006113354116208', 'name': '项目API文档-完整.md', 'position': 7, 'processing_started_at': None, 'parsing_completed_at': None, 'splitting_completed_at': None, 'indexing_completed_at': None, 'completed_at': None, 'stopped_at': None, 'disabled_at': None}
[2024-10-06 11:33:54,069.069] base.py -> _commit_impl line:1146 [INFO]: COMMIT
[2024-10-06 11:33:54,087.087] base.py -> _begin_impl line:1103 [INFO]: BEGIN (implicit)
[2024-10-06 11:33:54,088.088] base.py -> _exec_single_context line:1903 [INFO]: SELECT document.id AS document_id, document.account_id AS document_account_id, document.dataset_id AS document_dataset_id, document.upload_file_id AS document_upload_file_id, document.process_rule_id AS document_process_rule_id, document.batch AS document_batch, document.name AS document_name, document.position AS document_position, document.character_count AS document_character_count, document.token_count AS document_token_count, document.processing_started_at AS document_processing_started_at, document.parsing_completed_at AS document_parsing_completed_at, document.splitting_completed_at AS document_splitting_completed_at, document.indexing_completed_at AS document_indexing_completed_at, document.completed_at AS document_completed_at, document.stopped_at AS document_stopped_at, document.error AS document_error, document.enabled AS document_enabled, document.disabled_at AS document_disabled_at, document.status AS document_status, document.updated_at AS document_updated_at, document.created_at AS document_created_at 
FROM document 
WHERE document.id = %(pk_1)s::UUID
[2024-10-06 11:33:54,088.088] base.py -> _exec_single_context line:1908 [INFO]: [generated in 0.00017s] {'pk_1': UUID('2e6d785d-7c54-4fe0-8a01-467aa58e9320')}
[2024-10-06 11:33:54,127.127] base.py -> _rollback_impl line:1129 [INFO]: ROLLBACK
[2024-10-06 11:33:54,127.127] _internal.py -> _log line:96 [INFO]: 127.0.0.1 - - [06/Oct/2024 11:33:54] "POST /datasets/f3f28f75-8e60-4eba-b6df-4d1b390bbd89/documents HTTP/1.1" 200 -
[2024-10-06 11:35:48,008.008] _internal.py -> _log line:96 [INFO]:  * Detected change in 'D:\\Code\\llmops\\llmops-api\\internal\\service\\indexing_service.py', reloading
[2024-10-06 11:35:48,619.619] _internal.py -> _log line:96 [INFO]:  * Restarting with stat
[2024-10-06 11:36:04,813.813] _internal.py -> _log line:96 [WARNING]:  * Debugger is active!
[2024-10-06 11:36:04,815.815] _internal.py -> _log line:96 [INFO]:  * Debugger PIN: 102-324-223
[2024-10-06 11:36:21,666.666] base.py -> _exec_single_context line:1903 [INFO]: select pg_catalog.version()
[2024-10-06 11:36:21,666.666] base.py -> _exec_single_context line:1908 [INFO]: [raw sql] {}
[2024-10-06 11:36:21,667.667] base.py -> _exec_single_context line:1903 [INFO]: select current_schema()
[2024-10-06 11:36:21,667.667] base.py -> _exec_single_context line:1908 [INFO]: [raw sql] {}
[2024-10-06 11:36:21,667.667] base.py -> _exec_single_context line:1903 [INFO]: show standard_conforming_strings
[2024-10-06 11:36:21,667.667] base.py -> _exec_single_context line:1908 [INFO]: [raw sql] {}
[2024-10-06 11:36:21,668.668] base.py -> _begin_impl line:1103 [INFO]: BEGIN (implicit)
[2024-10-06 11:36:21,669.669] base.py -> _exec_single_context line:1903 [INFO]: SELECT dataset.id AS dataset_id, dataset.account_id AS dataset_account_id, dataset.name AS dataset_name, dataset.icon AS dataset_icon, dataset.description AS dataset_description, dataset.updated_at AS dataset_updated_at, dataset.created_at AS dataset_created_at 
FROM dataset 
WHERE dataset.id = %(pk_1)s::UUID
[2024-10-06 11:36:21,669.669] base.py -> _exec_single_context line:1908 [INFO]: [generated in 0.00013s] {'pk_1': UUID('f3f28f75-8e60-4eba-b6df-4d1b390bbd89')}
[2024-10-06 11:36:21,671.671] base.py -> _exec_single_context line:1903 [INFO]: SELECT upload_file.id AS upload_file_id, upload_file.account_id AS upload_file_account_id, upload_file.name AS upload_file_name, upload_file.key AS upload_file_key, upload_file.size AS upload_file_size, upload_file.extension AS upload_file_extension, upload_file.mime_type AS upload_file_mime_type, upload_file.hash AS upload_file_hash, upload_file.updated_at AS upload_file_updated_at, upload_file.created_at AS upload_file_created_at 
FROM upload_file 
WHERE upload_file.account_id = %(account_id_1)s::UUID AND upload_file.id IN (%(id_1_1)s::UUID)
[2024-10-06 11:36:21,671.671] base.py -> _exec_single_context line:1908 [INFO]: [generated in 0.00015s] {'account_id_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f', 'id_1_1': '7b82638b-83ac-4590-b413-5dce0a799e7e'}
[2024-10-06 11:36:21,673.673] base.py -> _exec_single_context line:1903 [INFO]: INSERT INTO process_rule (account_id, dataset_id, mode, rule) VALUES (%(account_id)s::UUID, %(dataset_id)s::UUID, %(mode)s, %(rule)s) RETURNING process_rule.id, process_rule.updated_at, process_rule.created_at
[2024-10-06 11:36:21,673.673] base.py -> _exec_single_context line:1908 [INFO]: [generated in 0.00015s] {'account_id': '46db30d1-3199-4e79-a0cd-abf12fa6858f', 'dataset_id': UUID('f3f28f75-8e60-4eba-b6df-4d1b390bbd89'), 'mode': 'automatic', 'rule': '{"pre_process_rules": [{"id": "remove_extra_space", "enabled": true}, {"id": "remove_url_and_email", "enabled": true}], "segment": {"separators": ["\ ... (15 characters truncated) ... "\\u3002|\\uff01|\\uff1f", "\\\\.\\\\s|\\\\!\\\\s|\\\\?\\\\s", "\\uff1b|;\\\\s", "\\uff0c|,\\\\s", " ", ""], "chunk_size": 500, "chunk_overlap": 50}}'}
[2024-10-06 11:36:21,675.675] base.py -> _commit_impl line:1146 [INFO]: COMMIT
[2024-10-06 11:36:21,705.705] base.py -> _begin_impl line:1103 [INFO]: BEGIN (implicit)
[2024-10-06 11:36:21,707.707] base.py -> _exec_single_context line:1903 [INFO]: SELECT document.id AS document_id, document.account_id AS document_account_id, document.dataset_id AS document_dataset_id, document.upload_file_id AS document_upload_file_id, document.process_rule_id AS document_process_rule_id, document.batch AS document_batch, document.name AS document_name, document.position AS document_position, document.character_count AS document_character_count, document.token_count AS document_token_count, document.processing_started_at AS document_processing_started_at, document.parsing_completed_at AS document_parsing_completed_at, document.splitting_completed_at AS document_splitting_completed_at, document.indexing_completed_at AS document_indexing_completed_at, document.completed_at AS document_completed_at, document.stopped_at AS document_stopped_at, document.error AS document_error, document.enabled AS document_enabled, document.disabled_at AS document_disabled_at, document.status AS document_status, document.updated_at AS document_updated_at, document.created_at AS document_created_at 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID ORDER BY document.position DESC 
 LIMIT %(param_1)s
[2024-10-06 11:36:21,707.707] base.py -> _exec_single_context line:1908 [INFO]: [generated in 0.00016s] {'dataset_id_1': UUID('f3f28f75-8e60-4eba-b6df-4d1b390bbd89'), 'param_1': 1}
[2024-10-06 11:36:21,709.709] base.py -> _exec_single_context line:1903 [INFO]: SELECT upload_file.id AS upload_file_id, upload_file.account_id AS upload_file_account_id, upload_file.name AS upload_file_name, upload_file.key AS upload_file_key, upload_file.size AS upload_file_size, upload_file.extension AS upload_file_extension, upload_file.mime_type AS upload_file_mime_type, upload_file.hash AS upload_file_hash, upload_file.updated_at AS upload_file_updated_at, upload_file.created_at AS upload_file_created_at 
FROM upload_file 
WHERE upload_file.id = %(pk_1)s::UUID
[2024-10-06 11:36:21,709.709] base.py -> _exec_single_context line:1908 [INFO]: [generated in 0.00013s] {'pk_1': UUID('7b82638b-83ac-4590-b413-5dce0a799e7e')}
[2024-10-06 11:36:21,710.710] base.py -> _exec_single_context line:1903 [INFO]: SELECT process_rule.id AS process_rule_id, process_rule.account_id AS process_rule_account_id, process_rule.dataset_id AS process_rule_dataset_id, process_rule.mode AS process_rule_mode, process_rule.rule AS process_rule_rule, process_rule.updated_at AS process_rule_updated_at, process_rule.created_at AS process_rule_created_at 
FROM process_rule 
WHERE process_rule.id = %(pk_1)s::UUID
[2024-10-06 11:36:21,710.710] base.py -> _exec_single_context line:1908 [INFO]: [generated in 0.00013s] {'pk_1': UUID('120393b1-0f76-437f-924b-a70b2063a434')}
[2024-10-06 11:36:21,711.711] base.py -> _exec_single_context line:1903 [INFO]: INSERT INTO document (account_id, dataset_id, upload_file_id, process_rule_id, batch, name, position, processing_started_at, parsing_completed_at, splitting_completed_at, indexing_completed_at, completed_at, stopped_at, disabled_at) VALUES (%(account_id)s::UUID, %(dataset_id)s::UUID, %(upload_file_id)s::UUID, %(process_rule_id)s::UUID, %(batch)s, %(name)s, %(position)s, %(processing_started_at)s, %(parsing_completed_at)s, %(splitting_completed_at)s, %(indexing_completed_at)s, %(completed_at)s, %(stopped_at)s, %(disabled_at)s) RETURNING document.id, document.character_count, document.token_count, document.error, document.enabled, document.status, document.updated_at, document.created_at
[2024-10-06 11:36:21,711.711] base.py -> _exec_single_context line:1908 [INFO]: [generated in 0.00014s] {'account_id': '46db30d1-3199-4e79-a0cd-abf12fa6858f', 'dataset_id': UUID('f3f28f75-8e60-4eba-b6df-4d1b390bbd89'), 'upload_file_id': UUID('7b82638b-83ac-4590-b413-5dce0a799e7e'), 'process_rule_id': UUID('120393b1-0f76-437f-924b-a70b2063a434'), 'batch': '20241006113621321528', 'name': '项目API文档-完整.md', 'position': 8, 'processing_started_at': None, 'parsing_completed_at': None, 'splitting_completed_at': None, 'indexing_completed_at': None, 'completed_at': None, 'stopped_at': None, 'disabled_at': None}
[2024-10-06 11:36:21,712.712] base.py -> _commit_impl line:1146 [INFO]: COMMIT
[2024-10-06 11:36:21,726.726] base.py -> _begin_impl line:1103 [INFO]: BEGIN (implicit)
[2024-10-06 11:36:21,726.726] base.py -> _exec_single_context line:1903 [INFO]: SELECT document.id AS document_id, document.account_id AS document_account_id, document.dataset_id AS document_dataset_id, document.upload_file_id AS document_upload_file_id, document.process_rule_id AS document_process_rule_id, document.batch AS document_batch, document.name AS document_name, document.position AS document_position, document.character_count AS document_character_count, document.token_count AS document_token_count, document.processing_started_at AS document_processing_started_at, document.parsing_completed_at AS document_parsing_completed_at, document.splitting_completed_at AS document_splitting_completed_at, document.indexing_completed_at AS document_indexing_completed_at, document.completed_at AS document_completed_at, document.stopped_at AS document_stopped_at, document.error AS document_error, document.enabled AS document_enabled, document.disabled_at AS document_disabled_at, document.status AS document_status, document.updated_at AS document_updated_at, document.created_at AS document_created_at 
FROM document 
WHERE document.id = %(pk_1)s::UUID
[2024-10-06 11:36:21,726.726] base.py -> _exec_single_context line:1908 [INFO]: [generated in 0.00012s] {'pk_1': UUID('7c4eaa1e-74e9-4056-95f8-d3b61aca825e')}
[2024-10-06 11:36:21,757.757] base.py -> _rollback_impl line:1129 [INFO]: ROLLBACK
[2024-10-06 11:36:21,757.757] _internal.py -> _log line:96 [INFO]: 127.0.0.1 - - [06/Oct/2024 11:36:21] "POST /datasets/f3f28f75-8e60-4eba-b6df-4d1b390bbd89/documents HTTP/1.1" 200 -
[2024-10-06 11:40:00,665.665] base.py -> _begin_impl line:1103 [INFO]: BEGIN (implicit)
[2024-10-06 11:40:00,666.666] base.py -> _exec_single_context line:1903 [INFO]: SELECT dataset.id AS dataset_id, dataset.account_id AS dataset_account_id, dataset.name AS dataset_name, dataset.icon AS dataset_icon, dataset.description AS dataset_description, dataset.updated_at AS dataset_updated_at, dataset.created_at AS dataset_created_at 
FROM dataset 
WHERE dataset.id = %(pk_1)s::UUID
[2024-10-06 11:40:00,666.666] base.py -> _exec_single_context line:1908 [INFO]: [cached since 219s ago] {'pk_1': UUID('f3f28f75-8e60-4eba-b6df-4d1b390bbd89')}
[2024-10-06 11:40:00,667.667] base.py -> _exec_single_context line:1903 [INFO]: SELECT upload_file.id AS upload_file_id, upload_file.account_id AS upload_file_account_id, upload_file.name AS upload_file_name, upload_file.key AS upload_file_key, upload_file.size AS upload_file_size, upload_file.extension AS upload_file_extension, upload_file.mime_type AS upload_file_mime_type, upload_file.hash AS upload_file_hash, upload_file.updated_at AS upload_file_updated_at, upload_file.created_at AS upload_file_created_at 
FROM upload_file 
WHERE upload_file.account_id = %(account_id_1)s::UUID AND upload_file.id IN (%(id_1_1)s::UUID)
[2024-10-06 11:40:00,667.667] base.py -> _exec_single_context line:1908 [INFO]: [cached since 219s ago] {'account_id_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f', 'id_1_1': '7b82638b-83ac-4590-b413-5dce0a799e7e'}
[2024-10-06 11:40:00,668.668] base.py -> _exec_single_context line:1903 [INFO]: INSERT INTO process_rule (account_id, dataset_id, mode, rule) VALUES (%(account_id)s::UUID, %(dataset_id)s::UUID, %(mode)s, %(rule)s) RETURNING process_rule.id, process_rule.updated_at, process_rule.created_at
[2024-10-06 11:40:00,668.668] base.py -> _exec_single_context line:1908 [INFO]: [cached since 219s ago] {'account_id': '46db30d1-3199-4e79-a0cd-abf12fa6858f', 'dataset_id': UUID('f3f28f75-8e60-4eba-b6df-4d1b390bbd89'), 'mode': 'automatic', 'rule': '{"pre_process_rules": [{"id": "remove_extra_space", "enabled": true}, {"id": "remove_url_and_email", "enabled": true}], "segment": {"separators": ["\ ... (15 characters truncated) ... "\\u3002|\\uff01|\\uff1f", "\\\\.\\\\s|\\\\!\\\\s|\\\\?\\\\s", "\\uff1b|;\\\\s", "\\uff0c|,\\\\s", " ", ""], "chunk_size": 500, "chunk_overlap": 50}}'}
[2024-10-06 11:40:00,668.668] base.py -> _commit_impl line:1146 [INFO]: COMMIT
[2024-10-06 11:40:00,696.696] base.py -> _begin_impl line:1103 [INFO]: BEGIN (implicit)
[2024-10-06 11:40:00,696.696] base.py -> _exec_single_context line:1903 [INFO]: SELECT document.id AS document_id, document.account_id AS document_account_id, document.dataset_id AS document_dataset_id, document.upload_file_id AS document_upload_file_id, document.process_rule_id AS document_process_rule_id, document.batch AS document_batch, document.name AS document_name, document.position AS document_position, document.character_count AS document_character_count, document.token_count AS document_token_count, document.processing_started_at AS document_processing_started_at, document.parsing_completed_at AS document_parsing_completed_at, document.splitting_completed_at AS document_splitting_completed_at, document.indexing_completed_at AS document_indexing_completed_at, document.completed_at AS document_completed_at, document.stopped_at AS document_stopped_at, document.error AS document_error, document.enabled AS document_enabled, document.disabled_at AS document_disabled_at, document.status AS document_status, document.updated_at AS document_updated_at, document.created_at AS document_created_at 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID ORDER BY document.position DESC 
 LIMIT %(param_1)s
[2024-10-06 11:40:00,697.697] base.py -> _exec_single_context line:1908 [INFO]: [cached since 219s ago] {'dataset_id_1': UUID('f3f28f75-8e60-4eba-b6df-4d1b390bbd89'), 'param_1': 1}
[2024-10-06 11:40:00,697.697] base.py -> _exec_single_context line:1903 [INFO]: SELECT upload_file.id AS upload_file_id, upload_file.account_id AS upload_file_account_id, upload_file.name AS upload_file_name, upload_file.key AS upload_file_key, upload_file.size AS upload_file_size, upload_file.extension AS upload_file_extension, upload_file.mime_type AS upload_file_mime_type, upload_file.hash AS upload_file_hash, upload_file.updated_at AS upload_file_updated_at, upload_file.created_at AS upload_file_created_at 
FROM upload_file 
WHERE upload_file.id = %(pk_1)s::UUID
[2024-10-06 11:40:00,698.698] base.py -> _exec_single_context line:1908 [INFO]: [cached since 219s ago] {'pk_1': UUID('7b82638b-83ac-4590-b413-5dce0a799e7e')}
[2024-10-06 11:40:00,698.698] base.py -> _exec_single_context line:1903 [INFO]: SELECT process_rule.id AS process_rule_id, process_rule.account_id AS process_rule_account_id, process_rule.dataset_id AS process_rule_dataset_id, process_rule.mode AS process_rule_mode, process_rule.rule AS process_rule_rule, process_rule.updated_at AS process_rule_updated_at, process_rule.created_at AS process_rule_created_at 
FROM process_rule 
WHERE process_rule.id = %(pk_1)s::UUID
[2024-10-06 11:40:00,698.698] base.py -> _exec_single_context line:1908 [INFO]: [cached since 219s ago] {'pk_1': UUID('8b09eeb9-b1db-479e-9d1c-086398a15351')}
[2024-10-06 11:40:00,699.699] base.py -> _exec_single_context line:1903 [INFO]: INSERT INTO document (account_id, dataset_id, upload_file_id, process_rule_id, batch, name, position, processing_started_at, parsing_completed_at, splitting_completed_at, indexing_completed_at, completed_at, stopped_at, disabled_at) VALUES (%(account_id)s::UUID, %(dataset_id)s::UUID, %(upload_file_id)s::UUID, %(process_rule_id)s::UUID, %(batch)s, %(name)s, %(position)s, %(processing_started_at)s, %(parsing_completed_at)s, %(splitting_completed_at)s, %(indexing_completed_at)s, %(completed_at)s, %(stopped_at)s, %(disabled_at)s) RETURNING document.id, document.character_count, document.token_count, document.error, document.enabled, document.status, document.updated_at, document.created_at
[2024-10-06 11:40:00,699.699] base.py -> _exec_single_context line:1908 [INFO]: [cached since 219s ago] {'account_id': '46db30d1-3199-4e79-a0cd-abf12fa6858f', 'dataset_id': UUID('f3f28f75-8e60-4eba-b6df-4d1b390bbd89'), 'upload_file_id': UUID('7b82638b-83ac-4590-b413-5dce0a799e7e'), 'process_rule_id': UUID('8b09eeb9-b1db-479e-9d1c-086398a15351'), 'batch': '20241006114000284631', 'name': '项目API文档-完整.md', 'position': 1, 'processing_started_at': None, 'parsing_completed_at': None, 'splitting_completed_at': None, 'indexing_completed_at': None, 'completed_at': None, 'stopped_at': None, 'disabled_at': None}
[2024-10-06 11:40:00,701.701] base.py -> _commit_impl line:1146 [INFO]: COMMIT
[2024-10-06 11:40:00,702.702] base.py -> _begin_impl line:1103 [INFO]: BEGIN (implicit)
[2024-10-06 11:40:00,702.702] base.py -> _exec_single_context line:1903 [INFO]: SELECT document.id AS document_id, document.account_id AS document_account_id, document.dataset_id AS document_dataset_id, document.upload_file_id AS document_upload_file_id, document.process_rule_id AS document_process_rule_id, document.batch AS document_batch, document.name AS document_name, document.position AS document_position, document.character_count AS document_character_count, document.token_count AS document_token_count, document.processing_started_at AS document_processing_started_at, document.parsing_completed_at AS document_parsing_completed_at, document.splitting_completed_at AS document_splitting_completed_at, document.indexing_completed_at AS document_indexing_completed_at, document.completed_at AS document_completed_at, document.stopped_at AS document_stopped_at, document.error AS document_error, document.enabled AS document_enabled, document.disabled_at AS document_disabled_at, document.status AS document_status, document.updated_at AS document_updated_at, document.created_at AS document_created_at 
FROM document 
WHERE document.id = %(pk_1)s::UUID
[2024-10-06 11:40:00,703.703] base.py -> _exec_single_context line:1908 [INFO]: [cached since 219s ago] {'pk_1': UUID('bddc97a9-8e59-4b6c-bf3d-9ad4dbd38425')}
[2024-10-06 11:40:00,720.720] base.py -> _rollback_impl line:1129 [INFO]: ROLLBACK
[2024-10-06 11:40:00,720.720] _internal.py -> _log line:96 [INFO]: 127.0.0.1 - - [06/Oct/2024 11:40:00] "POST /datasets/f3f28f75-8e60-4eba-b6df-4d1b390bbd89/documents HTTP/1.1" 200 -
[2024-10-06 11:41:12,172.172] base.py -> _begin_impl line:1103 [INFO]: BEGIN (implicit)
[2024-10-06 11:41:12,172.172] base.py -> _exec_single_context line:1903 [INFO]: SELECT dataset.id AS dataset_id, dataset.account_id AS dataset_account_id, dataset.name AS dataset_name, dataset.icon AS dataset_icon, dataset.description AS dataset_description, dataset.updated_at AS dataset_updated_at, dataset.created_at AS dataset_created_at 
FROM dataset 
WHERE dataset.id = %(pk_1)s::UUID
[2024-10-06 11:41:12,173.173] base.py -> _exec_single_context line:1908 [INFO]: [cached since 290.5s ago] {'pk_1': UUID('f3f28f75-8e60-4eba-b6df-4d1b390bbd89')}
[2024-10-06 11:41:12,174.174] base.py -> _exec_single_context line:1903 [INFO]: SELECT upload_file.id AS upload_file_id, upload_file.account_id AS upload_file_account_id, upload_file.name AS upload_file_name, upload_file.key AS upload_file_key, upload_file.size AS upload_file_size, upload_file.extension AS upload_file_extension, upload_file.mime_type AS upload_file_mime_type, upload_file.hash AS upload_file_hash, upload_file.updated_at AS upload_file_updated_at, upload_file.created_at AS upload_file_created_at 
FROM upload_file 
WHERE upload_file.account_id = %(account_id_1)s::UUID AND upload_file.id IN (%(id_1_1)s::UUID)
[2024-10-06 11:41:12,174.174] base.py -> _exec_single_context line:1908 [INFO]: [cached since 290.5s ago] {'account_id_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f', 'id_1_1': '7b82638b-83ac-4590-b413-5dce0a799e7e'}
[2024-10-06 11:41:12,174.174] base.py -> _exec_single_context line:1903 [INFO]: INSERT INTO process_rule (account_id, dataset_id, mode, rule) VALUES (%(account_id)s::UUID, %(dataset_id)s::UUID, %(mode)s, %(rule)s) RETURNING process_rule.id, process_rule.updated_at, process_rule.created_at
[2024-10-06 11:41:12,175.175] base.py -> _exec_single_context line:1908 [INFO]: [cached since 290.5s ago] {'account_id': '46db30d1-3199-4e79-a0cd-abf12fa6858f', 'dataset_id': UUID('f3f28f75-8e60-4eba-b6df-4d1b390bbd89'), 'mode': 'automatic', 'rule': '{"pre_process_rules": [{"id": "remove_extra_space", "enabled": true}, {"id": "remove_url_and_email", "enabled": true}], "segment": {"separators": ["\ ... (15 characters truncated) ... "\\u3002|\\uff01|\\uff1f", "\\\\.\\\\s|\\\\!\\\\s|\\\\?\\\\s", "\\uff1b|;\\\\s", "\\uff0c|,\\\\s", " ", ""], "chunk_size": 500, "chunk_overlap": 50}}'}
[2024-10-06 11:41:12,175.175] base.py -> _commit_impl line:1146 [INFO]: COMMIT
[2024-10-06 11:41:12,177.177] base.py -> _begin_impl line:1103 [INFO]: BEGIN (implicit)
[2024-10-06 11:41:12,177.177] base.py -> _exec_single_context line:1903 [INFO]: SELECT document.id AS document_id, document.account_id AS document_account_id, document.dataset_id AS document_dataset_id, document.upload_file_id AS document_upload_file_id, document.process_rule_id AS document_process_rule_id, document.batch AS document_batch, document.name AS document_name, document.position AS document_position, document.character_count AS document_character_count, document.token_count AS document_token_count, document.processing_started_at AS document_processing_started_at, document.parsing_completed_at AS document_parsing_completed_at, document.splitting_completed_at AS document_splitting_completed_at, document.indexing_completed_at AS document_indexing_completed_at, document.completed_at AS document_completed_at, document.stopped_at AS document_stopped_at, document.error AS document_error, document.enabled AS document_enabled, document.disabled_at AS document_disabled_at, document.status AS document_status, document.updated_at AS document_updated_at, document.created_at AS document_created_at 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID ORDER BY document.position DESC 
 LIMIT %(param_1)s
[2024-10-06 11:41:12,178.178] base.py -> _exec_single_context line:1908 [INFO]: [cached since 290.5s ago] {'dataset_id_1': UUID('f3f28f75-8e60-4eba-b6df-4d1b390bbd89'), 'param_1': 1}
[2024-10-06 11:41:12,179.179] base.py -> _exec_single_context line:1903 [INFO]: SELECT upload_file.id AS upload_file_id, upload_file.account_id AS upload_file_account_id, upload_file.name AS upload_file_name, upload_file.key AS upload_file_key, upload_file.size AS upload_file_size, upload_file.extension AS upload_file_extension, upload_file.mime_type AS upload_file_mime_type, upload_file.hash AS upload_file_hash, upload_file.updated_at AS upload_file_updated_at, upload_file.created_at AS upload_file_created_at 
FROM upload_file 
WHERE upload_file.id = %(pk_1)s::UUID
[2024-10-06 11:41:12,179.179] base.py -> _exec_single_context line:1908 [INFO]: [cached since 290.5s ago] {'pk_1': UUID('7b82638b-83ac-4590-b413-5dce0a799e7e')}
[2024-10-06 11:41:12,179.179] base.py -> _exec_single_context line:1903 [INFO]: SELECT process_rule.id AS process_rule_id, process_rule.account_id AS process_rule_account_id, process_rule.dataset_id AS process_rule_dataset_id, process_rule.mode AS process_rule_mode, process_rule.rule AS process_rule_rule, process_rule.updated_at AS process_rule_updated_at, process_rule.created_at AS process_rule_created_at 
FROM process_rule 
WHERE process_rule.id = %(pk_1)s::UUID
[2024-10-06 11:41:12,179.179] base.py -> _exec_single_context line:1908 [INFO]: [cached since 290.5s ago] {'pk_1': UUID('4b71ce24-681e-478f-9471-f7575c1f9c7f')}
[2024-10-06 11:41:12,180.180] base.py -> _exec_single_context line:1903 [INFO]: INSERT INTO document (account_id, dataset_id, upload_file_id, process_rule_id, batch, name, position, processing_started_at, parsing_completed_at, splitting_completed_at, indexing_completed_at, completed_at, stopped_at, disabled_at) VALUES (%(account_id)s::UUID, %(dataset_id)s::UUID, %(upload_file_id)s::UUID, %(process_rule_id)s::UUID, %(batch)s, %(name)s, %(position)s, %(processing_started_at)s, %(parsing_completed_at)s, %(splitting_completed_at)s, %(indexing_completed_at)s, %(completed_at)s, %(stopped_at)s, %(disabled_at)s) RETURNING document.id, document.character_count, document.token_count, document.error, document.enabled, document.status, document.updated_at, document.created_at
[2024-10-06 11:41:12,180.180] base.py -> _exec_single_context line:1908 [INFO]: [cached since 290.5s ago] {'account_id': '46db30d1-3199-4e79-a0cd-abf12fa6858f', 'dataset_id': UUID('f3f28f75-8e60-4eba-b6df-4d1b390bbd89'), 'upload_file_id': UUID('7b82638b-83ac-4590-b413-5dce0a799e7e'), 'process_rule_id': UUID('4b71ce24-681e-478f-9471-f7575c1f9c7f'), 'batch': '20241006114112549988', 'name': '项目API文档-完整.md', 'position': 1, 'processing_started_at': None, 'parsing_completed_at': None, 'splitting_completed_at': None, 'indexing_completed_at': None, 'completed_at': None, 'stopped_at': None, 'disabled_at': None}
[2024-10-06 11:41:12,181.181] base.py -> _commit_impl line:1146 [INFO]: COMMIT
[2024-10-06 11:41:12,182.182] base.py -> _begin_impl line:1103 [INFO]: BEGIN (implicit)
[2024-10-06 11:41:12,182.182] base.py -> _exec_single_context line:1903 [INFO]: SELECT document.id AS document_id, document.account_id AS document_account_id, document.dataset_id AS document_dataset_id, document.upload_file_id AS document_upload_file_id, document.process_rule_id AS document_process_rule_id, document.batch AS document_batch, document.name AS document_name, document.position AS document_position, document.character_count AS document_character_count, document.token_count AS document_token_count, document.processing_started_at AS document_processing_started_at, document.parsing_completed_at AS document_parsing_completed_at, document.splitting_completed_at AS document_splitting_completed_at, document.indexing_completed_at AS document_indexing_completed_at, document.completed_at AS document_completed_at, document.stopped_at AS document_stopped_at, document.error AS document_error, document.enabled AS document_enabled, document.disabled_at AS document_disabled_at, document.status AS document_status, document.updated_at AS document_updated_at, document.created_at AS document_created_at 
FROM document 
WHERE document.id = %(pk_1)s::UUID
[2024-10-06 11:41:12,182.182] base.py -> _exec_single_context line:1908 [INFO]: [cached since 290.5s ago] {'pk_1': UUID('4c56f282-6e6d-4ce1-8bd7-f50f4527bb9b')}
[2024-10-06 11:41:12,212.212] base.py -> _rollback_impl line:1129 [INFO]: ROLLBACK
[2024-10-06 11:41:12,213.213] _internal.py -> _log line:96 [INFO]: 127.0.0.1 - - [06/Oct/2024 11:41:12] "POST /datasets/f3f28f75-8e60-4eba-b6df-4d1b390bbd89/documents HTTP/1.1" 200 -
[2024-10-06 11:43:45,306.306] _internal.py -> _log line:96 [INFO]: [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5000
[2024-10-06 11:43:45,306.306] _internal.py -> _log line:96 [INFO]: [33mPress CTRL+C to quit[0m
[2024-10-06 11:43:45,307.307] _internal.py -> _log line:96 [INFO]:  * Restarting with stat
[2024-10-06 11:44:01,741.741] _internal.py -> _log line:96 [WARNING]:  * Debugger is active!
[2024-10-06 11:44:01,743.743] _internal.py -> _log line:96 [INFO]:  * Debugger PIN: 102-324-223
[2024-10-06 11:44:33,381.381] base.py -> _exec_single_context line:1903 [INFO]: select pg_catalog.version()
[2024-10-06 11:44:33,381.381] base.py -> _exec_single_context line:1908 [INFO]: [raw sql] {}
[2024-10-06 11:44:33,382.382] base.py -> _exec_single_context line:1903 [INFO]: select current_schema()
[2024-10-06 11:44:33,382.382] base.py -> _exec_single_context line:1908 [INFO]: [raw sql] {}
[2024-10-06 11:44:33,382.382] base.py -> _exec_single_context line:1903 [INFO]: show standard_conforming_strings
[2024-10-06 11:44:33,382.382] base.py -> _exec_single_context line:1908 [INFO]: [raw sql] {}
[2024-10-06 11:44:33,383.383] base.py -> _begin_impl line:1103 [INFO]: BEGIN (implicit)
[2024-10-06 11:44:33,384.384] base.py -> _exec_single_context line:1903 [INFO]: SELECT dataset.id AS dataset_id, dataset.account_id AS dataset_account_id, dataset.name AS dataset_name, dataset.icon AS dataset_icon, dataset.description AS dataset_description, dataset.updated_at AS dataset_updated_at, dataset.created_at AS dataset_created_at 
FROM dataset 
WHERE dataset.id = %(pk_1)s::UUID
[2024-10-06 11:44:33,384.384] base.py -> _exec_single_context line:1908 [INFO]: [generated in 0.00013s] {'pk_1': UUID('f3f28f75-8e60-4eba-b6df-4d1b390bbd89')}
[2024-10-06 11:44:33,386.386] base.py -> _exec_single_context line:1903 [INFO]: SELECT upload_file.id AS upload_file_id, upload_file.account_id AS upload_file_account_id, upload_file.name AS upload_file_name, upload_file.key AS upload_file_key, upload_file.size AS upload_file_size, upload_file.extension AS upload_file_extension, upload_file.mime_type AS upload_file_mime_type, upload_file.hash AS upload_file_hash, upload_file.updated_at AS upload_file_updated_at, upload_file.created_at AS upload_file_created_at 
FROM upload_file 
WHERE upload_file.account_id = %(account_id_1)s::UUID AND upload_file.id IN (%(id_1_1)s::UUID)
[2024-10-06 11:44:33,386.386] base.py -> _exec_single_context line:1908 [INFO]: [generated in 0.00016s] {'account_id_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f', 'id_1_1': '7b82638b-83ac-4590-b413-5dce0a799e7e'}
[2024-10-06 11:44:33,388.388] base.py -> _exec_single_context line:1903 [INFO]: INSERT INTO process_rule (account_id, dataset_id, mode, rule) VALUES (%(account_id)s::UUID, %(dataset_id)s::UUID, %(mode)s, %(rule)s) RETURNING process_rule.id, process_rule.updated_at, process_rule.created_at
[2024-10-06 11:44:33,388.388] base.py -> _exec_single_context line:1908 [INFO]: [generated in 0.00015s] {'account_id': '46db30d1-3199-4e79-a0cd-abf12fa6858f', 'dataset_id': UUID('f3f28f75-8e60-4eba-b6df-4d1b390bbd89'), 'mode': 'automatic', 'rule': '{"pre_process_rules": [{"id": "remove_extra_space", "enabled": true}, {"id": "remove_url_and_email", "enabled": true}], "segment": {"separators": ["\ ... (15 characters truncated) ... "\\u3002|\\uff01|\\uff1f", "\\\\.\\\\s|\\\\!\\\\s|\\\\?\\\\s", "\\uff1b|;\\\\s", "\\uff0c|,\\\\s", " ", ""], "chunk_size": 500, "chunk_overlap": 50}}'}
[2024-10-06 11:44:33,389.389] base.py -> _commit_impl line:1146 [INFO]: COMMIT
[2024-10-06 11:44:33,410.410] base.py -> _begin_impl line:1103 [INFO]: BEGIN (implicit)
[2024-10-06 11:44:33,412.412] base.py -> _exec_single_context line:1903 [INFO]: SELECT document.id AS document_id, document.account_id AS document_account_id, document.dataset_id AS document_dataset_id, document.upload_file_id AS document_upload_file_id, document.process_rule_id AS document_process_rule_id, document.batch AS document_batch, document.name AS document_name, document.position AS document_position, document.character_count AS document_character_count, document.token_count AS document_token_count, document.processing_started_at AS document_processing_started_at, document.parsing_completed_at AS document_parsing_completed_at, document.splitting_completed_at AS document_splitting_completed_at, document.indexing_completed_at AS document_indexing_completed_at, document.completed_at AS document_completed_at, document.stopped_at AS document_stopped_at, document.error AS document_error, document.enabled AS document_enabled, document.disabled_at AS document_disabled_at, document.status AS document_status, document.updated_at AS document_updated_at, document.created_at AS document_created_at 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID ORDER BY document.position DESC 
 LIMIT %(param_1)s
[2024-10-06 11:44:33,413.413] base.py -> _exec_single_context line:1908 [INFO]: [generated in 0.00016s] {'dataset_id_1': UUID('f3f28f75-8e60-4eba-b6df-4d1b390bbd89'), 'param_1': 1}
[2024-10-06 11:44:33,414.414] base.py -> _exec_single_context line:1903 [INFO]: SELECT upload_file.id AS upload_file_id, upload_file.account_id AS upload_file_account_id, upload_file.name AS upload_file_name, upload_file.key AS upload_file_key, upload_file.size AS upload_file_size, upload_file.extension AS upload_file_extension, upload_file.mime_type AS upload_file_mime_type, upload_file.hash AS upload_file_hash, upload_file.updated_at AS upload_file_updated_at, upload_file.created_at AS upload_file_created_at 
FROM upload_file 
WHERE upload_file.id = %(pk_1)s::UUID
[2024-10-06 11:44:33,414.414] base.py -> _exec_single_context line:1908 [INFO]: [generated in 0.00016s] {'pk_1': UUID('7b82638b-83ac-4590-b413-5dce0a799e7e')}
[2024-10-06 11:44:33,415.415] base.py -> _exec_single_context line:1903 [INFO]: SELECT process_rule.id AS process_rule_id, process_rule.account_id AS process_rule_account_id, process_rule.dataset_id AS process_rule_dataset_id, process_rule.mode AS process_rule_mode, process_rule.rule AS process_rule_rule, process_rule.updated_at AS process_rule_updated_at, process_rule.created_at AS process_rule_created_at 
FROM process_rule 
WHERE process_rule.id = %(pk_1)s::UUID
[2024-10-06 11:44:33,416.416] base.py -> _exec_single_context line:1908 [INFO]: [generated in 0.00012s] {'pk_1': UUID('fefe5aa3-0458-4172-b882-ab8d04e331cf')}
[2024-10-06 11:44:33,417.417] base.py -> _exec_single_context line:1903 [INFO]: INSERT INTO document (account_id, dataset_id, upload_file_id, process_rule_id, batch, name, position, processing_started_at, parsing_completed_at, splitting_completed_at, indexing_completed_at, completed_at, stopped_at, disabled_at) VALUES (%(account_id)s::UUID, %(dataset_id)s::UUID, %(upload_file_id)s::UUID, %(process_rule_id)s::UUID, %(batch)s, %(name)s, %(position)s, %(processing_started_at)s, %(parsing_completed_at)s, %(splitting_completed_at)s, %(indexing_completed_at)s, %(completed_at)s, %(stopped_at)s, %(disabled_at)s) RETURNING document.id, document.character_count, document.token_count, document.error, document.enabled, document.status, document.updated_at, document.created_at
[2024-10-06 11:44:33,417.417] base.py -> _exec_single_context line:1908 [INFO]: [generated in 0.00016s] {'account_id': '46db30d1-3199-4e79-a0cd-abf12fa6858f', 'dataset_id': UUID('f3f28f75-8e60-4eba-b6df-4d1b390bbd89'), 'upload_file_id': UUID('7b82638b-83ac-4590-b413-5dce0a799e7e'), 'process_rule_id': UUID('fefe5aa3-0458-4172-b882-ab8d04e331cf'), 'batch': '20241006114433388818', 'name': '项目API文档-完整.md', 'position': 2, 'processing_started_at': None, 'parsing_completed_at': None, 'splitting_completed_at': None, 'indexing_completed_at': None, 'completed_at': None, 'stopped_at': None, 'disabled_at': None}
[2024-10-06 11:44:33,418.418] base.py -> _commit_impl line:1146 [INFO]: COMMIT
[2024-10-06 11:44:33,448.448] base.py -> _begin_impl line:1103 [INFO]: BEGIN (implicit)
[2024-10-06 11:44:33,448.448] base.py -> _exec_single_context line:1903 [INFO]: SELECT document.id AS document_id, document.account_id AS document_account_id, document.dataset_id AS document_dataset_id, document.upload_file_id AS document_upload_file_id, document.process_rule_id AS document_process_rule_id, document.batch AS document_batch, document.name AS document_name, document.position AS document_position, document.character_count AS document_character_count, document.token_count AS document_token_count, document.processing_started_at AS document_processing_started_at, document.parsing_completed_at AS document_parsing_completed_at, document.splitting_completed_at AS document_splitting_completed_at, document.indexing_completed_at AS document_indexing_completed_at, document.completed_at AS document_completed_at, document.stopped_at AS document_stopped_at, document.error AS document_error, document.enabled AS document_enabled, document.disabled_at AS document_disabled_at, document.status AS document_status, document.updated_at AS document_updated_at, document.created_at AS document_created_at 
FROM document 
WHERE document.id = %(pk_1)s::UUID
[2024-10-06 11:44:33,448.448] base.py -> _exec_single_context line:1908 [INFO]: [generated in 0.00013s] {'pk_1': UUID('b17fe8ee-d88b-4a6d-a1cd-a1f7cf864c35')}
[2024-10-06 11:44:33,488.488] base.py -> _rollback_impl line:1129 [INFO]: ROLLBACK
[2024-10-06 11:44:33,489.489] _internal.py -> _log line:96 [INFO]: 127.0.0.1 - - [06/Oct/2024 11:44:33] "POST /datasets/f3f28f75-8e60-4eba-b6df-4d1b390bbd89/documents HTTP/1.1" 200 -
[2024-10-06 11:45:26,385.385] _internal.py -> _log line:96 [INFO]: 127.0.0.1 - - [06/Oct/2024 11:45:26] "POST /upload-files/file HTTP/1.1" 200 -
[2024-10-06 11:45:32,073.073] base.py -> _begin_impl line:1103 [INFO]: BEGIN (implicit)
[2024-10-06 11:45:32,074.074] base.py -> _exec_single_context line:1903 [INFO]: INSERT INTO upload_file (account_id, name, key, size, extension, mime_type, hash) VALUES (%(account_id)s::UUID, %(name)s, %(key)s, %(size)s, %(extension)s, %(mime_type)s, %(hash)s) RETURNING upload_file.id, upload_file.updated_at, upload_file.created_at
[2024-10-06 11:45:32,075.075] base.py -> _exec_single_context line:1908 [INFO]: [generated in 0.00024s] {'account_id': '46db30d1-3199-4e79-a0cd-abf12fa6858f', 'name': 'LLMOps 项目提示词大全.md', 'key': '2024/10/06/fe874a1f-92be-4067-a835-5f3c4e573041.md', 'size': 28749, 'extension': 'md', 'mime_type': 'text/markdown', 'hash': '6d867db429d26ea426d6b67a88fce43e74760d039e9e2925f0083b7acb1f066a'}
[2024-10-06 11:45:32,076.076] base.py -> _commit_impl line:1146 [INFO]: COMMIT
[2024-10-06 11:45:32,081.081] base.py -> _begin_impl line:1103 [INFO]: BEGIN (implicit)
[2024-10-06 11:45:32,081.081] base.py -> _exec_single_context line:1903 [INFO]: SELECT upload_file.id AS upload_file_id, upload_file.account_id AS upload_file_account_id, upload_file.name AS upload_file_name, upload_file.key AS upload_file_key, upload_file.size AS upload_file_size, upload_file.extension AS upload_file_extension, upload_file.mime_type AS upload_file_mime_type, upload_file.hash AS upload_file_hash, upload_file.updated_at AS upload_file_updated_at, upload_file.created_at AS upload_file_created_at 
FROM upload_file 
WHERE upload_file.id = %(pk_1)s::UUID
[2024-10-06 11:45:32,081.081] base.py -> _exec_single_context line:1908 [INFO]: [cached since 58.67s ago] {'pk_1': UUID('60c0138a-0901-45c0-8e0f-50b359a82727')}
[2024-10-06 11:45:32,082.082] base.py -> _rollback_impl line:1129 [INFO]: ROLLBACK
[2024-10-06 11:45:32,083.083] _internal.py -> _log line:96 [INFO]: 127.0.0.1 - - [06/Oct/2024 11:45:32] "POST /upload-files/file HTTP/1.1" 200 -
[2024-10-06 11:45:39,007.007] base.py -> _begin_impl line:1103 [INFO]: BEGIN (implicit)
[2024-10-06 11:45:39,007.007] base.py -> _exec_single_context line:1903 [INFO]: SELECT dataset.id AS dataset_id, dataset.account_id AS dataset_account_id, dataset.name AS dataset_name, dataset.icon AS dataset_icon, dataset.description AS dataset_description, dataset.updated_at AS dataset_updated_at, dataset.created_at AS dataset_created_at 
FROM dataset 
WHERE dataset.id = %(pk_1)s::UUID
[2024-10-06 11:45:39,007.007] base.py -> _exec_single_context line:1908 [INFO]: [cached since 65.62s ago] {'pk_1': UUID('f3f28f75-8e60-4eba-b6df-4d1b390bbd89')}
[2024-10-06 11:45:39,008.008] base.py -> _exec_single_context line:1903 [INFO]: SELECT upload_file.id AS upload_file_id, upload_file.account_id AS upload_file_account_id, upload_file.name AS upload_file_name, upload_file.key AS upload_file_key, upload_file.size AS upload_file_size, upload_file.extension AS upload_file_extension, upload_file.mime_type AS upload_file_mime_type, upload_file.hash AS upload_file_hash, upload_file.updated_at AS upload_file_updated_at, upload_file.created_at AS upload_file_created_at 
FROM upload_file 
WHERE upload_file.account_id = %(account_id_1)s::UUID AND upload_file.id IN (%(id_1_1)s::UUID)
[2024-10-06 11:45:39,008.008] base.py -> _exec_single_context line:1908 [INFO]: [cached since 65.62s ago] {'account_id_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f', 'id_1_1': '60c0138a-0901-45c0-8e0f-50b359a82727'}
[2024-10-06 11:45:39,009.009] base.py -> _exec_single_context line:1903 [INFO]: INSERT INTO process_rule (account_id, dataset_id, mode, rule) VALUES (%(account_id)s::UUID, %(dataset_id)s::UUID, %(mode)s, %(rule)s) RETURNING process_rule.id, process_rule.updated_at, process_rule.created_at
[2024-10-06 11:45:39,009.009] base.py -> _exec_single_context line:1908 [INFO]: [cached since 65.62s ago] {'account_id': '46db30d1-3199-4e79-a0cd-abf12fa6858f', 'dataset_id': UUID('f3f28f75-8e60-4eba-b6df-4d1b390bbd89'), 'mode': 'automatic', 'rule': '{"pre_process_rules": [{"id": "remove_extra_space", "enabled": true}, {"id": "remove_url_and_email", "enabled": true}], "segment": {"separators": ["\ ... (15 characters truncated) ... "\\u3002|\\uff01|\\uff1f", "\\\\.\\\\s|\\\\!\\\\s|\\\\?\\\\s", "\\uff1b|;\\\\s", "\\uff0c|,\\\\s", " ", ""], "chunk_size": 500, "chunk_overlap": 50}}'}
[2024-10-06 11:45:39,010.010] base.py -> _commit_impl line:1146 [INFO]: COMMIT
[2024-10-06 11:45:39,029.029] base.py -> _begin_impl line:1103 [INFO]: BEGIN (implicit)
[2024-10-06 11:45:39,029.029] base.py -> _exec_single_context line:1903 [INFO]: SELECT document.id AS document_id, document.account_id AS document_account_id, document.dataset_id AS document_dataset_id, document.upload_file_id AS document_upload_file_id, document.process_rule_id AS document_process_rule_id, document.batch AS document_batch, document.name AS document_name, document.position AS document_position, document.character_count AS document_character_count, document.token_count AS document_token_count, document.processing_started_at AS document_processing_started_at, document.parsing_completed_at AS document_parsing_completed_at, document.splitting_completed_at AS document_splitting_completed_at, document.indexing_completed_at AS document_indexing_completed_at, document.completed_at AS document_completed_at, document.stopped_at AS document_stopped_at, document.error AS document_error, document.enabled AS document_enabled, document.disabled_at AS document_disabled_at, document.status AS document_status, document.updated_at AS document_updated_at, document.created_at AS document_created_at 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID ORDER BY document.position DESC 
 LIMIT %(param_1)s
[2024-10-06 11:45:39,029.029] base.py -> _exec_single_context line:1908 [INFO]: [cached since 65.62s ago] {'dataset_id_1': UUID('f3f28f75-8e60-4eba-b6df-4d1b390bbd89'), 'param_1': 1}
[2024-10-06 11:45:39,031.031] base.py -> _exec_single_context line:1903 [INFO]: SELECT upload_file.id AS upload_file_id, upload_file.account_id AS upload_file_account_id, upload_file.name AS upload_file_name, upload_file.key AS upload_file_key, upload_file.size AS upload_file_size, upload_file.extension AS upload_file_extension, upload_file.mime_type AS upload_file_mime_type, upload_file.hash AS upload_file_hash, upload_file.updated_at AS upload_file_updated_at, upload_file.created_at AS upload_file_created_at 
FROM upload_file 
WHERE upload_file.id = %(pk_1)s::UUID
[2024-10-06 11:45:39,031.031] base.py -> _exec_single_context line:1908 [INFO]: [cached since 65.62s ago] {'pk_1': UUID('60c0138a-0901-45c0-8e0f-50b359a82727')}
[2024-10-06 11:45:39,032.032] base.py -> _exec_single_context line:1903 [INFO]: SELECT process_rule.id AS process_rule_id, process_rule.account_id AS process_rule_account_id, process_rule.dataset_id AS process_rule_dataset_id, process_rule.mode AS process_rule_mode, process_rule.rule AS process_rule_rule, process_rule.updated_at AS process_rule_updated_at, process_rule.created_at AS process_rule_created_at 
FROM process_rule 
WHERE process_rule.id = %(pk_1)s::UUID
[2024-10-06 11:45:39,032.032] base.py -> _exec_single_context line:1908 [INFO]: [cached since 65.62s ago] {'pk_1': UUID('10a3597a-0035-4e6c-9fb4-4f84af175115')}
[2024-10-06 11:45:39,033.033] base.py -> _exec_single_context line:1903 [INFO]: INSERT INTO document (account_id, dataset_id, upload_file_id, process_rule_id, batch, name, position, processing_started_at, parsing_completed_at, splitting_completed_at, indexing_completed_at, completed_at, stopped_at, disabled_at) VALUES (%(account_id)s::UUID, %(dataset_id)s::UUID, %(upload_file_id)s::UUID, %(process_rule_id)s::UUID, %(batch)s, %(name)s, %(position)s, %(processing_started_at)s, %(parsing_completed_at)s, %(splitting_completed_at)s, %(indexing_completed_at)s, %(completed_at)s, %(stopped_at)s, %(disabled_at)s) RETURNING document.id, document.character_count, document.token_count, document.error, document.enabled, document.status, document.updated_at, document.created_at
[2024-10-06 11:45:39,033.033] base.py -> _exec_single_context line:1908 [INFO]: [cached since 65.62s ago] {'account_id': '46db30d1-3199-4e79-a0cd-abf12fa6858f', 'dataset_id': UUID('f3f28f75-8e60-4eba-b6df-4d1b390bbd89'), 'upload_file_id': UUID('60c0138a-0901-45c0-8e0f-50b359a82727'), 'process_rule_id': UUID('10a3597a-0035-4e6c-9fb4-4f84af175115'), 'batch': '20241006114539853202', 'name': 'LLMOps 项目提示词大全.md', 'position': 3, 'processing_started_at': None, 'parsing_completed_at': None, 'splitting_completed_at': None, 'indexing_completed_at': None, 'completed_at': None, 'stopped_at': None, 'disabled_at': None}
[2024-10-06 11:45:39,034.034] base.py -> _commit_impl line:1146 [INFO]: COMMIT
[2024-10-06 11:45:39,056.056] base.py -> _begin_impl line:1103 [INFO]: BEGIN (implicit)
[2024-10-06 11:45:39,057.057] base.py -> _exec_single_context line:1903 [INFO]: SELECT document.id AS document_id, document.account_id AS document_account_id, document.dataset_id AS document_dataset_id, document.upload_file_id AS document_upload_file_id, document.process_rule_id AS document_process_rule_id, document.batch AS document_batch, document.name AS document_name, document.position AS document_position, document.character_count AS document_character_count, document.token_count AS document_token_count, document.processing_started_at AS document_processing_started_at, document.parsing_completed_at AS document_parsing_completed_at, document.splitting_completed_at AS document_splitting_completed_at, document.indexing_completed_at AS document_indexing_completed_at, document.completed_at AS document_completed_at, document.stopped_at AS document_stopped_at, document.error AS document_error, document.enabled AS document_enabled, document.disabled_at AS document_disabled_at, document.status AS document_status, document.updated_at AS document_updated_at, document.created_at AS document_created_at 
FROM document 
WHERE document.id = %(pk_1)s::UUID
[2024-10-06 11:45:39,057.057] base.py -> _exec_single_context line:1908 [INFO]: [cached since 65.61s ago] {'pk_1': UUID('8c24903c-0184-4d08-9308-136d971949d3')}
[2024-10-06 11:45:39,097.097] base.py -> _rollback_impl line:1129 [INFO]: ROLLBACK
[2024-10-06 11:45:39,097.097] _internal.py -> _log line:96 [INFO]: 127.0.0.1 - - [06/Oct/2024 11:45:39] "POST /datasets/f3f28f75-8e60-4eba-b6df-4d1b390bbd89/documents HTTP/1.1" 200 -
[2024-10-06 11:48:09,150.150] _internal.py -> _log line:96 [INFO]:  * Detected change in 'D:\\Code\\llmops\\llmops-api\\internal\\handler\\app_handler.py', reloading
[2024-10-06 11:48:09,877.877] _internal.py -> _log line:96 [INFO]:  * Restarting with stat
[2024-10-06 11:48:32,223.223] _internal.py -> _log line:96 [WARNING]:  * Debugger is active!
[2024-10-06 11:48:32,228.228] _internal.py -> _log line:96 [INFO]:  * Debugger PIN: 102-324-223
[2024-10-06 11:49:47,356.356] _internal.py -> _log line:96 [INFO]:  * Detected change in 'D:\\Code\\llmops\\llmops-api\\internal\\handler\\app_handler.py', reloading
[2024-10-06 11:49:48,003.003] _internal.py -> _log line:96 [INFO]:  * Restarting with stat
[2024-10-06 11:50:07,858.858] _internal.py -> _log line:96 [WARNING]:  * Debugger is active!
[2024-10-06 11:50:07,861.861] _internal.py -> _log line:96 [INFO]:  * Debugger PIN: 102-324-223
[2024-10-06 11:50:10,796.796] _internal.py -> _log line:96 [INFO]: 127.0.0.1 - - [06/Oct/2024 11:50:10] "GET /ping HTTP/1.1" 200 -
[2024-10-06 12:06:25,139.139] base.py -> _exec_single_context line:1903 [INFO]: select pg_catalog.version()
[2024-10-06 12:06:25,139.139] base.py -> _exec_single_context line:1908 [INFO]: [raw sql] {}
[2024-10-06 12:06:25,140.140] base.py -> _exec_single_context line:1903 [INFO]: select current_schema()
[2024-10-06 12:06:25,140.140] base.py -> _exec_single_context line:1908 [INFO]: [raw sql] {}
[2024-10-06 12:06:25,140.140] base.py -> _exec_single_context line:1903 [INFO]: show standard_conforming_strings
[2024-10-06 12:06:25,140.140] base.py -> _exec_single_context line:1908 [INFO]: [raw sql] {}
[2024-10-06 12:06:25,141.141] base.py -> _begin_impl line:1103 [INFO]: BEGIN (implicit)
[2024-10-06 12:06:25,142.142] base.py -> _exec_single_context line:1903 [INFO]: SELECT dataset.id AS dataset_id, dataset.account_id AS dataset_account_id, dataset.name AS dataset_name, dataset.icon AS dataset_icon, dataset.description AS dataset_description, dataset.updated_at AS dataset_updated_at, dataset.created_at AS dataset_created_at 
FROM dataset 
WHERE dataset.id = %(pk_1)s::UUID
[2024-10-06 12:06:25,143.143] base.py -> _exec_single_context line:1908 [INFO]: [generated in 0.00015s] {'pk_1': UUID('f3f28f75-8e60-4eba-b6df-4d1b390bbd89')}
[2024-10-06 12:06:25,145.145] base.py -> _exec_single_context line:1903 [INFO]: SELECT upload_file.id AS upload_file_id, upload_file.account_id AS upload_file_account_id, upload_file.name AS upload_file_name, upload_file.key AS upload_file_key, upload_file.size AS upload_file_size, upload_file.extension AS upload_file_extension, upload_file.mime_type AS upload_file_mime_type, upload_file.hash AS upload_file_hash, upload_file.updated_at AS upload_file_updated_at, upload_file.created_at AS upload_file_created_at 
FROM upload_file 
WHERE upload_file.account_id = %(account_id_1)s::UUID AND upload_file.id IN (%(id_1_1)s::UUID)
[2024-10-06 12:06:25,145.145] base.py -> _exec_single_context line:1908 [INFO]: [generated in 0.00028s] {'account_id_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f', 'id_1_1': '7b82638b-83ac-4590-b413-5dce0a799e7e'}
[2024-10-06 12:06:25,146.146] base.py -> _exec_single_context line:1903 [INFO]: INSERT INTO process_rule (account_id, dataset_id, mode, rule) VALUES (%(account_id)s::UUID, %(dataset_id)s::UUID, %(mode)s, %(rule)s) RETURNING process_rule.id, process_rule.updated_at, process_rule.created_at
[2024-10-06 12:06:25,146.146] base.py -> _exec_single_context line:1908 [INFO]: [generated in 0.00023s] {'account_id': '46db30d1-3199-4e79-a0cd-abf12fa6858f', 'dataset_id': UUID('f3f28f75-8e60-4eba-b6df-4d1b390bbd89'), 'mode': 'automatic', 'rule': '{"pre_process_rules": [{"id": "remove_extra_space", "enabled": true}, {"id": "remove_url_and_email", "enabled": true}], "segment": {"separators": ["\ ... (15 characters truncated) ... "\\u3002|\\uff01|\\uff1f", "\\\\.\\\\s|\\\\!\\\\s|\\\\?\\\\s", "\\uff1b|;\\\\s", "\\uff0c|,\\\\s", " ", ""], "chunk_size": 500, "chunk_overlap": 50}}'}
[2024-10-06 12:06:25,147.147] base.py -> _commit_impl line:1146 [INFO]: COMMIT
[2024-10-06 12:06:25,152.152] base.py -> _begin_impl line:1103 [INFO]: BEGIN (implicit)
[2024-10-06 12:06:25,154.154] base.py -> _exec_single_context line:1903 [INFO]: SELECT document.id AS document_id, document.account_id AS document_account_id, document.dataset_id AS document_dataset_id, document.upload_file_id AS document_upload_file_id, document.process_rule_id AS document_process_rule_id, document.batch AS document_batch, document.name AS document_name, document.position AS document_position, document.character_count AS document_character_count, document.token_count AS document_token_count, document.processing_started_at AS document_processing_started_at, document.parsing_completed_at AS document_parsing_completed_at, document.splitting_completed_at AS document_splitting_completed_at, document.indexing_completed_at AS document_indexing_completed_at, document.completed_at AS document_completed_at, document.stopped_at AS document_stopped_at, document.error AS document_error, document.enabled AS document_enabled, document.disabled_at AS document_disabled_at, document.status AS document_status, document.updated_at AS document_updated_at, document.created_at AS document_created_at 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID ORDER BY document.position DESC 
 LIMIT %(param_1)s
[2024-10-06 12:06:25,155.155] base.py -> _exec_single_context line:1908 [INFO]: [generated in 0.00024s] {'dataset_id_1': UUID('f3f28f75-8e60-4eba-b6df-4d1b390bbd89'), 'param_1': 1}
[2024-10-06 12:06:25,156.156] base.py -> _exec_single_context line:1903 [INFO]: SELECT upload_file.id AS upload_file_id, upload_file.account_id AS upload_file_account_id, upload_file.name AS upload_file_name, upload_file.key AS upload_file_key, upload_file.size AS upload_file_size, upload_file.extension AS upload_file_extension, upload_file.mime_type AS upload_file_mime_type, upload_file.hash AS upload_file_hash, upload_file.updated_at AS upload_file_updated_at, upload_file.created_at AS upload_file_created_at 
FROM upload_file 
WHERE upload_file.id = %(pk_1)s::UUID
[2024-10-06 12:06:25,156.156] base.py -> _exec_single_context line:1908 [INFO]: [generated in 0.00017s] {'pk_1': UUID('7b82638b-83ac-4590-b413-5dce0a799e7e')}
[2024-10-06 12:06:25,158.158] base.py -> _exec_single_context line:1903 [INFO]: SELECT process_rule.id AS process_rule_id, process_rule.account_id AS process_rule_account_id, process_rule.dataset_id AS process_rule_dataset_id, process_rule.mode AS process_rule_mode, process_rule.rule AS process_rule_rule, process_rule.updated_at AS process_rule_updated_at, process_rule.created_at AS process_rule_created_at 
FROM process_rule 
WHERE process_rule.id = %(pk_1)s::UUID
[2024-10-06 12:06:25,158.158] base.py -> _exec_single_context line:1908 [INFO]: [generated in 0.00019s] {'pk_1': UUID('db193a4d-3411-4bbb-a8c4-9bdd4726d2f9')}
[2024-10-06 12:06:25,159.159] base.py -> _exec_single_context line:1903 [INFO]: INSERT INTO document (account_id, dataset_id, upload_file_id, process_rule_id, batch, name, position, processing_started_at, parsing_completed_at, splitting_completed_at, indexing_completed_at, completed_at, stopped_at, disabled_at) VALUES (%(account_id)s::UUID, %(dataset_id)s::UUID, %(upload_file_id)s::UUID, %(process_rule_id)s::UUID, %(batch)s, %(name)s, %(position)s, %(processing_started_at)s, %(parsing_completed_at)s, %(splitting_completed_at)s, %(indexing_completed_at)s, %(completed_at)s, %(stopped_at)s, %(disabled_at)s) RETURNING document.id, document.character_count, document.token_count, document.error, document.enabled, document.status, document.updated_at, document.created_at
[2024-10-06 12:06:25,160.160] base.py -> _exec_single_context line:1908 [INFO]: [generated in 0.00019s] {'account_id': '46db30d1-3199-4e79-a0cd-abf12fa6858f', 'dataset_id': UUID('f3f28f75-8e60-4eba-b6df-4d1b390bbd89'), 'upload_file_id': UUID('7b82638b-83ac-4590-b413-5dce0a799e7e'), 'process_rule_id': UUID('db193a4d-3411-4bbb-a8c4-9bdd4726d2f9'), 'batch': '20241006120625957238', 'name': '项目API文档-完整.md', 'position': 1, 'processing_started_at': None, 'parsing_completed_at': None, 'splitting_completed_at': None, 'indexing_completed_at': None, 'completed_at': None, 'stopped_at': None, 'disabled_at': None}
[2024-10-06 12:06:25,160.160] base.py -> _commit_impl line:1146 [INFO]: COMMIT
[2024-10-06 12:06:25,162.162] base.py -> _begin_impl line:1103 [INFO]: BEGIN (implicit)
[2024-10-06 12:06:25,162.162] base.py -> _exec_single_context line:1903 [INFO]: SELECT document.id AS document_id, document.account_id AS document_account_id, document.dataset_id AS document_dataset_id, document.upload_file_id AS document_upload_file_id, document.process_rule_id AS document_process_rule_id, document.batch AS document_batch, document.name AS document_name, document.position AS document_position, document.character_count AS document_character_count, document.token_count AS document_token_count, document.processing_started_at AS document_processing_started_at, document.parsing_completed_at AS document_parsing_completed_at, document.splitting_completed_at AS document_splitting_completed_at, document.indexing_completed_at AS document_indexing_completed_at, document.completed_at AS document_completed_at, document.stopped_at AS document_stopped_at, document.error AS document_error, document.enabled AS document_enabled, document.disabled_at AS document_disabled_at, document.status AS document_status, document.updated_at AS document_updated_at, document.created_at AS document_created_at 
FROM document 
WHERE document.id = %(pk_1)s::UUID
[2024-10-06 12:06:25,163.163] base.py -> _exec_single_context line:1908 [INFO]: [generated in 0.00018s] {'pk_1': UUID('fb1e09c7-2d14-417c-ab37-8cae29981cf7')}
[2024-10-06 12:06:25,187.187] base.py -> _rollback_impl line:1129 [INFO]: ROLLBACK
[2024-10-06 12:06:25,188.188] _internal.py -> _log line:96 [INFO]: 127.0.0.1 - - [06/Oct/2024 12:06:25] "POST /datasets/f3f28f75-8e60-4eba-b6df-4d1b390bbd89/documents HTTP/1.1" 200 -
[2024-10-06 13:09:23,472.472] _internal.py -> _log line:96 [INFO]:  * Detected change in 'D:\\Code\\llmops\\llmops-api\\internal\\handler\\app_handler.py', reloading
[2024-10-06 13:09:24,258.258] _internal.py -> _log line:96 [INFO]:  * Restarting with stat
[2024-10-06 13:09:45,752.752] _internal.py -> _log line:96 [WARNING]:  * Debugger is active!
[2024-10-06 13:09:45,755.755] _internal.py -> _log line:96 [INFO]:  * Debugger PIN: 102-324-223
[2024-10-06 13:09:52,067.067] base.py -> _exec_single_context line:1903 [INFO]: select pg_catalog.version()
[2024-10-06 13:09:52,067.067] base.py -> _exec_single_context line:1908 [INFO]: [raw sql] {}
[2024-10-06 13:09:52,067.067] base.py -> _exec_single_context line:1903 [INFO]: select current_schema()
[2024-10-06 13:09:52,067.067] base.py -> _exec_single_context line:1908 [INFO]: [raw sql] {}
[2024-10-06 13:09:52,068.068] base.py -> _exec_single_context line:1903 [INFO]: show standard_conforming_strings
[2024-10-06 13:09:52,068.068] base.py -> _exec_single_context line:1908 [INFO]: [raw sql] {}
[2024-10-06 13:09:52,068.068] base.py -> _begin_impl line:1103 [INFO]: BEGIN (implicit)
[2024-10-06 13:09:52,070.070] base.py -> _exec_single_context line:1903 [INFO]: SELECT dataset.id AS dataset_id, dataset.account_id AS dataset_account_id, dataset.name AS dataset_name, dataset.icon AS dataset_icon, dataset.description AS dataset_description, dataset.updated_at AS dataset_updated_at, dataset.created_at AS dataset_created_at 
FROM dataset 
WHERE dataset.id = %(pk_1)s::UUID
[2024-10-06 13:09:52,070.070] base.py -> _exec_single_context line:1908 [INFO]: [generated in 0.00013s] {'pk_1': UUID('f3f28f75-8e60-4eba-b6df-4d1b390bbd89')}
[2024-10-06 13:09:52,072.072] base.py -> _exec_single_context line:1903 [INFO]: SELECT upload_file.id AS upload_file_id, upload_file.account_id AS upload_file_account_id, upload_file.name AS upload_file_name, upload_file.key AS upload_file_key, upload_file.size AS upload_file_size, upload_file.extension AS upload_file_extension, upload_file.mime_type AS upload_file_mime_type, upload_file.hash AS upload_file_hash, upload_file.updated_at AS upload_file_updated_at, upload_file.created_at AS upload_file_created_at 
FROM upload_file 
WHERE upload_file.account_id = %(account_id_1)s::UUID AND upload_file.id IN (%(id_1_1)s::UUID)
[2024-10-06 13:09:52,072.072] base.py -> _exec_single_context line:1908 [INFO]: [generated in 0.00026s] {'account_id_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f', 'id_1_1': '7b82638b-83ac-4590-b413-5dce0a799e7e'}
[2024-10-06 13:09:52,074.074] base.py -> _exec_single_context line:1903 [INFO]: INSERT INTO process_rule (account_id, dataset_id, mode, rule) VALUES (%(account_id)s::UUID, %(dataset_id)s::UUID, %(mode)s, %(rule)s) RETURNING process_rule.id, process_rule.updated_at, process_rule.created_at
[2024-10-06 13:09:52,074.074] base.py -> _exec_single_context line:1908 [INFO]: [generated in 0.00015s] {'account_id': '46db30d1-3199-4e79-a0cd-abf12fa6858f', 'dataset_id': UUID('f3f28f75-8e60-4eba-b6df-4d1b390bbd89'), 'mode': 'automatic', 'rule': '{"pre_process_rules": [{"id": "remove_extra_space", "enabled": true}, {"id": "remove_url_and_email", "enabled": true}], "segment": {"separators": ["\ ... (15 characters truncated) ... "\\u3002|\\uff01|\\uff1f", "\\\\.\\\\s|\\\\!\\\\s|\\\\?\\\\s", "\\uff1b|;\\\\s", "\\uff0c|,\\\\s", " ", ""], "chunk_size": 500, "chunk_overlap": 50}}'}
[2024-10-06 13:09:52,075.075] base.py -> _commit_impl line:1146 [INFO]: COMMIT
[2024-10-06 13:09:52,097.097] base.py -> _begin_impl line:1103 [INFO]: BEGIN (implicit)
[2024-10-06 13:09:52,099.099] base.py -> _exec_single_context line:1903 [INFO]: SELECT document.id AS document_id, document.account_id AS document_account_id, document.dataset_id AS document_dataset_id, document.upload_file_id AS document_upload_file_id, document.process_rule_id AS document_process_rule_id, document.batch AS document_batch, document.name AS document_name, document.position AS document_position, document.character_count AS document_character_count, document.token_count AS document_token_count, document.processing_started_at AS document_processing_started_at, document.parsing_completed_at AS document_parsing_completed_at, document.splitting_completed_at AS document_splitting_completed_at, document.indexing_completed_at AS document_indexing_completed_at, document.completed_at AS document_completed_at, document.stopped_at AS document_stopped_at, document.error AS document_error, document.enabled AS document_enabled, document.disabled_at AS document_disabled_at, document.status AS document_status, document.updated_at AS document_updated_at, document.created_at AS document_created_at 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID ORDER BY document.position DESC 
 LIMIT %(param_1)s
[2024-10-06 13:09:52,099.099] base.py -> _exec_single_context line:1908 [INFO]: [generated in 0.00015s] {'dataset_id_1': UUID('f3f28f75-8e60-4eba-b6df-4d1b390bbd89'), 'param_1': 1}
[2024-10-06 13:09:52,100.100] base.py -> _exec_single_context line:1903 [INFO]: SELECT upload_file.id AS upload_file_id, upload_file.account_id AS upload_file_account_id, upload_file.name AS upload_file_name, upload_file.key AS upload_file_key, upload_file.size AS upload_file_size, upload_file.extension AS upload_file_extension, upload_file.mime_type AS upload_file_mime_type, upload_file.hash AS upload_file_hash, upload_file.updated_at AS upload_file_updated_at, upload_file.created_at AS upload_file_created_at 
FROM upload_file 
WHERE upload_file.id = %(pk_1)s::UUID
[2024-10-06 13:09:52,100.100] base.py -> _exec_single_context line:1908 [INFO]: [generated in 0.00013s] {'pk_1': UUID('7b82638b-83ac-4590-b413-5dce0a799e7e')}
[2024-10-06 13:09:52,101.101] base.py -> _exec_single_context line:1903 [INFO]: SELECT process_rule.id AS process_rule_id, process_rule.account_id AS process_rule_account_id, process_rule.dataset_id AS process_rule_dataset_id, process_rule.mode AS process_rule_mode, process_rule.rule AS process_rule_rule, process_rule.updated_at AS process_rule_updated_at, process_rule.created_at AS process_rule_created_at 
FROM process_rule 
WHERE process_rule.id = %(pk_1)s::UUID
[2024-10-06 13:09:52,102.102] base.py -> _exec_single_context line:1908 [INFO]: [generated in 0.00013s] {'pk_1': UUID('bee5715a-c78a-4a8c-ba82-189a83585a99')}
[2024-10-06 13:09:52,103.103] base.py -> _exec_single_context line:1903 [INFO]: INSERT INTO document (account_id, dataset_id, upload_file_id, process_rule_id, batch, name, position, processing_started_at, parsing_completed_at, splitting_completed_at, indexing_completed_at, completed_at, stopped_at, disabled_at) VALUES (%(account_id)s::UUID, %(dataset_id)s::UUID, %(upload_file_id)s::UUID, %(process_rule_id)s::UUID, %(batch)s, %(name)s, %(position)s, %(processing_started_at)s, %(parsing_completed_at)s, %(splitting_completed_at)s, %(indexing_completed_at)s, %(completed_at)s, %(stopped_at)s, %(disabled_at)s) RETURNING document.id, document.character_count, document.token_count, document.error, document.enabled, document.status, document.updated_at, document.created_at
[2024-10-06 13:09:52,103.103] base.py -> _exec_single_context line:1908 [INFO]: [generated in 0.00014s] {'account_id': '46db30d1-3199-4e79-a0cd-abf12fa6858f', 'dataset_id': UUID('f3f28f75-8e60-4eba-b6df-4d1b390bbd89'), 'upload_file_id': UUID('7b82638b-83ac-4590-b413-5dce0a799e7e'), 'process_rule_id': UUID('bee5715a-c78a-4a8c-ba82-189a83585a99'), 'batch': '20241006130952215638', 'name': '项目API文档-完整.md', 'position': 2, 'processing_started_at': None, 'parsing_completed_at': None, 'splitting_completed_at': None, 'indexing_completed_at': None, 'completed_at': None, 'stopped_at': None, 'disabled_at': None}
[2024-10-06 13:09:52,103.103] base.py -> _commit_impl line:1146 [INFO]: COMMIT
[2024-10-06 13:09:52,107.107] base.py -> _begin_impl line:1103 [INFO]: BEGIN (implicit)
[2024-10-06 13:09:52,107.107] base.py -> _exec_single_context line:1903 [INFO]: SELECT document.id AS document_id, document.account_id AS document_account_id, document.dataset_id AS document_dataset_id, document.upload_file_id AS document_upload_file_id, document.process_rule_id AS document_process_rule_id, document.batch AS document_batch, document.name AS document_name, document.position AS document_position, document.character_count AS document_character_count, document.token_count AS document_token_count, document.processing_started_at AS document_processing_started_at, document.parsing_completed_at AS document_parsing_completed_at, document.splitting_completed_at AS document_splitting_completed_at, document.indexing_completed_at AS document_indexing_completed_at, document.completed_at AS document_completed_at, document.stopped_at AS document_stopped_at, document.error AS document_error, document.enabled AS document_enabled, document.disabled_at AS document_disabled_at, document.status AS document_status, document.updated_at AS document_updated_at, document.created_at AS document_created_at 
FROM document 
WHERE document.id = %(pk_1)s::UUID
[2024-10-06 13:09:52,107.107] base.py -> _exec_single_context line:1908 [INFO]: [generated in 0.00012s] {'pk_1': UUID('938bac54-2c53-4cbb-b74f-a65fa7319566')}
[2024-10-06 13:09:52,149.149] base.py -> _rollback_impl line:1129 [INFO]: ROLLBACK
[2024-10-06 13:09:52,150.150] _internal.py -> _log line:96 [INFO]: 127.0.0.1 - - [06/Oct/2024 13:09:52] "POST /datasets/f3f28f75-8e60-4eba-b6df-4d1b390bbd89/documents HTTP/1.1" 200 -
[2024-10-06 13:09:55,847.847] _internal.py -> _log line:96 [INFO]: 127.0.0.1 - - [06/Oct/2024 13:09:55] "GET /ping HTTP/1.1" 200 -
[2024-10-06 13:29:33,668.668] _internal.py -> _log line:96 [INFO]:  * Detected change in 'D:\\Code\\llmops\\llmops-api\\internal\\service\\embeddings_service.py', reloading
[2024-10-06 13:29:34,369.369] _internal.py -> _log line:96 [INFO]:  * Restarting with stat
[2024-10-06 13:31:19,396.396] _internal.py -> _log line:96 [INFO]: [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5000
[2024-10-06 13:31:19,396.396] _internal.py -> _log line:96 [INFO]: [33mPress CTRL+C to quit[0m
[2024-10-06 13:31:19,398.398] _internal.py -> _log line:96 [INFO]:  * Restarting with stat
[2024-10-06 13:31:33,552.552] _internal.py -> _log line:96 [WARNING]:  * Debugger is active!
[2024-10-06 13:31:33,558.558] _internal.py -> _log line:96 [INFO]:  * Debugger PIN: 102-324-223
[2024-10-06 13:40:36,220.220] _internal.py -> _log line:96 [INFO]:  * Detected change in 'D:\\Code\\llmops\\llmops-api\\internal\\service\\embeddings_service.py', reloading
[2024-10-06 13:40:36,812.812] _internal.py -> _log line:96 [INFO]:  * Restarting with stat
[2024-10-06 13:48:53,053.053] _internal.py -> _log line:96 [INFO]: [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5000
[2024-10-06 13:48:53,054.054] _internal.py -> _log line:96 [INFO]: [33mPress CTRL+C to quit[0m
[2024-10-06 13:48:53,056.056] _internal.py -> _log line:96 [INFO]:  * Restarting with stat
[2024-10-06 13:49:18,770.770] _internal.py -> _log line:96 [WARNING]:  * Debugger is active!
[2024-10-06 13:49:18,808.808] _internal.py -> _log line:96 [INFO]:  * Debugger PIN: 102-324-223
[2024-10-06 15:29:50,149.149] _internal.py -> _log line:96 [INFO]: [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5000
[2024-10-06 15:29:50,149.149] _internal.py -> _log line:96 [INFO]: [33mPress CTRL+C to quit[0m
[2024-10-06 15:29:50,150.150] _internal.py -> _log line:96 [INFO]:  * Restarting with stat
[2024-10-06 15:29:59,459.459] _internal.py -> _log line:96 [WARNING]:  * Debugger is active!
[2024-10-06 15:29:59,463.463] _internal.py -> _log line:96 [INFO]:  * Debugger PIN: 102-324-223
[2024-10-06 15:33:01,051.051] _internal.py -> _log line:96 [INFO]:  * Detected change in 'D:\\Code\\llmops\\llmops-api\\internal\\service\\embeddings_service.py', reloading
[2024-10-06 15:33:06,772.772] _internal.py -> _log line:96 [INFO]:  * Restarting with stat
[2024-10-06 15:35:39,879.879] _internal.py -> _log line:96 [INFO]: [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5000
[2024-10-06 15:35:39,879.879] _internal.py -> _log line:96 [INFO]: [33mPress CTRL+C to quit[0m
[2024-10-06 15:35:39,881.881] _internal.py -> _log line:96 [INFO]:  * Restarting with stat
[2024-10-06 15:35:47,783.783] _internal.py -> _log line:96 [WARNING]:  * Debugger is active!
[2024-10-06 15:35:47,788.788] _internal.py -> _log line:96 [INFO]:  * Debugger PIN: 102-324-223
[2024-10-06 15:36:15,019.019] base.py -> _exec_single_context line:1903 [INFO]: select pg_catalog.version()
[2024-10-06 15:36:15,019.019] base.py -> _exec_single_context line:1908 [INFO]: [raw sql] {}
[2024-10-06 15:36:15,020.020] base.py -> _exec_single_context line:1903 [INFO]: select current_schema()
[2024-10-06 15:36:15,020.020] base.py -> _exec_single_context line:1908 [INFO]: [raw sql] {}
[2024-10-06 15:36:15,020.020] base.py -> _exec_single_context line:1903 [INFO]: show standard_conforming_strings
[2024-10-06 15:36:15,021.021] base.py -> _exec_single_context line:1908 [INFO]: [raw sql] {}
[2024-10-06 15:36:15,021.021] base.py -> _begin_impl line:1103 [INFO]: BEGIN (implicit)
[2024-10-06 15:36:15,023.023] base.py -> _exec_single_context line:1903 [INFO]: SELECT dataset.id AS dataset_id, dataset.account_id AS dataset_account_id, dataset.name AS dataset_name, dataset.icon AS dataset_icon, dataset.description AS dataset_description, dataset.updated_at AS dataset_updated_at, dataset.created_at AS dataset_created_at 
FROM dataset 
WHERE dataset.id = %(pk_1)s::UUID
[2024-10-06 15:36:15,023.023] base.py -> _exec_single_context line:1908 [INFO]: [generated in 0.00021s] {'pk_1': UUID('f3f28f75-8e60-4eba-b6df-4d1b390bbd89')}
[2024-10-06 15:36:15,026.026] base.py -> _exec_single_context line:1903 [INFO]: SELECT upload_file.id AS upload_file_id, upload_file.account_id AS upload_file_account_id, upload_file.name AS upload_file_name, upload_file.key AS upload_file_key, upload_file.size AS upload_file_size, upload_file.extension AS upload_file_extension, upload_file.mime_type AS upload_file_mime_type, upload_file.hash AS upload_file_hash, upload_file.updated_at AS upload_file_updated_at, upload_file.created_at AS upload_file_created_at 
FROM upload_file 
WHERE upload_file.account_id = %(account_id_1)s::UUID AND upload_file.id IN (%(id_1_1)s::UUID)
[2024-10-06 15:36:15,027.027] base.py -> _exec_single_context line:1908 [INFO]: [generated in 0.00026s] {'account_id_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f', 'id_1_1': '7b82638b-83ac-4590-b413-5dce0a799e7e'}
[2024-10-06 15:36:15,029.029] base.py -> _exec_single_context line:1903 [INFO]: INSERT INTO process_rule (account_id, dataset_id, mode, rule) VALUES (%(account_id)s::UUID, %(dataset_id)s::UUID, %(mode)s, %(rule)s) RETURNING process_rule.id, process_rule.updated_at, process_rule.created_at
[2024-10-06 15:36:15,029.029] base.py -> _exec_single_context line:1908 [INFO]: [generated in 0.00024s] {'account_id': '46db30d1-3199-4e79-a0cd-abf12fa6858f', 'dataset_id': UUID('f3f28f75-8e60-4eba-b6df-4d1b390bbd89'), 'mode': 'automatic', 'rule': '{"pre_process_rules": [{"id": "remove_extra_space", "enabled": true}, {"id": "remove_url_and_email", "enabled": true}], "segment": {"separators": ["\ ... (15 characters truncated) ... "\\u3002|\\uff01|\\uff1f", "\\\\.\\\\s|\\\\!\\\\s|\\\\?\\\\s", "\\uff1b|;\\\\s", "\\uff0c|,\\\\s", " ", ""], "chunk_size": 500, "chunk_overlap": 50}}'}
[2024-10-06 15:36:15,030.030] base.py -> _commit_impl line:1146 [INFO]: COMMIT
[2024-10-06 15:36:15,040.040] base.py -> _begin_impl line:1103 [INFO]: BEGIN (implicit)
[2024-10-06 15:36:15,042.042] base.py -> _exec_single_context line:1903 [INFO]: SELECT document.id AS document_id, document.account_id AS document_account_id, document.dataset_id AS document_dataset_id, document.upload_file_id AS document_upload_file_id, document.process_rule_id AS document_process_rule_id, document.batch AS document_batch, document.name AS document_name, document.position AS document_position, document.character_count AS document_character_count, document.token_count AS document_token_count, document.processing_started_at AS document_processing_started_at, document.parsing_completed_at AS document_parsing_completed_at, document.splitting_completed_at AS document_splitting_completed_at, document.indexing_completed_at AS document_indexing_completed_at, document.completed_at AS document_completed_at, document.stopped_at AS document_stopped_at, document.error AS document_error, document.enabled AS document_enabled, document.disabled_at AS document_disabled_at, document.status AS document_status, document.updated_at AS document_updated_at, document.created_at AS document_created_at 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID ORDER BY document.position DESC 
 LIMIT %(param_1)s
[2024-10-06 15:36:15,043.043] base.py -> _exec_single_context line:1908 [INFO]: [generated in 0.00027s] {'dataset_id_1': UUID('f3f28f75-8e60-4eba-b6df-4d1b390bbd89'), 'param_1': 1}
[2024-10-06 15:36:15,045.045] base.py -> _exec_single_context line:1903 [INFO]: SELECT upload_file.id AS upload_file_id, upload_file.account_id AS upload_file_account_id, upload_file.name AS upload_file_name, upload_file.key AS upload_file_key, upload_file.size AS upload_file_size, upload_file.extension AS upload_file_extension, upload_file.mime_type AS upload_file_mime_type, upload_file.hash AS upload_file_hash, upload_file.updated_at AS upload_file_updated_at, upload_file.created_at AS upload_file_created_at 
FROM upload_file 
WHERE upload_file.id = %(pk_1)s::UUID
[2024-10-06 15:36:15,045.045] base.py -> _exec_single_context line:1908 [INFO]: [generated in 0.00020s] {'pk_1': UUID('7b82638b-83ac-4590-b413-5dce0a799e7e')}
[2024-10-06 15:36:15,047.047] base.py -> _exec_single_context line:1903 [INFO]: SELECT process_rule.id AS process_rule_id, process_rule.account_id AS process_rule_account_id, process_rule.dataset_id AS process_rule_dataset_id, process_rule.mode AS process_rule_mode, process_rule.rule AS process_rule_rule, process_rule.updated_at AS process_rule_updated_at, process_rule.created_at AS process_rule_created_at 
FROM process_rule 
WHERE process_rule.id = %(pk_1)s::UUID
[2024-10-06 15:36:15,047.047] base.py -> _exec_single_context line:1908 [INFO]: [generated in 0.00021s] {'pk_1': UUID('b65c1837-570a-49b1-930a-b2050d6581f4')}
[2024-10-06 15:36:15,049.049] base.py -> _exec_single_context line:1903 [INFO]: INSERT INTO document (account_id, dataset_id, upload_file_id, process_rule_id, batch, name, position, processing_started_at, parsing_completed_at, splitting_completed_at, indexing_completed_at, completed_at, stopped_at, disabled_at) VALUES (%(account_id)s::UUID, %(dataset_id)s::UUID, %(upload_file_id)s::UUID, %(process_rule_id)s::UUID, %(batch)s, %(name)s, %(position)s, %(processing_started_at)s, %(parsing_completed_at)s, %(splitting_completed_at)s, %(indexing_completed_at)s, %(completed_at)s, %(stopped_at)s, %(disabled_at)s) RETURNING document.id, document.character_count, document.token_count, document.error, document.enabled, document.status, document.updated_at, document.created_at
[2024-10-06 15:36:15,049.049] base.py -> _exec_single_context line:1908 [INFO]: [generated in 0.00024s] {'account_id': '46db30d1-3199-4e79-a0cd-abf12fa6858f', 'dataset_id': UUID('f3f28f75-8e60-4eba-b6df-4d1b390bbd89'), 'upload_file_id': UUID('7b82638b-83ac-4590-b413-5dce0a799e7e'), 'process_rule_id': UUID('b65c1837-570a-49b1-930a-b2050d6581f4'), 'batch': '20241006153615795160', 'name': '项目API文档-完整.md', 'position': 3, 'processing_started_at': None, 'parsing_completed_at': None, 'splitting_completed_at': None, 'indexing_completed_at': None, 'completed_at': None, 'stopped_at': None, 'disabled_at': None}
[2024-10-06 15:36:15,050.050] base.py -> _commit_impl line:1146 [INFO]: COMMIT
[2024-10-06 15:36:15,069.069] base.py -> _begin_impl line:1103 [INFO]: BEGIN (implicit)
[2024-10-06 15:36:15,070.070] base.py -> _exec_single_context line:1903 [INFO]: SELECT document.id AS document_id, document.account_id AS document_account_id, document.dataset_id AS document_dataset_id, document.upload_file_id AS document_upload_file_id, document.process_rule_id AS document_process_rule_id, document.batch AS document_batch, document.name AS document_name, document.position AS document_position, document.character_count AS document_character_count, document.token_count AS document_token_count, document.processing_started_at AS document_processing_started_at, document.parsing_completed_at AS document_parsing_completed_at, document.splitting_completed_at AS document_splitting_completed_at, document.indexing_completed_at AS document_indexing_completed_at, document.completed_at AS document_completed_at, document.stopped_at AS document_stopped_at, document.error AS document_error, document.enabled AS document_enabled, document.disabled_at AS document_disabled_at, document.status AS document_status, document.updated_at AS document_updated_at, document.created_at AS document_created_at 
FROM document 
WHERE document.id = %(pk_1)s::UUID
[2024-10-06 15:36:15,070.070] base.py -> _exec_single_context line:1908 [INFO]: [generated in 0.00024s] {'pk_1': UUID('e1afb195-12be-44e7-baf6-ebc03904b796')}
[2024-10-06 15:36:15,142.142] base.py -> _rollback_impl line:1129 [INFO]: ROLLBACK
[2024-10-06 15:36:15,142.142] _internal.py -> _log line:96 [INFO]: 127.0.0.1 - - [06/Oct/2024 15:36:15] "POST /datasets/f3f28f75-8e60-4eba-b6df-4d1b390bbd89/documents HTTP/1.1" 200 -
[2024-10-06 15:42:32,913.913] _internal.py -> _log line:96 [INFO]:  * Detected change in 'D:\\Code\\llmops\\llmops-api\\internal\\service\\embeddings_service.py', reloading
[2024-10-06 15:42:33,571.571] _internal.py -> _log line:96 [INFO]:  * Restarting with stat
[2024-10-06 15:42:41,929.929] _internal.py -> _log line:96 [WARNING]:  * Debugger is active!
[2024-10-06 15:42:41,932.932] _internal.py -> _log line:96 [INFO]:  * Debugger PIN: 102-324-223
[2024-10-06 15:45:07,915.915] _internal.py -> _log line:96 [INFO]: [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5000
[2024-10-06 15:45:07,915.915] _internal.py -> _log line:96 [INFO]: [33mPress CTRL+C to quit[0m
[2024-10-06 15:45:07,916.916] _internal.py -> _log line:96 [INFO]:  * Restarting with stat
[2024-10-06 15:45:34,319.319] _internal.py -> _log line:96 [INFO]: [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5000
[2024-10-06 15:45:34,319.319] _internal.py -> _log line:96 [INFO]: [33mPress CTRL+C to quit[0m
[2024-10-06 15:45:34,320.320] _internal.py -> _log line:96 [INFO]:  * Restarting with stat
[2024-10-06 15:45:42,159.159] _internal.py -> _log line:96 [WARNING]:  * Debugger is active!
[2024-10-06 15:45:42,162.162] _internal.py -> _log line:96 [INFO]:  * Debugger PIN: 102-324-223
[2024-10-06 15:46:07,895.895] _internal.py -> _log line:96 [INFO]: [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5000
[2024-10-06 15:46:07,895.895] _internal.py -> _log line:96 [INFO]: [33mPress CTRL+C to quit[0m
[2024-10-06 15:46:37,707.707] _internal.py -> _log line:96 [INFO]: [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5000
[2024-10-06 15:46:37,707.707] _internal.py -> _log line:96 [INFO]: [33mPress CTRL+C to quit[0m
[2024-10-06 15:46:37,708.708] _internal.py -> _log line:96 [INFO]:  * Restarting with stat
[2024-10-06 15:46:45,922.922] _internal.py -> _log line:96 [WARNING]:  * Debugger is active!
[2024-10-06 15:46:45,928.928] _internal.py -> _log line:96 [INFO]:  * Debugger PIN: 102-324-223
[2024-10-06 15:48:50,543.543] base.py -> _exec_single_context line:1903 [INFO]: select pg_catalog.version()
[2024-10-06 15:48:50,543.543] base.py -> _exec_single_context line:1908 [INFO]: [raw sql] {}
[2024-10-06 15:48:50,544.544] base.py -> _exec_single_context line:1903 [INFO]: select current_schema()
[2024-10-06 15:48:50,544.544] base.py -> _exec_single_context line:1908 [INFO]: [raw sql] {}
[2024-10-06 15:48:50,544.544] base.py -> _exec_single_context line:1903 [INFO]: show standard_conforming_strings
[2024-10-06 15:48:50,545.545] base.py -> _exec_single_context line:1908 [INFO]: [raw sql] {}
[2024-10-06 15:48:50,545.545] base.py -> _begin_impl line:1103 [INFO]: BEGIN (implicit)
[2024-10-06 15:48:50,546.546] base.py -> _exec_single_context line:1903 [INFO]: SELECT dataset.id AS dataset_id, dataset.account_id AS dataset_account_id, dataset.name AS dataset_name, dataset.icon AS dataset_icon, dataset.description AS dataset_description, dataset.updated_at AS dataset_updated_at, dataset.created_at AS dataset_created_at 
FROM dataset 
WHERE dataset.id = %(pk_1)s::UUID
[2024-10-06 15:48:50,546.546] base.py -> _exec_single_context line:1908 [INFO]: [generated in 0.00013s] {'pk_1': UUID('f3f28f75-8e60-4eba-b6df-4d1b390bbd89')}
[2024-10-06 15:48:50,548.548] base.py -> _exec_single_context line:1903 [INFO]: SELECT upload_file.id AS upload_file_id, upload_file.account_id AS upload_file_account_id, upload_file.name AS upload_file_name, upload_file.key AS upload_file_key, upload_file.size AS upload_file_size, upload_file.extension AS upload_file_extension, upload_file.mime_type AS upload_file_mime_type, upload_file.hash AS upload_file_hash, upload_file.updated_at AS upload_file_updated_at, upload_file.created_at AS upload_file_created_at 
FROM upload_file 
WHERE upload_file.account_id = %(account_id_1)s::UUID AND upload_file.id IN (%(id_1_1)s::UUID)
[2024-10-06 15:48:50,548.548] base.py -> _exec_single_context line:1908 [INFO]: [generated in 0.00018s] {'account_id_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f', 'id_1_1': '7b82638b-83ac-4590-b413-5dce0a799e7e'}
[2024-10-06 15:48:50,550.550] base.py -> _exec_single_context line:1903 [INFO]: INSERT INTO process_rule (account_id, dataset_id, mode, rule) VALUES (%(account_id)s::UUID, %(dataset_id)s::UUID, %(mode)s, %(rule)s) RETURNING process_rule.id, process_rule.updated_at, process_rule.created_at
[2024-10-06 15:48:50,550.550] base.py -> _exec_single_context line:1908 [INFO]: [generated in 0.00017s] {'account_id': '46db30d1-3199-4e79-a0cd-abf12fa6858f', 'dataset_id': UUID('f3f28f75-8e60-4eba-b6df-4d1b390bbd89'), 'mode': 'automatic', 'rule': '{"pre_process_rules": [{"id": "remove_extra_space", "enabled": true}, {"id": "remove_url_and_email", "enabled": true}], "segment": {"separators": ["\ ... (15 characters truncated) ... "\\u3002|\\uff01|\\uff1f", "\\\\.\\\\s|\\\\!\\\\s|\\\\?\\\\s", "\\uff1b|;\\\\s", "\\uff0c|,\\\\s", " ", ""], "chunk_size": 500, "chunk_overlap": 50}}'}
[2024-10-06 15:48:50,552.552] base.py -> _commit_impl line:1146 [INFO]: COMMIT
[2024-10-06 15:48:50,568.568] base.py -> _begin_impl line:1103 [INFO]: BEGIN (implicit)
[2024-10-06 15:48:50,570.570] base.py -> _exec_single_context line:1903 [INFO]: SELECT document.id AS document_id, document.account_id AS document_account_id, document.dataset_id AS document_dataset_id, document.upload_file_id AS document_upload_file_id, document.process_rule_id AS document_process_rule_id, document.batch AS document_batch, document.name AS document_name, document.position AS document_position, document.character_count AS document_character_count, document.token_count AS document_token_count, document.processing_started_at AS document_processing_started_at, document.parsing_completed_at AS document_parsing_completed_at, document.splitting_completed_at AS document_splitting_completed_at, document.indexing_completed_at AS document_indexing_completed_at, document.completed_at AS document_completed_at, document.stopped_at AS document_stopped_at, document.error AS document_error, document.enabled AS document_enabled, document.disabled_at AS document_disabled_at, document.status AS document_status, document.updated_at AS document_updated_at, document.created_at AS document_created_at 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID ORDER BY document.position DESC 
 LIMIT %(param_1)s
[2024-10-06 15:48:50,570.570] base.py -> _exec_single_context line:1908 [INFO]: [generated in 0.00020s] {'dataset_id_1': UUID('f3f28f75-8e60-4eba-b6df-4d1b390bbd89'), 'param_1': 1}
[2024-10-06 15:48:50,571.571] base.py -> _exec_single_context line:1903 [INFO]: SELECT upload_file.id AS upload_file_id, upload_file.account_id AS upload_file_account_id, upload_file.name AS upload_file_name, upload_file.key AS upload_file_key, upload_file.size AS upload_file_size, upload_file.extension AS upload_file_extension, upload_file.mime_type AS upload_file_mime_type, upload_file.hash AS upload_file_hash, upload_file.updated_at AS upload_file_updated_at, upload_file.created_at AS upload_file_created_at 
FROM upload_file 
WHERE upload_file.id = %(pk_1)s::UUID
[2024-10-06 15:48:50,572.572] base.py -> _exec_single_context line:1908 [INFO]: [generated in 0.00013s] {'pk_1': UUID('7b82638b-83ac-4590-b413-5dce0a799e7e')}
[2024-10-06 15:48:50,573.573] base.py -> _exec_single_context line:1903 [INFO]: SELECT process_rule.id AS process_rule_id, process_rule.account_id AS process_rule_account_id, process_rule.dataset_id AS process_rule_dataset_id, process_rule.mode AS process_rule_mode, process_rule.rule AS process_rule_rule, process_rule.updated_at AS process_rule_updated_at, process_rule.created_at AS process_rule_created_at 
FROM process_rule 
WHERE process_rule.id = %(pk_1)s::UUID
[2024-10-06 15:48:50,573.573] base.py -> _exec_single_context line:1908 [INFO]: [generated in 0.00012s] {'pk_1': UUID('5d585181-1751-423e-bd30-10dcbcd8d8ca')}
[2024-10-06 15:48:50,574.574] base.py -> _exec_single_context line:1903 [INFO]: INSERT INTO document (account_id, dataset_id, upload_file_id, process_rule_id, batch, name, position, processing_started_at, parsing_completed_at, splitting_completed_at, indexing_completed_at, completed_at, stopped_at, disabled_at) VALUES (%(account_id)s::UUID, %(dataset_id)s::UUID, %(upload_file_id)s::UUID, %(process_rule_id)s::UUID, %(batch)s, %(name)s, %(position)s, %(processing_started_at)s, %(parsing_completed_at)s, %(splitting_completed_at)s, %(indexing_completed_at)s, %(completed_at)s, %(stopped_at)s, %(disabled_at)s) RETURNING document.id, document.character_count, document.token_count, document.error, document.enabled, document.status, document.updated_at, document.created_at
[2024-10-06 15:48:50,574.574] base.py -> _exec_single_context line:1908 [INFO]: [generated in 0.00016s] {'account_id': '46db30d1-3199-4e79-a0cd-abf12fa6858f', 'dataset_id': UUID('f3f28f75-8e60-4eba-b6df-4d1b390bbd89'), 'upload_file_id': UUID('7b82638b-83ac-4590-b413-5dce0a799e7e'), 'process_rule_id': UUID('5d585181-1751-423e-bd30-10dcbcd8d8ca'), 'batch': '20241006154850921987', 'name': '项目API文档-完整.md', 'position': 4, 'processing_started_at': None, 'parsing_completed_at': None, 'splitting_completed_at': None, 'indexing_completed_at': None, 'completed_at': None, 'stopped_at': None, 'disabled_at': None}
[2024-10-06 15:48:50,575.575] base.py -> _commit_impl line:1146 [INFO]: COMMIT
[2024-10-06 15:48:50,579.579] base.py -> _begin_impl line:1103 [INFO]: BEGIN (implicit)
[2024-10-06 15:48:50,579.579] base.py -> _exec_single_context line:1903 [INFO]: SELECT document.id AS document_id, document.account_id AS document_account_id, document.dataset_id AS document_dataset_id, document.upload_file_id AS document_upload_file_id, document.process_rule_id AS document_process_rule_id, document.batch AS document_batch, document.name AS document_name, document.position AS document_position, document.character_count AS document_character_count, document.token_count AS document_token_count, document.processing_started_at AS document_processing_started_at, document.parsing_completed_at AS document_parsing_completed_at, document.splitting_completed_at AS document_splitting_completed_at, document.indexing_completed_at AS document_indexing_completed_at, document.completed_at AS document_completed_at, document.stopped_at AS document_stopped_at, document.error AS document_error, document.enabled AS document_enabled, document.disabled_at AS document_disabled_at, document.status AS document_status, document.updated_at AS document_updated_at, document.created_at AS document_created_at 
FROM document 
WHERE document.id = %(pk_1)s::UUID
[2024-10-06 15:48:50,579.579] base.py -> _exec_single_context line:1908 [INFO]: [generated in 0.00014s] {'pk_1': UUID('6a9f8ac9-7246-44e9-a1fe-603c4c0b7ce5')}
[2024-10-06 15:48:50,611.611] base.py -> _rollback_impl line:1129 [INFO]: ROLLBACK
[2024-10-06 15:48:50,612.612] _internal.py -> _log line:96 [INFO]: 127.0.0.1 - - [06/Oct/2024 15:48:50] "POST /datasets/f3f28f75-8e60-4eba-b6df-4d1b390bbd89/documents HTTP/1.1" 200 -
[2024-10-06 15:55:31,184.184] _internal.py -> _log line:96 [INFO]:  * Detected change in 'D:\\Code\\llmops\\llmops-api\\internal\\service\\indexing_service.py', reloading
[2024-10-06 15:55:31,801.801] _internal.py -> _log line:96 [INFO]:  * Restarting with stat
[2024-10-06 15:55:39,911.911] _internal.py -> _log line:96 [WARNING]:  * Debugger is active!
[2024-10-06 15:55:39,915.915] _internal.py -> _log line:96 [INFO]:  * Debugger PIN: 102-324-223
[2024-10-06 15:55:53,765.765] base.py -> _exec_single_context line:1903 [INFO]: select pg_catalog.version()
[2024-10-06 15:55:53,765.765] base.py -> _exec_single_context line:1908 [INFO]: [raw sql] {}
[2024-10-06 15:55:53,766.766] base.py -> _exec_single_context line:1903 [INFO]: select current_schema()
[2024-10-06 15:55:53,766.766] base.py -> _exec_single_context line:1908 [INFO]: [raw sql] {}
[2024-10-06 15:55:53,767.767] base.py -> _exec_single_context line:1903 [INFO]: show standard_conforming_strings
[2024-10-06 15:55:53,767.767] base.py -> _exec_single_context line:1908 [INFO]: [raw sql] {}
[2024-10-06 15:55:53,767.767] base.py -> _begin_impl line:1103 [INFO]: BEGIN (implicit)
[2024-10-06 15:55:53,769.769] base.py -> _exec_single_context line:1903 [INFO]: SELECT dataset.id AS dataset_id, dataset.account_id AS dataset_account_id, dataset.name AS dataset_name, dataset.icon AS dataset_icon, dataset.description AS dataset_description, dataset.updated_at AS dataset_updated_at, dataset.created_at AS dataset_created_at 
FROM dataset 
WHERE dataset.id = %(pk_1)s::UUID
[2024-10-06 15:55:53,769.769] base.py -> _exec_single_context line:1908 [INFO]: [generated in 0.00013s] {'pk_1': UUID('f3f28f75-8e60-4eba-b6df-4d1b390bbd89')}
[2024-10-06 15:55:53,771.771] base.py -> _exec_single_context line:1903 [INFO]: SELECT upload_file.id AS upload_file_id, upload_file.account_id AS upload_file_account_id, upload_file.name AS upload_file_name, upload_file.key AS upload_file_key, upload_file.size AS upload_file_size, upload_file.extension AS upload_file_extension, upload_file.mime_type AS upload_file_mime_type, upload_file.hash AS upload_file_hash, upload_file.updated_at AS upload_file_updated_at, upload_file.created_at AS upload_file_created_at 
FROM upload_file 
WHERE upload_file.account_id = %(account_id_1)s::UUID AND upload_file.id IN (%(id_1_1)s::UUID)
[2024-10-06 15:55:53,771.771] base.py -> _exec_single_context line:1908 [INFO]: [generated in 0.00016s] {'account_id_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f', 'id_1_1': '7b82638b-83ac-4590-b413-5dce0a799e7e'}
[2024-10-06 15:55:53,772.772] base.py -> _exec_single_context line:1903 [INFO]: INSERT INTO process_rule (account_id, dataset_id, mode, rule) VALUES (%(account_id)s::UUID, %(dataset_id)s::UUID, %(mode)s, %(rule)s) RETURNING process_rule.id, process_rule.updated_at, process_rule.created_at
[2024-10-06 15:55:53,772.772] base.py -> _exec_single_context line:1908 [INFO]: [generated in 0.00015s] {'account_id': '46db30d1-3199-4e79-a0cd-abf12fa6858f', 'dataset_id': UUID('f3f28f75-8e60-4eba-b6df-4d1b390bbd89'), 'mode': 'automatic', 'rule': '{"pre_process_rules": [{"id": "remove_extra_space", "enabled": true}, {"id": "remove_url_and_email", "enabled": true}], "segment": {"separators": ["\ ... (15 characters truncated) ... "\\u3002|\\uff01|\\uff1f", "\\\\.\\\\s|\\\\!\\\\s|\\\\?\\\\s", "\\uff1b|;\\\\s", "\\uff0c|,\\\\s", " ", ""], "chunk_size": 500, "chunk_overlap": 50}}'}
[2024-10-06 15:55:53,774.774] base.py -> _commit_impl line:1146 [INFO]: COMMIT
[2024-10-06 15:55:53,789.789] base.py -> _begin_impl line:1103 [INFO]: BEGIN (implicit)
[2024-10-06 15:55:53,791.791] base.py -> _exec_single_context line:1903 [INFO]: SELECT document.id AS document_id, document.account_id AS document_account_id, document.dataset_id AS document_dataset_id, document.upload_file_id AS document_upload_file_id, document.process_rule_id AS document_process_rule_id, document.batch AS document_batch, document.name AS document_name, document.position AS document_position, document.character_count AS document_character_count, document.token_count AS document_token_count, document.processing_started_at AS document_processing_started_at, document.parsing_completed_at AS document_parsing_completed_at, document.splitting_completed_at AS document_splitting_completed_at, document.indexing_completed_at AS document_indexing_completed_at, document.completed_at AS document_completed_at, document.stopped_at AS document_stopped_at, document.error AS document_error, document.enabled AS document_enabled, document.disabled_at AS document_disabled_at, document.status AS document_status, document.updated_at AS document_updated_at, document.created_at AS document_created_at 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID ORDER BY document.position DESC 
 LIMIT %(param_1)s
[2024-10-06 15:55:53,791.791] base.py -> _exec_single_context line:1908 [INFO]: [generated in 0.00017s] {'dataset_id_1': UUID('f3f28f75-8e60-4eba-b6df-4d1b390bbd89'), 'param_1': 1}
[2024-10-06 15:55:53,792.792] base.py -> _exec_single_context line:1903 [INFO]: SELECT upload_file.id AS upload_file_id, upload_file.account_id AS upload_file_account_id, upload_file.name AS upload_file_name, upload_file.key AS upload_file_key, upload_file.size AS upload_file_size, upload_file.extension AS upload_file_extension, upload_file.mime_type AS upload_file_mime_type, upload_file.hash AS upload_file_hash, upload_file.updated_at AS upload_file_updated_at, upload_file.created_at AS upload_file_created_at 
FROM upload_file 
WHERE upload_file.id = %(pk_1)s::UUID
[2024-10-06 15:55:53,793.793] base.py -> _exec_single_context line:1908 [INFO]: [generated in 0.00014s] {'pk_1': UUID('7b82638b-83ac-4590-b413-5dce0a799e7e')}
[2024-10-06 15:55:53,794.794] base.py -> _exec_single_context line:1903 [INFO]: SELECT process_rule.id AS process_rule_id, process_rule.account_id AS process_rule_account_id, process_rule.dataset_id AS process_rule_dataset_id, process_rule.mode AS process_rule_mode, process_rule.rule AS process_rule_rule, process_rule.updated_at AS process_rule_updated_at, process_rule.created_at AS process_rule_created_at 
FROM process_rule 
WHERE process_rule.id = %(pk_1)s::UUID
[2024-10-06 15:55:53,794.794] base.py -> _exec_single_context line:1908 [INFO]: [generated in 0.00013s] {'pk_1': UUID('6f8122f0-e52f-43e4-bee9-c4ed1484f040')}
[2024-10-06 15:55:53,795.795] base.py -> _exec_single_context line:1903 [INFO]: INSERT INTO document (account_id, dataset_id, upload_file_id, process_rule_id, batch, name, position, processing_started_at, parsing_completed_at, splitting_completed_at, indexing_completed_at, completed_at, stopped_at, disabled_at) VALUES (%(account_id)s::UUID, %(dataset_id)s::UUID, %(upload_file_id)s::UUID, %(process_rule_id)s::UUID, %(batch)s, %(name)s, %(position)s, %(processing_started_at)s, %(parsing_completed_at)s, %(splitting_completed_at)s, %(indexing_completed_at)s, %(completed_at)s, %(stopped_at)s, %(disabled_at)s) RETURNING document.id, document.character_count, document.token_count, document.error, document.enabled, document.status, document.updated_at, document.created_at
[2024-10-06 15:55:53,795.795] base.py -> _exec_single_context line:1908 [INFO]: [generated in 0.00019s] {'account_id': '46db30d1-3199-4e79-a0cd-abf12fa6858f', 'dataset_id': UUID('f3f28f75-8e60-4eba-b6df-4d1b390bbd89'), 'upload_file_id': UUID('7b82638b-83ac-4590-b413-5dce0a799e7e'), 'process_rule_id': UUID('6f8122f0-e52f-43e4-bee9-c4ed1484f040'), 'batch': '20241006155553132665', 'name': '项目API文档-完整.md', 'position': 1, 'processing_started_at': None, 'parsing_completed_at': None, 'splitting_completed_at': None, 'indexing_completed_at': None, 'completed_at': None, 'stopped_at': None, 'disabled_at': None}
[2024-10-06 15:55:53,796.796] base.py -> _commit_impl line:1146 [INFO]: COMMIT
[2024-10-06 15:55:53,814.814] base.py -> _begin_impl line:1103 [INFO]: BEGIN (implicit)
[2024-10-06 15:55:53,815.815] base.py -> _exec_single_context line:1903 [INFO]: SELECT document.id AS document_id, document.account_id AS document_account_id, document.dataset_id AS document_dataset_id, document.upload_file_id AS document_upload_file_id, document.process_rule_id AS document_process_rule_id, document.batch AS document_batch, document.name AS document_name, document.position AS document_position, document.character_count AS document_character_count, document.token_count AS document_token_count, document.processing_started_at AS document_processing_started_at, document.parsing_completed_at AS document_parsing_completed_at, document.splitting_completed_at AS document_splitting_completed_at, document.indexing_completed_at AS document_indexing_completed_at, document.completed_at AS document_completed_at, document.stopped_at AS document_stopped_at, document.error AS document_error, document.enabled AS document_enabled, document.disabled_at AS document_disabled_at, document.status AS document_status, document.updated_at AS document_updated_at, document.created_at AS document_created_at 
FROM document 
WHERE document.id = %(pk_1)s::UUID
[2024-10-06 15:55:53,815.815] base.py -> _exec_single_context line:1908 [INFO]: [generated in 0.00014s] {'pk_1': UUID('ee621723-bee2-4c3b-bb9a-eca8ac473528')}
[2024-10-06 15:55:53,847.847] base.py -> _rollback_impl line:1129 [INFO]: ROLLBACK
[2024-10-06 15:55:53,848.848] _internal.py -> _log line:96 [INFO]: 127.0.0.1 - - [06/Oct/2024 15:55:53] "POST /datasets/f3f28f75-8e60-4eba-b6df-4d1b390bbd89/documents HTTP/1.1" 200 -
[2024-10-06 16:02:40,424.424] _internal.py -> _log line:96 [INFO]:  * Detected change in 'D:\\Code\\llmops\\llmops-api\\internal\\service\\indexing_service.py', reloading
[2024-10-06 16:02:41,124.124] _internal.py -> _log line:96 [INFO]:  * Restarting with stat
[2024-10-06 16:02:49,427.427] _internal.py -> _log line:96 [WARNING]:  * Debugger is active!
[2024-10-06 16:02:49,430.430] _internal.py -> _log line:96 [INFO]:  * Debugger PIN: 102-324-223
[2024-10-06 16:03:49,920.920] base.py -> _exec_single_context line:1903 [INFO]: select pg_catalog.version()
[2024-10-06 16:03:49,920.920] base.py -> _exec_single_context line:1908 [INFO]: [raw sql] {}
[2024-10-06 16:03:49,921.921] base.py -> _exec_single_context line:1903 [INFO]: select current_schema()
[2024-10-06 16:03:49,921.921] base.py -> _exec_single_context line:1908 [INFO]: [raw sql] {}
[2024-10-06 16:03:49,922.922] base.py -> _exec_single_context line:1903 [INFO]: show standard_conforming_strings
[2024-10-06 16:03:49,922.922] base.py -> _exec_single_context line:1908 [INFO]: [raw sql] {}
[2024-10-06 16:03:49,922.922] base.py -> _begin_impl line:1103 [INFO]: BEGIN (implicit)
[2024-10-06 16:03:49,924.924] base.py -> _exec_single_context line:1903 [INFO]: SELECT dataset.id AS dataset_id, dataset.account_id AS dataset_account_id, dataset.name AS dataset_name, dataset.icon AS dataset_icon, dataset.description AS dataset_description, dataset.updated_at AS dataset_updated_at, dataset.created_at AS dataset_created_at 
FROM dataset 
WHERE dataset.id = %(pk_1)s::UUID
[2024-10-06 16:03:49,924.924] base.py -> _exec_single_context line:1908 [INFO]: [generated in 0.00017s] {'pk_1': UUID('f3f28f75-8e60-4eba-b6df-4d1b390bbd89')}
[2024-10-06 16:03:49,926.926] base.py -> _exec_single_context line:1903 [INFO]: SELECT upload_file.id AS upload_file_id, upload_file.account_id AS upload_file_account_id, upload_file.name AS upload_file_name, upload_file.key AS upload_file_key, upload_file.size AS upload_file_size, upload_file.extension AS upload_file_extension, upload_file.mime_type AS upload_file_mime_type, upload_file.hash AS upload_file_hash, upload_file.updated_at AS upload_file_updated_at, upload_file.created_at AS upload_file_created_at 
FROM upload_file 
WHERE upload_file.account_id = %(account_id_1)s::UUID AND upload_file.id IN (%(id_1_1)s::UUID)
[2024-10-06 16:03:49,926.926] base.py -> _exec_single_context line:1908 [INFO]: [generated in 0.00016s] {'account_id_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f', 'id_1_1': '7b82638b-83ac-4590-b413-5dce0a799e7e'}
[2024-10-06 16:03:49,927.927] base.py -> _exec_single_context line:1903 [INFO]: INSERT INTO process_rule (account_id, dataset_id, mode, rule) VALUES (%(account_id)s::UUID, %(dataset_id)s::UUID, %(mode)s, %(rule)s) RETURNING process_rule.id, process_rule.updated_at, process_rule.created_at
[2024-10-06 16:03:49,927.927] base.py -> _exec_single_context line:1908 [INFO]: [generated in 0.00015s] {'account_id': '46db30d1-3199-4e79-a0cd-abf12fa6858f', 'dataset_id': UUID('f3f28f75-8e60-4eba-b6df-4d1b390bbd89'), 'mode': 'automatic', 'rule': '{"pre_process_rules": [{"id": "remove_extra_space", "enabled": true}, {"id": "remove_url_and_email", "enabled": true}], "segment": {"separators": ["\ ... (15 characters truncated) ... "\\u3002|\\uff01|\\uff1f", "\\\\.\\\\s|\\\\!\\\\s|\\\\?\\\\s", "\\uff1b|;\\\\s", "\\uff0c|,\\\\s", " ", ""], "chunk_size": 500, "chunk_overlap": 50}}'}
[2024-10-06 16:03:49,929.929] base.py -> _commit_impl line:1146 [INFO]: COMMIT
[2024-10-06 16:03:49,944.944] base.py -> _begin_impl line:1103 [INFO]: BEGIN (implicit)
[2024-10-06 16:03:49,946.946] base.py -> _exec_single_context line:1903 [INFO]: SELECT document.id AS document_id, document.account_id AS document_account_id, document.dataset_id AS document_dataset_id, document.upload_file_id AS document_upload_file_id, document.process_rule_id AS document_process_rule_id, document.batch AS document_batch, document.name AS document_name, document.position AS document_position, document.character_count AS document_character_count, document.token_count AS document_token_count, document.processing_started_at AS document_processing_started_at, document.parsing_completed_at AS document_parsing_completed_at, document.splitting_completed_at AS document_splitting_completed_at, document.indexing_completed_at AS document_indexing_completed_at, document.completed_at AS document_completed_at, document.stopped_at AS document_stopped_at, document.error AS document_error, document.enabled AS document_enabled, document.disabled_at AS document_disabled_at, document.status AS document_status, document.updated_at AS document_updated_at, document.created_at AS document_created_at 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID ORDER BY document.position DESC 
 LIMIT %(param_1)s
[2024-10-06 16:03:49,946.946] base.py -> _exec_single_context line:1908 [INFO]: [generated in 0.00018s] {'dataset_id_1': UUID('f3f28f75-8e60-4eba-b6df-4d1b390bbd89'), 'param_1': 1}
[2024-10-06 16:03:49,948.948] base.py -> _exec_single_context line:1903 [INFO]: SELECT upload_file.id AS upload_file_id, upload_file.account_id AS upload_file_account_id, upload_file.name AS upload_file_name, upload_file.key AS upload_file_key, upload_file.size AS upload_file_size, upload_file.extension AS upload_file_extension, upload_file.mime_type AS upload_file_mime_type, upload_file.hash AS upload_file_hash, upload_file.updated_at AS upload_file_updated_at, upload_file.created_at AS upload_file_created_at 
FROM upload_file 
WHERE upload_file.id = %(pk_1)s::UUID
[2024-10-06 16:03:49,948.948] base.py -> _exec_single_context line:1908 [INFO]: [generated in 0.00018s] {'pk_1': UUID('7b82638b-83ac-4590-b413-5dce0a799e7e')}
[2024-10-06 16:03:49,949.949] base.py -> _exec_single_context line:1903 [INFO]: SELECT process_rule.id AS process_rule_id, process_rule.account_id AS process_rule_account_id, process_rule.dataset_id AS process_rule_dataset_id, process_rule.mode AS process_rule_mode, process_rule.rule AS process_rule_rule, process_rule.updated_at AS process_rule_updated_at, process_rule.created_at AS process_rule_created_at 
FROM process_rule 
WHERE process_rule.id = %(pk_1)s::UUID
[2024-10-06 16:03:49,949.949] base.py -> _exec_single_context line:1908 [INFO]: [generated in 0.00013s] {'pk_1': UUID('0582a124-95cc-4a4b-8939-40787ef602d8')}
[2024-10-06 16:03:49,951.951] base.py -> _exec_single_context line:1903 [INFO]: INSERT INTO document (account_id, dataset_id, upload_file_id, process_rule_id, batch, name, position, processing_started_at, parsing_completed_at, splitting_completed_at, indexing_completed_at, completed_at, stopped_at, disabled_at) VALUES (%(account_id)s::UUID, %(dataset_id)s::UUID, %(upload_file_id)s::UUID, %(process_rule_id)s::UUID, %(batch)s, %(name)s, %(position)s, %(processing_started_at)s, %(parsing_completed_at)s, %(splitting_completed_at)s, %(indexing_completed_at)s, %(completed_at)s, %(stopped_at)s, %(disabled_at)s) RETURNING document.id, document.character_count, document.token_count, document.error, document.enabled, document.status, document.updated_at, document.created_at
[2024-10-06 16:03:49,951.951] base.py -> _exec_single_context line:1908 [INFO]: [generated in 0.00015s] {'account_id': '46db30d1-3199-4e79-a0cd-abf12fa6858f', 'dataset_id': UUID('f3f28f75-8e60-4eba-b6df-4d1b390bbd89'), 'upload_file_id': UUID('7b82638b-83ac-4590-b413-5dce0a799e7e'), 'process_rule_id': UUID('0582a124-95cc-4a4b-8939-40787ef602d8'), 'batch': '20241006160349513338', 'name': '项目API文档-完整.md', 'position': 2, 'processing_started_at': None, 'parsing_completed_at': None, 'splitting_completed_at': None, 'indexing_completed_at': None, 'completed_at': None, 'stopped_at': None, 'disabled_at': None}
[2024-10-06 16:03:49,951.951] base.py -> _commit_impl line:1146 [INFO]: COMMIT
[2024-10-06 16:03:49,969.969] base.py -> _begin_impl line:1103 [INFO]: BEGIN (implicit)
[2024-10-06 16:03:49,969.969] base.py -> _exec_single_context line:1903 [INFO]: SELECT document.id AS document_id, document.account_id AS document_account_id, document.dataset_id AS document_dataset_id, document.upload_file_id AS document_upload_file_id, document.process_rule_id AS document_process_rule_id, document.batch AS document_batch, document.name AS document_name, document.position AS document_position, document.character_count AS document_character_count, document.token_count AS document_token_count, document.processing_started_at AS document_processing_started_at, document.parsing_completed_at AS document_parsing_completed_at, document.splitting_completed_at AS document_splitting_completed_at, document.indexing_completed_at AS document_indexing_completed_at, document.completed_at AS document_completed_at, document.stopped_at AS document_stopped_at, document.error AS document_error, document.enabled AS document_enabled, document.disabled_at AS document_disabled_at, document.status AS document_status, document.updated_at AS document_updated_at, document.created_at AS document_created_at 
FROM document 
WHERE document.id = %(pk_1)s::UUID
[2024-10-06 16:03:49,970.970] base.py -> _exec_single_context line:1908 [INFO]: [generated in 0.00013s] {'pk_1': UUID('f4f53d7b-5e01-4e0c-8a81-f7705c89e5bf')}
[2024-10-06 16:03:50,002.002] base.py -> _rollback_impl line:1129 [INFO]: ROLLBACK
[2024-10-06 16:03:50,003.003] _internal.py -> _log line:96 [INFO]: 127.0.0.1 - - [06/Oct/2024 16:03:50] "POST /datasets/f3f28f75-8e60-4eba-b6df-4d1b390bbd89/documents HTTP/1.1" 200 -
[2024-10-06 16:05:57,298.298] _internal.py -> _log line:96 [INFO]:  * Detected change in 'D:\\Code\\llmops\\llmops-api\\internal\\service\\indexing_service.py', reloading
[2024-10-06 16:05:57,942.942] _internal.py -> _log line:96 [INFO]:  * Restarting with stat
[2024-10-06 16:06:06,200.200] _internal.py -> _log line:96 [WARNING]:  * Debugger is active!
[2024-10-06 16:06:06,203.203] _internal.py -> _log line:96 [INFO]:  * Debugger PIN: 102-324-223
[2024-10-06 16:06:09,303.303] _internal.py -> _log line:96 [INFO]:  * Detected change in 'D:\\Code\\llmops\\llmops-api\\internal\\service\\indexing_service.py', reloading
[2024-10-06 16:06:10,024.024] _internal.py -> _log line:96 [INFO]:  * Restarting with stat
[2024-10-06 16:06:19,091.091] _internal.py -> _log line:96 [WARNING]:  * Debugger is active!
[2024-10-06 16:06:19,095.095] _internal.py -> _log line:96 [INFO]:  * Debugger PIN: 102-324-223
[2024-10-06 16:07:20,547.547] base.py -> _exec_single_context line:1903 [INFO]: select pg_catalog.version()
[2024-10-06 16:07:20,547.547] base.py -> _exec_single_context line:1908 [INFO]: [raw sql] {}
[2024-10-06 16:07:20,548.548] base.py -> _exec_single_context line:1903 [INFO]: select current_schema()
[2024-10-06 16:07:20,548.548] base.py -> _exec_single_context line:1908 [INFO]: [raw sql] {}
[2024-10-06 16:07:20,549.549] base.py -> _exec_single_context line:1903 [INFO]: show standard_conforming_strings
[2024-10-06 16:07:20,549.549] base.py -> _exec_single_context line:1908 [INFO]: [raw sql] {}
[2024-10-06 16:07:20,549.549] base.py -> _begin_impl line:1103 [INFO]: BEGIN (implicit)
[2024-10-06 16:07:20,550.550] base.py -> _exec_single_context line:1903 [INFO]: SELECT dataset.id AS dataset_id, dataset.account_id AS dataset_account_id, dataset.name AS dataset_name, dataset.icon AS dataset_icon, dataset.description AS dataset_description, dataset.updated_at AS dataset_updated_at, dataset.created_at AS dataset_created_at 
FROM dataset 
WHERE dataset.id = %(pk_1)s::UUID
[2024-10-06 16:07:20,550.550] base.py -> _exec_single_context line:1908 [INFO]: [generated in 0.00013s] {'pk_1': UUID('f3f28f75-8e60-4eba-b6df-4d1b390bbd89')}
[2024-10-06 16:07:20,552.552] base.py -> _exec_single_context line:1903 [INFO]: SELECT upload_file.id AS upload_file_id, upload_file.account_id AS upload_file_account_id, upload_file.name AS upload_file_name, upload_file.key AS upload_file_key, upload_file.size AS upload_file_size, upload_file.extension AS upload_file_extension, upload_file.mime_type AS upload_file_mime_type, upload_file.hash AS upload_file_hash, upload_file.updated_at AS upload_file_updated_at, upload_file.created_at AS upload_file_created_at 
FROM upload_file 
WHERE upload_file.account_id = %(account_id_1)s::UUID AND upload_file.id IN (%(id_1_1)s::UUID)
[2024-10-06 16:07:20,553.553] base.py -> _exec_single_context line:1908 [INFO]: [generated in 0.00017s] {'account_id_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f', 'id_1_1': '7b82638b-83ac-4590-b413-5dce0a799e7e'}
[2024-10-06 16:07:20,554.554] base.py -> _exec_single_context line:1903 [INFO]: INSERT INTO process_rule (account_id, dataset_id, mode, rule) VALUES (%(account_id)s::UUID, %(dataset_id)s::UUID, %(mode)s, %(rule)s) RETURNING process_rule.id, process_rule.updated_at, process_rule.created_at
[2024-10-06 16:07:20,554.554] base.py -> _exec_single_context line:1908 [INFO]: [generated in 0.00015s] {'account_id': '46db30d1-3199-4e79-a0cd-abf12fa6858f', 'dataset_id': UUID('f3f28f75-8e60-4eba-b6df-4d1b390bbd89'), 'mode': 'automatic', 'rule': '{"pre_process_rules": [{"id": "remove_extra_space", "enabled": true}, {"id": "remove_url_and_email", "enabled": true}], "segment": {"separators": ["\ ... (15 characters truncated) ... "\\u3002|\\uff01|\\uff1f", "\\\\.\\\\s|\\\\!\\\\s|\\\\?\\\\s", "\\uff1b|;\\\\s", "\\uff0c|,\\\\s", " ", ""], "chunk_size": 500, "chunk_overlap": 50}}'}
[2024-10-06 16:07:20,556.556] base.py -> _commit_impl line:1146 [INFO]: COMMIT
[2024-10-06 16:07:20,593.593] base.py -> _begin_impl line:1103 [INFO]: BEGIN (implicit)
[2024-10-06 16:07:20,594.594] base.py -> _exec_single_context line:1903 [INFO]: SELECT document.id AS document_id, document.account_id AS document_account_id, document.dataset_id AS document_dataset_id, document.upload_file_id AS document_upload_file_id, document.process_rule_id AS document_process_rule_id, document.batch AS document_batch, document.name AS document_name, document.position AS document_position, document.character_count AS document_character_count, document.token_count AS document_token_count, document.processing_started_at AS document_processing_started_at, document.parsing_completed_at AS document_parsing_completed_at, document.splitting_completed_at AS document_splitting_completed_at, document.indexing_completed_at AS document_indexing_completed_at, document.completed_at AS document_completed_at, document.stopped_at AS document_stopped_at, document.error AS document_error, document.enabled AS document_enabled, document.disabled_at AS document_disabled_at, document.status AS document_status, document.updated_at AS document_updated_at, document.created_at AS document_created_at 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID ORDER BY document.position DESC 
 LIMIT %(param_1)s
[2024-10-06 16:07:20,594.594] base.py -> _exec_single_context line:1908 [INFO]: [generated in 0.00020s] {'dataset_id_1': UUID('f3f28f75-8e60-4eba-b6df-4d1b390bbd89'), 'param_1': 1}
[2024-10-06 16:07:20,596.596] base.py -> _exec_single_context line:1903 [INFO]: SELECT upload_file.id AS upload_file_id, upload_file.account_id AS upload_file_account_id, upload_file.name AS upload_file_name, upload_file.key AS upload_file_key, upload_file.size AS upload_file_size, upload_file.extension AS upload_file_extension, upload_file.mime_type AS upload_file_mime_type, upload_file.hash AS upload_file_hash, upload_file.updated_at AS upload_file_updated_at, upload_file.created_at AS upload_file_created_at 
FROM upload_file 
WHERE upload_file.id = %(pk_1)s::UUID
[2024-10-06 16:07:20,596.596] base.py -> _exec_single_context line:1908 [INFO]: [generated in 0.00015s] {'pk_1': UUID('7b82638b-83ac-4590-b413-5dce0a799e7e')}
[2024-10-06 16:07:20,597.597] base.py -> _exec_single_context line:1903 [INFO]: SELECT process_rule.id AS process_rule_id, process_rule.account_id AS process_rule_account_id, process_rule.dataset_id AS process_rule_dataset_id, process_rule.mode AS process_rule_mode, process_rule.rule AS process_rule_rule, process_rule.updated_at AS process_rule_updated_at, process_rule.created_at AS process_rule_created_at 
FROM process_rule 
WHERE process_rule.id = %(pk_1)s::UUID
[2024-10-06 16:07:20,597.597] base.py -> _exec_single_context line:1908 [INFO]: [generated in 0.00013s] {'pk_1': UUID('e52ea3f2-2333-4c57-a56f-56af20255af0')}
[2024-10-06 16:07:20,598.598] base.py -> _exec_single_context line:1903 [INFO]: INSERT INTO document (account_id, dataset_id, upload_file_id, process_rule_id, batch, name, position, processing_started_at, parsing_completed_at, splitting_completed_at, indexing_completed_at, completed_at, stopped_at, disabled_at) VALUES (%(account_id)s::UUID, %(dataset_id)s::UUID, %(upload_file_id)s::UUID, %(process_rule_id)s::UUID, %(batch)s, %(name)s, %(position)s, %(processing_started_at)s, %(parsing_completed_at)s, %(splitting_completed_at)s, %(indexing_completed_at)s, %(completed_at)s, %(stopped_at)s, %(disabled_at)s) RETURNING document.id, document.character_count, document.token_count, document.error, document.enabled, document.status, document.updated_at, document.created_at
[2024-10-06 16:07:20,599.599] base.py -> _exec_single_context line:1908 [INFO]: [generated in 0.00014s] {'account_id': '46db30d1-3199-4e79-a0cd-abf12fa6858f', 'dataset_id': UUID('f3f28f75-8e60-4eba-b6df-4d1b390bbd89'), 'upload_file_id': UUID('7b82638b-83ac-4590-b413-5dce0a799e7e'), 'process_rule_id': UUID('e52ea3f2-2333-4c57-a56f-56af20255af0'), 'batch': '20241006160720391487', 'name': '项目API文档-完整.md', 'position': 1, 'processing_started_at': None, 'parsing_completed_at': None, 'splitting_completed_at': None, 'indexing_completed_at': None, 'completed_at': None, 'stopped_at': None, 'disabled_at': None}
[2024-10-06 16:07:20,599.599] base.py -> _commit_impl line:1146 [INFO]: COMMIT
[2024-10-06 16:07:20,619.619] base.py -> _begin_impl line:1103 [INFO]: BEGIN (implicit)
[2024-10-06 16:07:20,620.620] base.py -> _exec_single_context line:1903 [INFO]: SELECT document.id AS document_id, document.account_id AS document_account_id, document.dataset_id AS document_dataset_id, document.upload_file_id AS document_upload_file_id, document.process_rule_id AS document_process_rule_id, document.batch AS document_batch, document.name AS document_name, document.position AS document_position, document.character_count AS document_character_count, document.token_count AS document_token_count, document.processing_started_at AS document_processing_started_at, document.parsing_completed_at AS document_parsing_completed_at, document.splitting_completed_at AS document_splitting_completed_at, document.indexing_completed_at AS document_indexing_completed_at, document.completed_at AS document_completed_at, document.stopped_at AS document_stopped_at, document.error AS document_error, document.enabled AS document_enabled, document.disabled_at AS document_disabled_at, document.status AS document_status, document.updated_at AS document_updated_at, document.created_at AS document_created_at 
FROM document 
WHERE document.id = %(pk_1)s::UUID
[2024-10-06 16:07:20,620.620] base.py -> _exec_single_context line:1908 [INFO]: [generated in 0.00013s] {'pk_1': UUID('35ccdce4-88e1-4e37-9eab-df2f4b055637')}
[2024-10-06 16:07:20,653.653] base.py -> _rollback_impl line:1129 [INFO]: ROLLBACK
[2024-10-06 16:07:20,653.653] _internal.py -> _log line:96 [INFO]: 127.0.0.1 - - [06/Oct/2024 16:07:20] "POST /datasets/f3f28f75-8e60-4eba-b6df-4d1b390bbd89/documents HTTP/1.1" 200 -
[2024-10-06 16:07:54,991.991] _internal.py -> _log line:96 [INFO]:  * Detected change in 'D:\\Code\\llmops\\llmops-api\\internal\\service\\indexing_service.py', reloading
[2024-10-06 16:07:55,695.695] _internal.py -> _log line:96 [INFO]:  * Restarting with stat
[2024-10-06 16:08:04,097.097] _internal.py -> _log line:96 [WARNING]:  * Debugger is active!
[2024-10-06 16:08:04,099.099] _internal.py -> _log line:96 [INFO]:  * Debugger PIN: 102-324-223
[2024-10-06 16:08:17,405.405] base.py -> _exec_single_context line:1903 [INFO]: select pg_catalog.version()
[2024-10-06 16:08:17,405.405] base.py -> _exec_single_context line:1908 [INFO]: [raw sql] {}
[2024-10-06 16:08:17,406.406] base.py -> _exec_single_context line:1903 [INFO]: select current_schema()
[2024-10-06 16:08:17,406.406] base.py -> _exec_single_context line:1908 [INFO]: [raw sql] {}
[2024-10-06 16:08:17,406.406] base.py -> _exec_single_context line:1903 [INFO]: show standard_conforming_strings
[2024-10-06 16:08:17,406.406] base.py -> _exec_single_context line:1908 [INFO]: [raw sql] {}
[2024-10-06 16:08:17,407.407] base.py -> _begin_impl line:1103 [INFO]: BEGIN (implicit)
[2024-10-06 16:08:17,408.408] base.py -> _exec_single_context line:1903 [INFO]: SELECT dataset.id AS dataset_id, dataset.account_id AS dataset_account_id, dataset.name AS dataset_name, dataset.icon AS dataset_icon, dataset.description AS dataset_description, dataset.updated_at AS dataset_updated_at, dataset.created_at AS dataset_created_at 
FROM dataset 
WHERE dataset.id = %(pk_1)s::UUID
[2024-10-06 16:08:17,408.408] base.py -> _exec_single_context line:1908 [INFO]: [generated in 0.00015s] {'pk_1': UUID('f3f28f75-8e60-4eba-b6df-4d1b390bbd89')}
[2024-10-06 16:08:17,410.410] base.py -> _exec_single_context line:1903 [INFO]: SELECT upload_file.id AS upload_file_id, upload_file.account_id AS upload_file_account_id, upload_file.name AS upload_file_name, upload_file.key AS upload_file_key, upload_file.size AS upload_file_size, upload_file.extension AS upload_file_extension, upload_file.mime_type AS upload_file_mime_type, upload_file.hash AS upload_file_hash, upload_file.updated_at AS upload_file_updated_at, upload_file.created_at AS upload_file_created_at 
FROM upload_file 
WHERE upload_file.account_id = %(account_id_1)s::UUID AND upload_file.id IN (%(id_1_1)s::UUID)
[2024-10-06 16:08:17,410.410] base.py -> _exec_single_context line:1908 [INFO]: [generated in 0.00020s] {'account_id_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f', 'id_1_1': '7b82638b-83ac-4590-b413-5dce0a799e7e'}
[2024-10-06 16:08:17,412.412] base.py -> _exec_single_context line:1903 [INFO]: INSERT INTO process_rule (account_id, dataset_id, mode, rule) VALUES (%(account_id)s::UUID, %(dataset_id)s::UUID, %(mode)s, %(rule)s) RETURNING process_rule.id, process_rule.updated_at, process_rule.created_at
[2024-10-06 16:08:17,412.412] base.py -> _exec_single_context line:1908 [INFO]: [generated in 0.00016s] {'account_id': '46db30d1-3199-4e79-a0cd-abf12fa6858f', 'dataset_id': UUID('f3f28f75-8e60-4eba-b6df-4d1b390bbd89'), 'mode': 'automatic', 'rule': '{"pre_process_rules": [{"id": "remove_extra_space", "enabled": true}, {"id": "remove_url_and_email", "enabled": true}], "segment": {"separators": ["\ ... (15 characters truncated) ... "\\u3002|\\uff01|\\uff1f", "\\\\.\\\\s|\\\\!\\\\s|\\\\?\\\\s", "\\uff1b|;\\\\s", "\\uff0c|,\\\\s", " ", ""], "chunk_size": 500, "chunk_overlap": 50}}'}
[2024-10-06 16:08:17,413.413] base.py -> _commit_impl line:1146 [INFO]: COMMIT
[2024-10-06 16:08:17,455.455] base.py -> _begin_impl line:1103 [INFO]: BEGIN (implicit)
[2024-10-06 16:08:17,455.455] base.py -> _exec_single_context line:1903 [INFO]: SELECT document.id AS document_id, document.account_id AS document_account_id, document.dataset_id AS document_dataset_id, document.upload_file_id AS document_upload_file_id, document.process_rule_id AS document_process_rule_id, document.batch AS document_batch, document.name AS document_name, document.position AS document_position, document.character_count AS document_character_count, document.token_count AS document_token_count, document.processing_started_at AS document_processing_started_at, document.parsing_completed_at AS document_parsing_completed_at, document.splitting_completed_at AS document_splitting_completed_at, document.indexing_completed_at AS document_indexing_completed_at, document.completed_at AS document_completed_at, document.stopped_at AS document_stopped_at, document.error AS document_error, document.enabled AS document_enabled, document.disabled_at AS document_disabled_at, document.status AS document_status, document.updated_at AS document_updated_at, document.created_at AS document_created_at 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID ORDER BY document.position DESC 
 LIMIT %(param_1)s
[2024-10-06 16:08:17,455.455] base.py -> _exec_single_context line:1908 [INFO]: [generated in 0.00017s] {'dataset_id_1': UUID('f3f28f75-8e60-4eba-b6df-4d1b390bbd89'), 'param_1': 1}
[2024-10-06 16:08:17,457.457] base.py -> _exec_single_context line:1903 [INFO]: SELECT upload_file.id AS upload_file_id, upload_file.account_id AS upload_file_account_id, upload_file.name AS upload_file_name, upload_file.key AS upload_file_key, upload_file.size AS upload_file_size, upload_file.extension AS upload_file_extension, upload_file.mime_type AS upload_file_mime_type, upload_file.hash AS upload_file_hash, upload_file.updated_at AS upload_file_updated_at, upload_file.created_at AS upload_file_created_at 
FROM upload_file 
WHERE upload_file.id = %(pk_1)s::UUID
[2024-10-06 16:08:17,457.457] base.py -> _exec_single_context line:1908 [INFO]: [generated in 0.00014s] {'pk_1': UUID('7b82638b-83ac-4590-b413-5dce0a799e7e')}
[2024-10-06 16:08:17,458.458] base.py -> _exec_single_context line:1903 [INFO]: SELECT process_rule.id AS process_rule_id, process_rule.account_id AS process_rule_account_id, process_rule.dataset_id AS process_rule_dataset_id, process_rule.mode AS process_rule_mode, process_rule.rule AS process_rule_rule, process_rule.updated_at AS process_rule_updated_at, process_rule.created_at AS process_rule_created_at 
FROM process_rule 
WHERE process_rule.id = %(pk_1)s::UUID
[2024-10-06 16:08:17,458.458] base.py -> _exec_single_context line:1908 [INFO]: [generated in 0.00013s] {'pk_1': UUID('e13f7f82-80c6-4677-af0a-b781df84f673')}
[2024-10-06 16:08:17,460.460] base.py -> _exec_single_context line:1903 [INFO]: INSERT INTO document (account_id, dataset_id, upload_file_id, process_rule_id, batch, name, position, processing_started_at, parsing_completed_at, splitting_completed_at, indexing_completed_at, completed_at, stopped_at, disabled_at) VALUES (%(account_id)s::UUID, %(dataset_id)s::UUID, %(upload_file_id)s::UUID, %(process_rule_id)s::UUID, %(batch)s, %(name)s, %(position)s, %(processing_started_at)s, %(parsing_completed_at)s, %(splitting_completed_at)s, %(indexing_completed_at)s, %(completed_at)s, %(stopped_at)s, %(disabled_at)s) RETURNING document.id, document.character_count, document.token_count, document.error, document.enabled, document.status, document.updated_at, document.created_at
[2024-10-06 16:08:17,460.460] base.py -> _exec_single_context line:1908 [INFO]: [generated in 0.00025s] {'account_id': '46db30d1-3199-4e79-a0cd-abf12fa6858f', 'dataset_id': UUID('f3f28f75-8e60-4eba-b6df-4d1b390bbd89'), 'upload_file_id': UUID('7b82638b-83ac-4590-b413-5dce0a799e7e'), 'process_rule_id': UUID('e13f7f82-80c6-4677-af0a-b781df84f673'), 'batch': '20241006160817146396', 'name': '项目API文档-完整.md', 'position': 1, 'processing_started_at': None, 'parsing_completed_at': None, 'splitting_completed_at': None, 'indexing_completed_at': None, 'completed_at': None, 'stopped_at': None, 'disabled_at': None}
[2024-10-06 16:08:17,460.460] base.py -> _commit_impl line:1146 [INFO]: COMMIT
[2024-10-06 16:08:17,492.492] base.py -> _begin_impl line:1103 [INFO]: BEGIN (implicit)
[2024-10-06 16:08:17,493.493] base.py -> _exec_single_context line:1903 [INFO]: SELECT document.id AS document_id, document.account_id AS document_account_id, document.dataset_id AS document_dataset_id, document.upload_file_id AS document_upload_file_id, document.process_rule_id AS document_process_rule_id, document.batch AS document_batch, document.name AS document_name, document.position AS document_position, document.character_count AS document_character_count, document.token_count AS document_token_count, document.processing_started_at AS document_processing_started_at, document.parsing_completed_at AS document_parsing_completed_at, document.splitting_completed_at AS document_splitting_completed_at, document.indexing_completed_at AS document_indexing_completed_at, document.completed_at AS document_completed_at, document.stopped_at AS document_stopped_at, document.error AS document_error, document.enabled AS document_enabled, document.disabled_at AS document_disabled_at, document.status AS document_status, document.updated_at AS document_updated_at, document.created_at AS document_created_at 
FROM document 
WHERE document.id = %(pk_1)s::UUID
[2024-10-06 16:08:17,493.493] base.py -> _exec_single_context line:1908 [INFO]: [generated in 0.00014s] {'pk_1': UUID('71afa6af-0a6c-48a8-b27d-43c3f0999dd0')}
[2024-10-06 16:08:17,530.530] base.py -> _rollback_impl line:1129 [INFO]: ROLLBACK
[2024-10-06 16:08:17,530.530] _internal.py -> _log line:96 [INFO]: 127.0.0.1 - - [06/Oct/2024 16:08:17] "POST /datasets/f3f28f75-8e60-4eba-b6df-4d1b390bbd89/documents HTTP/1.1" 200 -
[2024-10-06 16:11:45,763.763] _internal.py -> _log line:96 [INFO]:  * Detected change in 'D:\\Code\\llmops\\llmops-api\\internal\\service\\indexing_service.py', reloading
[2024-10-06 16:11:46,514.514] _internal.py -> _log line:96 [INFO]:  * Restarting with stat
[2024-10-06 16:11:54,907.907] _internal.py -> _log line:96 [WARNING]:  * Debugger is active!
[2024-10-06 16:11:54,910.910] _internal.py -> _log line:96 [INFO]:  * Debugger PIN: 102-324-223
[2024-10-06 16:12:15,139.139] base.py -> _exec_single_context line:1903 [INFO]: select pg_catalog.version()
[2024-10-06 16:12:15,140.140] base.py -> _exec_single_context line:1908 [INFO]: [raw sql] {}
[2024-10-06 16:12:15,140.140] base.py -> _exec_single_context line:1903 [INFO]: select current_schema()
[2024-10-06 16:12:15,140.140] base.py -> _exec_single_context line:1908 [INFO]: [raw sql] {}
[2024-10-06 16:12:15,141.141] base.py -> _exec_single_context line:1903 [INFO]: show standard_conforming_strings
[2024-10-06 16:12:15,141.141] base.py -> _exec_single_context line:1908 [INFO]: [raw sql] {}
[2024-10-06 16:12:15,141.141] base.py -> _begin_impl line:1103 [INFO]: BEGIN (implicit)
[2024-10-06 16:12:15,143.143] base.py -> _exec_single_context line:1903 [INFO]: SELECT dataset.id AS dataset_id, dataset.account_id AS dataset_account_id, dataset.name AS dataset_name, dataset.icon AS dataset_icon, dataset.description AS dataset_description, dataset.updated_at AS dataset_updated_at, dataset.created_at AS dataset_created_at 
FROM dataset 
WHERE dataset.id = %(pk_1)s::UUID
[2024-10-06 16:12:15,143.143] base.py -> _exec_single_context line:1908 [INFO]: [generated in 0.00013s] {'pk_1': UUID('f3f28f75-8e60-4eba-b6df-4d1b390bbd89')}
[2024-10-06 16:12:15,145.145] base.py -> _exec_single_context line:1903 [INFO]: SELECT upload_file.id AS upload_file_id, upload_file.account_id AS upload_file_account_id, upload_file.name AS upload_file_name, upload_file.key AS upload_file_key, upload_file.size AS upload_file_size, upload_file.extension AS upload_file_extension, upload_file.mime_type AS upload_file_mime_type, upload_file.hash AS upload_file_hash, upload_file.updated_at AS upload_file_updated_at, upload_file.created_at AS upload_file_created_at 
FROM upload_file 
WHERE upload_file.account_id = %(account_id_1)s::UUID AND upload_file.id IN (%(id_1_1)s::UUID)
[2024-10-06 16:12:15,145.145] base.py -> _exec_single_context line:1908 [INFO]: [generated in 0.00028s] {'account_id_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f', 'id_1_1': '7b82638b-83ac-4590-b413-5dce0a799e7e'}
[2024-10-06 16:12:15,147.147] base.py -> _exec_single_context line:1903 [INFO]: INSERT INTO process_rule (account_id, dataset_id, mode, rule) VALUES (%(account_id)s::UUID, %(dataset_id)s::UUID, %(mode)s, %(rule)s) RETURNING process_rule.id, process_rule.updated_at, process_rule.created_at
[2024-10-06 16:12:15,147.147] base.py -> _exec_single_context line:1908 [INFO]: [generated in 0.00020s] {'account_id': '46db30d1-3199-4e79-a0cd-abf12fa6858f', 'dataset_id': UUID('f3f28f75-8e60-4eba-b6df-4d1b390bbd89'), 'mode': 'automatic', 'rule': '{"pre_process_rules": [{"id": "remove_extra_space", "enabled": true}, {"id": "remove_url_and_email", "enabled": true}], "segment": {"separators": ["\ ... (15 characters truncated) ... "\\u3002|\\uff01|\\uff1f", "\\\\.\\\\s|\\\\!\\\\s|\\\\?\\\\s", "\\uff1b|;\\\\s", "\\uff0c|,\\\\s", " ", ""], "chunk_size": 500, "chunk_overlap": 50}}'}
[2024-10-06 16:12:15,148.148] base.py -> _commit_impl line:1146 [INFO]: COMMIT
[2024-10-06 16:12:15,165.165] base.py -> _begin_impl line:1103 [INFO]: BEGIN (implicit)
[2024-10-06 16:12:15,167.167] base.py -> _exec_single_context line:1903 [INFO]: SELECT document.id AS document_id, document.account_id AS document_account_id, document.dataset_id AS document_dataset_id, document.upload_file_id AS document_upload_file_id, document.process_rule_id AS document_process_rule_id, document.batch AS document_batch, document.name AS document_name, document.position AS document_position, document.character_count AS document_character_count, document.token_count AS document_token_count, document.processing_started_at AS document_processing_started_at, document.parsing_completed_at AS document_parsing_completed_at, document.splitting_completed_at AS document_splitting_completed_at, document.indexing_completed_at AS document_indexing_completed_at, document.completed_at AS document_completed_at, document.stopped_at AS document_stopped_at, document.error AS document_error, document.enabled AS document_enabled, document.disabled_at AS document_disabled_at, document.status AS document_status, document.updated_at AS document_updated_at, document.created_at AS document_created_at 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID ORDER BY document.position DESC 
 LIMIT %(param_1)s
[2024-10-06 16:12:15,167.167] base.py -> _exec_single_context line:1908 [INFO]: [generated in 0.00015s] {'dataset_id_1': UUID('f3f28f75-8e60-4eba-b6df-4d1b390bbd89'), 'param_1': 1}
[2024-10-06 16:12:15,168.168] base.py -> _exec_single_context line:1903 [INFO]: SELECT upload_file.id AS upload_file_id, upload_file.account_id AS upload_file_account_id, upload_file.name AS upload_file_name, upload_file.key AS upload_file_key, upload_file.size AS upload_file_size, upload_file.extension AS upload_file_extension, upload_file.mime_type AS upload_file_mime_type, upload_file.hash AS upload_file_hash, upload_file.updated_at AS upload_file_updated_at, upload_file.created_at AS upload_file_created_at 
FROM upload_file 
WHERE upload_file.id = %(pk_1)s::UUID
[2024-10-06 16:12:15,168.168] base.py -> _exec_single_context line:1908 [INFO]: [generated in 0.00013s] {'pk_1': UUID('7b82638b-83ac-4590-b413-5dce0a799e7e')}
[2024-10-06 16:12:15,169.169] base.py -> _exec_single_context line:1903 [INFO]: SELECT process_rule.id AS process_rule_id, process_rule.account_id AS process_rule_account_id, process_rule.dataset_id AS process_rule_dataset_id, process_rule.mode AS process_rule_mode, process_rule.rule AS process_rule_rule, process_rule.updated_at AS process_rule_updated_at, process_rule.created_at AS process_rule_created_at 
FROM process_rule 
WHERE process_rule.id = %(pk_1)s::UUID
[2024-10-06 16:12:15,170.170] base.py -> _exec_single_context line:1908 [INFO]: [generated in 0.00012s] {'pk_1': UUID('ceeb354f-2627-4d69-8eae-a8de99850f39')}
[2024-10-06 16:12:15,170.170] base.py -> _exec_single_context line:1903 [INFO]: INSERT INTO document (account_id, dataset_id, upload_file_id, process_rule_id, batch, name, position, processing_started_at, parsing_completed_at, splitting_completed_at, indexing_completed_at, completed_at, stopped_at, disabled_at) VALUES (%(account_id)s::UUID, %(dataset_id)s::UUID, %(upload_file_id)s::UUID, %(process_rule_id)s::UUID, %(batch)s, %(name)s, %(position)s, %(processing_started_at)s, %(parsing_completed_at)s, %(splitting_completed_at)s, %(indexing_completed_at)s, %(completed_at)s, %(stopped_at)s, %(disabled_at)s) RETURNING document.id, document.character_count, document.token_count, document.error, document.enabled, document.status, document.updated_at, document.created_at
[2024-10-06 16:12:15,170.170] base.py -> _exec_single_context line:1908 [INFO]: [generated in 0.00014s] {'account_id': '46db30d1-3199-4e79-a0cd-abf12fa6858f', 'dataset_id': UUID('f3f28f75-8e60-4eba-b6df-4d1b390bbd89'), 'upload_file_id': UUID('7b82638b-83ac-4590-b413-5dce0a799e7e'), 'process_rule_id': UUID('ceeb354f-2627-4d69-8eae-a8de99850f39'), 'batch': '20241006161215467966', 'name': '项目API文档-完整.md', 'position': 1, 'processing_started_at': None, 'parsing_completed_at': None, 'splitting_completed_at': None, 'indexing_completed_at': None, 'completed_at': None, 'stopped_at': None, 'disabled_at': None}
[2024-10-06 16:12:15,171.171] base.py -> _commit_impl line:1146 [INFO]: COMMIT
[2024-10-06 16:12:15,192.192] base.py -> _begin_impl line:1103 [INFO]: BEGIN (implicit)
[2024-10-06 16:12:15,193.193] base.py -> _exec_single_context line:1903 [INFO]: SELECT document.id AS document_id, document.account_id AS document_account_id, document.dataset_id AS document_dataset_id, document.upload_file_id AS document_upload_file_id, document.process_rule_id AS document_process_rule_id, document.batch AS document_batch, document.name AS document_name, document.position AS document_position, document.character_count AS document_character_count, document.token_count AS document_token_count, document.processing_started_at AS document_processing_started_at, document.parsing_completed_at AS document_parsing_completed_at, document.splitting_completed_at AS document_splitting_completed_at, document.indexing_completed_at AS document_indexing_completed_at, document.completed_at AS document_completed_at, document.stopped_at AS document_stopped_at, document.error AS document_error, document.enabled AS document_enabled, document.disabled_at AS document_disabled_at, document.status AS document_status, document.updated_at AS document_updated_at, document.created_at AS document_created_at 
FROM document 
WHERE document.id = %(pk_1)s::UUID
[2024-10-06 16:12:15,193.193] base.py -> _exec_single_context line:1908 [INFO]: [generated in 0.00015s] {'pk_1': UUID('a821d37d-2e80-4611-99af-d7f0ec69fdee')}
[2024-10-06 16:12:15,236.236] base.py -> _rollback_impl line:1129 [INFO]: ROLLBACK
[2024-10-06 16:12:15,236.236] _internal.py -> _log line:96 [INFO]: 127.0.0.1 - - [06/Oct/2024 16:12:15] "POST /datasets/f3f28f75-8e60-4eba-b6df-4d1b390bbd89/documents HTTP/1.1" 200 -
[2024-10-06 16:16:01,351.351] _internal.py -> _log line:96 [INFO]:  * Detected change in 'D:\\Code\\llmops\\llmops-api\\internal\\service\\indexing_service.py', reloading
[2024-10-06 16:16:01,964.964] _internal.py -> _log line:96 [INFO]:  * Restarting with stat
[2024-10-06 16:16:10,179.179] _internal.py -> _log line:96 [WARNING]:  * Debugger is active!
[2024-10-06 16:16:10,182.182] _internal.py -> _log line:96 [INFO]:  * Debugger PIN: 102-324-223
[2024-10-06 16:16:13,361.361] _internal.py -> _log line:96 [INFO]:  * Detected change in 'D:\\Code\\llmops\\llmops-api\\internal\\service\\indexing_service.py', reloading
[2024-10-06 16:16:13,954.954] _internal.py -> _log line:96 [INFO]:  * Restarting with stat
[2024-10-06 16:16:22,116.116] _internal.py -> _log line:96 [WARNING]:  * Debugger is active!
[2024-10-06 16:16:22,120.120] _internal.py -> _log line:96 [INFO]:  * Debugger PIN: 102-324-223
[2024-10-06 16:16:40,878.878] base.py -> _exec_single_context line:1903 [INFO]: select pg_catalog.version()
[2024-10-06 16:16:40,878.878] base.py -> _exec_single_context line:1908 [INFO]: [raw sql] {}
[2024-10-06 16:16:40,879.879] base.py -> _exec_single_context line:1903 [INFO]: select current_schema()
[2024-10-06 16:16:40,879.879] base.py -> _exec_single_context line:1908 [INFO]: [raw sql] {}
[2024-10-06 16:16:40,879.879] base.py -> _exec_single_context line:1903 [INFO]: show standard_conforming_strings
[2024-10-06 16:16:40,879.879] base.py -> _exec_single_context line:1908 [INFO]: [raw sql] {}
[2024-10-06 16:16:40,879.879] base.py -> _begin_impl line:1103 [INFO]: BEGIN (implicit)
[2024-10-06 16:16:40,881.881] base.py -> _exec_single_context line:1903 [INFO]: SELECT dataset.id AS dataset_id, dataset.account_id AS dataset_account_id, dataset.name AS dataset_name, dataset.icon AS dataset_icon, dataset.description AS dataset_description, dataset.updated_at AS dataset_updated_at, dataset.created_at AS dataset_created_at 
FROM dataset 
WHERE dataset.id = %(pk_1)s::UUID
[2024-10-06 16:16:40,881.881] base.py -> _exec_single_context line:1908 [INFO]: [generated in 0.00013s] {'pk_1': UUID('f3f28f75-8e60-4eba-b6df-4d1b390bbd89')}
[2024-10-06 16:16:40,883.883] base.py -> _exec_single_context line:1903 [INFO]: SELECT upload_file.id AS upload_file_id, upload_file.account_id AS upload_file_account_id, upload_file.name AS upload_file_name, upload_file.key AS upload_file_key, upload_file.size AS upload_file_size, upload_file.extension AS upload_file_extension, upload_file.mime_type AS upload_file_mime_type, upload_file.hash AS upload_file_hash, upload_file.updated_at AS upload_file_updated_at, upload_file.created_at AS upload_file_created_at 
FROM upload_file 
WHERE upload_file.account_id = %(account_id_1)s::UUID AND upload_file.id IN (%(id_1_1)s::UUID)
[2024-10-06 16:16:40,883.883] base.py -> _exec_single_context line:1908 [INFO]: [generated in 0.00016s] {'account_id_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f', 'id_1_1': '7b82638b-83ac-4590-b413-5dce0a799e7e'}
[2024-10-06 16:16:40,884.884] base.py -> _exec_single_context line:1903 [INFO]: INSERT INTO process_rule (account_id, dataset_id, mode, rule) VALUES (%(account_id)s::UUID, %(dataset_id)s::UUID, %(mode)s, %(rule)s) RETURNING process_rule.id, process_rule.updated_at, process_rule.created_at
[2024-10-06 16:16:40,884.884] base.py -> _exec_single_context line:1908 [INFO]: [generated in 0.00015s] {'account_id': '46db30d1-3199-4e79-a0cd-abf12fa6858f', 'dataset_id': UUID('f3f28f75-8e60-4eba-b6df-4d1b390bbd89'), 'mode': 'automatic', 'rule': '{"pre_process_rules": [{"id": "remove_extra_space", "enabled": true}, {"id": "remove_url_and_email", "enabled": true}], "segment": {"separators": ["\ ... (15 characters truncated) ... "\\u3002|\\uff01|\\uff1f", "\\\\.\\\\s|\\\\!\\\\s|\\\\?\\\\s", "\\uff1b|;\\\\s", "\\uff0c|,\\\\s", " ", ""], "chunk_size": 500, "chunk_overlap": 50}}'}
[2024-10-06 16:16:40,885.885] base.py -> _commit_impl line:1146 [INFO]: COMMIT
[2024-10-06 16:16:40,894.894] base.py -> _begin_impl line:1103 [INFO]: BEGIN (implicit)
[2024-10-06 16:16:40,895.895] base.py -> _exec_single_context line:1903 [INFO]: SELECT document.id AS document_id, document.account_id AS document_account_id, document.dataset_id AS document_dataset_id, document.upload_file_id AS document_upload_file_id, document.process_rule_id AS document_process_rule_id, document.batch AS document_batch, document.name AS document_name, document.position AS document_position, document.character_count AS document_character_count, document.token_count AS document_token_count, document.processing_started_at AS document_processing_started_at, document.parsing_completed_at AS document_parsing_completed_at, document.splitting_completed_at AS document_splitting_completed_at, document.indexing_completed_at AS document_indexing_completed_at, document.completed_at AS document_completed_at, document.stopped_at AS document_stopped_at, document.error AS document_error, document.enabled AS document_enabled, document.disabled_at AS document_disabled_at, document.status AS document_status, document.updated_at AS document_updated_at, document.created_at AS document_created_at 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID ORDER BY document.position DESC 
 LIMIT %(param_1)s
[2024-10-06 16:16:40,895.895] base.py -> _exec_single_context line:1908 [INFO]: [generated in 0.00014s] {'dataset_id_1': UUID('f3f28f75-8e60-4eba-b6df-4d1b390bbd89'), 'param_1': 1}
[2024-10-06 16:16:40,897.897] base.py -> _exec_single_context line:1903 [INFO]: SELECT upload_file.id AS upload_file_id, upload_file.account_id AS upload_file_account_id, upload_file.name AS upload_file_name, upload_file.key AS upload_file_key, upload_file.size AS upload_file_size, upload_file.extension AS upload_file_extension, upload_file.mime_type AS upload_file_mime_type, upload_file.hash AS upload_file_hash, upload_file.updated_at AS upload_file_updated_at, upload_file.created_at AS upload_file_created_at 
FROM upload_file 
WHERE upload_file.id = %(pk_1)s::UUID
[2024-10-06 16:16:40,897.897] base.py -> _exec_single_context line:1908 [INFO]: [generated in 0.00013s] {'pk_1': UUID('7b82638b-83ac-4590-b413-5dce0a799e7e')}
[2024-10-06 16:16:40,898.898] base.py -> _exec_single_context line:1903 [INFO]: SELECT process_rule.id AS process_rule_id, process_rule.account_id AS process_rule_account_id, process_rule.dataset_id AS process_rule_dataset_id, process_rule.mode AS process_rule_mode, process_rule.rule AS process_rule_rule, process_rule.updated_at AS process_rule_updated_at, process_rule.created_at AS process_rule_created_at 
FROM process_rule 
WHERE process_rule.id = %(pk_1)s::UUID
[2024-10-06 16:16:40,898.898] base.py -> _exec_single_context line:1908 [INFO]: [generated in 0.00012s] {'pk_1': UUID('71123c2f-aed7-4a2c-bfeb-7066ca54f115')}
[2024-10-06 16:16:40,899.899] base.py -> _exec_single_context line:1903 [INFO]: INSERT INTO document (account_id, dataset_id, upload_file_id, process_rule_id, batch, name, position, processing_started_at, parsing_completed_at, splitting_completed_at, indexing_completed_at, completed_at, stopped_at, disabled_at) VALUES (%(account_id)s::UUID, %(dataset_id)s::UUID, %(upload_file_id)s::UUID, %(process_rule_id)s::UUID, %(batch)s, %(name)s, %(position)s, %(processing_started_at)s, %(parsing_completed_at)s, %(splitting_completed_at)s, %(indexing_completed_at)s, %(completed_at)s, %(stopped_at)s, %(disabled_at)s) RETURNING document.id, document.character_count, document.token_count, document.error, document.enabled, document.status, document.updated_at, document.created_at
[2024-10-06 16:16:40,899.899] base.py -> _exec_single_context line:1908 [INFO]: [generated in 0.00013s] {'account_id': '46db30d1-3199-4e79-a0cd-abf12fa6858f', 'dataset_id': UUID('f3f28f75-8e60-4eba-b6df-4d1b390bbd89'), 'upload_file_id': UUID('7b82638b-83ac-4590-b413-5dce0a799e7e'), 'process_rule_id': UUID('71123c2f-aed7-4a2c-bfeb-7066ca54f115'), 'batch': '20241006161640555768', 'name': '项目API文档-完整.md', 'position': 2, 'processing_started_at': None, 'parsing_completed_at': None, 'splitting_completed_at': None, 'indexing_completed_at': None, 'completed_at': None, 'stopped_at': None, 'disabled_at': None}
[2024-10-06 16:16:40,900.900] base.py -> _commit_impl line:1146 [INFO]: COMMIT
[2024-10-06 16:16:40,920.920] base.py -> _begin_impl line:1103 [INFO]: BEGIN (implicit)
[2024-10-06 16:16:40,921.921] base.py -> _exec_single_context line:1903 [INFO]: SELECT document.id AS document_id, document.account_id AS document_account_id, document.dataset_id AS document_dataset_id, document.upload_file_id AS document_upload_file_id, document.process_rule_id AS document_process_rule_id, document.batch AS document_batch, document.name AS document_name, document.position AS document_position, document.character_count AS document_character_count, document.token_count AS document_token_count, document.processing_started_at AS document_processing_started_at, document.parsing_completed_at AS document_parsing_completed_at, document.splitting_completed_at AS document_splitting_completed_at, document.indexing_completed_at AS document_indexing_completed_at, document.completed_at AS document_completed_at, document.stopped_at AS document_stopped_at, document.error AS document_error, document.enabled AS document_enabled, document.disabled_at AS document_disabled_at, document.status AS document_status, document.updated_at AS document_updated_at, document.created_at AS document_created_at 
FROM document 
WHERE document.id = %(pk_1)s::UUID
[2024-10-06 16:16:40,921.921] base.py -> _exec_single_context line:1908 [INFO]: [generated in 0.00013s] {'pk_1': UUID('8904958e-7ff0-441b-85ce-320aa557bb05')}
[2024-10-06 16:16:40,951.951] base.py -> _rollback_impl line:1129 [INFO]: ROLLBACK
[2024-10-06 16:16:40,952.952] _internal.py -> _log line:96 [INFO]: 127.0.0.1 - - [06/Oct/2024 16:16:40] "POST /datasets/f3f28f75-8e60-4eba-b6df-4d1b390bbd89/documents HTTP/1.1" 200 -
[2024-10-06 16:17:01,351.351] _internal.py -> _log line:96 [INFO]:  * Detected change in 'D:\\Code\\llmops\\llmops-api\\internal\\service\\indexing_service.py', reloading
[2024-10-06 16:17:02,030.030] _internal.py -> _log line:96 [INFO]:  * Restarting with stat
[2024-10-06 16:17:10,173.173] _internal.py -> _log line:96 [WARNING]:  * Debugger is active!
[2024-10-06 16:17:10,176.176] _internal.py -> _log line:96 [INFO]:  * Debugger PIN: 102-324-223
[2024-10-06 16:17:40,746.746] base.py -> _exec_single_context line:1903 [INFO]: select pg_catalog.version()
[2024-10-06 16:17:40,746.746] base.py -> _exec_single_context line:1908 [INFO]: [raw sql] {}
[2024-10-06 16:17:40,747.747] base.py -> _exec_single_context line:1903 [INFO]: select current_schema()
[2024-10-06 16:17:40,747.747] base.py -> _exec_single_context line:1908 [INFO]: [raw sql] {}
[2024-10-06 16:17:40,747.747] base.py -> _exec_single_context line:1903 [INFO]: show standard_conforming_strings
[2024-10-06 16:17:40,747.747] base.py -> _exec_single_context line:1908 [INFO]: [raw sql] {}
[2024-10-06 16:17:40,748.748] base.py -> _begin_impl line:1103 [INFO]: BEGIN (implicit)
[2024-10-06 16:17:40,749.749] base.py -> _exec_single_context line:1903 [INFO]: SELECT dataset.id AS dataset_id, dataset.account_id AS dataset_account_id, dataset.name AS dataset_name, dataset.icon AS dataset_icon, dataset.description AS dataset_description, dataset.updated_at AS dataset_updated_at, dataset.created_at AS dataset_created_at 
FROM dataset 
WHERE dataset.id = %(pk_1)s::UUID
[2024-10-06 16:17:40,750.750] base.py -> _exec_single_context line:1908 [INFO]: [generated in 0.00016s] {'pk_1': UUID('f3f28f75-8e60-4eba-b6df-4d1b390bbd89')}
[2024-10-06 16:17:40,752.752] base.py -> _exec_single_context line:1903 [INFO]: SELECT upload_file.id AS upload_file_id, upload_file.account_id AS upload_file_account_id, upload_file.name AS upload_file_name, upload_file.key AS upload_file_key, upload_file.size AS upload_file_size, upload_file.extension AS upload_file_extension, upload_file.mime_type AS upload_file_mime_type, upload_file.hash AS upload_file_hash, upload_file.updated_at AS upload_file_updated_at, upload_file.created_at AS upload_file_created_at 
FROM upload_file 
WHERE upload_file.account_id = %(account_id_1)s::UUID AND upload_file.id IN (%(id_1_1)s::UUID)
[2024-10-06 16:17:40,752.752] base.py -> _exec_single_context line:1908 [INFO]: [generated in 0.00018s] {'account_id_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f', 'id_1_1': '7b82638b-83ac-4590-b413-5dce0a799e7e'}
[2024-10-06 16:17:40,754.754] base.py -> _exec_single_context line:1903 [INFO]: INSERT INTO process_rule (account_id, dataset_id, mode, rule) VALUES (%(account_id)s::UUID, %(dataset_id)s::UUID, %(mode)s, %(rule)s) RETURNING process_rule.id, process_rule.updated_at, process_rule.created_at
[2024-10-06 16:17:40,754.754] base.py -> _exec_single_context line:1908 [INFO]: [generated in 0.00015s] {'account_id': '46db30d1-3199-4e79-a0cd-abf12fa6858f', 'dataset_id': UUID('f3f28f75-8e60-4eba-b6df-4d1b390bbd89'), 'mode': 'automatic', 'rule': '{"pre_process_rules": [{"id": "remove_extra_space", "enabled": true}, {"id": "remove_url_and_email", "enabled": true}], "segment": {"separators": ["\ ... (15 characters truncated) ... "\\u3002|\\uff01|\\uff1f", "\\\\.\\\\s|\\\\!\\\\s|\\\\?\\\\s", "\\uff1b|;\\\\s", "\\uff0c|,\\\\s", " ", ""], "chunk_size": 500, "chunk_overlap": 50}}'}
[2024-10-06 16:17:40,754.754] base.py -> _commit_impl line:1146 [INFO]: COMMIT
[2024-10-06 16:17:40,755.755] base.py -> _begin_impl line:1103 [INFO]: BEGIN (implicit)
[2024-10-06 16:17:40,757.757] base.py -> _exec_single_context line:1903 [INFO]: SELECT document.id AS document_id, document.account_id AS document_account_id, document.dataset_id AS document_dataset_id, document.upload_file_id AS document_upload_file_id, document.process_rule_id AS document_process_rule_id, document.batch AS document_batch, document.name AS document_name, document.position AS document_position, document.character_count AS document_character_count, document.token_count AS document_token_count, document.processing_started_at AS document_processing_started_at, document.parsing_completed_at AS document_parsing_completed_at, document.splitting_completed_at AS document_splitting_completed_at, document.indexing_completed_at AS document_indexing_completed_at, document.completed_at AS document_completed_at, document.stopped_at AS document_stopped_at, document.error AS document_error, document.enabled AS document_enabled, document.disabled_at AS document_disabled_at, document.status AS document_status, document.updated_at AS document_updated_at, document.created_at AS document_created_at 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID ORDER BY document.position DESC 
 LIMIT %(param_1)s
[2024-10-06 16:17:40,757.757] base.py -> _exec_single_context line:1908 [INFO]: [generated in 0.00012s] {'dataset_id_1': UUID('f3f28f75-8e60-4eba-b6df-4d1b390bbd89'), 'param_1': 1}
[2024-10-06 16:17:40,758.758] base.py -> _exec_single_context line:1903 [INFO]: SELECT upload_file.id AS upload_file_id, upload_file.account_id AS upload_file_account_id, upload_file.name AS upload_file_name, upload_file.key AS upload_file_key, upload_file.size AS upload_file_size, upload_file.extension AS upload_file_extension, upload_file.mime_type AS upload_file_mime_type, upload_file.hash AS upload_file_hash, upload_file.updated_at AS upload_file_updated_at, upload_file.created_at AS upload_file_created_at 
FROM upload_file 
WHERE upload_file.id = %(pk_1)s::UUID
[2024-10-06 16:17:40,758.758] base.py -> _exec_single_context line:1908 [INFO]: [generated in 0.00013s] {'pk_1': UUID('7b82638b-83ac-4590-b413-5dce0a799e7e')}
[2024-10-06 16:17:40,760.760] base.py -> _exec_single_context line:1903 [INFO]: SELECT process_rule.id AS process_rule_id, process_rule.account_id AS process_rule_account_id, process_rule.dataset_id AS process_rule_dataset_id, process_rule.mode AS process_rule_mode, process_rule.rule AS process_rule_rule, process_rule.updated_at AS process_rule_updated_at, process_rule.created_at AS process_rule_created_at 
FROM process_rule 
WHERE process_rule.id = %(pk_1)s::UUID
[2024-10-06 16:17:40,760.760] base.py -> _exec_single_context line:1908 [INFO]: [generated in 0.00016s] {'pk_1': UUID('a6871a0e-c870-485f-9699-aa80a71f35e5')}
[2024-10-06 16:17:40,761.761] base.py -> _exec_single_context line:1903 [INFO]: INSERT INTO document (account_id, dataset_id, upload_file_id, process_rule_id, batch, name, position, processing_started_at, parsing_completed_at, splitting_completed_at, indexing_completed_at, completed_at, stopped_at, disabled_at) VALUES (%(account_id)s::UUID, %(dataset_id)s::UUID, %(upload_file_id)s::UUID, %(process_rule_id)s::UUID, %(batch)s, %(name)s, %(position)s, %(processing_started_at)s, %(parsing_completed_at)s, %(splitting_completed_at)s, %(indexing_completed_at)s, %(completed_at)s, %(stopped_at)s, %(disabled_at)s) RETURNING document.id, document.character_count, document.token_count, document.error, document.enabled, document.status, document.updated_at, document.created_at
[2024-10-06 16:17:40,761.761] base.py -> _exec_single_context line:1908 [INFO]: [generated in 0.00014s] {'account_id': '46db30d1-3199-4e79-a0cd-abf12fa6858f', 'dataset_id': UUID('f3f28f75-8e60-4eba-b6df-4d1b390bbd89'), 'upload_file_id': UUID('7b82638b-83ac-4590-b413-5dce0a799e7e'), 'process_rule_id': UUID('a6871a0e-c870-485f-9699-aa80a71f35e5'), 'batch': '20241006161740843814', 'name': '项目API文档-完整.md', 'position': 1, 'processing_started_at': None, 'parsing_completed_at': None, 'splitting_completed_at': None, 'indexing_completed_at': None, 'completed_at': None, 'stopped_at': None, 'disabled_at': None}
[2024-10-06 16:17:40,762.762] base.py -> _commit_impl line:1146 [INFO]: COMMIT
[2024-10-06 16:17:40,766.766] base.py -> _begin_impl line:1103 [INFO]: BEGIN (implicit)
[2024-10-06 16:17:40,767.767] base.py -> _exec_single_context line:1903 [INFO]: SELECT document.id AS document_id, document.account_id AS document_account_id, document.dataset_id AS document_dataset_id, document.upload_file_id AS document_upload_file_id, document.process_rule_id AS document_process_rule_id, document.batch AS document_batch, document.name AS document_name, document.position AS document_position, document.character_count AS document_character_count, document.token_count AS document_token_count, document.processing_started_at AS document_processing_started_at, document.parsing_completed_at AS document_parsing_completed_at, document.splitting_completed_at AS document_splitting_completed_at, document.indexing_completed_at AS document_indexing_completed_at, document.completed_at AS document_completed_at, document.stopped_at AS document_stopped_at, document.error AS document_error, document.enabled AS document_enabled, document.disabled_at AS document_disabled_at, document.status AS document_status, document.updated_at AS document_updated_at, document.created_at AS document_created_at 
FROM document 
WHERE document.id = %(pk_1)s::UUID
[2024-10-06 16:17:40,767.767] base.py -> _exec_single_context line:1908 [INFO]: [generated in 0.00013s] {'pk_1': UUID('17116ed1-4788-41fe-adb2-8e6a17ac27b4')}
[2024-10-06 16:17:40,799.799] base.py -> _rollback_impl line:1129 [INFO]: ROLLBACK
[2024-10-06 16:17:40,799.799] _internal.py -> _log line:96 [INFO]: 127.0.0.1 - - [06/Oct/2024 16:17:40] "POST /datasets/f3f28f75-8e60-4eba-b6df-4d1b390bbd89/documents HTTP/1.1" 200 -
[2024-10-06 16:20:37,541.541] _internal.py -> _log line:96 [INFO]:  * Detected change in 'D:\\Code\\llmops\\llmops-api\\internal\\service\\indexing_service.py', reloading
[2024-10-06 16:20:38,185.185] _internal.py -> _log line:96 [INFO]:  * Restarting with stat
[2024-10-06 16:20:46,107.107] _internal.py -> _log line:96 [WARNING]:  * Debugger is active!
[2024-10-06 16:20:46,109.109] _internal.py -> _log line:96 [INFO]:  * Debugger PIN: 102-324-223
[2024-10-06 16:21:09,189.189] base.py -> _exec_single_context line:1903 [INFO]: select pg_catalog.version()
[2024-10-06 16:21:09,189.189] base.py -> _exec_single_context line:1908 [INFO]: [raw sql] {}
[2024-10-06 16:21:09,190.190] base.py -> _exec_single_context line:1903 [INFO]: select current_schema()
[2024-10-06 16:21:09,190.190] base.py -> _exec_single_context line:1908 [INFO]: [raw sql] {}
[2024-10-06 16:21:09,191.191] base.py -> _exec_single_context line:1903 [INFO]: show standard_conforming_strings
[2024-10-06 16:21:09,191.191] base.py -> _exec_single_context line:1908 [INFO]: [raw sql] {}
[2024-10-06 16:21:09,191.191] base.py -> _begin_impl line:1103 [INFO]: BEGIN (implicit)
[2024-10-06 16:21:09,192.192] base.py -> _exec_single_context line:1903 [INFO]: SELECT dataset.id AS dataset_id, dataset.account_id AS dataset_account_id, dataset.name AS dataset_name, dataset.icon AS dataset_icon, dataset.description AS dataset_description, dataset.updated_at AS dataset_updated_at, dataset.created_at AS dataset_created_at 
FROM dataset 
WHERE dataset.id = %(pk_1)s::UUID
[2024-10-06 16:21:09,193.193] base.py -> _exec_single_context line:1908 [INFO]: [generated in 0.00013s] {'pk_1': UUID('f3f28f75-8e60-4eba-b6df-4d1b390bbd89')}
[2024-10-06 16:21:09,195.195] base.py -> _exec_single_context line:1903 [INFO]: SELECT upload_file.id AS upload_file_id, upload_file.account_id AS upload_file_account_id, upload_file.name AS upload_file_name, upload_file.key AS upload_file_key, upload_file.size AS upload_file_size, upload_file.extension AS upload_file_extension, upload_file.mime_type AS upload_file_mime_type, upload_file.hash AS upload_file_hash, upload_file.updated_at AS upload_file_updated_at, upload_file.created_at AS upload_file_created_at 
FROM upload_file 
WHERE upload_file.account_id = %(account_id_1)s::UUID AND upload_file.id IN (%(id_1_1)s::UUID)
[2024-10-06 16:21:09,195.195] base.py -> _exec_single_context line:1908 [INFO]: [generated in 0.00018s] {'account_id_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f', 'id_1_1': '7b82638b-83ac-4590-b413-5dce0a799e7e'}
[2024-10-06 16:21:09,197.197] base.py -> _exec_single_context line:1903 [INFO]: INSERT INTO process_rule (account_id, dataset_id, mode, rule) VALUES (%(account_id)s::UUID, %(dataset_id)s::UUID, %(mode)s, %(rule)s) RETURNING process_rule.id, process_rule.updated_at, process_rule.created_at
[2024-10-06 16:21:09,197.197] base.py -> _exec_single_context line:1908 [INFO]: [generated in 0.00018s] {'account_id': '46db30d1-3199-4e79-a0cd-abf12fa6858f', 'dataset_id': UUID('f3f28f75-8e60-4eba-b6df-4d1b390bbd89'), 'mode': 'automatic', 'rule': '{"pre_process_rules": [{"id": "remove_extra_space", "enabled": true}, {"id": "remove_url_and_email", "enabled": true}], "segment": {"separators": ["\ ... (15 characters truncated) ... "\\u3002|\\uff01|\\uff1f", "\\\\.\\\\s|\\\\!\\\\s|\\\\?\\\\s", "\\uff1b|;\\\\s", "\\uff0c|,\\\\s", " ", ""], "chunk_size": 500, "chunk_overlap": 50}}'}
[2024-10-06 16:21:09,199.199] base.py -> _commit_impl line:1146 [INFO]: COMMIT
[2024-10-06 16:21:09,213.213] base.py -> _begin_impl line:1103 [INFO]: BEGIN (implicit)
[2024-10-06 16:21:09,214.214] base.py -> _exec_single_context line:1903 [INFO]: SELECT document.id AS document_id, document.account_id AS document_account_id, document.dataset_id AS document_dataset_id, document.upload_file_id AS document_upload_file_id, document.process_rule_id AS document_process_rule_id, document.batch AS document_batch, document.name AS document_name, document.position AS document_position, document.character_count AS document_character_count, document.token_count AS document_token_count, document.processing_started_at AS document_processing_started_at, document.parsing_completed_at AS document_parsing_completed_at, document.splitting_completed_at AS document_splitting_completed_at, document.indexing_completed_at AS document_indexing_completed_at, document.completed_at AS document_completed_at, document.stopped_at AS document_stopped_at, document.error AS document_error, document.enabled AS document_enabled, document.disabled_at AS document_disabled_at, document.status AS document_status, document.updated_at AS document_updated_at, document.created_at AS document_created_at 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID ORDER BY document.position DESC 
 LIMIT %(param_1)s
[2024-10-06 16:21:09,214.214] base.py -> _exec_single_context line:1908 [INFO]: [generated in 0.00019s] {'dataset_id_1': UUID('f3f28f75-8e60-4eba-b6df-4d1b390bbd89'), 'param_1': 1}
[2024-10-06 16:21:09,216.216] base.py -> _exec_single_context line:1903 [INFO]: SELECT upload_file.id AS upload_file_id, upload_file.account_id AS upload_file_account_id, upload_file.name AS upload_file_name, upload_file.key AS upload_file_key, upload_file.size AS upload_file_size, upload_file.extension AS upload_file_extension, upload_file.mime_type AS upload_file_mime_type, upload_file.hash AS upload_file_hash, upload_file.updated_at AS upload_file_updated_at, upload_file.created_at AS upload_file_created_at 
FROM upload_file 
WHERE upload_file.id = %(pk_1)s::UUID
[2024-10-06 16:21:09,217.217] base.py -> _exec_single_context line:1908 [INFO]: [generated in 0.00013s] {'pk_1': UUID('7b82638b-83ac-4590-b413-5dce0a799e7e')}
[2024-10-06 16:21:09,218.218] base.py -> _exec_single_context line:1903 [INFO]: SELECT process_rule.id AS process_rule_id, process_rule.account_id AS process_rule_account_id, process_rule.dataset_id AS process_rule_dataset_id, process_rule.mode AS process_rule_mode, process_rule.rule AS process_rule_rule, process_rule.updated_at AS process_rule_updated_at, process_rule.created_at AS process_rule_created_at 
FROM process_rule 
WHERE process_rule.id = %(pk_1)s::UUID
[2024-10-06 16:21:09,218.218] base.py -> _exec_single_context line:1908 [INFO]: [generated in 0.00013s] {'pk_1': UUID('0d3fb6ed-fcff-418c-af48-bfb18c2c1032')}
[2024-10-06 16:21:09,219.219] base.py -> _exec_single_context line:1903 [INFO]: INSERT INTO document (account_id, dataset_id, upload_file_id, process_rule_id, batch, name, position, processing_started_at, parsing_completed_at, splitting_completed_at, indexing_completed_at, completed_at, stopped_at, disabled_at) VALUES (%(account_id)s::UUID, %(dataset_id)s::UUID, %(upload_file_id)s::UUID, %(process_rule_id)s::UUID, %(batch)s, %(name)s, %(position)s, %(processing_started_at)s, %(parsing_completed_at)s, %(splitting_completed_at)s, %(indexing_completed_at)s, %(completed_at)s, %(stopped_at)s, %(disabled_at)s) RETURNING document.id, document.character_count, document.token_count, document.error, document.enabled, document.status, document.updated_at, document.created_at
[2024-10-06 16:21:09,219.219] base.py -> _exec_single_context line:1908 [INFO]: [generated in 0.00015s] {'account_id': '46db30d1-3199-4e79-a0cd-abf12fa6858f', 'dataset_id': UUID('f3f28f75-8e60-4eba-b6df-4d1b390bbd89'), 'upload_file_id': UUID('7b82638b-83ac-4590-b413-5dce0a799e7e'), 'process_rule_id': UUID('0d3fb6ed-fcff-418c-af48-bfb18c2c1032'), 'batch': '20241006162109486043', 'name': '项目API文档-完整.md', 'position': 1, 'processing_started_at': None, 'parsing_completed_at': None, 'splitting_completed_at': None, 'indexing_completed_at': None, 'completed_at': None, 'stopped_at': None, 'disabled_at': None}
[2024-10-06 16:21:09,220.220] base.py -> _commit_impl line:1146 [INFO]: COMMIT
[2024-10-06 16:21:09,239.239] base.py -> _begin_impl line:1103 [INFO]: BEGIN (implicit)
[2024-10-06 16:21:09,240.240] base.py -> _exec_single_context line:1903 [INFO]: SELECT document.id AS document_id, document.account_id AS document_account_id, document.dataset_id AS document_dataset_id, document.upload_file_id AS document_upload_file_id, document.process_rule_id AS document_process_rule_id, document.batch AS document_batch, document.name AS document_name, document.position AS document_position, document.character_count AS document_character_count, document.token_count AS document_token_count, document.processing_started_at AS document_processing_started_at, document.parsing_completed_at AS document_parsing_completed_at, document.splitting_completed_at AS document_splitting_completed_at, document.indexing_completed_at AS document_indexing_completed_at, document.completed_at AS document_completed_at, document.stopped_at AS document_stopped_at, document.error AS document_error, document.enabled AS document_enabled, document.disabled_at AS document_disabled_at, document.status AS document_status, document.updated_at AS document_updated_at, document.created_at AS document_created_at 
FROM document 
WHERE document.id = %(pk_1)s::UUID
[2024-10-06 16:21:09,240.240] base.py -> _exec_single_context line:1908 [INFO]: [generated in 0.00013s] {'pk_1': UUID('d6d94a79-fd6d-47c1-b596-1e880951b4ba')}
[2024-10-06 16:21:09,285.285] base.py -> _rollback_impl line:1129 [INFO]: ROLLBACK
[2024-10-06 16:21:09,285.285] _internal.py -> _log line:96 [INFO]: 127.0.0.1 - - [06/Oct/2024 16:21:09] "POST /datasets/f3f28f75-8e60-4eba-b6df-4d1b390bbd89/documents HTTP/1.1" 200 -
[2024-10-06 17:10:43,004.004] _internal.py -> _log line:96 [INFO]:  * Detected change in 'D:\\Code\\llmops\\llmops-api\\internal\\service\\indexing_service.py', reloading
[2024-10-06 17:10:43,651.651] _internal.py -> _log line:96 [INFO]:  * Restarting with stat
[2024-10-06 17:10:51,994.994] _internal.py -> _log line:96 [WARNING]:  * Debugger is active!
[2024-10-06 17:10:51,998.998] _internal.py -> _log line:96 [INFO]:  * Debugger PIN: 102-324-223
[2024-10-06 17:12:00,339.339] base.py -> _exec_single_context line:1903 [INFO]: select pg_catalog.version()
[2024-10-06 17:12:00,339.339] base.py -> _exec_single_context line:1908 [INFO]: [raw sql] {}
[2024-10-06 17:12:00,340.340] base.py -> _exec_single_context line:1903 [INFO]: select current_schema()
[2024-10-06 17:12:00,340.340] base.py -> _exec_single_context line:1908 [INFO]: [raw sql] {}
[2024-10-06 17:12:00,340.340] base.py -> _exec_single_context line:1903 [INFO]: show standard_conforming_strings
[2024-10-06 17:12:00,341.341] base.py -> _exec_single_context line:1908 [INFO]: [raw sql] {}
[2024-10-06 17:12:00,341.341] base.py -> _begin_impl line:1103 [INFO]: BEGIN (implicit)
[2024-10-06 17:12:00,342.342] base.py -> _exec_single_context line:1903 [INFO]: SELECT dataset.id AS dataset_id, dataset.account_id AS dataset_account_id, dataset.name AS dataset_name, dataset.icon AS dataset_icon, dataset.description AS dataset_description, dataset.updated_at AS dataset_updated_at, dataset.created_at AS dataset_created_at 
FROM dataset 
WHERE dataset.id = %(pk_1)s::UUID
[2024-10-06 17:12:00,343.343] base.py -> _exec_single_context line:1908 [INFO]: [generated in 0.00023s] {'pk_1': UUID('f3f28f75-8e60-4eba-b6df-4d1b390bbd89')}
[2024-10-06 17:12:00,345.345] base.py -> _exec_single_context line:1903 [INFO]: SELECT upload_file.id AS upload_file_id, upload_file.account_id AS upload_file_account_id, upload_file.name AS upload_file_name, upload_file.key AS upload_file_key, upload_file.size AS upload_file_size, upload_file.extension AS upload_file_extension, upload_file.mime_type AS upload_file_mime_type, upload_file.hash AS upload_file_hash, upload_file.updated_at AS upload_file_updated_at, upload_file.created_at AS upload_file_created_at 
FROM upload_file 
WHERE upload_file.account_id = %(account_id_1)s::UUID AND upload_file.id IN (%(id_1_1)s::UUID)
[2024-10-06 17:12:00,345.345] base.py -> _exec_single_context line:1908 [INFO]: [generated in 0.00017s] {'account_id_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f', 'id_1_1': '7b82638b-83ac-4590-b413-5dce0a799e7e'}
[2024-10-06 17:12:00,346.346] base.py -> _exec_single_context line:1903 [INFO]: INSERT INTO process_rule (account_id, dataset_id, mode, rule) VALUES (%(account_id)s::UUID, %(dataset_id)s::UUID, %(mode)s, %(rule)s) RETURNING process_rule.id, process_rule.updated_at, process_rule.created_at
[2024-10-06 17:12:00,347.347] base.py -> _exec_single_context line:1908 [INFO]: [generated in 0.00015s] {'account_id': '46db30d1-3199-4e79-a0cd-abf12fa6858f', 'dataset_id': UUID('f3f28f75-8e60-4eba-b6df-4d1b390bbd89'), 'mode': 'automatic', 'rule': '{"pre_process_rules": [{"id": "remove_extra_space", "enabled": true}, {"id": "remove_url_and_email", "enabled": true}], "segment": {"separators": ["\ ... (15 characters truncated) ... "\\u3002|\\uff01|\\uff1f", "\\\\.\\\\s|\\\\!\\\\s|\\\\?\\\\s", "\\uff1b|;\\\\s", "\\uff0c|,\\\\s", " ", ""], "chunk_size": 500, "chunk_overlap": 50}}'}
[2024-10-06 17:12:00,348.348] base.py -> _commit_impl line:1146 [INFO]: COMMIT
[2024-10-06 17:12:00,350.350] base.py -> _begin_impl line:1103 [INFO]: BEGIN (implicit)
[2024-10-06 17:12:00,352.352] base.py -> _exec_single_context line:1903 [INFO]: SELECT document.id AS document_id, document.account_id AS document_account_id, document.dataset_id AS document_dataset_id, document.upload_file_id AS document_upload_file_id, document.process_rule_id AS document_process_rule_id, document.batch AS document_batch, document.name AS document_name, document.position AS document_position, document.character_count AS document_character_count, document.token_count AS document_token_count, document.processing_started_at AS document_processing_started_at, document.parsing_completed_at AS document_parsing_completed_at, document.splitting_completed_at AS document_splitting_completed_at, document.indexing_completed_at AS document_indexing_completed_at, document.completed_at AS document_completed_at, document.stopped_at AS document_stopped_at, document.error AS document_error, document.enabled AS document_enabled, document.disabled_at AS document_disabled_at, document.status AS document_status, document.updated_at AS document_updated_at, document.created_at AS document_created_at 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID ORDER BY document.position DESC 
 LIMIT %(param_1)s
[2024-10-06 17:12:00,352.352] base.py -> _exec_single_context line:1908 [INFO]: [generated in 0.00016s] {'dataset_id_1': UUID('f3f28f75-8e60-4eba-b6df-4d1b390bbd89'), 'param_1': 1}
[2024-10-06 17:12:00,354.354] base.py -> _exec_single_context line:1903 [INFO]: SELECT upload_file.id AS upload_file_id, upload_file.account_id AS upload_file_account_id, upload_file.name AS upload_file_name, upload_file.key AS upload_file_key, upload_file.size AS upload_file_size, upload_file.extension AS upload_file_extension, upload_file.mime_type AS upload_file_mime_type, upload_file.hash AS upload_file_hash, upload_file.updated_at AS upload_file_updated_at, upload_file.created_at AS upload_file_created_at 
FROM upload_file 
WHERE upload_file.id = %(pk_1)s::UUID
[2024-10-06 17:12:00,354.354] base.py -> _exec_single_context line:1908 [INFO]: [generated in 0.00014s] {'pk_1': UUID('7b82638b-83ac-4590-b413-5dce0a799e7e')}
[2024-10-06 17:12:00,355.355] base.py -> _exec_single_context line:1903 [INFO]: SELECT process_rule.id AS process_rule_id, process_rule.account_id AS process_rule_account_id, process_rule.dataset_id AS process_rule_dataset_id, process_rule.mode AS process_rule_mode, process_rule.rule AS process_rule_rule, process_rule.updated_at AS process_rule_updated_at, process_rule.created_at AS process_rule_created_at 
FROM process_rule 
WHERE process_rule.id = %(pk_1)s::UUID
[2024-10-06 17:12:00,355.355] base.py -> _exec_single_context line:1908 [INFO]: [generated in 0.00018s] {'pk_1': UUID('bffe1a50-eaaa-48c3-8ea5-28a3e839406c')}
[2024-10-06 17:12:00,356.356] base.py -> _exec_single_context line:1903 [INFO]: INSERT INTO document (account_id, dataset_id, upload_file_id, process_rule_id, batch, name, position, processing_started_at, parsing_completed_at, splitting_completed_at, indexing_completed_at, completed_at, stopped_at, disabled_at) VALUES (%(account_id)s::UUID, %(dataset_id)s::UUID, %(upload_file_id)s::UUID, %(process_rule_id)s::UUID, %(batch)s, %(name)s, %(position)s, %(processing_started_at)s, %(parsing_completed_at)s, %(splitting_completed_at)s, %(indexing_completed_at)s, %(completed_at)s, %(stopped_at)s, %(disabled_at)s) RETURNING document.id, document.character_count, document.token_count, document.error, document.enabled, document.status, document.updated_at, document.created_at
[2024-10-06 17:12:00,356.356] base.py -> _exec_single_context line:1908 [INFO]: [generated in 0.00015s] {'account_id': '46db30d1-3199-4e79-a0cd-abf12fa6858f', 'dataset_id': UUID('f3f28f75-8e60-4eba-b6df-4d1b390bbd89'), 'upload_file_id': UUID('7b82638b-83ac-4590-b413-5dce0a799e7e'), 'process_rule_id': UUID('bffe1a50-eaaa-48c3-8ea5-28a3e839406c'), 'batch': '20241006171200571729', 'name': '项目API文档-完整.md', 'position': 1, 'processing_started_at': None, 'parsing_completed_at': None, 'splitting_completed_at': None, 'indexing_completed_at': None, 'completed_at': None, 'stopped_at': None, 'disabled_at': None}
[2024-10-06 17:12:00,357.357] base.py -> _commit_impl line:1146 [INFO]: COMMIT
[2024-10-06 17:12:00,375.375] base.py -> _begin_impl line:1103 [INFO]: BEGIN (implicit)
[2024-10-06 17:12:00,376.376] base.py -> _exec_single_context line:1903 [INFO]: SELECT document.id AS document_id, document.account_id AS document_account_id, document.dataset_id AS document_dataset_id, document.upload_file_id AS document_upload_file_id, document.process_rule_id AS document_process_rule_id, document.batch AS document_batch, document.name AS document_name, document.position AS document_position, document.character_count AS document_character_count, document.token_count AS document_token_count, document.processing_started_at AS document_processing_started_at, document.parsing_completed_at AS document_parsing_completed_at, document.splitting_completed_at AS document_splitting_completed_at, document.indexing_completed_at AS document_indexing_completed_at, document.completed_at AS document_completed_at, document.stopped_at AS document_stopped_at, document.error AS document_error, document.enabled AS document_enabled, document.disabled_at AS document_disabled_at, document.status AS document_status, document.updated_at AS document_updated_at, document.created_at AS document_created_at 
FROM document 
WHERE document.id = %(pk_1)s::UUID
[2024-10-06 17:12:00,376.376] base.py -> _exec_single_context line:1908 [INFO]: [generated in 0.00020s] {'pk_1': UUID('996b5ea7-cf3f-4663-9f4e-56780db21615')}
[2024-10-06 17:12:00,424.424] base.py -> _rollback_impl line:1129 [INFO]: ROLLBACK
[2024-10-06 17:12:00,425.425] _internal.py -> _log line:96 [INFO]: 127.0.0.1 - - [06/Oct/2024 17:12:00] "POST /datasets/f3f28f75-8e60-4eba-b6df-4d1b390bbd89/documents HTTP/1.1" 200 -
[2024-10-06 17:14:04,991.991] _internal.py -> _log line:96 [INFO]:  * Detected change in 'D:\\Code\\llmops\\llmops-api\\internal\\service\\indexing_service.py', reloading
[2024-10-06 17:14:05,722.722] _internal.py -> _log line:96 [INFO]:  * Restarting with stat
[2024-10-06 17:14:13,597.597] _internal.py -> _log line:96 [WARNING]:  * Debugger is active!
[2024-10-06 17:14:13,600.600] _internal.py -> _log line:96 [INFO]:  * Debugger PIN: 102-324-223
[2024-10-06 17:14:44,558.558] base.py -> _exec_single_context line:1903 [INFO]: select pg_catalog.version()
[2024-10-06 17:14:44,559.559] base.py -> _exec_single_context line:1908 [INFO]: [raw sql] {}
[2024-10-06 17:14:44,559.559] base.py -> _exec_single_context line:1903 [INFO]: select current_schema()
[2024-10-06 17:14:44,559.559] base.py -> _exec_single_context line:1908 [INFO]: [raw sql] {}
[2024-10-06 17:14:44,565.565] base.py -> _exec_single_context line:1903 [INFO]: show standard_conforming_strings
[2024-10-06 17:14:44,565.565] base.py -> _exec_single_context line:1908 [INFO]: [raw sql] {}
[2024-10-06 17:14:44,566.566] base.py -> _begin_impl line:1103 [INFO]: BEGIN (implicit)
[2024-10-06 17:14:44,568.568] base.py -> _exec_single_context line:1903 [INFO]: SELECT dataset.id AS dataset_id, dataset.account_id AS dataset_account_id, dataset.name AS dataset_name, dataset.icon AS dataset_icon, dataset.description AS dataset_description, dataset.updated_at AS dataset_updated_at, dataset.created_at AS dataset_created_at 
FROM dataset 
WHERE dataset.id = %(pk_1)s::UUID
[2024-10-06 17:14:44,568.568] base.py -> _exec_single_context line:1908 [INFO]: [generated in 0.00015s] {'pk_1': UUID('f3f28f75-8e60-4eba-b6df-4d1b390bbd89')}
[2024-10-06 17:14:44,570.570] base.py -> _exec_single_context line:1903 [INFO]: SELECT upload_file.id AS upload_file_id, upload_file.account_id AS upload_file_account_id, upload_file.name AS upload_file_name, upload_file.key AS upload_file_key, upload_file.size AS upload_file_size, upload_file.extension AS upload_file_extension, upload_file.mime_type AS upload_file_mime_type, upload_file.hash AS upload_file_hash, upload_file.updated_at AS upload_file_updated_at, upload_file.created_at AS upload_file_created_at 
FROM upload_file 
WHERE upload_file.account_id = %(account_id_1)s::UUID AND upload_file.id IN (%(id_1_1)s::UUID)
[2024-10-06 17:14:44,570.570] base.py -> _exec_single_context line:1908 [INFO]: [generated in 0.00017s] {'account_id_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f', 'id_1_1': '7b82638b-83ac-4590-b413-5dce0a799e7e'}
[2024-10-06 17:14:44,571.571] base.py -> _exec_single_context line:1903 [INFO]: INSERT INTO process_rule (account_id, dataset_id, mode, rule) VALUES (%(account_id)s::UUID, %(dataset_id)s::UUID, %(mode)s, %(rule)s) RETURNING process_rule.id, process_rule.updated_at, process_rule.created_at
[2024-10-06 17:14:44,572.572] base.py -> _exec_single_context line:1908 [INFO]: [generated in 0.00015s] {'account_id': '46db30d1-3199-4e79-a0cd-abf12fa6858f', 'dataset_id': UUID('f3f28f75-8e60-4eba-b6df-4d1b390bbd89'), 'mode': 'automatic', 'rule': '{"pre_process_rules": [{"id": "remove_extra_space", "enabled": true}, {"id": "remove_url_and_email", "enabled": true}], "segment": {"separators": ["\ ... (15 characters truncated) ... "\\u3002|\\uff01|\\uff1f", "\\\\.\\\\s|\\\\!\\\\s|\\\\?\\\\s", "\\uff1b|;\\\\s", "\\uff0c|,\\\\s", " ", ""], "chunk_size": 500, "chunk_overlap": 50}}'}
[2024-10-06 17:14:44,573.573] base.py -> _commit_impl line:1146 [INFO]: COMMIT
[2024-10-06 17:14:44,596.596] base.py -> _begin_impl line:1103 [INFO]: BEGIN (implicit)
[2024-10-06 17:14:44,597.597] base.py -> _exec_single_context line:1903 [INFO]: SELECT document.id AS document_id, document.account_id AS document_account_id, document.dataset_id AS document_dataset_id, document.upload_file_id AS document_upload_file_id, document.process_rule_id AS document_process_rule_id, document.batch AS document_batch, document.name AS document_name, document.position AS document_position, document.character_count AS document_character_count, document.token_count AS document_token_count, document.processing_started_at AS document_processing_started_at, document.parsing_completed_at AS document_parsing_completed_at, document.splitting_completed_at AS document_splitting_completed_at, document.indexing_completed_at AS document_indexing_completed_at, document.completed_at AS document_completed_at, document.stopped_at AS document_stopped_at, document.error AS document_error, document.enabled AS document_enabled, document.disabled_at AS document_disabled_at, document.status AS document_status, document.updated_at AS document_updated_at, document.created_at AS document_created_at 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID ORDER BY document.position DESC 
 LIMIT %(param_1)s
[2024-10-06 17:14:44,597.597] base.py -> _exec_single_context line:1908 [INFO]: [generated in 0.00016s] {'dataset_id_1': UUID('f3f28f75-8e60-4eba-b6df-4d1b390bbd89'), 'param_1': 1}
[2024-10-06 17:14:44,599.599] base.py -> _exec_single_context line:1903 [INFO]: SELECT upload_file.id AS upload_file_id, upload_file.account_id AS upload_file_account_id, upload_file.name AS upload_file_name, upload_file.key AS upload_file_key, upload_file.size AS upload_file_size, upload_file.extension AS upload_file_extension, upload_file.mime_type AS upload_file_mime_type, upload_file.hash AS upload_file_hash, upload_file.updated_at AS upload_file_updated_at, upload_file.created_at AS upload_file_created_at 
FROM upload_file 
WHERE upload_file.id = %(pk_1)s::UUID
[2024-10-06 17:14:44,599.599] base.py -> _exec_single_context line:1908 [INFO]: [generated in 0.00013s] {'pk_1': UUID('7b82638b-83ac-4590-b413-5dce0a799e7e')}
[2024-10-06 17:14:44,600.600] base.py -> _exec_single_context line:1903 [INFO]: SELECT process_rule.id AS process_rule_id, process_rule.account_id AS process_rule_account_id, process_rule.dataset_id AS process_rule_dataset_id, process_rule.mode AS process_rule_mode, process_rule.rule AS process_rule_rule, process_rule.updated_at AS process_rule_updated_at, process_rule.created_at AS process_rule_created_at 
FROM process_rule 
WHERE process_rule.id = %(pk_1)s::UUID
[2024-10-06 17:14:44,600.600] base.py -> _exec_single_context line:1908 [INFO]: [generated in 0.00013s] {'pk_1': UUID('abc8616b-14b2-4a85-8e21-60d6550e6f95')}
[2024-10-06 17:14:44,602.602] base.py -> _exec_single_context line:1903 [INFO]: INSERT INTO document (account_id, dataset_id, upload_file_id, process_rule_id, batch, name, position, processing_started_at, parsing_completed_at, splitting_completed_at, indexing_completed_at, completed_at, stopped_at, disabled_at) VALUES (%(account_id)s::UUID, %(dataset_id)s::UUID, %(upload_file_id)s::UUID, %(process_rule_id)s::UUID, %(batch)s, %(name)s, %(position)s, %(processing_started_at)s, %(parsing_completed_at)s, %(splitting_completed_at)s, %(indexing_completed_at)s, %(completed_at)s, %(stopped_at)s, %(disabled_at)s) RETURNING document.id, document.character_count, document.token_count, document.error, document.enabled, document.status, document.updated_at, document.created_at
[2024-10-06 17:14:44,602.602] base.py -> _exec_single_context line:1908 [INFO]: [generated in 0.00014s] {'account_id': '46db30d1-3199-4e79-a0cd-abf12fa6858f', 'dataset_id': UUID('f3f28f75-8e60-4eba-b6df-4d1b390bbd89'), 'upload_file_id': UUID('7b82638b-83ac-4590-b413-5dce0a799e7e'), 'process_rule_id': UUID('abc8616b-14b2-4a85-8e21-60d6550e6f95'), 'batch': '20241006171444464340', 'name': '项目API文档-完整.md', 'position': 2, 'processing_started_at': None, 'parsing_completed_at': None, 'splitting_completed_at': None, 'indexing_completed_at': None, 'completed_at': None, 'stopped_at': None, 'disabled_at': None}
[2024-10-06 17:14:44,603.603] base.py -> _commit_impl line:1146 [INFO]: COMMIT
[2024-10-06 17:14:44,623.623] base.py -> _begin_impl line:1103 [INFO]: BEGIN (implicit)
[2024-10-06 17:14:44,623.623] base.py -> _exec_single_context line:1903 [INFO]: SELECT document.id AS document_id, document.account_id AS document_account_id, document.dataset_id AS document_dataset_id, document.upload_file_id AS document_upload_file_id, document.process_rule_id AS document_process_rule_id, document.batch AS document_batch, document.name AS document_name, document.position AS document_position, document.character_count AS document_character_count, document.token_count AS document_token_count, document.processing_started_at AS document_processing_started_at, document.parsing_completed_at AS document_parsing_completed_at, document.splitting_completed_at AS document_splitting_completed_at, document.indexing_completed_at AS document_indexing_completed_at, document.completed_at AS document_completed_at, document.stopped_at AS document_stopped_at, document.error AS document_error, document.enabled AS document_enabled, document.disabled_at AS document_disabled_at, document.status AS document_status, document.updated_at AS document_updated_at, document.created_at AS document_created_at 
FROM document 
WHERE document.id = %(pk_1)s::UUID
[2024-10-06 17:14:44,623.623] base.py -> _exec_single_context line:1908 [INFO]: [generated in 0.00013s] {'pk_1': UUID('6b773923-aed3-4549-99f8-015631191c3d')}
[2024-10-06 17:14:44,657.657] base.py -> _rollback_impl line:1129 [INFO]: ROLLBACK
[2024-10-06 17:14:44,657.657] _internal.py -> _log line:96 [INFO]: 127.0.0.1 - - [06/Oct/2024 17:14:44] "POST /datasets/f3f28f75-8e60-4eba-b6df-4d1b390bbd89/documents HTTP/1.1" 200 -
[2024-10-06 17:15:32,707.707] _internal.py -> _log line:96 [INFO]:  * Detected change in 'D:\\Code\\llmops\\llmops-api\\internal\\service\\indexing_service.py', reloading
[2024-10-06 17:15:33,322.322] _internal.py -> _log line:96 [INFO]:  * Restarting with stat
[2024-10-06 17:15:41,302.302] _internal.py -> _log line:96 [WARNING]:  * Debugger is active!
[2024-10-06 17:15:41,306.306] _internal.py -> _log line:96 [INFO]:  * Debugger PIN: 102-324-223
[2024-10-06 17:15:51,531.531] base.py -> _exec_single_context line:1903 [INFO]: select pg_catalog.version()
[2024-10-06 17:15:51,532.532] base.py -> _exec_single_context line:1908 [INFO]: [raw sql] {}
[2024-10-06 17:15:51,532.532] base.py -> _exec_single_context line:1903 [INFO]: select current_schema()
[2024-10-06 17:15:51,533.533] base.py -> _exec_single_context line:1908 [INFO]: [raw sql] {}
[2024-10-06 17:15:51,533.533] base.py -> _exec_single_context line:1903 [INFO]: show standard_conforming_strings
[2024-10-06 17:15:51,533.533] base.py -> _exec_single_context line:1908 [INFO]: [raw sql] {}
[2024-10-06 17:15:51,534.534] base.py -> _begin_impl line:1103 [INFO]: BEGIN (implicit)
[2024-10-06 17:15:51,535.535] base.py -> _exec_single_context line:1903 [INFO]: SELECT dataset.id AS dataset_id, dataset.account_id AS dataset_account_id, dataset.name AS dataset_name, dataset.icon AS dataset_icon, dataset.description AS dataset_description, dataset.updated_at AS dataset_updated_at, dataset.created_at AS dataset_created_at 
FROM dataset 
WHERE dataset.id = %(pk_1)s::UUID
[2024-10-06 17:15:51,535.535] base.py -> _exec_single_context line:1908 [INFO]: [generated in 0.00012s] {'pk_1': UUID('f3f28f75-8e60-4eba-b6df-4d1b390bbd89')}
[2024-10-06 17:15:51,536.536] base.py -> _exec_single_context line:1903 [INFO]: SELECT upload_file.id AS upload_file_id, upload_file.account_id AS upload_file_account_id, upload_file.name AS upload_file_name, upload_file.key AS upload_file_key, upload_file.size AS upload_file_size, upload_file.extension AS upload_file_extension, upload_file.mime_type AS upload_file_mime_type, upload_file.hash AS upload_file_hash, upload_file.updated_at AS upload_file_updated_at, upload_file.created_at AS upload_file_created_at 
FROM upload_file 
WHERE upload_file.account_id = %(account_id_1)s::UUID AND upload_file.id IN (%(id_1_1)s::UUID)
[2024-10-06 17:15:51,536.536] base.py -> _exec_single_context line:1908 [INFO]: [generated in 0.00016s] {'account_id_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f', 'id_1_1': '7b82638b-83ac-4590-b413-5dce0a799e7e'}
[2024-10-06 17:15:51,538.538] base.py -> _exec_single_context line:1903 [INFO]: INSERT INTO process_rule (account_id, dataset_id, mode, rule) VALUES (%(account_id)s::UUID, %(dataset_id)s::UUID, %(mode)s, %(rule)s) RETURNING process_rule.id, process_rule.updated_at, process_rule.created_at
[2024-10-06 17:15:51,538.538] base.py -> _exec_single_context line:1908 [INFO]: [generated in 0.00015s] {'account_id': '46db30d1-3199-4e79-a0cd-abf12fa6858f', 'dataset_id': UUID('f3f28f75-8e60-4eba-b6df-4d1b390bbd89'), 'mode': 'automatic', 'rule': '{"pre_process_rules": [{"id": "remove_extra_space", "enabled": true}, {"id": "remove_url_and_email", "enabled": true}], "segment": {"separators": ["\ ... (15 characters truncated) ... "\\u3002|\\uff01|\\uff1f", "\\\\.\\\\s|\\\\!\\\\s|\\\\?\\\\s", "\\uff1b|;\\\\s", "\\uff0c|,\\\\s", " ", ""], "chunk_size": 500, "chunk_overlap": 50}}'}
[2024-10-06 17:15:51,539.539] base.py -> _commit_impl line:1146 [INFO]: COMMIT
[2024-10-06 17:15:51,562.562] base.py -> _begin_impl line:1103 [INFO]: BEGIN (implicit)
[2024-10-06 17:15:51,564.564] base.py -> _exec_single_context line:1903 [INFO]: SELECT document.id AS document_id, document.account_id AS document_account_id, document.dataset_id AS document_dataset_id, document.upload_file_id AS document_upload_file_id, document.process_rule_id AS document_process_rule_id, document.batch AS document_batch, document.name AS document_name, document.position AS document_position, document.character_count AS document_character_count, document.token_count AS document_token_count, document.processing_started_at AS document_processing_started_at, document.parsing_completed_at AS document_parsing_completed_at, document.splitting_completed_at AS document_splitting_completed_at, document.indexing_completed_at AS document_indexing_completed_at, document.completed_at AS document_completed_at, document.stopped_at AS document_stopped_at, document.error AS document_error, document.enabled AS document_enabled, document.disabled_at AS document_disabled_at, document.status AS document_status, document.updated_at AS document_updated_at, document.created_at AS document_created_at 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID ORDER BY document.position DESC 
 LIMIT %(param_1)s
[2024-10-06 17:15:51,564.564] base.py -> _exec_single_context line:1908 [INFO]: [generated in 0.00018s] {'dataset_id_1': UUID('f3f28f75-8e60-4eba-b6df-4d1b390bbd89'), 'param_1': 1}
[2024-10-06 17:15:51,565.565] base.py -> _exec_single_context line:1903 [INFO]: SELECT upload_file.id AS upload_file_id, upload_file.account_id AS upload_file_account_id, upload_file.name AS upload_file_name, upload_file.key AS upload_file_key, upload_file.size AS upload_file_size, upload_file.extension AS upload_file_extension, upload_file.mime_type AS upload_file_mime_type, upload_file.hash AS upload_file_hash, upload_file.updated_at AS upload_file_updated_at, upload_file.created_at AS upload_file_created_at 
FROM upload_file 
WHERE upload_file.id = %(pk_1)s::UUID
[2024-10-06 17:15:51,566.566] base.py -> _exec_single_context line:1908 [INFO]: [generated in 0.00014s] {'pk_1': UUID('7b82638b-83ac-4590-b413-5dce0a799e7e')}
[2024-10-06 17:15:51,567.567] base.py -> _exec_single_context line:1903 [INFO]: SELECT process_rule.id AS process_rule_id, process_rule.account_id AS process_rule_account_id, process_rule.dataset_id AS process_rule_dataset_id, process_rule.mode AS process_rule_mode, process_rule.rule AS process_rule_rule, process_rule.updated_at AS process_rule_updated_at, process_rule.created_at AS process_rule_created_at 
FROM process_rule 
WHERE process_rule.id = %(pk_1)s::UUID
[2024-10-06 17:15:51,567.567] base.py -> _exec_single_context line:1908 [INFO]: [generated in 0.00013s] {'pk_1': UUID('371bbd03-f6b9-4815-a36d-ada0a9d182ae')}
[2024-10-06 17:15:51,568.568] base.py -> _exec_single_context line:1903 [INFO]: INSERT INTO document (account_id, dataset_id, upload_file_id, process_rule_id, batch, name, position, processing_started_at, parsing_completed_at, splitting_completed_at, indexing_completed_at, completed_at, stopped_at, disabled_at) VALUES (%(account_id)s::UUID, %(dataset_id)s::UUID, %(upload_file_id)s::UUID, %(process_rule_id)s::UUID, %(batch)s, %(name)s, %(position)s, %(processing_started_at)s, %(parsing_completed_at)s, %(splitting_completed_at)s, %(indexing_completed_at)s, %(completed_at)s, %(stopped_at)s, %(disabled_at)s) RETURNING document.id, document.character_count, document.token_count, document.error, document.enabled, document.status, document.updated_at, document.created_at
[2024-10-06 17:15:51,568.568] base.py -> _exec_single_context line:1908 [INFO]: [generated in 0.00014s] {'account_id': '46db30d1-3199-4e79-a0cd-abf12fa6858f', 'dataset_id': UUID('f3f28f75-8e60-4eba-b6df-4d1b390bbd89'), 'upload_file_id': UUID('7b82638b-83ac-4590-b413-5dce0a799e7e'), 'process_rule_id': UUID('371bbd03-f6b9-4815-a36d-ada0a9d182ae'), 'batch': '20241006171551884342', 'name': '项目API文档-完整.md', 'position': 3, 'processing_started_at': None, 'parsing_completed_at': None, 'splitting_completed_at': None, 'indexing_completed_at': None, 'completed_at': None, 'stopped_at': None, 'disabled_at': None}
[2024-10-06 17:15:51,569.569] base.py -> _commit_impl line:1146 [INFO]: COMMIT
[2024-10-06 17:15:51,573.573] base.py -> _begin_impl line:1103 [INFO]: BEGIN (implicit)
[2024-10-06 17:15:51,573.573] base.py -> _exec_single_context line:1903 [INFO]: SELECT document.id AS document_id, document.account_id AS document_account_id, document.dataset_id AS document_dataset_id, document.upload_file_id AS document_upload_file_id, document.process_rule_id AS document_process_rule_id, document.batch AS document_batch, document.name AS document_name, document.position AS document_position, document.character_count AS document_character_count, document.token_count AS document_token_count, document.processing_started_at AS document_processing_started_at, document.parsing_completed_at AS document_parsing_completed_at, document.splitting_completed_at AS document_splitting_completed_at, document.indexing_completed_at AS document_indexing_completed_at, document.completed_at AS document_completed_at, document.stopped_at AS document_stopped_at, document.error AS document_error, document.enabled AS document_enabled, document.disabled_at AS document_disabled_at, document.status AS document_status, document.updated_at AS document_updated_at, document.created_at AS document_created_at 
FROM document 
WHERE document.id = %(pk_1)s::UUID
[2024-10-06 17:15:51,573.573] base.py -> _exec_single_context line:1908 [INFO]: [generated in 0.00012s] {'pk_1': UUID('8125df38-d6c1-4962-b8d0-fd5621ba0b2d')}
[2024-10-06 17:15:51,605.605] base.py -> _rollback_impl line:1129 [INFO]: ROLLBACK
[2024-10-06 17:15:51,606.606] _internal.py -> _log line:96 [INFO]: 127.0.0.1 - - [06/Oct/2024 17:15:51] "POST /datasets/f3f28f75-8e60-4eba-b6df-4d1b390bbd89/documents HTTP/1.1" 200 -
[2024-10-06 17:20:45,203.203] base.py -> _begin_impl line:1103 [INFO]: BEGIN (implicit)
[2024-10-06 17:20:45,203.203] base.py -> _exec_single_context line:1903 [INFO]: SELECT dataset.id AS dataset_id, dataset.account_id AS dataset_account_id, dataset.name AS dataset_name, dataset.icon AS dataset_icon, dataset.description AS dataset_description, dataset.updated_at AS dataset_updated_at, dataset.created_at AS dataset_created_at 
FROM dataset 
WHERE dataset.id = %(pk_1)s::UUID
[2024-10-06 17:20:45,203.203] base.py -> _exec_single_context line:1908 [INFO]: [cached since 293.7s ago] {'pk_1': UUID('f3f28f75-8e60-4eba-b6df-4d1b390bbd89')}
[2024-10-06 17:20:45,205.205] base.py -> _exec_single_context line:1903 [INFO]: SELECT upload_file.id AS upload_file_id, upload_file.account_id AS upload_file_account_id, upload_file.name AS upload_file_name, upload_file.key AS upload_file_key, upload_file.size AS upload_file_size, upload_file.extension AS upload_file_extension, upload_file.mime_type AS upload_file_mime_type, upload_file.hash AS upload_file_hash, upload_file.updated_at AS upload_file_updated_at, upload_file.created_at AS upload_file_created_at 
FROM upload_file 
WHERE upload_file.account_id = %(account_id_1)s::UUID AND upload_file.id IN (%(id_1_1)s::UUID)
[2024-10-06 17:20:45,205.205] base.py -> _exec_single_context line:1908 [INFO]: [cached since 293.7s ago] {'account_id_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f', 'id_1_1': '7b82638b-83ac-4590-b413-5dce0a799e7e'}
[2024-10-06 17:20:45,205.205] base.py -> _exec_single_context line:1903 [INFO]: INSERT INTO process_rule (account_id, dataset_id, mode, rule) VALUES (%(account_id)s::UUID, %(dataset_id)s::UUID, %(mode)s, %(rule)s) RETURNING process_rule.id, process_rule.updated_at, process_rule.created_at
[2024-10-06 17:20:45,206.206] base.py -> _exec_single_context line:1908 [INFO]: [cached since 293.7s ago] {'account_id': '46db30d1-3199-4e79-a0cd-abf12fa6858f', 'dataset_id': UUID('f3f28f75-8e60-4eba-b6df-4d1b390bbd89'), 'mode': 'automatic', 'rule': '{"pre_process_rules": [{"id": "remove_extra_space", "enabled": true}, {"id": "remove_url_and_email", "enabled": true}], "segment": {"separators": ["\ ... (15 characters truncated) ... "\\u3002|\\uff01|\\uff1f", "\\\\.\\\\s|\\\\!\\\\s|\\\\?\\\\s", "\\uff1b|;\\\\s", "\\uff0c|,\\\\s", " ", ""], "chunk_size": 500, "chunk_overlap": 50}}'}
[2024-10-06 17:20:45,206.206] base.py -> _commit_impl line:1146 [INFO]: COMMIT
[2024-10-06 17:20:45,222.222] base.py -> _begin_impl line:1103 [INFO]: BEGIN (implicit)
[2024-10-06 17:20:45,222.222] base.py -> _exec_single_context line:1903 [INFO]: SELECT document.id AS document_id, document.account_id AS document_account_id, document.dataset_id AS document_dataset_id, document.upload_file_id AS document_upload_file_id, document.process_rule_id AS document_process_rule_id, document.batch AS document_batch, document.name AS document_name, document.position AS document_position, document.character_count AS document_character_count, document.token_count AS document_token_count, document.processing_started_at AS document_processing_started_at, document.parsing_completed_at AS document_parsing_completed_at, document.splitting_completed_at AS document_splitting_completed_at, document.indexing_completed_at AS document_indexing_completed_at, document.completed_at AS document_completed_at, document.stopped_at AS document_stopped_at, document.error AS document_error, document.enabled AS document_enabled, document.disabled_at AS document_disabled_at, document.status AS document_status, document.updated_at AS document_updated_at, document.created_at AS document_created_at 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID ORDER BY document.position DESC 
 LIMIT %(param_1)s
[2024-10-06 17:20:45,222.222] base.py -> _exec_single_context line:1908 [INFO]: [cached since 293.7s ago] {'dataset_id_1': UUID('f3f28f75-8e60-4eba-b6df-4d1b390bbd89'), 'param_1': 1}
[2024-10-06 17:20:45,223.223] base.py -> _exec_single_context line:1903 [INFO]: SELECT upload_file.id AS upload_file_id, upload_file.account_id AS upload_file_account_id, upload_file.name AS upload_file_name, upload_file.key AS upload_file_key, upload_file.size AS upload_file_size, upload_file.extension AS upload_file_extension, upload_file.mime_type AS upload_file_mime_type, upload_file.hash AS upload_file_hash, upload_file.updated_at AS upload_file_updated_at, upload_file.created_at AS upload_file_created_at 
FROM upload_file 
WHERE upload_file.id = %(pk_1)s::UUID
[2024-10-06 17:20:45,223.223] base.py -> _exec_single_context line:1908 [INFO]: [cached since 293.7s ago] {'pk_1': UUID('7b82638b-83ac-4590-b413-5dce0a799e7e')}
[2024-10-06 17:20:45,224.224] base.py -> _exec_single_context line:1903 [INFO]: SELECT process_rule.id AS process_rule_id, process_rule.account_id AS process_rule_account_id, process_rule.dataset_id AS process_rule_dataset_id, process_rule.mode AS process_rule_mode, process_rule.rule AS process_rule_rule, process_rule.updated_at AS process_rule_updated_at, process_rule.created_at AS process_rule_created_at 
FROM process_rule 
WHERE process_rule.id = %(pk_1)s::UUID
[2024-10-06 17:20:45,224.224] base.py -> _exec_single_context line:1908 [INFO]: [cached since 293.7s ago] {'pk_1': UUID('e6e76fac-1ddd-4fa4-b3b5-17dabb726c8f')}
[2024-10-06 17:20:45,225.225] base.py -> _exec_single_context line:1903 [INFO]: INSERT INTO document (account_id, dataset_id, upload_file_id, process_rule_id, batch, name, position, processing_started_at, parsing_completed_at, splitting_completed_at, indexing_completed_at, completed_at, stopped_at, disabled_at) VALUES (%(account_id)s::UUID, %(dataset_id)s::UUID, %(upload_file_id)s::UUID, %(process_rule_id)s::UUID, %(batch)s, %(name)s, %(position)s, %(processing_started_at)s, %(parsing_completed_at)s, %(splitting_completed_at)s, %(indexing_completed_at)s, %(completed_at)s, %(stopped_at)s, %(disabled_at)s) RETURNING document.id, document.character_count, document.token_count, document.error, document.enabled, document.status, document.updated_at, document.created_at
[2024-10-06 17:20:45,225.225] base.py -> _exec_single_context line:1908 [INFO]: [cached since 293.7s ago] {'account_id': '46db30d1-3199-4e79-a0cd-abf12fa6858f', 'dataset_id': UUID('f3f28f75-8e60-4eba-b6df-4d1b390bbd89'), 'upload_file_id': UUID('7b82638b-83ac-4590-b413-5dce0a799e7e'), 'process_rule_id': UUID('e6e76fac-1ddd-4fa4-b3b5-17dabb726c8f'), 'batch': '20241006172045590412', 'name': '项目API文档-完整.md', 'position': 4, 'processing_started_at': None, 'parsing_completed_at': None, 'splitting_completed_at': None, 'indexing_completed_at': None, 'completed_at': None, 'stopped_at': None, 'disabled_at': None}
[2024-10-06 17:20:45,227.227] base.py -> _commit_impl line:1146 [INFO]: COMMIT
[2024-10-06 17:20:45,227.227] base.py -> _begin_impl line:1103 [INFO]: BEGIN (implicit)
[2024-10-06 17:20:45,227.227] base.py -> _exec_single_context line:1903 [INFO]: SELECT document.id AS document_id, document.account_id AS document_account_id, document.dataset_id AS document_dataset_id, document.upload_file_id AS document_upload_file_id, document.process_rule_id AS document_process_rule_id, document.batch AS document_batch, document.name AS document_name, document.position AS document_position, document.character_count AS document_character_count, document.token_count AS document_token_count, document.processing_started_at AS document_processing_started_at, document.parsing_completed_at AS document_parsing_completed_at, document.splitting_completed_at AS document_splitting_completed_at, document.indexing_completed_at AS document_indexing_completed_at, document.completed_at AS document_completed_at, document.stopped_at AS document_stopped_at, document.error AS document_error, document.enabled AS document_enabled, document.disabled_at AS document_disabled_at, document.status AS document_status, document.updated_at AS document_updated_at, document.created_at AS document_created_at 
FROM document 
WHERE document.id = %(pk_1)s::UUID
[2024-10-06 17:20:45,228.228] base.py -> _exec_single_context line:1908 [INFO]: [cached since 293.7s ago] {'pk_1': UUID('8201fd0a-954f-4957-873b-385ee503711a')}
[2024-10-06 17:20:45,249.249] base.py -> _rollback_impl line:1129 [INFO]: ROLLBACK
[2024-10-06 17:20:45,250.250] _internal.py -> _log line:96 [INFO]: 127.0.0.1 - - [06/Oct/2024 17:20:45] "POST /datasets/f3f28f75-8e60-4eba-b6df-4d1b390bbd89/documents HTTP/1.1" 200 -
[2024-10-06 17:23:17,520.520] _internal.py -> _log line:96 [INFO]:  * Detected change in 'D:\\Code\\llmops\\llmops-api\\internal\\service\\indexing_service.py', reloading
[2024-10-06 17:23:18,227.227] _internal.py -> _log line:96 [INFO]:  * Restarting with stat
[2024-10-06 17:23:26,256.256] _internal.py -> _log line:96 [WARNING]:  * Debugger is active!
[2024-10-06 17:23:26,258.258] _internal.py -> _log line:96 [INFO]:  * Debugger PIN: 102-324-223
[2024-10-06 17:23:54,443.443] base.py -> _exec_single_context line:1903 [INFO]: select pg_catalog.version()
[2024-10-06 17:23:54,443.443] base.py -> _exec_single_context line:1908 [INFO]: [raw sql] {}
[2024-10-06 17:23:54,444.444] base.py -> _exec_single_context line:1903 [INFO]: select current_schema()
[2024-10-06 17:23:54,444.444] base.py -> _exec_single_context line:1908 [INFO]: [raw sql] {}
[2024-10-06 17:23:54,444.444] base.py -> _exec_single_context line:1903 [INFO]: show standard_conforming_strings
[2024-10-06 17:23:54,444.444] base.py -> _exec_single_context line:1908 [INFO]: [raw sql] {}
[2024-10-06 17:23:54,445.445] base.py -> _begin_impl line:1103 [INFO]: BEGIN (implicit)
[2024-10-06 17:23:54,447.447] base.py -> _exec_single_context line:1903 [INFO]: SELECT dataset.id AS dataset_id, dataset.account_id AS dataset_account_id, dataset.name AS dataset_name, dataset.icon AS dataset_icon, dataset.description AS dataset_description, dataset.updated_at AS dataset_updated_at, dataset.created_at AS dataset_created_at 
FROM dataset 
WHERE dataset.id = %(pk_1)s::UUID
[2024-10-06 17:23:54,447.447] base.py -> _exec_single_context line:1908 [INFO]: [generated in 0.00016s] {'pk_1': UUID('f3f28f75-8e60-4eba-b6df-4d1b390bbd89')}
[2024-10-06 17:23:54,449.449] base.py -> _exec_single_context line:1903 [INFO]: SELECT upload_file.id AS upload_file_id, upload_file.account_id AS upload_file_account_id, upload_file.name AS upload_file_name, upload_file.key AS upload_file_key, upload_file.size AS upload_file_size, upload_file.extension AS upload_file_extension, upload_file.mime_type AS upload_file_mime_type, upload_file.hash AS upload_file_hash, upload_file.updated_at AS upload_file_updated_at, upload_file.created_at AS upload_file_created_at 
FROM upload_file 
WHERE upload_file.account_id = %(account_id_1)s::UUID AND upload_file.id IN (%(id_1_1)s::UUID)
[2024-10-06 17:23:54,449.449] base.py -> _exec_single_context line:1908 [INFO]: [generated in 0.00018s] {'account_id_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f', 'id_1_1': '7b82638b-83ac-4590-b413-5dce0a799e7e'}
[2024-10-06 17:23:54,451.451] base.py -> _exec_single_context line:1903 [INFO]: INSERT INTO process_rule (account_id, dataset_id, mode, rule) VALUES (%(account_id)s::UUID, %(dataset_id)s::UUID, %(mode)s, %(rule)s) RETURNING process_rule.id, process_rule.updated_at, process_rule.created_at
[2024-10-06 17:23:54,451.451] base.py -> _exec_single_context line:1908 [INFO]: [generated in 0.00015s] {'account_id': '46db30d1-3199-4e79-a0cd-abf12fa6858f', 'dataset_id': UUID('f3f28f75-8e60-4eba-b6df-4d1b390bbd89'), 'mode': 'automatic', 'rule': '{"pre_process_rules": [{"id": "remove_extra_space", "enabled": true}, {"id": "remove_url_and_email", "enabled": true}], "segment": {"separators": ["\ ... (15 characters truncated) ... "\\u3002|\\uff01|\\uff1f", "\\\\.\\\\s|\\\\!\\\\s|\\\\?\\\\s", "\\uff1b|;\\\\s", "\\uff0c|,\\\\s", " ", ""], "chunk_size": 500, "chunk_overlap": 50}}'}
[2024-10-06 17:23:54,452.452] base.py -> _commit_impl line:1146 [INFO]: COMMIT
[2024-10-06 17:23:54,454.454] base.py -> _begin_impl line:1103 [INFO]: BEGIN (implicit)
[2024-10-06 17:23:54,456.456] base.py -> _exec_single_context line:1903 [INFO]: SELECT document.id AS document_id, document.account_id AS document_account_id, document.dataset_id AS document_dataset_id, document.upload_file_id AS document_upload_file_id, document.process_rule_id AS document_process_rule_id, document.batch AS document_batch, document.name AS document_name, document.position AS document_position, document.character_count AS document_character_count, document.token_count AS document_token_count, document.processing_started_at AS document_processing_started_at, document.parsing_completed_at AS document_parsing_completed_at, document.splitting_completed_at AS document_splitting_completed_at, document.indexing_completed_at AS document_indexing_completed_at, document.completed_at AS document_completed_at, document.stopped_at AS document_stopped_at, document.error AS document_error, document.enabled AS document_enabled, document.disabled_at AS document_disabled_at, document.status AS document_status, document.updated_at AS document_updated_at, document.created_at AS document_created_at 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID ORDER BY document.position DESC 
 LIMIT %(param_1)s
[2024-10-06 17:23:54,456.456] base.py -> _exec_single_context line:1908 [INFO]: [generated in 0.00013s] {'dataset_id_1': UUID('f3f28f75-8e60-4eba-b6df-4d1b390bbd89'), 'param_1': 1}
[2024-10-06 17:23:54,457.457] base.py -> _exec_single_context line:1903 [INFO]: SELECT upload_file.id AS upload_file_id, upload_file.account_id AS upload_file_account_id, upload_file.name AS upload_file_name, upload_file.key AS upload_file_key, upload_file.size AS upload_file_size, upload_file.extension AS upload_file_extension, upload_file.mime_type AS upload_file_mime_type, upload_file.hash AS upload_file_hash, upload_file.updated_at AS upload_file_updated_at, upload_file.created_at AS upload_file_created_at 
FROM upload_file 
WHERE upload_file.id = %(pk_1)s::UUID
[2024-10-06 17:23:54,457.457] base.py -> _exec_single_context line:1908 [INFO]: [generated in 0.00012s] {'pk_1': UUID('7b82638b-83ac-4590-b413-5dce0a799e7e')}
[2024-10-06 17:23:54,458.458] base.py -> _exec_single_context line:1903 [INFO]: SELECT process_rule.id AS process_rule_id, process_rule.account_id AS process_rule_account_id, process_rule.dataset_id AS process_rule_dataset_id, process_rule.mode AS process_rule_mode, process_rule.rule AS process_rule_rule, process_rule.updated_at AS process_rule_updated_at, process_rule.created_at AS process_rule_created_at 
FROM process_rule 
WHERE process_rule.id = %(pk_1)s::UUID
[2024-10-06 17:23:54,458.458] base.py -> _exec_single_context line:1908 [INFO]: [generated in 0.00012s] {'pk_1': UUID('fd5b8d30-0c5d-4727-b5be-809bb656532f')}
[2024-10-06 17:23:54,459.459] base.py -> _exec_single_context line:1903 [INFO]: INSERT INTO document (account_id, dataset_id, upload_file_id, process_rule_id, batch, name, position, processing_started_at, parsing_completed_at, splitting_completed_at, indexing_completed_at, completed_at, stopped_at, disabled_at) VALUES (%(account_id)s::UUID, %(dataset_id)s::UUID, %(upload_file_id)s::UUID, %(process_rule_id)s::UUID, %(batch)s, %(name)s, %(position)s, %(processing_started_at)s, %(parsing_completed_at)s, %(splitting_completed_at)s, %(indexing_completed_at)s, %(completed_at)s, %(stopped_at)s, %(disabled_at)s) RETURNING document.id, document.character_count, document.token_count, document.error, document.enabled, document.status, document.updated_at, document.created_at
[2024-10-06 17:23:54,459.459] base.py -> _exec_single_context line:1908 [INFO]: [generated in 0.00018s] {'account_id': '46db30d1-3199-4e79-a0cd-abf12fa6858f', 'dataset_id': UUID('f3f28f75-8e60-4eba-b6df-4d1b390bbd89'), 'upload_file_id': UUID('7b82638b-83ac-4590-b413-5dce0a799e7e'), 'process_rule_id': UUID('fd5b8d30-0c5d-4727-b5be-809bb656532f'), 'batch': '20241006172354534618', 'name': '项目API文档-完整.md', 'position': 1, 'processing_started_at': None, 'parsing_completed_at': None, 'splitting_completed_at': None, 'indexing_completed_at': None, 'completed_at': None, 'stopped_at': None, 'disabled_at': None}
[2024-10-06 17:23:54,460.460] base.py -> _commit_impl line:1146 [INFO]: COMMIT
[2024-10-06 17:23:54,463.463] base.py -> _begin_impl line:1103 [INFO]: BEGIN (implicit)
[2024-10-06 17:23:54,464.464] base.py -> _exec_single_context line:1903 [INFO]: SELECT document.id AS document_id, document.account_id AS document_account_id, document.dataset_id AS document_dataset_id, document.upload_file_id AS document_upload_file_id, document.process_rule_id AS document_process_rule_id, document.batch AS document_batch, document.name AS document_name, document.position AS document_position, document.character_count AS document_character_count, document.token_count AS document_token_count, document.processing_started_at AS document_processing_started_at, document.parsing_completed_at AS document_parsing_completed_at, document.splitting_completed_at AS document_splitting_completed_at, document.indexing_completed_at AS document_indexing_completed_at, document.completed_at AS document_completed_at, document.stopped_at AS document_stopped_at, document.error AS document_error, document.enabled AS document_enabled, document.disabled_at AS document_disabled_at, document.status AS document_status, document.updated_at AS document_updated_at, document.created_at AS document_created_at 
FROM document 
WHERE document.id = %(pk_1)s::UUID
[2024-10-06 17:23:54,464.464] base.py -> _exec_single_context line:1908 [INFO]: [generated in 0.00013s] {'pk_1': UUID('f657c776-92f3-47fd-8824-f554cd1a172e')}
[2024-10-06 17:23:54,505.505] base.py -> _rollback_impl line:1129 [INFO]: ROLLBACK
[2024-10-06 17:23:54,506.506] _internal.py -> _log line:96 [INFO]: 127.0.0.1 - - [06/Oct/2024 17:23:54] "POST /datasets/f3f28f75-8e60-4eba-b6df-4d1b390bbd89/documents HTTP/1.1" 200 -
[2024-10-06 17:28:17,352.352] _internal.py -> _log line:96 [INFO]:  * Detected change in 'D:\\Code\\llmops\\llmops-api\\internal\\service\\indexing_service.py', reloading
[2024-10-06 17:28:18,018.018] _internal.py -> _log line:96 [INFO]:  * Restarting with stat
[2024-10-06 17:28:26,410.410] _internal.py -> _log line:96 [WARNING]:  * Debugger is active!
[2024-10-06 17:28:26,414.414] _internal.py -> _log line:96 [INFO]:  * Debugger PIN: 102-324-223
[2024-10-06 17:28:42,860.860] base.py -> _exec_single_context line:1903 [INFO]: select pg_catalog.version()
[2024-10-06 17:28:42,860.860] base.py -> _exec_single_context line:1908 [INFO]: [raw sql] {}
[2024-10-06 17:28:42,861.861] base.py -> _exec_single_context line:1903 [INFO]: select current_schema()
[2024-10-06 17:28:42,861.861] base.py -> _exec_single_context line:1908 [INFO]: [raw sql] {}
[2024-10-06 17:28:42,862.862] base.py -> _exec_single_context line:1903 [INFO]: show standard_conforming_strings
[2024-10-06 17:28:42,862.862] base.py -> _exec_single_context line:1908 [INFO]: [raw sql] {}
[2024-10-06 17:28:42,862.862] base.py -> _begin_impl line:1103 [INFO]: BEGIN (implicit)
[2024-10-06 17:28:42,864.864] base.py -> _exec_single_context line:1903 [INFO]: SELECT dataset.id AS dataset_id, dataset.account_id AS dataset_account_id, dataset.name AS dataset_name, dataset.icon AS dataset_icon, dataset.description AS dataset_description, dataset.updated_at AS dataset_updated_at, dataset.created_at AS dataset_created_at 
FROM dataset 
WHERE dataset.id = %(pk_1)s::UUID
[2024-10-06 17:28:42,864.864] base.py -> _exec_single_context line:1908 [INFO]: [generated in 0.00014s] {'pk_1': UUID('f3f28f75-8e60-4eba-b6df-4d1b390bbd89')}
[2024-10-06 17:28:42,866.866] base.py -> _exec_single_context line:1903 [INFO]: SELECT upload_file.id AS upload_file_id, upload_file.account_id AS upload_file_account_id, upload_file.name AS upload_file_name, upload_file.key AS upload_file_key, upload_file.size AS upload_file_size, upload_file.extension AS upload_file_extension, upload_file.mime_type AS upload_file_mime_type, upload_file.hash AS upload_file_hash, upload_file.updated_at AS upload_file_updated_at, upload_file.created_at AS upload_file_created_at 
FROM upload_file 
WHERE upload_file.account_id = %(account_id_1)s::UUID AND upload_file.id IN (%(id_1_1)s::UUID)
[2024-10-06 17:28:42,866.866] base.py -> _exec_single_context line:1908 [INFO]: [generated in 0.00017s] {'account_id_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f', 'id_1_1': '7b82638b-83ac-4590-b413-5dce0a799e7e'}
[2024-10-06 17:28:42,868.868] base.py -> _exec_single_context line:1903 [INFO]: INSERT INTO process_rule (account_id, dataset_id, mode, rule) VALUES (%(account_id)s::UUID, %(dataset_id)s::UUID, %(mode)s, %(rule)s) RETURNING process_rule.id, process_rule.updated_at, process_rule.created_at
[2024-10-06 17:28:42,868.868] base.py -> _exec_single_context line:1908 [INFO]: [generated in 0.00028s] {'account_id': '46db30d1-3199-4e79-a0cd-abf12fa6858f', 'dataset_id': UUID('f3f28f75-8e60-4eba-b6df-4d1b390bbd89'), 'mode': 'automatic', 'rule': '{"pre_process_rules": [{"id": "remove_extra_space", "enabled": true}, {"id": "remove_url_and_email", "enabled": true}], "segment": {"separators": ["\ ... (15 characters truncated) ... "\\u3002|\\uff01|\\uff1f", "\\\\.\\\\s|\\\\!\\\\s|\\\\?\\\\s", "\\uff1b|;\\\\s", "\\uff0c|,\\\\s", " ", ""], "chunk_size": 500, "chunk_overlap": 50}}'}
[2024-10-06 17:28:42,870.870] base.py -> _commit_impl line:1146 [INFO]: COMMIT
[2024-10-06 17:28:42,929.929] base.py -> _begin_impl line:1103 [INFO]: BEGIN (implicit)
[2024-10-06 17:28:42,931.931] base.py -> _exec_single_context line:1903 [INFO]: SELECT document.id AS document_id, document.account_id AS document_account_id, document.dataset_id AS document_dataset_id, document.upload_file_id AS document_upload_file_id, document.process_rule_id AS document_process_rule_id, document.batch AS document_batch, document.name AS document_name, document.position AS document_position, document.character_count AS document_character_count, document.token_count AS document_token_count, document.processing_started_at AS document_processing_started_at, document.parsing_completed_at AS document_parsing_completed_at, document.splitting_completed_at AS document_splitting_completed_at, document.indexing_completed_at AS document_indexing_completed_at, document.completed_at AS document_completed_at, document.stopped_at AS document_stopped_at, document.error AS document_error, document.enabled AS document_enabled, document.disabled_at AS document_disabled_at, document.status AS document_status, document.updated_at AS document_updated_at, document.created_at AS document_created_at 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID ORDER BY document.position DESC 
 LIMIT %(param_1)s
[2024-10-06 17:28:42,931.931] base.py -> _exec_single_context line:1908 [INFO]: [generated in 0.00017s] {'dataset_id_1': UUID('f3f28f75-8e60-4eba-b6df-4d1b390bbd89'), 'param_1': 1}
[2024-10-06 17:28:42,933.933] base.py -> _exec_single_context line:1903 [INFO]: SELECT upload_file.id AS upload_file_id, upload_file.account_id AS upload_file_account_id, upload_file.name AS upload_file_name, upload_file.key AS upload_file_key, upload_file.size AS upload_file_size, upload_file.extension AS upload_file_extension, upload_file.mime_type AS upload_file_mime_type, upload_file.hash AS upload_file_hash, upload_file.updated_at AS upload_file_updated_at, upload_file.created_at AS upload_file_created_at 
FROM upload_file 
WHERE upload_file.id = %(pk_1)s::UUID
[2024-10-06 17:28:42,933.933] base.py -> _exec_single_context line:1908 [INFO]: [generated in 0.00013s] {'pk_1': UUID('7b82638b-83ac-4590-b413-5dce0a799e7e')}
[2024-10-06 17:28:42,934.934] base.py -> _exec_single_context line:1903 [INFO]: SELECT process_rule.id AS process_rule_id, process_rule.account_id AS process_rule_account_id, process_rule.dataset_id AS process_rule_dataset_id, process_rule.mode AS process_rule_mode, process_rule.rule AS process_rule_rule, process_rule.updated_at AS process_rule_updated_at, process_rule.created_at AS process_rule_created_at 
FROM process_rule 
WHERE process_rule.id = %(pk_1)s::UUID
[2024-10-06 17:28:42,934.934] base.py -> _exec_single_context line:1908 [INFO]: [generated in 0.00017s] {'pk_1': UUID('456865b9-5cb2-4a03-83d8-d79a4de7861e')}
[2024-10-06 17:28:42,936.936] base.py -> _exec_single_context line:1903 [INFO]: INSERT INTO document (account_id, dataset_id, upload_file_id, process_rule_id, batch, name, position, processing_started_at, parsing_completed_at, splitting_completed_at, indexing_completed_at, completed_at, stopped_at, disabled_at) VALUES (%(account_id)s::UUID, %(dataset_id)s::UUID, %(upload_file_id)s::UUID, %(process_rule_id)s::UUID, %(batch)s, %(name)s, %(position)s, %(processing_started_at)s, %(parsing_completed_at)s, %(splitting_completed_at)s, %(indexing_completed_at)s, %(completed_at)s, %(stopped_at)s, %(disabled_at)s) RETURNING document.id, document.character_count, document.token_count, document.error, document.enabled, document.status, document.updated_at, document.created_at
[2024-10-06 17:28:42,936.936] base.py -> _exec_single_context line:1908 [INFO]: [generated in 0.00015s] {'account_id': '46db30d1-3199-4e79-a0cd-abf12fa6858f', 'dataset_id': UUID('f3f28f75-8e60-4eba-b6df-4d1b390bbd89'), 'upload_file_id': UUID('7b82638b-83ac-4590-b413-5dce0a799e7e'), 'process_rule_id': UUID('456865b9-5cb2-4a03-83d8-d79a4de7861e'), 'batch': '20241006172842472799', 'name': '项目API文档-完整.md', 'position': 1, 'processing_started_at': None, 'parsing_completed_at': None, 'splitting_completed_at': None, 'indexing_completed_at': None, 'completed_at': None, 'stopped_at': None, 'disabled_at': None}
[2024-10-06 17:28:42,937.937] base.py -> _commit_impl line:1146 [INFO]: COMMIT
[2024-10-06 17:28:42,942.942] base.py -> _begin_impl line:1103 [INFO]: BEGIN (implicit)
[2024-10-06 17:28:42,942.942] base.py -> _exec_single_context line:1903 [INFO]: SELECT document.id AS document_id, document.account_id AS document_account_id, document.dataset_id AS document_dataset_id, document.upload_file_id AS document_upload_file_id, document.process_rule_id AS document_process_rule_id, document.batch AS document_batch, document.name AS document_name, document.position AS document_position, document.character_count AS document_character_count, document.token_count AS document_token_count, document.processing_started_at AS document_processing_started_at, document.parsing_completed_at AS document_parsing_completed_at, document.splitting_completed_at AS document_splitting_completed_at, document.indexing_completed_at AS document_indexing_completed_at, document.completed_at AS document_completed_at, document.stopped_at AS document_stopped_at, document.error AS document_error, document.enabled AS document_enabled, document.disabled_at AS document_disabled_at, document.status AS document_status, document.updated_at AS document_updated_at, document.created_at AS document_created_at 
FROM document 
WHERE document.id = %(pk_1)s::UUID
[2024-10-06 17:28:42,942.942] base.py -> _exec_single_context line:1908 [INFO]: [generated in 0.00013s] {'pk_1': UUID('1c511d58-4183-4a40-915f-769cfb049dc4')}
[2024-10-06 17:28:42,975.975] base.py -> _rollback_impl line:1129 [INFO]: ROLLBACK
[2024-10-06 17:28:42,976.976] _internal.py -> _log line:96 [INFO]: 127.0.0.1 - - [06/Oct/2024 17:28:42] "POST /datasets/f3f28f75-8e60-4eba-b6df-4d1b390bbd89/documents HTTP/1.1" 200 -
[2024-10-06 17:29:50,804.804] base.py -> _begin_impl line:1103 [INFO]: BEGIN (implicit)
[2024-10-06 17:29:50,805.805] base.py -> _exec_single_context line:1903 [INFO]: SELECT dataset.id AS dataset_id, dataset.account_id AS dataset_account_id, dataset.name AS dataset_name, dataset.icon AS dataset_icon, dataset.description AS dataset_description, dataset.updated_at AS dataset_updated_at, dataset.created_at AS dataset_created_at 
FROM dataset 
WHERE dataset.id = %(pk_1)s::UUID
[2024-10-06 17:29:50,805.805] base.py -> _exec_single_context line:1908 [INFO]: [cached since 67.94s ago] {'pk_1': UUID('f3f28f75-8e60-4eba-b6df-4d1b390bbd89')}
[2024-10-06 17:29:50,806.806] base.py -> _exec_single_context line:1903 [INFO]: SELECT upload_file.id AS upload_file_id, upload_file.account_id AS upload_file_account_id, upload_file.name AS upload_file_name, upload_file.key AS upload_file_key, upload_file.size AS upload_file_size, upload_file.extension AS upload_file_extension, upload_file.mime_type AS upload_file_mime_type, upload_file.hash AS upload_file_hash, upload_file.updated_at AS upload_file_updated_at, upload_file.created_at AS upload_file_created_at 
FROM upload_file 
WHERE upload_file.account_id = %(account_id_1)s::UUID AND upload_file.id IN (%(id_1_1)s::UUID)
[2024-10-06 17:29:50,806.806] base.py -> _exec_single_context line:1908 [INFO]: [cached since 67.94s ago] {'account_id_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f', 'id_1_1': '7b82638b-83ac-4590-b413-5dce0a799e7e'}
[2024-10-06 17:29:50,807.807] base.py -> _exec_single_context line:1903 [INFO]: INSERT INTO process_rule (account_id, dataset_id, mode, rule) VALUES (%(account_id)s::UUID, %(dataset_id)s::UUID, %(mode)s, %(rule)s) RETURNING process_rule.id, process_rule.updated_at, process_rule.created_at
[2024-10-06 17:29:50,807.807] base.py -> _exec_single_context line:1908 [INFO]: [cached since 67.94s ago] {'account_id': '46db30d1-3199-4e79-a0cd-abf12fa6858f', 'dataset_id': UUID('f3f28f75-8e60-4eba-b6df-4d1b390bbd89'), 'mode': 'automatic', 'rule': '{"pre_process_rules": [{"id": "remove_extra_space", "enabled": true}, {"id": "remove_url_and_email", "enabled": true}], "segment": {"separators": ["\ ... (15 characters truncated) ... "\\u3002|\\uff01|\\uff1f", "\\\\.\\\\s|\\\\!\\\\s|\\\\?\\\\s", "\\uff1b|;\\\\s", "\\uff0c|,\\\\s", " ", ""], "chunk_size": 500, "chunk_overlap": 50}}'}
[2024-10-06 17:29:50,808.808] base.py -> _commit_impl line:1146 [INFO]: COMMIT
[2024-10-06 17:29:50,810.810] base.py -> _begin_impl line:1103 [INFO]: BEGIN (implicit)
[2024-10-06 17:29:50,810.810] base.py -> _exec_single_context line:1903 [INFO]: SELECT document.id AS document_id, document.account_id AS document_account_id, document.dataset_id AS document_dataset_id, document.upload_file_id AS document_upload_file_id, document.process_rule_id AS document_process_rule_id, document.batch AS document_batch, document.name AS document_name, document.position AS document_position, document.character_count AS document_character_count, document.token_count AS document_token_count, document.processing_started_at AS document_processing_started_at, document.parsing_completed_at AS document_parsing_completed_at, document.splitting_completed_at AS document_splitting_completed_at, document.indexing_completed_at AS document_indexing_completed_at, document.completed_at AS document_completed_at, document.stopped_at AS document_stopped_at, document.error AS document_error, document.enabled AS document_enabled, document.disabled_at AS document_disabled_at, document.status AS document_status, document.updated_at AS document_updated_at, document.created_at AS document_created_at 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID ORDER BY document.position DESC 
 LIMIT %(param_1)s
[2024-10-06 17:29:50,810.810] base.py -> _exec_single_context line:1908 [INFO]: [cached since 67.88s ago] {'dataset_id_1': UUID('f3f28f75-8e60-4eba-b6df-4d1b390bbd89'), 'param_1': 1}
[2024-10-06 17:29:50,811.811] base.py -> _exec_single_context line:1903 [INFO]: SELECT upload_file.id AS upload_file_id, upload_file.account_id AS upload_file_account_id, upload_file.name AS upload_file_name, upload_file.key AS upload_file_key, upload_file.size AS upload_file_size, upload_file.extension AS upload_file_extension, upload_file.mime_type AS upload_file_mime_type, upload_file.hash AS upload_file_hash, upload_file.updated_at AS upload_file_updated_at, upload_file.created_at AS upload_file_created_at 
FROM upload_file 
WHERE upload_file.id = %(pk_1)s::UUID
[2024-10-06 17:29:50,811.811] base.py -> _exec_single_context line:1908 [INFO]: [cached since 67.88s ago] {'pk_1': UUID('7b82638b-83ac-4590-b413-5dce0a799e7e')}
[2024-10-06 17:29:50,812.812] base.py -> _exec_single_context line:1903 [INFO]: SELECT process_rule.id AS process_rule_id, process_rule.account_id AS process_rule_account_id, process_rule.dataset_id AS process_rule_dataset_id, process_rule.mode AS process_rule_mode, process_rule.rule AS process_rule_rule, process_rule.updated_at AS process_rule_updated_at, process_rule.created_at AS process_rule_created_at 
FROM process_rule 
WHERE process_rule.id = %(pk_1)s::UUID
[2024-10-06 17:29:50,812.812] base.py -> _exec_single_context line:1908 [INFO]: [cached since 67.88s ago] {'pk_1': UUID('b7ace75e-015e-4b9a-97fb-63ea9945cfa1')}
[2024-10-06 17:29:50,813.813] base.py -> _exec_single_context line:1903 [INFO]: INSERT INTO document (account_id, dataset_id, upload_file_id, process_rule_id, batch, name, position, processing_started_at, parsing_completed_at, splitting_completed_at, indexing_completed_at, completed_at, stopped_at, disabled_at) VALUES (%(account_id)s::UUID, %(dataset_id)s::UUID, %(upload_file_id)s::UUID, %(process_rule_id)s::UUID, %(batch)s, %(name)s, %(position)s, %(processing_started_at)s, %(parsing_completed_at)s, %(splitting_completed_at)s, %(indexing_completed_at)s, %(completed_at)s, %(stopped_at)s, %(disabled_at)s) RETURNING document.id, document.character_count, document.token_count, document.error, document.enabled, document.status, document.updated_at, document.created_at
[2024-10-06 17:29:50,813.813] base.py -> _exec_single_context line:1908 [INFO]: [cached since 67.88s ago] {'account_id': '46db30d1-3199-4e79-a0cd-abf12fa6858f', 'dataset_id': UUID('f3f28f75-8e60-4eba-b6df-4d1b390bbd89'), 'upload_file_id': UUID('7b82638b-83ac-4590-b413-5dce0a799e7e'), 'process_rule_id': UUID('b7ace75e-015e-4b9a-97fb-63ea9945cfa1'), 'batch': '20241006172950608710', 'name': '项目API文档-完整.md', 'position': 1, 'processing_started_at': None, 'parsing_completed_at': None, 'splitting_completed_at': None, 'indexing_completed_at': None, 'completed_at': None, 'stopped_at': None, 'disabled_at': None}
[2024-10-06 17:29:50,814.814] base.py -> _commit_impl line:1146 [INFO]: COMMIT
[2024-10-06 17:29:50,815.815] base.py -> _begin_impl line:1103 [INFO]: BEGIN (implicit)
[2024-10-06 17:29:50,815.815] base.py -> _exec_single_context line:1903 [INFO]: SELECT document.id AS document_id, document.account_id AS document_account_id, document.dataset_id AS document_dataset_id, document.upload_file_id AS document_upload_file_id, document.process_rule_id AS document_process_rule_id, document.batch AS document_batch, document.name AS document_name, document.position AS document_position, document.character_count AS document_character_count, document.token_count AS document_token_count, document.processing_started_at AS document_processing_started_at, document.parsing_completed_at AS document_parsing_completed_at, document.splitting_completed_at AS document_splitting_completed_at, document.indexing_completed_at AS document_indexing_completed_at, document.completed_at AS document_completed_at, document.stopped_at AS document_stopped_at, document.error AS document_error, document.enabled AS document_enabled, document.disabled_at AS document_disabled_at, document.status AS document_status, document.updated_at AS document_updated_at, document.created_at AS document_created_at 
FROM document 
WHERE document.id = %(pk_1)s::UUID
[2024-10-06 17:29:50,815.815] base.py -> _exec_single_context line:1908 [INFO]: [cached since 67.87s ago] {'pk_1': UUID('546f3a5d-d8d2-4bcc-9c9d-281b6dc74cf4')}
[2024-10-06 17:29:50,832.832] base.py -> _rollback_impl line:1129 [INFO]: ROLLBACK
[2024-10-06 17:29:50,833.833] _internal.py -> _log line:96 [INFO]: 127.0.0.1 - - [06/Oct/2024 17:29:50] "POST /datasets/f3f28f75-8e60-4eba-b6df-4d1b390bbd89/documents HTTP/1.1" 200 -
[2024-10-06 17:33:17,155.155] _internal.py -> _log line:96 [INFO]:  * Detected change in 'D:\\Code\\llmops\\llmops-api\\internal\\service\\embeddings_service.py', reloading
[2024-10-06 17:33:17,794.794] _internal.py -> _log line:96 [INFO]:  * Restarting with stat
[2024-10-06 17:34:38,256.256] _internal.py -> _log line:96 [INFO]:  * Restarting with stat
[2024-10-06 17:34:46,655.655] _internal.py -> _log line:96 [WARNING]:  * Debugger is active!
[2024-10-06 17:34:46,658.658] _internal.py -> _log line:96 [INFO]:  * Debugger PIN: 102-324-223
[2024-10-06 17:36:41,008.008] base.py -> _exec_single_context line:1903 [INFO]: select pg_catalog.version()
[2024-10-06 17:36:41,009.009] base.py -> _exec_single_context line:1908 [INFO]: [raw sql] {}
[2024-10-06 17:36:41,010.010] base.py -> _exec_single_context line:1903 [INFO]: select current_schema()
[2024-10-06 17:36:41,010.010] base.py -> _exec_single_context line:1908 [INFO]: [raw sql] {}
[2024-10-06 17:36:41,011.011] base.py -> _exec_single_context line:1903 [INFO]: show standard_conforming_strings
[2024-10-06 17:36:41,011.011] base.py -> _exec_single_context line:1908 [INFO]: [raw sql] {}
[2024-10-06 17:36:41,011.011] base.py -> _begin_impl line:1103 [INFO]: BEGIN (implicit)
[2024-10-06 17:36:41,013.013] base.py -> _exec_single_context line:1903 [INFO]: SELECT dataset.id AS dataset_id, dataset.account_id AS dataset_account_id, dataset.name AS dataset_name, dataset.icon AS dataset_icon, dataset.description AS dataset_description, dataset.updated_at AS dataset_updated_at, dataset.created_at AS dataset_created_at 
FROM dataset 
WHERE dataset.id = %(pk_1)s::UUID
[2024-10-06 17:36:41,013.013] base.py -> _exec_single_context line:1908 [INFO]: [generated in 0.00015s] {'pk_1': UUID('f3f28f75-8e60-4eba-b6df-4d1b390bbd89')}
[2024-10-06 17:36:41,015.015] base.py -> _exec_single_context line:1903 [INFO]: SELECT upload_file.id AS upload_file_id, upload_file.account_id AS upload_file_account_id, upload_file.name AS upload_file_name, upload_file.key AS upload_file_key, upload_file.size AS upload_file_size, upload_file.extension AS upload_file_extension, upload_file.mime_type AS upload_file_mime_type, upload_file.hash AS upload_file_hash, upload_file.updated_at AS upload_file_updated_at, upload_file.created_at AS upload_file_created_at 
FROM upload_file 
WHERE upload_file.account_id = %(account_id_1)s::UUID AND upload_file.id IN (%(id_1_1)s::UUID)
[2024-10-06 17:36:41,015.015] base.py -> _exec_single_context line:1908 [INFO]: [generated in 0.00017s] {'account_id_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f', 'id_1_1': '7b82638b-83ac-4590-b413-5dce0a799e7e'}
[2024-10-06 17:36:41,017.017] base.py -> _exec_single_context line:1903 [INFO]: INSERT INTO process_rule (account_id, dataset_id, mode, rule) VALUES (%(account_id)s::UUID, %(dataset_id)s::UUID, %(mode)s, %(rule)s) RETURNING process_rule.id, process_rule.updated_at, process_rule.created_at
[2024-10-06 17:36:41,017.017] base.py -> _exec_single_context line:1908 [INFO]: [generated in 0.00017s] {'account_id': '46db30d1-3199-4e79-a0cd-abf12fa6858f', 'dataset_id': UUID('f3f28f75-8e60-4eba-b6df-4d1b390bbd89'), 'mode': 'automatic', 'rule': '{"pre_process_rules": [{"id": "remove_extra_space", "enabled": true}, {"id": "remove_url_and_email", "enabled": true}], "segment": {"separators": ["\ ... (15 characters truncated) ... "\\u3002|\\uff01|\\uff1f", "\\\\.\\\\s|\\\\!\\\\s|\\\\?\\\\s", "\\uff1b|;\\\\s", "\\uff0c|,\\\\s", " ", ""], "chunk_size": 500, "chunk_overlap": 50}}'}
[2024-10-06 17:36:41,018.018] base.py -> _commit_impl line:1146 [INFO]: COMMIT
[2024-10-06 17:36:41,022.022] base.py -> _begin_impl line:1103 [INFO]: BEGIN (implicit)
[2024-10-06 17:36:41,023.023] base.py -> _exec_single_context line:1903 [INFO]: SELECT document.id AS document_id, document.account_id AS document_account_id, document.dataset_id AS document_dataset_id, document.upload_file_id AS document_upload_file_id, document.process_rule_id AS document_process_rule_id, document.batch AS document_batch, document.name AS document_name, document.position AS document_position, document.character_count AS document_character_count, document.token_count AS document_token_count, document.processing_started_at AS document_processing_started_at, document.parsing_completed_at AS document_parsing_completed_at, document.splitting_completed_at AS document_splitting_completed_at, document.indexing_completed_at AS document_indexing_completed_at, document.completed_at AS document_completed_at, document.stopped_at AS document_stopped_at, document.error AS document_error, document.enabled AS document_enabled, document.disabled_at AS document_disabled_at, document.status AS document_status, document.updated_at AS document_updated_at, document.created_at AS document_created_at 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID ORDER BY document.position DESC 
 LIMIT %(param_1)s
[2024-10-06 17:36:41,023.023] base.py -> _exec_single_context line:1908 [INFO]: [generated in 0.00015s] {'dataset_id_1': UUID('f3f28f75-8e60-4eba-b6df-4d1b390bbd89'), 'param_1': 1}
[2024-10-06 17:36:41,024.024] base.py -> _exec_single_context line:1903 [INFO]: SELECT upload_file.id AS upload_file_id, upload_file.account_id AS upload_file_account_id, upload_file.name AS upload_file_name, upload_file.key AS upload_file_key, upload_file.size AS upload_file_size, upload_file.extension AS upload_file_extension, upload_file.mime_type AS upload_file_mime_type, upload_file.hash AS upload_file_hash, upload_file.updated_at AS upload_file_updated_at, upload_file.created_at AS upload_file_created_at 
FROM upload_file 
WHERE upload_file.id = %(pk_1)s::UUID
[2024-10-06 17:36:41,024.024] base.py -> _exec_single_context line:1908 [INFO]: [generated in 0.00014s] {'pk_1': UUID('7b82638b-83ac-4590-b413-5dce0a799e7e')}
[2024-10-06 17:36:41,026.026] base.py -> _exec_single_context line:1903 [INFO]: SELECT process_rule.id AS process_rule_id, process_rule.account_id AS process_rule_account_id, process_rule.dataset_id AS process_rule_dataset_id, process_rule.mode AS process_rule_mode, process_rule.rule AS process_rule_rule, process_rule.updated_at AS process_rule_updated_at, process_rule.created_at AS process_rule_created_at 
FROM process_rule 
WHERE process_rule.id = %(pk_1)s::UUID
[2024-10-06 17:36:41,026.026] base.py -> _exec_single_context line:1908 [INFO]: [generated in 0.00015s] {'pk_1': UUID('e22fe098-0e31-4724-ba38-58bf78d9a404')}
[2024-10-06 17:36:41,027.027] base.py -> _exec_single_context line:1903 [INFO]: INSERT INTO document (account_id, dataset_id, upload_file_id, process_rule_id, batch, name, position, processing_started_at, parsing_completed_at, splitting_completed_at, indexing_completed_at, completed_at, stopped_at, disabled_at) VALUES (%(account_id)s::UUID, %(dataset_id)s::UUID, %(upload_file_id)s::UUID, %(process_rule_id)s::UUID, %(batch)s, %(name)s, %(position)s, %(processing_started_at)s, %(parsing_completed_at)s, %(splitting_completed_at)s, %(indexing_completed_at)s, %(completed_at)s, %(stopped_at)s, %(disabled_at)s) RETURNING document.id, document.character_count, document.token_count, document.error, document.enabled, document.status, document.updated_at, document.created_at
[2024-10-06 17:36:41,028.028] base.py -> _exec_single_context line:1908 [INFO]: [generated in 0.00017s] {'account_id': '46db30d1-3199-4e79-a0cd-abf12fa6858f', 'dataset_id': UUID('f3f28f75-8e60-4eba-b6df-4d1b390bbd89'), 'upload_file_id': UUID('7b82638b-83ac-4590-b413-5dce0a799e7e'), 'process_rule_id': UUID('e22fe098-0e31-4724-ba38-58bf78d9a404'), 'batch': '20241006173641583630', 'name': '项目API文档-完整.md', 'position': 1, 'processing_started_at': None, 'parsing_completed_at': None, 'splitting_completed_at': None, 'indexing_completed_at': None, 'completed_at': None, 'stopped_at': None, 'disabled_at': None}
[2024-10-06 17:36:41,028.028] base.py -> _commit_impl line:1146 [INFO]: COMMIT
[2024-10-06 17:36:41,061.061] base.py -> _begin_impl line:1103 [INFO]: BEGIN (implicit)
[2024-10-06 17:36:41,062.062] base.py -> _exec_single_context line:1903 [INFO]: SELECT document.id AS document_id, document.account_id AS document_account_id, document.dataset_id AS document_dataset_id, document.upload_file_id AS document_upload_file_id, document.process_rule_id AS document_process_rule_id, document.batch AS document_batch, document.name AS document_name, document.position AS document_position, document.character_count AS document_character_count, document.token_count AS document_token_count, document.processing_started_at AS document_processing_started_at, document.parsing_completed_at AS document_parsing_completed_at, document.splitting_completed_at AS document_splitting_completed_at, document.indexing_completed_at AS document_indexing_completed_at, document.completed_at AS document_completed_at, document.stopped_at AS document_stopped_at, document.error AS document_error, document.enabled AS document_enabled, document.disabled_at AS document_disabled_at, document.status AS document_status, document.updated_at AS document_updated_at, document.created_at AS document_created_at 
FROM document 
WHERE document.id = %(pk_1)s::UUID
[2024-10-06 17:36:41,062.062] base.py -> _exec_single_context line:1908 [INFO]: [generated in 0.00013s] {'pk_1': UUID('1e22d312-a9b6-441e-bd08-7e037794fb2f')}
[2024-10-06 17:36:41,095.095] base.py -> _rollback_impl line:1129 [INFO]: ROLLBACK
[2024-10-06 17:36:41,096.096] _internal.py -> _log line:96 [INFO]: 127.0.0.1 - - [06/Oct/2024 17:36:41] "POST /datasets/f3f28f75-8e60-4eba-b6df-4d1b390bbd89/documents HTTP/1.1" 200 -
[2024-10-06 17:37:59,270.270] _internal.py -> _log line:96 [INFO]:  * Detected change in 'D:\\Code\\llmops\\llmops-api\\internal\\service\\embeddings_service.py', reloading
[2024-10-06 17:37:59,930.930] _internal.py -> _log line:96 [INFO]:  * Restarting with stat
[2024-10-06 17:38:08,308.308] _internal.py -> _log line:96 [WARNING]:  * Debugger is active!
[2024-10-06 17:38:08,310.310] _internal.py -> _log line:96 [INFO]:  * Debugger PIN: 102-324-223
[2024-10-06 17:38:20,714.714] base.py -> _exec_single_context line:1903 [INFO]: select pg_catalog.version()
[2024-10-06 17:38:20,714.714] base.py -> _exec_single_context line:1908 [INFO]: [raw sql] {}
[2024-10-06 17:38:20,715.715] base.py -> _exec_single_context line:1903 [INFO]: select current_schema()
[2024-10-06 17:38:20,715.715] base.py -> _exec_single_context line:1908 [INFO]: [raw sql] {}
[2024-10-06 17:38:20,716.716] base.py -> _exec_single_context line:1903 [INFO]: show standard_conforming_strings
[2024-10-06 17:38:20,716.716] base.py -> _exec_single_context line:1908 [INFO]: [raw sql] {}
[2024-10-06 17:38:20,717.717] base.py -> _begin_impl line:1103 [INFO]: BEGIN (implicit)
[2024-10-06 17:38:20,719.719] base.py -> _exec_single_context line:1903 [INFO]: SELECT dataset.id AS dataset_id, dataset.account_id AS dataset_account_id, dataset.name AS dataset_name, dataset.icon AS dataset_icon, dataset.description AS dataset_description, dataset.updated_at AS dataset_updated_at, dataset.created_at AS dataset_created_at 
FROM dataset 
WHERE dataset.id = %(pk_1)s::UUID
[2024-10-06 17:38:20,719.719] base.py -> _exec_single_context line:1908 [INFO]: [generated in 0.00016s] {'pk_1': UUID('f3f28f75-8e60-4eba-b6df-4d1b390bbd89')}
[2024-10-06 17:38:20,721.721] base.py -> _exec_single_context line:1903 [INFO]: SELECT upload_file.id AS upload_file_id, upload_file.account_id AS upload_file_account_id, upload_file.name AS upload_file_name, upload_file.key AS upload_file_key, upload_file.size AS upload_file_size, upload_file.extension AS upload_file_extension, upload_file.mime_type AS upload_file_mime_type, upload_file.hash AS upload_file_hash, upload_file.updated_at AS upload_file_updated_at, upload_file.created_at AS upload_file_created_at 
FROM upload_file 
WHERE upload_file.account_id = %(account_id_1)s::UUID AND upload_file.id IN (%(id_1_1)s::UUID)
[2024-10-06 17:38:20,722.722] base.py -> _exec_single_context line:1908 [INFO]: [generated in 0.00018s] {'account_id_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f', 'id_1_1': '7b82638b-83ac-4590-b413-5dce0a799e7e'}
[2024-10-06 17:38:20,723.723] base.py -> _exec_single_context line:1903 [INFO]: INSERT INTO process_rule (account_id, dataset_id, mode, rule) VALUES (%(account_id)s::UUID, %(dataset_id)s::UUID, %(mode)s, %(rule)s) RETURNING process_rule.id, process_rule.updated_at, process_rule.created_at
[2024-10-06 17:38:20,723.723] base.py -> _exec_single_context line:1908 [INFO]: [generated in 0.00017s] {'account_id': '46db30d1-3199-4e79-a0cd-abf12fa6858f', 'dataset_id': UUID('f3f28f75-8e60-4eba-b6df-4d1b390bbd89'), 'mode': 'automatic', 'rule': '{"pre_process_rules": [{"id": "remove_extra_space", "enabled": true}, {"id": "remove_url_and_email", "enabled": true}], "segment": {"separators": ["\ ... (15 characters truncated) ... "\\u3002|\\uff01|\\uff1f", "\\\\.\\\\s|\\\\!\\\\s|\\\\?\\\\s", "\\uff1b|;\\\\s", "\\uff0c|,\\\\s", " ", ""], "chunk_size": 500, "chunk_overlap": 50}}'}
[2024-10-06 17:38:20,725.725] base.py -> _commit_impl line:1146 [INFO]: COMMIT
[2024-10-06 17:38:20,741.741] base.py -> _begin_impl line:1103 [INFO]: BEGIN (implicit)
[2024-10-06 17:38:20,743.743] base.py -> _exec_single_context line:1903 [INFO]: SELECT document.id AS document_id, document.account_id AS document_account_id, document.dataset_id AS document_dataset_id, document.upload_file_id AS document_upload_file_id, document.process_rule_id AS document_process_rule_id, document.batch AS document_batch, document.name AS document_name, document.position AS document_position, document.character_count AS document_character_count, document.token_count AS document_token_count, document.processing_started_at AS document_processing_started_at, document.parsing_completed_at AS document_parsing_completed_at, document.splitting_completed_at AS document_splitting_completed_at, document.indexing_completed_at AS document_indexing_completed_at, document.completed_at AS document_completed_at, document.stopped_at AS document_stopped_at, document.error AS document_error, document.enabled AS document_enabled, document.disabled_at AS document_disabled_at, document.status AS document_status, document.updated_at AS document_updated_at, document.created_at AS document_created_at 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID ORDER BY document.position DESC 
 LIMIT %(param_1)s
[2024-10-06 17:38:20,743.743] base.py -> _exec_single_context line:1908 [INFO]: [generated in 0.00016s] {'dataset_id_1': UUID('f3f28f75-8e60-4eba-b6df-4d1b390bbd89'), 'param_1': 1}
[2024-10-06 17:38:20,745.745] base.py -> _exec_single_context line:1903 [INFO]: SELECT upload_file.id AS upload_file_id, upload_file.account_id AS upload_file_account_id, upload_file.name AS upload_file_name, upload_file.key AS upload_file_key, upload_file.size AS upload_file_size, upload_file.extension AS upload_file_extension, upload_file.mime_type AS upload_file_mime_type, upload_file.hash AS upload_file_hash, upload_file.updated_at AS upload_file_updated_at, upload_file.created_at AS upload_file_created_at 
FROM upload_file 
WHERE upload_file.id = %(pk_1)s::UUID
[2024-10-06 17:38:20,745.745] base.py -> _exec_single_context line:1908 [INFO]: [generated in 0.00014s] {'pk_1': UUID('7b82638b-83ac-4590-b413-5dce0a799e7e')}
[2024-10-06 17:38:20,746.746] base.py -> _exec_single_context line:1903 [INFO]: SELECT process_rule.id AS process_rule_id, process_rule.account_id AS process_rule_account_id, process_rule.dataset_id AS process_rule_dataset_id, process_rule.mode AS process_rule_mode, process_rule.rule AS process_rule_rule, process_rule.updated_at AS process_rule_updated_at, process_rule.created_at AS process_rule_created_at 
FROM process_rule 
WHERE process_rule.id = %(pk_1)s::UUID
[2024-10-06 17:38:20,747.747] base.py -> _exec_single_context line:1908 [INFO]: [generated in 0.00017s] {'pk_1': UUID('c0d872bc-c972-4fe6-90f1-e5a76935dd4d')}
[2024-10-06 17:38:20,748.748] base.py -> _exec_single_context line:1903 [INFO]: INSERT INTO document (account_id, dataset_id, upload_file_id, process_rule_id, batch, name, position, processing_started_at, parsing_completed_at, splitting_completed_at, indexing_completed_at, completed_at, stopped_at, disabled_at) VALUES (%(account_id)s::UUID, %(dataset_id)s::UUID, %(upload_file_id)s::UUID, %(process_rule_id)s::UUID, %(batch)s, %(name)s, %(position)s, %(processing_started_at)s, %(parsing_completed_at)s, %(splitting_completed_at)s, %(indexing_completed_at)s, %(completed_at)s, %(stopped_at)s, %(disabled_at)s) RETURNING document.id, document.character_count, document.token_count, document.error, document.enabled, document.status, document.updated_at, document.created_at
[2024-10-06 17:38:20,748.748] base.py -> _exec_single_context line:1908 [INFO]: [generated in 0.00018s] {'account_id': '46db30d1-3199-4e79-a0cd-abf12fa6858f', 'dataset_id': UUID('f3f28f75-8e60-4eba-b6df-4d1b390bbd89'), 'upload_file_id': UUID('7b82638b-83ac-4590-b413-5dce0a799e7e'), 'process_rule_id': UUID('c0d872bc-c972-4fe6-90f1-e5a76935dd4d'), 'batch': '20241006173820475061', 'name': '项目API文档-完整.md', 'position': 1, 'processing_started_at': None, 'parsing_completed_at': None, 'splitting_completed_at': None, 'indexing_completed_at': None, 'completed_at': None, 'stopped_at': None, 'disabled_at': None}
[2024-10-06 17:38:20,749.749] base.py -> _commit_impl line:1146 [INFO]: COMMIT
[2024-10-06 17:38:20,768.768] base.py -> _begin_impl line:1103 [INFO]: BEGIN (implicit)
[2024-10-06 17:38:20,769.769] base.py -> _exec_single_context line:1903 [INFO]: SELECT document.id AS document_id, document.account_id AS document_account_id, document.dataset_id AS document_dataset_id, document.upload_file_id AS document_upload_file_id, document.process_rule_id AS document_process_rule_id, document.batch AS document_batch, document.name AS document_name, document.position AS document_position, document.character_count AS document_character_count, document.token_count AS document_token_count, document.processing_started_at AS document_processing_started_at, document.parsing_completed_at AS document_parsing_completed_at, document.splitting_completed_at AS document_splitting_completed_at, document.indexing_completed_at AS document_indexing_completed_at, document.completed_at AS document_completed_at, document.stopped_at AS document_stopped_at, document.error AS document_error, document.enabled AS document_enabled, document.disabled_at AS document_disabled_at, document.status AS document_status, document.updated_at AS document_updated_at, document.created_at AS document_created_at 
FROM document 
WHERE document.id = %(pk_1)s::UUID
[2024-10-06 17:38:20,769.769] base.py -> _exec_single_context line:1908 [INFO]: [generated in 0.00014s] {'pk_1': UUID('96957f3a-f42e-4ce6-af89-40d6f80594ef')}
[2024-10-06 17:38:20,803.803] base.py -> _rollback_impl line:1129 [INFO]: ROLLBACK
[2024-10-06 17:38:20,804.804] _internal.py -> _log line:96 [INFO]: 127.0.0.1 - - [06/Oct/2024 17:38:20] "POST /datasets/f3f28f75-8e60-4eba-b6df-4d1b390bbd89/documents HTTP/1.1" 200 -
[2024-10-06 17:39:13,759.759] _internal.py -> _log line:96 [INFO]:  * Detected change in 'D:\\Code\\llmops\\llmops-api\\internal\\service\\embeddings_service.py', reloading
[2024-10-06 17:39:14,352.352] _internal.py -> _log line:96 [INFO]:  * Restarting with stat
[2024-10-06 17:42:42,517.517] _internal.py -> _log line:96 [INFO]: [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5000
[2024-10-06 17:42:42,517.517] _internal.py -> _log line:96 [INFO]: [33mPress CTRL+C to quit[0m
[2024-10-06 17:42:42,518.518] _internal.py -> _log line:96 [INFO]:  * Restarting with stat
[2024-10-06 17:42:48,878.878] _internal.py -> _log line:96 [WARNING]:  * Debugger is active!
[2024-10-06 17:42:48,881.881] _internal.py -> _log line:96 [INFO]:  * Debugger PIN: 102-324-223
[2024-10-06 17:42:55,310.310] base.py -> _exec_single_context line:1903 [INFO]: select pg_catalog.version()
[2024-10-06 17:42:55,310.310] base.py -> _exec_single_context line:1908 [INFO]: [raw sql] {}
[2024-10-06 17:42:55,311.311] base.py -> _exec_single_context line:1903 [INFO]: select current_schema()
[2024-10-06 17:42:55,311.311] base.py -> _exec_single_context line:1908 [INFO]: [raw sql] {}
[2024-10-06 17:42:55,312.312] base.py -> _exec_single_context line:1903 [INFO]: show standard_conforming_strings
[2024-10-06 17:42:55,312.312] base.py -> _exec_single_context line:1908 [INFO]: [raw sql] {}
[2024-10-06 17:42:55,313.313] base.py -> _begin_impl line:1103 [INFO]: BEGIN (implicit)
[2024-10-06 17:42:55,314.314] base.py -> _exec_single_context line:1903 [INFO]: SELECT dataset.id AS dataset_id, dataset.account_id AS dataset_account_id, dataset.name AS dataset_name, dataset.icon AS dataset_icon, dataset.description AS dataset_description, dataset.updated_at AS dataset_updated_at, dataset.created_at AS dataset_created_at 
FROM dataset 
WHERE dataset.id = %(pk_1)s::UUID
[2024-10-06 17:42:55,314.314] base.py -> _exec_single_context line:1908 [INFO]: [generated in 0.00014s] {'pk_1': UUID('f3f28f75-8e60-4eba-b6df-4d1b390bbd89')}
[2024-10-06 17:42:55,316.316] base.py -> _exec_single_context line:1903 [INFO]: SELECT upload_file.id AS upload_file_id, upload_file.account_id AS upload_file_account_id, upload_file.name AS upload_file_name, upload_file.key AS upload_file_key, upload_file.size AS upload_file_size, upload_file.extension AS upload_file_extension, upload_file.mime_type AS upload_file_mime_type, upload_file.hash AS upload_file_hash, upload_file.updated_at AS upload_file_updated_at, upload_file.created_at AS upload_file_created_at 
FROM upload_file 
WHERE upload_file.account_id = %(account_id_1)s::UUID AND upload_file.id IN (%(id_1_1)s::UUID)
[2024-10-06 17:42:55,317.317] base.py -> _exec_single_context line:1908 [INFO]: [generated in 0.00018s] {'account_id_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f', 'id_1_1': '7b82638b-83ac-4590-b413-5dce0a799e7e'}
[2024-10-06 17:42:55,318.318] base.py -> _exec_single_context line:1903 [INFO]: INSERT INTO process_rule (account_id, dataset_id, mode, rule) VALUES (%(account_id)s::UUID, %(dataset_id)s::UUID, %(mode)s, %(rule)s) RETURNING process_rule.id, process_rule.updated_at, process_rule.created_at
[2024-10-06 17:42:55,318.318] base.py -> _exec_single_context line:1908 [INFO]: [generated in 0.00017s] {'account_id': '46db30d1-3199-4e79-a0cd-abf12fa6858f', 'dataset_id': UUID('f3f28f75-8e60-4eba-b6df-4d1b390bbd89'), 'mode': 'automatic', 'rule': '{"pre_process_rules": [{"id": "remove_extra_space", "enabled": true}, {"id": "remove_url_and_email", "enabled": true}], "segment": {"separators": ["\ ... (15 characters truncated) ... "\\u3002|\\uff01|\\uff1f", "\\\\.\\\\s|\\\\!\\\\s|\\\\?\\\\s", "\\uff1b|;\\\\s", "\\uff0c|,\\\\s", " ", ""], "chunk_size": 500, "chunk_overlap": 50}}'}
[2024-10-06 17:42:55,320.320] base.py -> _commit_impl line:1146 [INFO]: COMMIT
[2024-10-06 17:42:55,324.324] base.py -> _begin_impl line:1103 [INFO]: BEGIN (implicit)
[2024-10-06 17:42:55,325.325] base.py -> _exec_single_context line:1903 [INFO]: SELECT document.id AS document_id, document.account_id AS document_account_id, document.dataset_id AS document_dataset_id, document.upload_file_id AS document_upload_file_id, document.process_rule_id AS document_process_rule_id, document.batch AS document_batch, document.name AS document_name, document.position AS document_position, document.character_count AS document_character_count, document.token_count AS document_token_count, document.processing_started_at AS document_processing_started_at, document.parsing_completed_at AS document_parsing_completed_at, document.splitting_completed_at AS document_splitting_completed_at, document.indexing_completed_at AS document_indexing_completed_at, document.completed_at AS document_completed_at, document.stopped_at AS document_stopped_at, document.error AS document_error, document.enabled AS document_enabled, document.disabled_at AS document_disabled_at, document.status AS document_status, document.updated_at AS document_updated_at, document.created_at AS document_created_at 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID ORDER BY document.position DESC 
 LIMIT %(param_1)s
[2024-10-06 17:42:55,326.326] base.py -> _exec_single_context line:1908 [INFO]: [generated in 0.00017s] {'dataset_id_1': UUID('f3f28f75-8e60-4eba-b6df-4d1b390bbd89'), 'param_1': 1}
[2024-10-06 17:42:55,327.327] base.py -> _exec_single_context line:1903 [INFO]: SELECT upload_file.id AS upload_file_id, upload_file.account_id AS upload_file_account_id, upload_file.name AS upload_file_name, upload_file.key AS upload_file_key, upload_file.size AS upload_file_size, upload_file.extension AS upload_file_extension, upload_file.mime_type AS upload_file_mime_type, upload_file.hash AS upload_file_hash, upload_file.updated_at AS upload_file_updated_at, upload_file.created_at AS upload_file_created_at 
FROM upload_file 
WHERE upload_file.id = %(pk_1)s::UUID
[2024-10-06 17:42:55,328.328] base.py -> _exec_single_context line:1908 [INFO]: [generated in 0.00014s] {'pk_1': UUID('7b82638b-83ac-4590-b413-5dce0a799e7e')}
[2024-10-06 17:42:55,329.329] base.py -> _exec_single_context line:1903 [INFO]: SELECT process_rule.id AS process_rule_id, process_rule.account_id AS process_rule_account_id, process_rule.dataset_id AS process_rule_dataset_id, process_rule.mode AS process_rule_mode, process_rule.rule AS process_rule_rule, process_rule.updated_at AS process_rule_updated_at, process_rule.created_at AS process_rule_created_at 
FROM process_rule 
WHERE process_rule.id = %(pk_1)s::UUID
[2024-10-06 17:42:55,329.329] base.py -> _exec_single_context line:1908 [INFO]: [generated in 0.00014s] {'pk_1': UUID('96a5372c-dbd3-40d3-b323-1b816ccc13a3')}
[2024-10-06 17:42:55,329.329] base.py -> _exec_single_context line:1903 [INFO]: INSERT INTO document (account_id, dataset_id, upload_file_id, process_rule_id, batch, name, position, processing_started_at, parsing_completed_at, splitting_completed_at, indexing_completed_at, completed_at, stopped_at, disabled_at) VALUES (%(account_id)s::UUID, %(dataset_id)s::UUID, %(upload_file_id)s::UUID, %(process_rule_id)s::UUID, %(batch)s, %(name)s, %(position)s, %(processing_started_at)s, %(parsing_completed_at)s, %(splitting_completed_at)s, %(indexing_completed_at)s, %(completed_at)s, %(stopped_at)s, %(disabled_at)s) RETURNING document.id, document.character_count, document.token_count, document.error, document.enabled, document.status, document.updated_at, document.created_at
[2024-10-06 17:42:55,329.329] base.py -> _exec_single_context line:1908 [INFO]: [generated in 0.00015s] {'account_id': '46db30d1-3199-4e79-a0cd-abf12fa6858f', 'dataset_id': UUID('f3f28f75-8e60-4eba-b6df-4d1b390bbd89'), 'upload_file_id': UUID('7b82638b-83ac-4590-b413-5dce0a799e7e'), 'process_rule_id': UUID('96a5372c-dbd3-40d3-b323-1b816ccc13a3'), 'batch': '20241006174255952383', 'name': '项目API文档-完整.md', 'position': 1, 'processing_started_at': None, 'parsing_completed_at': None, 'splitting_completed_at': None, 'indexing_completed_at': None, 'completed_at': None, 'stopped_at': None, 'disabled_at': None}
[2024-10-06 17:42:55,330.330] base.py -> _commit_impl line:1146 [INFO]: COMMIT
[2024-10-06 17:42:55,349.349] base.py -> _begin_impl line:1103 [INFO]: BEGIN (implicit)
[2024-10-06 17:42:55,350.350] base.py -> _exec_single_context line:1903 [INFO]: SELECT document.id AS document_id, document.account_id AS document_account_id, document.dataset_id AS document_dataset_id, document.upload_file_id AS document_upload_file_id, document.process_rule_id AS document_process_rule_id, document.batch AS document_batch, document.name AS document_name, document.position AS document_position, document.character_count AS document_character_count, document.token_count AS document_token_count, document.processing_started_at AS document_processing_started_at, document.parsing_completed_at AS document_parsing_completed_at, document.splitting_completed_at AS document_splitting_completed_at, document.indexing_completed_at AS document_indexing_completed_at, document.completed_at AS document_completed_at, document.stopped_at AS document_stopped_at, document.error AS document_error, document.enabled AS document_enabled, document.disabled_at AS document_disabled_at, document.status AS document_status, document.updated_at AS document_updated_at, document.created_at AS document_created_at 
FROM document 
WHERE document.id = %(pk_1)s::UUID
[2024-10-06 17:42:55,350.350] base.py -> _exec_single_context line:1908 [INFO]: [generated in 0.00017s] {'pk_1': UUID('a83f3c68-5886-4ee4-8329-4314e35fb963')}
[2024-10-06 17:42:55,385.385] base.py -> _rollback_impl line:1129 [INFO]: ROLLBACK
[2024-10-06 17:42:55,386.386] _internal.py -> _log line:96 [INFO]: 127.0.0.1 - - [06/Oct/2024 17:42:55] "POST /datasets/f3f28f75-8e60-4eba-b6df-4d1b390bbd89/documents HTTP/1.1" 200 -
[2024-10-06 17:45:18,259.259] _internal.py -> _log line:96 [INFO]:  * Detected change in 'D:\\Code\\llmops\\llmops-api\\internal\\service\\indexing_service.py', reloading
[2024-10-06 17:45:18,890.890] _internal.py -> _log line:96 [INFO]:  * Restarting with stat
[2024-10-06 17:45:25,064.064] _internal.py -> _log line:96 [WARNING]:  * Debugger is active!
[2024-10-06 17:45:25,067.067] _internal.py -> _log line:96 [INFO]:  * Debugger PIN: 102-324-223
[2024-10-06 17:45:30,681.681] base.py -> _exec_single_context line:1903 [INFO]: select pg_catalog.version()
[2024-10-06 17:45:30,681.681] base.py -> _exec_single_context line:1908 [INFO]: [raw sql] {}
[2024-10-06 17:45:30,682.682] base.py -> _exec_single_context line:1903 [INFO]: select current_schema()
[2024-10-06 17:45:30,683.683] base.py -> _exec_single_context line:1908 [INFO]: [raw sql] {}
[2024-10-06 17:45:30,683.683] base.py -> _exec_single_context line:1903 [INFO]: show standard_conforming_strings
[2024-10-06 17:45:30,683.683] base.py -> _exec_single_context line:1908 [INFO]: [raw sql] {}
[2024-10-06 17:45:30,684.684] base.py -> _begin_impl line:1103 [INFO]: BEGIN (implicit)
[2024-10-06 17:45:30,686.686] base.py -> _exec_single_context line:1903 [INFO]: SELECT dataset.id AS dataset_id, dataset.account_id AS dataset_account_id, dataset.name AS dataset_name, dataset.icon AS dataset_icon, dataset.description AS dataset_description, dataset.updated_at AS dataset_updated_at, dataset.created_at AS dataset_created_at 
FROM dataset 
WHERE dataset.id = %(pk_1)s::UUID
[2024-10-06 17:45:30,686.686] base.py -> _exec_single_context line:1908 [INFO]: [generated in 0.00015s] {'pk_1': UUID('f3f28f75-8e60-4eba-b6df-4d1b390bbd89')}
[2024-10-06 17:45:30,689.689] base.py -> _exec_single_context line:1903 [INFO]: SELECT upload_file.id AS upload_file_id, upload_file.account_id AS upload_file_account_id, upload_file.name AS upload_file_name, upload_file.key AS upload_file_key, upload_file.size AS upload_file_size, upload_file.extension AS upload_file_extension, upload_file.mime_type AS upload_file_mime_type, upload_file.hash AS upload_file_hash, upload_file.updated_at AS upload_file_updated_at, upload_file.created_at AS upload_file_created_at 
FROM upload_file 
WHERE upload_file.account_id = %(account_id_1)s::UUID AND upload_file.id IN (%(id_1_1)s::UUID)
[2024-10-06 17:45:30,689.689] base.py -> _exec_single_context line:1908 [INFO]: [generated in 0.00041s] {'account_id_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f', 'id_1_1': '7b82638b-83ac-4590-b413-5dce0a799e7e'}
[2024-10-06 17:45:30,691.691] base.py -> _exec_single_context line:1903 [INFO]: INSERT INTO process_rule (account_id, dataset_id, mode, rule) VALUES (%(account_id)s::UUID, %(dataset_id)s::UUID, %(mode)s, %(rule)s) RETURNING process_rule.id, process_rule.updated_at, process_rule.created_at
[2024-10-06 17:45:30,691.691] base.py -> _exec_single_context line:1908 [INFO]: [generated in 0.00021s] {'account_id': '46db30d1-3199-4e79-a0cd-abf12fa6858f', 'dataset_id': UUID('f3f28f75-8e60-4eba-b6df-4d1b390bbd89'), 'mode': 'automatic', 'rule': '{"pre_process_rules": [{"id": "remove_extra_space", "enabled": true}, {"id": "remove_url_and_email", "enabled": true}], "segment": {"separators": ["\ ... (15 characters truncated) ... "\\u3002|\\uff01|\\uff1f", "\\\\.\\\\s|\\\\!\\\\s|\\\\?\\\\s", "\\uff1b|;\\\\s", "\\uff0c|,\\\\s", " ", ""], "chunk_size": 500, "chunk_overlap": 50}}'}
[2024-10-06 17:45:30,692.692] base.py -> _commit_impl line:1146 [INFO]: COMMIT
[2024-10-06 17:45:30,710.710] base.py -> _begin_impl line:1103 [INFO]: BEGIN (implicit)
[2024-10-06 17:45:30,711.711] base.py -> _exec_single_context line:1903 [INFO]: SELECT document.id AS document_id, document.account_id AS document_account_id, document.dataset_id AS document_dataset_id, document.upload_file_id AS document_upload_file_id, document.process_rule_id AS document_process_rule_id, document.batch AS document_batch, document.name AS document_name, document.position AS document_position, document.character_count AS document_character_count, document.token_count AS document_token_count, document.processing_started_at AS document_processing_started_at, document.parsing_completed_at AS document_parsing_completed_at, document.splitting_completed_at AS document_splitting_completed_at, document.indexing_completed_at AS document_indexing_completed_at, document.completed_at AS document_completed_at, document.stopped_at AS document_stopped_at, document.error AS document_error, document.enabled AS document_enabled, document.disabled_at AS document_disabled_at, document.status AS document_status, document.updated_at AS document_updated_at, document.created_at AS document_created_at 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID ORDER BY document.position DESC 
 LIMIT %(param_1)s
[2024-10-06 17:45:30,712.712] base.py -> _exec_single_context line:1908 [INFO]: [generated in 0.00021s] {'dataset_id_1': UUID('f3f28f75-8e60-4eba-b6df-4d1b390bbd89'), 'param_1': 1}
[2024-10-06 17:45:30,713.713] base.py -> _exec_single_context line:1903 [INFO]: SELECT upload_file.id AS upload_file_id, upload_file.account_id AS upload_file_account_id, upload_file.name AS upload_file_name, upload_file.key AS upload_file_key, upload_file.size AS upload_file_size, upload_file.extension AS upload_file_extension, upload_file.mime_type AS upload_file_mime_type, upload_file.hash AS upload_file_hash, upload_file.updated_at AS upload_file_updated_at, upload_file.created_at AS upload_file_created_at 
FROM upload_file 
WHERE upload_file.id = %(pk_1)s::UUID
[2024-10-06 17:45:30,713.713] base.py -> _exec_single_context line:1908 [INFO]: [generated in 0.00017s] {'pk_1': UUID('7b82638b-83ac-4590-b413-5dce0a799e7e')}
[2024-10-06 17:45:30,714.714] base.py -> _exec_single_context line:1903 [INFO]: SELECT process_rule.id AS process_rule_id, process_rule.account_id AS process_rule_account_id, process_rule.dataset_id AS process_rule_dataset_id, process_rule.mode AS process_rule_mode, process_rule.rule AS process_rule_rule, process_rule.updated_at AS process_rule_updated_at, process_rule.created_at AS process_rule_created_at 
FROM process_rule 
WHERE process_rule.id = %(pk_1)s::UUID
[2024-10-06 17:45:30,714.714] base.py -> _exec_single_context line:1908 [INFO]: [generated in 0.00018s] {'pk_1': UUID('fd4a0110-3686-4e67-89de-7d3e33e67d76')}
[2024-10-06 17:45:30,715.715] base.py -> _exec_single_context line:1903 [INFO]: INSERT INTO document (account_id, dataset_id, upload_file_id, process_rule_id, batch, name, position, processing_started_at, parsing_completed_at, splitting_completed_at, indexing_completed_at, completed_at, stopped_at, disabled_at) VALUES (%(account_id)s::UUID, %(dataset_id)s::UUID, %(upload_file_id)s::UUID, %(process_rule_id)s::UUID, %(batch)s, %(name)s, %(position)s, %(processing_started_at)s, %(parsing_completed_at)s, %(splitting_completed_at)s, %(indexing_completed_at)s, %(completed_at)s, %(stopped_at)s, %(disabled_at)s) RETURNING document.id, document.character_count, document.token_count, document.error, document.enabled, document.status, document.updated_at, document.created_at
[2024-10-06 17:45:30,716.716] base.py -> _exec_single_context line:1908 [INFO]: [generated in 0.00017s] {'account_id': '46db30d1-3199-4e79-a0cd-abf12fa6858f', 'dataset_id': UUID('f3f28f75-8e60-4eba-b6df-4d1b390bbd89'), 'upload_file_id': UUID('7b82638b-83ac-4590-b413-5dce0a799e7e'), 'process_rule_id': UUID('fd4a0110-3686-4e67-89de-7d3e33e67d76'), 'batch': '20241006174530266244', 'name': '项目API文档-完整.md', 'position': 1, 'processing_started_at': None, 'parsing_completed_at': None, 'splitting_completed_at': None, 'indexing_completed_at': None, 'completed_at': None, 'stopped_at': None, 'disabled_at': None}
[2024-10-06 17:45:30,716.716] base.py -> _commit_impl line:1146 [INFO]: COMMIT
[2024-10-06 17:45:30,738.738] base.py -> _begin_impl line:1103 [INFO]: BEGIN (implicit)
[2024-10-06 17:45:30,739.739] base.py -> _exec_single_context line:1903 [INFO]: SELECT document.id AS document_id, document.account_id AS document_account_id, document.dataset_id AS document_dataset_id, document.upload_file_id AS document_upload_file_id, document.process_rule_id AS document_process_rule_id, document.batch AS document_batch, document.name AS document_name, document.position AS document_position, document.character_count AS document_character_count, document.token_count AS document_token_count, document.processing_started_at AS document_processing_started_at, document.parsing_completed_at AS document_parsing_completed_at, document.splitting_completed_at AS document_splitting_completed_at, document.indexing_completed_at AS document_indexing_completed_at, document.completed_at AS document_completed_at, document.stopped_at AS document_stopped_at, document.error AS document_error, document.enabled AS document_enabled, document.disabled_at AS document_disabled_at, document.status AS document_status, document.updated_at AS document_updated_at, document.created_at AS document_created_at 
FROM document 
WHERE document.id = %(pk_1)s::UUID
[2024-10-06 17:45:30,739.739] base.py -> _exec_single_context line:1908 [INFO]: [generated in 0.00017s] {'pk_1': UUID('ed761d28-559e-495c-bd84-fd905d69b0c8')}
[2024-10-06 17:45:30,790.790] base.py -> _rollback_impl line:1129 [INFO]: ROLLBACK
[2024-10-06 17:45:30,791.791] _internal.py -> _log line:96 [INFO]: 127.0.0.1 - - [06/Oct/2024 17:45:30] "POST /datasets/f3f28f75-8e60-4eba-b6df-4d1b390bbd89/documents HTTP/1.1" 200 -
[2024-10-06 17:46:19,073.073] base.py -> _begin_impl line:1103 [INFO]: BEGIN (implicit)
[2024-10-06 17:46:19,073.073] base.py -> _exec_single_context line:1903 [INFO]: SELECT dataset.id AS dataset_id, dataset.account_id AS dataset_account_id, dataset.name AS dataset_name, dataset.icon AS dataset_icon, dataset.description AS dataset_description, dataset.updated_at AS dataset_updated_at, dataset.created_at AS dataset_created_at 
FROM dataset 
WHERE dataset.id = %(pk_1)s::UUID
[2024-10-06 17:46:19,074.074] base.py -> _exec_single_context line:1908 [INFO]: [cached since 48.39s ago] {'pk_1': UUID('f3f28f75-8e60-4eba-b6df-4d1b390bbd89')}
[2024-10-06 17:46:19,075.075] base.py -> _exec_single_context line:1903 [INFO]: SELECT upload_file.id AS upload_file_id, upload_file.account_id AS upload_file_account_id, upload_file.name AS upload_file_name, upload_file.key AS upload_file_key, upload_file.size AS upload_file_size, upload_file.extension AS upload_file_extension, upload_file.mime_type AS upload_file_mime_type, upload_file.hash AS upload_file_hash, upload_file.updated_at AS upload_file_updated_at, upload_file.created_at AS upload_file_created_at 
FROM upload_file 
WHERE upload_file.account_id = %(account_id_1)s::UUID AND upload_file.id IN (%(id_1_1)s::UUID)
[2024-10-06 17:46:19,075.075] base.py -> _exec_single_context line:1908 [INFO]: [cached since 48.39s ago] {'account_id_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f', 'id_1_1': '7b82638b-83ac-4590-b413-5dce0a799e7e'}
[2024-10-06 17:46:19,076.076] base.py -> _exec_single_context line:1903 [INFO]: INSERT INTO process_rule (account_id, dataset_id, mode, rule) VALUES (%(account_id)s::UUID, %(dataset_id)s::UUID, %(mode)s, %(rule)s) RETURNING process_rule.id, process_rule.updated_at, process_rule.created_at
[2024-10-06 17:46:19,076.076] base.py -> _exec_single_context line:1908 [INFO]: [cached since 48.39s ago] {'account_id': '46db30d1-3199-4e79-a0cd-abf12fa6858f', 'dataset_id': UUID('f3f28f75-8e60-4eba-b6df-4d1b390bbd89'), 'mode': 'automatic', 'rule': '{"pre_process_rules": [{"id": "remove_extra_space", "enabled": true}, {"id": "remove_url_and_email", "enabled": true}], "segment": {"separators": ["\ ... (15 characters truncated) ... "\\u3002|\\uff01|\\uff1f", "\\\\.\\\\s|\\\\!\\\\s|\\\\?\\\\s", "\\uff1b|;\\\\s", "\\uff0c|,\\\\s", " ", ""], "chunk_size": 500, "chunk_overlap": 50}}'}
[2024-10-06 17:46:19,077.077] base.py -> _commit_impl line:1146 [INFO]: COMMIT
[2024-10-06 17:46:19,080.080] base.py -> _begin_impl line:1103 [INFO]: BEGIN (implicit)
[2024-10-06 17:46:19,081.081] base.py -> _exec_single_context line:1903 [INFO]: SELECT document.id AS document_id, document.account_id AS document_account_id, document.dataset_id AS document_dataset_id, document.upload_file_id AS document_upload_file_id, document.process_rule_id AS document_process_rule_id, document.batch AS document_batch, document.name AS document_name, document.position AS document_position, document.character_count AS document_character_count, document.token_count AS document_token_count, document.processing_started_at AS document_processing_started_at, document.parsing_completed_at AS document_parsing_completed_at, document.splitting_completed_at AS document_splitting_completed_at, document.indexing_completed_at AS document_indexing_completed_at, document.completed_at AS document_completed_at, document.stopped_at AS document_stopped_at, document.error AS document_error, document.enabled AS document_enabled, document.disabled_at AS document_disabled_at, document.status AS document_status, document.updated_at AS document_updated_at, document.created_at AS document_created_at 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID ORDER BY document.position DESC 
 LIMIT %(param_1)s
[2024-10-06 17:46:19,081.081] base.py -> _exec_single_context line:1908 [INFO]: [cached since 48.37s ago] {'dataset_id_1': UUID('f3f28f75-8e60-4eba-b6df-4d1b390bbd89'), 'param_1': 1}
[2024-10-06 17:46:19,082.082] base.py -> _exec_single_context line:1903 [INFO]: SELECT upload_file.id AS upload_file_id, upload_file.account_id AS upload_file_account_id, upload_file.name AS upload_file_name, upload_file.key AS upload_file_key, upload_file.size AS upload_file_size, upload_file.extension AS upload_file_extension, upload_file.mime_type AS upload_file_mime_type, upload_file.hash AS upload_file_hash, upload_file.updated_at AS upload_file_updated_at, upload_file.created_at AS upload_file_created_at 
FROM upload_file 
WHERE upload_file.id = %(pk_1)s::UUID
[2024-10-06 17:46:19,082.082] base.py -> _exec_single_context line:1908 [INFO]: [cached since 48.37s ago] {'pk_1': UUID('7b82638b-83ac-4590-b413-5dce0a799e7e')}
[2024-10-06 17:46:19,083.083] base.py -> _exec_single_context line:1903 [INFO]: SELECT process_rule.id AS process_rule_id, process_rule.account_id AS process_rule_account_id, process_rule.dataset_id AS process_rule_dataset_id, process_rule.mode AS process_rule_mode, process_rule.rule AS process_rule_rule, process_rule.updated_at AS process_rule_updated_at, process_rule.created_at AS process_rule_created_at 
FROM process_rule 
WHERE process_rule.id = %(pk_1)s::UUID
[2024-10-06 17:46:19,083.083] base.py -> _exec_single_context line:1908 [INFO]: [cached since 48.37s ago] {'pk_1': UUID('9cb00ee5-6589-4540-92ce-589c6e4f127e')}
[2024-10-06 17:46:19,084.084] base.py -> _exec_single_context line:1903 [INFO]: INSERT INTO document (account_id, dataset_id, upload_file_id, process_rule_id, batch, name, position, processing_started_at, parsing_completed_at, splitting_completed_at, indexing_completed_at, completed_at, stopped_at, disabled_at) VALUES (%(account_id)s::UUID, %(dataset_id)s::UUID, %(upload_file_id)s::UUID, %(process_rule_id)s::UUID, %(batch)s, %(name)s, %(position)s, %(processing_started_at)s, %(parsing_completed_at)s, %(splitting_completed_at)s, %(indexing_completed_at)s, %(completed_at)s, %(stopped_at)s, %(disabled_at)s) RETURNING document.id, document.character_count, document.token_count, document.error, document.enabled, document.status, document.updated_at, document.created_at
[2024-10-06 17:46:19,084.084] base.py -> _exec_single_context line:1908 [INFO]: [cached since 48.37s ago] {'account_id': '46db30d1-3199-4e79-a0cd-abf12fa6858f', 'dataset_id': UUID('f3f28f75-8e60-4eba-b6df-4d1b390bbd89'), 'upload_file_id': UUID('7b82638b-83ac-4590-b413-5dce0a799e7e'), 'process_rule_id': UUID('9cb00ee5-6589-4540-92ce-589c6e4f127e'), 'batch': '20241006174619455160', 'name': '项目API文档-完整.md', 'position': 1, 'processing_started_at': None, 'parsing_completed_at': None, 'splitting_completed_at': None, 'indexing_completed_at': None, 'completed_at': None, 'stopped_at': None, 'disabled_at': None}
[2024-10-06 17:46:19,085.085] base.py -> _commit_impl line:1146 [INFO]: COMMIT
[2024-10-06 17:46:19,086.086] base.py -> _begin_impl line:1103 [INFO]: BEGIN (implicit)
[2024-10-06 17:46:19,086.086] base.py -> _exec_single_context line:1903 [INFO]: SELECT document.id AS document_id, document.account_id AS document_account_id, document.dataset_id AS document_dataset_id, document.upload_file_id AS document_upload_file_id, document.process_rule_id AS document_process_rule_id, document.batch AS document_batch, document.name AS document_name, document.position AS document_position, document.character_count AS document_character_count, document.token_count AS document_token_count, document.processing_started_at AS document_processing_started_at, document.parsing_completed_at AS document_parsing_completed_at, document.splitting_completed_at AS document_splitting_completed_at, document.indexing_completed_at AS document_indexing_completed_at, document.completed_at AS document_completed_at, document.stopped_at AS document_stopped_at, document.error AS document_error, document.enabled AS document_enabled, document.disabled_at AS document_disabled_at, document.status AS document_status, document.updated_at AS document_updated_at, document.created_at AS document_created_at 
FROM document 
WHERE document.id = %(pk_1)s::UUID
[2024-10-06 17:46:19,086.086] base.py -> _exec_single_context line:1908 [INFO]: [cached since 48.35s ago] {'pk_1': UUID('124dd3dd-f81e-4b93-83f9-5e5dc3a04032')}
[2024-10-06 17:46:19,105.105] base.py -> _rollback_impl line:1129 [INFO]: ROLLBACK
[2024-10-06 17:46:19,106.106] _internal.py -> _log line:96 [INFO]: 127.0.0.1 - - [06/Oct/2024 17:46:19] "POST /datasets/f3f28f75-8e60-4eba-b6df-4d1b390bbd89/documents HTTP/1.1" 200 -
[2024-10-06 17:48:39,187.187] _internal.py -> _log line:96 [INFO]:  * Detected change in 'D:\\Code\\llmops\\llmops-api\\internal\\service\\embeddings_service.py', reloading
[2024-10-06 17:48:39,832.832] _internal.py -> _log line:96 [INFO]:  * Restarting with stat
[2024-10-06 17:56:42,826.826] _internal.py -> _log line:96 [INFO]: [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5000
[2024-10-06 17:56:42,826.826] _internal.py -> _log line:96 [INFO]: [33mPress CTRL+C to quit[0m
[2024-10-06 17:56:42,827.827] _internal.py -> _log line:96 [INFO]:  * Restarting with stat
[2024-10-06 17:57:04,158.158] _internal.py -> _log line:96 [WARNING]:  * Debugger is active!
[2024-10-06 17:57:04,161.161] _internal.py -> _log line:96 [INFO]:  * Debugger PIN: 102-324-223
[2024-10-06 18:08:30,053.053] _internal.py -> _log line:96 [INFO]: [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5000
[2024-10-06 18:08:30,053.053] _internal.py -> _log line:96 [INFO]: [33mPress CTRL+C to quit[0m
[2024-10-06 18:08:30,054.054] _internal.py -> _log line:96 [INFO]:  * Restarting with stat
[2024-10-06 18:08:47,403.403] _internal.py -> _log line:96 [WARNING]:  * Debugger is active!
[2024-10-06 18:08:47,406.406] _internal.py -> _log line:96 [INFO]:  * Debugger PIN: 102-324-223
[2024-10-06 18:09:09,584.584] _internal.py -> _log line:96 [INFO]: [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5000
[2024-10-06 18:09:09,584.584] _internal.py -> _log line:96 [INFO]: [33mPress CTRL+C to quit[0m
[2024-10-06 18:09:09,585.585] _internal.py -> _log line:96 [INFO]:  * Restarting with stat
[2024-10-06 18:09:16,819.819] _internal.py -> _log line:96 [WARNING]:  * Debugger is active!
[2024-10-06 18:09:16,823.823] _internal.py -> _log line:96 [INFO]:  * Debugger PIN: 102-324-223
[2024-10-06 18:09:56,085.085] base.py -> _exec_single_context line:1903 [INFO]: select pg_catalog.version()
[2024-10-06 18:09:56,085.085] base.py -> _exec_single_context line:1908 [INFO]: [raw sql] {}
[2024-10-06 18:09:56,086.086] base.py -> _exec_single_context line:1903 [INFO]: select current_schema()
[2024-10-06 18:09:56,086.086] base.py -> _exec_single_context line:1908 [INFO]: [raw sql] {}
[2024-10-06 18:09:56,086.086] base.py -> _exec_single_context line:1903 [INFO]: show standard_conforming_strings
[2024-10-06 18:09:56,087.087] base.py -> _exec_single_context line:1908 [INFO]: [raw sql] {}
[2024-10-06 18:09:56,087.087] base.py -> _begin_impl line:1103 [INFO]: BEGIN (implicit)
[2024-10-06 18:09:56,089.089] base.py -> _exec_single_context line:1903 [INFO]: SELECT dataset.id AS dataset_id, dataset.account_id AS dataset_account_id, dataset.name AS dataset_name, dataset.icon AS dataset_icon, dataset.description AS dataset_description, dataset.updated_at AS dataset_updated_at, dataset.created_at AS dataset_created_at 
FROM dataset 
WHERE dataset.id = %(pk_1)s::UUID
[2024-10-06 18:09:56,089.089] base.py -> _exec_single_context line:1908 [INFO]: [generated in 0.00013s] {'pk_1': UUID('f3f28f75-8e60-4eba-b6df-4d1b390bbd89')}
[2024-10-06 18:09:56,091.091] base.py -> _exec_single_context line:1903 [INFO]: SELECT upload_file.id AS upload_file_id, upload_file.account_id AS upload_file_account_id, upload_file.name AS upload_file_name, upload_file.key AS upload_file_key, upload_file.size AS upload_file_size, upload_file.extension AS upload_file_extension, upload_file.mime_type AS upload_file_mime_type, upload_file.hash AS upload_file_hash, upload_file.updated_at AS upload_file_updated_at, upload_file.created_at AS upload_file_created_at 
FROM upload_file 
WHERE upload_file.account_id = %(account_id_1)s::UUID AND upload_file.id IN (%(id_1_1)s::UUID)
[2024-10-06 18:09:56,091.091] base.py -> _exec_single_context line:1908 [INFO]: [generated in 0.00018s] {'account_id_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f', 'id_1_1': '7b82638b-83ac-4590-b413-5dce0a799e7e'}
[2024-10-06 18:09:56,093.093] base.py -> _exec_single_context line:1903 [INFO]: INSERT INTO process_rule (account_id, dataset_id, mode, rule) VALUES (%(account_id)s::UUID, %(dataset_id)s::UUID, %(mode)s, %(rule)s) RETURNING process_rule.id, process_rule.updated_at, process_rule.created_at
[2024-10-06 18:09:56,093.093] base.py -> _exec_single_context line:1908 [INFO]: [generated in 0.00015s] {'account_id': '46db30d1-3199-4e79-a0cd-abf12fa6858f', 'dataset_id': UUID('f3f28f75-8e60-4eba-b6df-4d1b390bbd89'), 'mode': 'automatic', 'rule': '{"pre_process_rules": [{"id": "remove_extra_space", "enabled": true}, {"id": "remove_url_and_email", "enabled": true}], "segment": {"separators": ["\ ... (15 characters truncated) ... "\\u3002|\\uff01|\\uff1f", "\\\\.\\\\s|\\\\!\\\\s|\\\\?\\\\s", "\\uff1b|;\\\\s", "\\uff0c|,\\\\s", " ", ""], "chunk_size": 500, "chunk_overlap": 50}}'}
[2024-10-06 18:09:56,094.094] base.py -> _commit_impl line:1146 [INFO]: COMMIT
[2024-10-06 18:09:56,108.108] base.py -> _begin_impl line:1103 [INFO]: BEGIN (implicit)
[2024-10-06 18:09:56,110.110] base.py -> _exec_single_context line:1903 [INFO]: SELECT document.id AS document_id, document.account_id AS document_account_id, document.dataset_id AS document_dataset_id, document.upload_file_id AS document_upload_file_id, document.process_rule_id AS document_process_rule_id, document.batch AS document_batch, document.name AS document_name, document.position AS document_position, document.character_count AS document_character_count, document.token_count AS document_token_count, document.processing_started_at AS document_processing_started_at, document.parsing_completed_at AS document_parsing_completed_at, document.splitting_completed_at AS document_splitting_completed_at, document.indexing_completed_at AS document_indexing_completed_at, document.completed_at AS document_completed_at, document.stopped_at AS document_stopped_at, document.error AS document_error, document.enabled AS document_enabled, document.disabled_at AS document_disabled_at, document.status AS document_status, document.updated_at AS document_updated_at, document.created_at AS document_created_at 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID ORDER BY document.position DESC 
 LIMIT %(param_1)s
[2024-10-06 18:09:56,110.110] base.py -> _exec_single_context line:1908 [INFO]: [generated in 0.00019s] {'dataset_id_1': UUID('f3f28f75-8e60-4eba-b6df-4d1b390bbd89'), 'param_1': 1}
[2024-10-06 18:09:56,112.112] base.py -> _exec_single_context line:1903 [INFO]: SELECT upload_file.id AS upload_file_id, upload_file.account_id AS upload_file_account_id, upload_file.name AS upload_file_name, upload_file.key AS upload_file_key, upload_file.size AS upload_file_size, upload_file.extension AS upload_file_extension, upload_file.mime_type AS upload_file_mime_type, upload_file.hash AS upload_file_hash, upload_file.updated_at AS upload_file_updated_at, upload_file.created_at AS upload_file_created_at 
FROM upload_file 
WHERE upload_file.id = %(pk_1)s::UUID
[2024-10-06 18:09:56,112.112] base.py -> _exec_single_context line:1908 [INFO]: [generated in 0.00013s] {'pk_1': UUID('7b82638b-83ac-4590-b413-5dce0a799e7e')}
[2024-10-06 18:09:56,113.113] base.py -> _exec_single_context line:1903 [INFO]: SELECT process_rule.id AS process_rule_id, process_rule.account_id AS process_rule_account_id, process_rule.dataset_id AS process_rule_dataset_id, process_rule.mode AS process_rule_mode, process_rule.rule AS process_rule_rule, process_rule.updated_at AS process_rule_updated_at, process_rule.created_at AS process_rule_created_at 
FROM process_rule 
WHERE process_rule.id = %(pk_1)s::UUID
[2024-10-06 18:09:56,113.113] base.py -> _exec_single_context line:1908 [INFO]: [generated in 0.00013s] {'pk_1': UUID('2e60b1ca-d6d3-47a3-9607-940bfd01c093')}
[2024-10-06 18:09:56,115.115] base.py -> _exec_single_context line:1903 [INFO]: INSERT INTO document (account_id, dataset_id, upload_file_id, process_rule_id, batch, name, position, processing_started_at, parsing_completed_at, splitting_completed_at, indexing_completed_at, completed_at, stopped_at, disabled_at) VALUES (%(account_id)s::UUID, %(dataset_id)s::UUID, %(upload_file_id)s::UUID, %(process_rule_id)s::UUID, %(batch)s, %(name)s, %(position)s, %(processing_started_at)s, %(parsing_completed_at)s, %(splitting_completed_at)s, %(indexing_completed_at)s, %(completed_at)s, %(stopped_at)s, %(disabled_at)s) RETURNING document.id, document.character_count, document.token_count, document.error, document.enabled, document.status, document.updated_at, document.created_at
[2024-10-06 18:09:56,115.115] base.py -> _exec_single_context line:1908 [INFO]: [generated in 0.00030s] {'account_id': '46db30d1-3199-4e79-a0cd-abf12fa6858f', 'dataset_id': UUID('f3f28f75-8e60-4eba-b6df-4d1b390bbd89'), 'upload_file_id': UUID('7b82638b-83ac-4590-b413-5dce0a799e7e'), 'process_rule_id': UUID('2e60b1ca-d6d3-47a3-9607-940bfd01c093'), 'batch': '20241006180956851707', 'name': '项目API文档-完整.md', 'position': 1, 'processing_started_at': None, 'parsing_completed_at': None, 'splitting_completed_at': None, 'indexing_completed_at': None, 'completed_at': None, 'stopped_at': None, 'disabled_at': None}
[2024-10-06 18:09:56,116.116] base.py -> _commit_impl line:1146 [INFO]: COMMIT
[2024-10-06 18:09:56,135.135] base.py -> _begin_impl line:1103 [INFO]: BEGIN (implicit)
[2024-10-06 18:09:56,135.135] base.py -> _exec_single_context line:1903 [INFO]: SELECT document.id AS document_id, document.account_id AS document_account_id, document.dataset_id AS document_dataset_id, document.upload_file_id AS document_upload_file_id, document.process_rule_id AS document_process_rule_id, document.batch AS document_batch, document.name AS document_name, document.position AS document_position, document.character_count AS document_character_count, document.token_count AS document_token_count, document.processing_started_at AS document_processing_started_at, document.parsing_completed_at AS document_parsing_completed_at, document.splitting_completed_at AS document_splitting_completed_at, document.indexing_completed_at AS document_indexing_completed_at, document.completed_at AS document_completed_at, document.stopped_at AS document_stopped_at, document.error AS document_error, document.enabled AS document_enabled, document.disabled_at AS document_disabled_at, document.status AS document_status, document.updated_at AS document_updated_at, document.created_at AS document_created_at 
FROM document 
WHERE document.id = %(pk_1)s::UUID
[2024-10-06 18:09:56,136.136] base.py -> _exec_single_context line:1908 [INFO]: [generated in 0.00014s] {'pk_1': UUID('cf0c6fc8-7e78-423b-b2dd-67e110632682')}
[2024-10-06 18:09:56,168.168] base.py -> _rollback_impl line:1129 [INFO]: ROLLBACK
[2024-10-06 18:09:56,169.169] _internal.py -> _log line:96 [INFO]: 127.0.0.1 - - [06/Oct/2024 18:09:56] "POST /datasets/f3f28f75-8e60-4eba-b6df-4d1b390bbd89/documents HTTP/1.1" 200 -
[2024-10-06 18:21:34,441.441] _internal.py -> _log line:96 [INFO]:  * Detected change in 'D:\\Code\\llmops\\llmops-api\\internal\\service\\embeddings_service.py', reloading
[2024-10-06 18:21:35,296.296] _internal.py -> _log line:96 [INFO]:  * Restarting with stat
[2024-10-06 18:21:48,941.941] _internal.py -> _log line:96 [WARNING]:  * Debugger is active!
[2024-10-06 18:21:48,946.946] _internal.py -> _log line:96 [INFO]:  * Debugger PIN: 102-324-223
[2024-10-06 19:57:50,989.989] _internal.py -> _log line:96 [INFO]: [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5000
[2024-10-06 19:57:50,989.989] _internal.py -> _log line:96 [INFO]: [33mPress CTRL+C to quit[0m
[2024-10-06 19:57:50,990.990] _internal.py -> _log line:96 [INFO]:  * Restarting with stat
[2024-10-06 19:57:57,548.548] _internal.py -> _log line:96 [WARNING]:  * Debugger is active!
[2024-10-06 19:57:57,550.550] _internal.py -> _log line:96 [INFO]:  * Debugger PIN: 102-324-223
[2024-10-06 20:28:36,528.528] _internal.py -> _log line:96 [INFO]:  * Detected change in 'D:\\Code\\llmops\\llmops-api\\internal\\handler\\app_handler.py', reloading
[2024-10-06 20:28:37,427.427] _internal.py -> _log line:96 [INFO]:  * Restarting with stat
[2024-10-06 20:28:44,277.277] _internal.py -> _log line:96 [WARNING]:  * Debugger is active!
[2024-10-06 20:28:44,279.279] _internal.py -> _log line:96 [INFO]:  * Debugger PIN: 102-324-223
[2024-10-06 20:29:12,931.931] _internal.py -> _log line:96 [INFO]: 127.0.0.1 - - [06/Oct/2024 20:29:12] "GET /ping HTTP/1.1" 200 -
[2024-10-06 20:33:13,410.410] _internal.py -> _log line:96 [INFO]:  * Detected change in 'D:\\Code\\llmops\\llmops-api\\internal\\handler\\app_handler.py', reloading
[2024-10-06 20:33:14,332.332] _internal.py -> _log line:96 [INFO]:  * Restarting with stat
[2024-10-06 20:33:20,858.858] _internal.py -> _log line:96 [WARNING]:  * Debugger is active!
[2024-10-06 20:33:20,860.860] _internal.py -> _log line:96 [INFO]:  * Debugger PIN: 102-324-223
[2024-10-06 20:34:19,259.259] base.py -> _exec_single_context line:1903 [INFO]: select pg_catalog.version()
[2024-10-06 20:34:19,259.259] base.py -> _exec_single_context line:1908 [INFO]: [raw sql] {}
[2024-10-06 20:34:19,260.260] base.py -> _exec_single_context line:1903 [INFO]: select current_schema()
[2024-10-06 20:34:19,260.260] base.py -> _exec_single_context line:1908 [INFO]: [raw sql] {}
[2024-10-06 20:34:19,261.261] base.py -> _exec_single_context line:1903 [INFO]: show standard_conforming_strings
[2024-10-06 20:34:19,261.261] base.py -> _exec_single_context line:1908 [INFO]: [raw sql] {}
[2024-10-06 20:34:19,262.262] base.py -> _begin_impl line:1103 [INFO]: BEGIN (implicit)
[2024-10-06 20:34:19,263.263] base.py -> _exec_single_context line:1903 [INFO]: SELECT dataset.id AS dataset_id, dataset.account_id AS dataset_account_id, dataset.name AS dataset_name, dataset.icon AS dataset_icon, dataset.description AS dataset_description, dataset.updated_at AS dataset_updated_at, dataset.created_at AS dataset_created_at 
FROM dataset 
WHERE dataset.id = %(pk_1)s::UUID
[2024-10-06 20:34:19,263.263] base.py -> _exec_single_context line:1908 [INFO]: [generated in 0.00035s] {'pk_1': UUID('f3f28f75-8e60-4eba-b6df-4d1b390bbd89')}
[2024-10-06 20:34:19,344.344] base.py -> _exec_single_context line:1903 [INFO]: SELECT upload_file.id AS upload_file_id, upload_file.account_id AS upload_file_account_id, upload_file.name AS upload_file_name, upload_file.key AS upload_file_key, upload_file.size AS upload_file_size, upload_file.extension AS upload_file_extension, upload_file.mime_type AS upload_file_mime_type, upload_file.hash AS upload_file_hash, upload_file.updated_at AS upload_file_updated_at, upload_file.created_at AS upload_file_created_at 
FROM upload_file 
WHERE upload_file.account_id = %(account_id_1)s::UUID AND upload_file.id IN (%(id_1_1)s::UUID)
[2024-10-06 20:34:19,344.344] base.py -> _exec_single_context line:1908 [INFO]: [generated in 0.00021s] {'account_id_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f', 'id_1_1': '7b82638b-83ac-4590-b413-5dce0a799e7e'}
[2024-10-06 20:34:19,432.432] base.py -> _exec_single_context line:1903 [INFO]: INSERT INTO process_rule (account_id, dataset_id, mode, rule) VALUES (%(account_id)s::UUID, %(dataset_id)s::UUID, %(mode)s, %(rule)s) RETURNING process_rule.id, process_rule.updated_at, process_rule.created_at
[2024-10-06 20:34:19,432.432] base.py -> _exec_single_context line:1908 [INFO]: [generated in 0.00020s] {'account_id': '46db30d1-3199-4e79-a0cd-abf12fa6858f', 'dataset_id': UUID('f3f28f75-8e60-4eba-b6df-4d1b390bbd89'), 'mode': 'automatic', 'rule': '{"pre_process_rules": [{"id": "remove_extra_space", "enabled": true}, {"id": "remove_url_and_email", "enabled": true}], "segment": {"separators": ["\ ... (15 characters truncated) ... "\\u3002|\\uff01|\\uff1f", "\\\\.\\\\s|\\\\!\\\\s|\\\\?\\\\s", "\\uff1b|;\\\\s", "\\uff0c|,\\\\s", " ", ""], "chunk_size": 500, "chunk_overlap": 50}}'}
[2024-10-06 20:34:19,648.648] base.py -> _commit_impl line:1146 [INFO]: COMMIT
[2024-10-06 20:34:19,664.664] base.py -> _begin_impl line:1103 [INFO]: BEGIN (implicit)
[2024-10-06 20:34:19,666.666] base.py -> _exec_single_context line:1903 [INFO]: SELECT document.id AS document_id, document.account_id AS document_account_id, document.dataset_id AS document_dataset_id, document.upload_file_id AS document_upload_file_id, document.process_rule_id AS document_process_rule_id, document.batch AS document_batch, document.name AS document_name, document.position AS document_position, document.character_count AS document_character_count, document.token_count AS document_token_count, document.processing_started_at AS document_processing_started_at, document.parsing_completed_at AS document_parsing_completed_at, document.splitting_completed_at AS document_splitting_completed_at, document.indexing_completed_at AS document_indexing_completed_at, document.completed_at AS document_completed_at, document.stopped_at AS document_stopped_at, document.error AS document_error, document.enabled AS document_enabled, document.disabled_at AS document_disabled_at, document.status AS document_status, document.updated_at AS document_updated_at, document.created_at AS document_created_at 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID ORDER BY document.position DESC 
 LIMIT %(param_1)s
[2024-10-06 20:34:19,666.666] base.py -> _exec_single_context line:1908 [INFO]: [generated in 0.00015s] {'dataset_id_1': UUID('f3f28f75-8e60-4eba-b6df-4d1b390bbd89'), 'param_1': 1}
[2024-10-06 20:34:19,668.668] base.py -> _exec_single_context line:1903 [INFO]: SELECT upload_file.id AS upload_file_id, upload_file.account_id AS upload_file_account_id, upload_file.name AS upload_file_name, upload_file.key AS upload_file_key, upload_file.size AS upload_file_size, upload_file.extension AS upload_file_extension, upload_file.mime_type AS upload_file_mime_type, upload_file.hash AS upload_file_hash, upload_file.updated_at AS upload_file_updated_at, upload_file.created_at AS upload_file_created_at 
FROM upload_file 
WHERE upload_file.id = %(pk_1)s::UUID
[2024-10-06 20:34:19,668.668] base.py -> _exec_single_context line:1908 [INFO]: [generated in 0.00017s] {'pk_1': UUID('7b82638b-83ac-4590-b413-5dce0a799e7e')}
[2024-10-06 20:34:19,669.669] base.py -> _exec_single_context line:1903 [INFO]: SELECT process_rule.id AS process_rule_id, process_rule.account_id AS process_rule_account_id, process_rule.dataset_id AS process_rule_dataset_id, process_rule.mode AS process_rule_mode, process_rule.rule AS process_rule_rule, process_rule.updated_at AS process_rule_updated_at, process_rule.created_at AS process_rule_created_at 
FROM process_rule 
WHERE process_rule.id = %(pk_1)s::UUID
[2024-10-06 20:34:19,669.669] base.py -> _exec_single_context line:1908 [INFO]: [generated in 0.00013s] {'pk_1': UUID('3eae5343-7f6c-4d2d-8ad9-304aff3d966d')}
[2024-10-06 20:34:19,746.746] base.py -> _exec_single_context line:1903 [INFO]: INSERT INTO document (account_id, dataset_id, upload_file_id, process_rule_id, batch, name, position, processing_started_at, parsing_completed_at, splitting_completed_at, indexing_completed_at, completed_at, stopped_at, disabled_at) VALUES (%(account_id)s::UUID, %(dataset_id)s::UUID, %(upload_file_id)s::UUID, %(process_rule_id)s::UUID, %(batch)s, %(name)s, %(position)s, %(processing_started_at)s, %(parsing_completed_at)s, %(splitting_completed_at)s, %(indexing_completed_at)s, %(completed_at)s, %(stopped_at)s, %(disabled_at)s) RETURNING document.id, document.character_count, document.token_count, document.error, document.enabled, document.status, document.updated_at, document.created_at
[2024-10-06 20:34:19,747.747] base.py -> _exec_single_context line:1908 [INFO]: [generated in 0.00033s] {'account_id': '46db30d1-3199-4e79-a0cd-abf12fa6858f', 'dataset_id': UUID('f3f28f75-8e60-4eba-b6df-4d1b390bbd89'), 'upload_file_id': UUID('7b82638b-83ac-4590-b413-5dce0a799e7e'), 'process_rule_id': UUID('3eae5343-7f6c-4d2d-8ad9-304aff3d966d'), 'batch': '20241006203419822872', 'name': '项目API文档-完整.md', 'position': 1, 'processing_started_at': None, 'parsing_completed_at': None, 'splitting_completed_at': None, 'indexing_completed_at': None, 'completed_at': None, 'stopped_at': None, 'disabled_at': None}
[2024-10-06 20:34:19,803.803] base.py -> _commit_impl line:1146 [INFO]: COMMIT
[2024-10-06 20:34:19,810.810] base.py -> _begin_impl line:1103 [INFO]: BEGIN (implicit)
[2024-10-06 20:34:19,811.811] base.py -> _exec_single_context line:1903 [INFO]: SELECT document.id AS document_id, document.account_id AS document_account_id, document.dataset_id AS document_dataset_id, document.upload_file_id AS document_upload_file_id, document.process_rule_id AS document_process_rule_id, document.batch AS document_batch, document.name AS document_name, document.position AS document_position, document.character_count AS document_character_count, document.token_count AS document_token_count, document.processing_started_at AS document_processing_started_at, document.parsing_completed_at AS document_parsing_completed_at, document.splitting_completed_at AS document_splitting_completed_at, document.indexing_completed_at AS document_indexing_completed_at, document.completed_at AS document_completed_at, document.stopped_at AS document_stopped_at, document.error AS document_error, document.enabled AS document_enabled, document.disabled_at AS document_disabled_at, document.status AS document_status, document.updated_at AS document_updated_at, document.created_at AS document_created_at 
FROM document 
WHERE document.id = %(pk_1)s::UUID
[2024-10-06 20:34:19,811.811] base.py -> _exec_single_context line:1908 [INFO]: [generated in 0.00014s] {'pk_1': UUID('6dbb38a8-f4ac-40de-bc70-ee3363ea99f2')}
[2024-10-06 20:34:19,876.876] base.py -> _rollback_impl line:1129 [INFO]: ROLLBACK
[2024-10-06 20:34:19,876.876] _internal.py -> _log line:96 [INFO]: 127.0.0.1 - - [06/Oct/2024 20:34:19] "POST /datasets/f3f28f75-8e60-4eba-b6df-4d1b390bbd89/documents HTTP/1.1" 200 -
[2024-10-06 22:03:30,172.172] _internal.py -> _log line:96 [INFO]:  * Detected change in 'D:\\Code\\llmops\\llmops-api\\internal\\service\\indexing_service.py', reloading
[2024-10-06 22:03:31,266.266] _internal.py -> _log line:96 [INFO]:  * Restarting with stat
[2024-10-06 22:03:35,570.570] _internal.py -> _log line:96 [INFO]:  * Restarting with stat
[2024-10-06 22:03:45,056.056] _internal.py -> _log line:96 [INFO]:  * Restarting with stat
[2024-10-06 22:03:53,029.029] _internal.py -> _log line:96 [WARNING]:  * Debugger is active!
[2024-10-06 22:03:53,032.032] _internal.py -> _log line:96 [INFO]:  * Debugger PIN: 102-324-223
[2024-10-06 22:09:20,286.286] _internal.py -> _log line:96 [INFO]:  * Detected change in 'D:\\Code\\llmops\\llmops-api\\internal\\handler\\app_handler.py', reloading
[2024-10-06 22:09:21,318.318] _internal.py -> _log line:96 [INFO]:  * Restarting with stat
[2024-10-06 22:09:28,736.736] _internal.py -> _log line:96 [WARNING]:  * Debugger is active!
[2024-10-06 22:09:28,739.739] _internal.py -> _log line:96 [INFO]:  * Debugger PIN: 102-324-223
[2024-10-06 22:09:29,137.137] base.py -> _exec_single_context line:1903 [INFO]: select pg_catalog.version()
[2024-10-06 22:09:29,137.137] base.py -> _exec_single_context line:1908 [INFO]: [raw sql] {}
[2024-10-06 22:09:29,138.138] base.py -> _exec_single_context line:1903 [INFO]: select current_schema()
[2024-10-06 22:09:29,138.138] base.py -> _exec_single_context line:1908 [INFO]: [raw sql] {}
[2024-10-06 22:09:29,139.139] base.py -> _exec_single_context line:1903 [INFO]: show standard_conforming_strings
[2024-10-06 22:09:29,139.139] base.py -> _exec_single_context line:1908 [INFO]: [raw sql] {}
[2024-10-06 22:09:29,140.140] base.py -> _begin_impl line:1103 [INFO]: BEGIN (implicit)
[2024-10-06 22:09:29,141.141] base.py -> _exec_single_context line:1903 [INFO]: SELECT api_tool.id AS api_tool_id, api_tool.account_id AS api_tool_account_id, api_tool.provider_id AS api_tool_provider_id, api_tool.name AS api_tool_name, api_tool.description AS api_tool_description, api_tool.url AS api_tool_url, api_tool.method AS api_tool_method, api_tool.parameters AS api_tool_parameters, api_tool.updated_at AS api_tool_updated_at, api_tool.created_at AS api_tool_created_at 
FROM api_tool 
WHERE api_tool.provider_id = %(provider_id_1)s::UUID AND api_tool.name = %(name_1)s
[2024-10-06 22:09:29,141.141] base.py -> _exec_single_context line:1908 [INFO]: [generated in 0.00015s] {'provider_id_1': 'd72bb9d7-8794-4caf-bd60-1f992c537065', 'name_1': 'YoudaoSuggest'}
[2024-10-06 22:09:29,268.268] base.py -> _exec_single_context line:1903 [INFO]: SELECT api_tool_provider.id AS api_tool_provider_id, api_tool_provider.account_id AS api_tool_provider_account_id, api_tool_provider.name AS api_tool_provider_name, api_tool_provider.icon AS api_tool_provider_icon, api_tool_provider.description AS api_tool_provider_description, api_tool_provider.openapi_schema AS api_tool_provider_openapi_schema, api_tool_provider.headers AS api_tool_provider_headers, api_tool_provider.updated_at AS api_tool_provider_updated_at, api_tool_provider.created_at AS api_tool_provider_created_at 
FROM api_tool_provider 
WHERE api_tool_provider.id = %(pk_1)s::UUID
[2024-10-06 22:09:29,268.268] base.py -> _exec_single_context line:1908 [INFO]: [generated in 0.00017s] {'pk_1': UUID('d72bb9d7-8794-4caf-bd60-1f992c537065')}
[2024-10-06 22:09:29,515.515] base.py -> _rollback_impl line:1129 [INFO]: ROLLBACK
[2024-10-06 22:09:29,515.515] _internal.py -> _log line:96 [INFO]: 127.0.0.1 - - [06/Oct/2024 22:09:29] "GET /ping HTTP/1.1" 200 -
[2024-10-06 22:20:38,239.239] _internal.py -> _log line:96 [INFO]: [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5000
[2024-10-06 22:20:38,239.239] _internal.py -> _log line:96 [INFO]: [33mPress CTRL+C to quit[0m
[2024-10-06 22:20:38,240.240] _internal.py -> _log line:96 [INFO]:  * Restarting with stat
[2024-10-06 22:20:45,321.321] _internal.py -> _log line:96 [WARNING]:  * Debugger is active!
[2024-10-06 22:20:45,323.323] _internal.py -> _log line:96 [INFO]:  * Debugger PIN: 102-324-223
[2024-10-06 22:21:12,398.398] base.py -> _exec_single_context line:1903 [INFO]: select pg_catalog.version()
[2024-10-06 22:21:12,398.398] base.py -> _exec_single_context line:1908 [INFO]: [raw sql] {}
[2024-10-06 22:21:12,400.400] base.py -> _exec_single_context line:1903 [INFO]: select current_schema()
[2024-10-06 22:21:12,400.400] base.py -> _exec_single_context line:1908 [INFO]: [raw sql] {}
[2024-10-06 22:21:12,400.400] base.py -> _exec_single_context line:1903 [INFO]: show standard_conforming_strings
[2024-10-06 22:21:12,400.400] base.py -> _exec_single_context line:1908 [INFO]: [raw sql] {}
[2024-10-06 22:21:12,401.401] base.py -> _begin_impl line:1103 [INFO]: BEGIN (implicit)
[2024-10-06 22:21:12,403.403] base.py -> _exec_single_context line:1903 [INFO]: INSERT INTO upload_file (account_id, name, key, size, extension, mime_type, hash) VALUES (%(account_id)s::UUID, %(name)s, %(key)s, %(size)s, %(extension)s, %(mime_type)s, %(hash)s) RETURNING upload_file.id, upload_file.updated_at, upload_file.created_at
[2024-10-06 22:21:12,403.403] base.py -> _exec_single_context line:1908 [INFO]: [generated in 0.00023s] {'account_id': '46db30d1-3199-4e79-a0cd-abf12fa6858f', 'name': 'LLMOps 项目提示词大全.md', 'key': '2024/10/06/ba2976ca-fe0c-45e9-a3c9-516569d065b6.md', 'size': 28749, 'extension': 'md', 'mime_type': 'text/markdown', 'hash': '6d867db429d26ea426d6b67a88fce43e74760d039e9e2925f0083b7acb1f066a'}
[2024-10-06 22:21:12,405.405] base.py -> _commit_impl line:1146 [INFO]: COMMIT
[2024-10-06 22:21:12,409.409] base.py -> _begin_impl line:1103 [INFO]: BEGIN (implicit)
[2024-10-06 22:21:12,411.411] base.py -> _exec_single_context line:1903 [INFO]: SELECT upload_file.id AS upload_file_id, upload_file.account_id AS upload_file_account_id, upload_file.name AS upload_file_name, upload_file.key AS upload_file_key, upload_file.size AS upload_file_size, upload_file.extension AS upload_file_extension, upload_file.mime_type AS upload_file_mime_type, upload_file.hash AS upload_file_hash, upload_file.updated_at AS upload_file_updated_at, upload_file.created_at AS upload_file_created_at 
FROM upload_file 
WHERE upload_file.id = %(pk_1)s::UUID
[2024-10-06 22:21:12,411.411] base.py -> _exec_single_context line:1908 [INFO]: [generated in 0.00022s] {'pk_1': UUID('5e365ff7-2205-4b69-972f-ce752d3911e3')}
[2024-10-06 22:21:12,413.413] base.py -> _rollback_impl line:1129 [INFO]: ROLLBACK
[2024-10-06 22:21:12,414.414] _internal.py -> _log line:96 [INFO]: 127.0.0.1 - - [06/Oct/2024 22:21:12] "POST /upload-files/file HTTP/1.1" 200 -
[2024-10-06 22:21:26,463.463] base.py -> _begin_impl line:1103 [INFO]: BEGIN (implicit)
[2024-10-06 22:21:26,465.465] base.py -> _exec_single_context line:1903 [INFO]: SELECT dataset.id AS dataset_id, dataset.account_id AS dataset_account_id, dataset.name AS dataset_name, dataset.icon AS dataset_icon, dataset.description AS dataset_description, dataset.updated_at AS dataset_updated_at, dataset.created_at AS dataset_created_at 
FROM dataset 
WHERE dataset.id = %(pk_1)s::UUID
[2024-10-06 22:21:26,465.465] base.py -> _exec_single_context line:1908 [INFO]: [generated in 0.00023s] {'pk_1': UUID('f3f28f75-8e60-4eba-b6df-4d1b390bbd89')}
[2024-10-06 22:21:26,468.468] base.py -> _exec_single_context line:1903 [INFO]: SELECT upload_file.id AS upload_file_id, upload_file.account_id AS upload_file_account_id, upload_file.name AS upload_file_name, upload_file.key AS upload_file_key, upload_file.size AS upload_file_size, upload_file.extension AS upload_file_extension, upload_file.mime_type AS upload_file_mime_type, upload_file.hash AS upload_file_hash, upload_file.updated_at AS upload_file_updated_at, upload_file.created_at AS upload_file_created_at 
FROM upload_file 
WHERE upload_file.account_id = %(account_id_1)s::UUID AND upload_file.id IN (%(id_1_1)s::UUID)
[2024-10-06 22:21:26,468.468] base.py -> _exec_single_context line:1908 [INFO]: [generated in 0.00030s] {'account_id_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f', 'id_1_1': '5e365ff7-2205-4b69-972f-ce752d3911e3'}
[2024-10-06 22:21:26,471.471] base.py -> _exec_single_context line:1903 [INFO]: INSERT INTO process_rule (account_id, dataset_id, mode, rule) VALUES (%(account_id)s::UUID, %(dataset_id)s::UUID, %(mode)s, %(rule)s) RETURNING process_rule.id, process_rule.updated_at, process_rule.created_at
[2024-10-06 22:21:26,471.471] base.py -> _exec_single_context line:1908 [INFO]: [generated in 0.00025s] {'account_id': '46db30d1-3199-4e79-a0cd-abf12fa6858f', 'dataset_id': UUID('f3f28f75-8e60-4eba-b6df-4d1b390bbd89'), 'mode': 'automatic', 'rule': '{"pre_process_rules": [{"id": "remove_extra_space", "enabled": true}, {"id": "remove_url_and_email", "enabled": true}], "segment": {"separators": ["\ ... (15 characters truncated) ... "\\u3002|\\uff01|\\uff1f", "\\\\.\\\\s|\\\\!\\\\s|\\\\?\\\\s", "\\uff1b|;\\\\s", "\\uff0c|,\\\\s", " ", ""], "chunk_size": 500, "chunk_overlap": 50}}'}
[2024-10-06 22:21:26,476.476] base.py -> _commit_impl line:1146 [INFO]: COMMIT
[2024-10-06 22:21:26,480.480] base.py -> _begin_impl line:1103 [INFO]: BEGIN (implicit)
[2024-10-06 22:21:26,483.483] base.py -> _exec_single_context line:1903 [INFO]: SELECT document.id AS document_id, document.account_id AS document_account_id, document.dataset_id AS document_dataset_id, document.upload_file_id AS document_upload_file_id, document.process_rule_id AS document_process_rule_id, document.batch AS document_batch, document.name AS document_name, document.position AS document_position, document.character_count AS document_character_count, document.token_count AS document_token_count, document.processing_started_at AS document_processing_started_at, document.parsing_completed_at AS document_parsing_completed_at, document.splitting_completed_at AS document_splitting_completed_at, document.indexing_completed_at AS document_indexing_completed_at, document.completed_at AS document_completed_at, document.stopped_at AS document_stopped_at, document.error AS document_error, document.enabled AS document_enabled, document.disabled_at AS document_disabled_at, document.status AS document_status, document.updated_at AS document_updated_at, document.created_at AS document_created_at 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID ORDER BY document.position DESC 
 LIMIT %(param_1)s
[2024-10-06 22:21:26,483.483] base.py -> _exec_single_context line:1908 [INFO]: [generated in 0.00025s] {'dataset_id_1': UUID('f3f28f75-8e60-4eba-b6df-4d1b390bbd89'), 'param_1': 1}
[2024-10-06 22:21:26,485.485] base.py -> _exec_single_context line:1903 [INFO]: SELECT upload_file.id AS upload_file_id, upload_file.account_id AS upload_file_account_id, upload_file.name AS upload_file_name, upload_file.key AS upload_file_key, upload_file.size AS upload_file_size, upload_file.extension AS upload_file_extension, upload_file.mime_type AS upload_file_mime_type, upload_file.hash AS upload_file_hash, upload_file.updated_at AS upload_file_updated_at, upload_file.created_at AS upload_file_created_at 
FROM upload_file 
WHERE upload_file.id = %(pk_1)s::UUID
[2024-10-06 22:21:26,485.485] base.py -> _exec_single_context line:1908 [INFO]: [cached since 14.07s ago] {'pk_1': UUID('5e365ff7-2205-4b69-972f-ce752d3911e3')}
[2024-10-06 22:21:26,487.487] base.py -> _exec_single_context line:1903 [INFO]: SELECT process_rule.id AS process_rule_id, process_rule.account_id AS process_rule_account_id, process_rule.dataset_id AS process_rule_dataset_id, process_rule.mode AS process_rule_mode, process_rule.rule AS process_rule_rule, process_rule.updated_at AS process_rule_updated_at, process_rule.created_at AS process_rule_created_at 
FROM process_rule 
WHERE process_rule.id = %(pk_1)s::UUID
[2024-10-06 22:21:26,487.487] base.py -> _exec_single_context line:1908 [INFO]: [generated in 0.00021s] {'pk_1': UUID('63305dfe-221d-451e-ae4f-267cf7dd365b')}
[2024-10-06 22:21:26,489.489] base.py -> _exec_single_context line:1903 [INFO]: INSERT INTO document (account_id, dataset_id, upload_file_id, process_rule_id, batch, name, position, processing_started_at, parsing_completed_at, splitting_completed_at, indexing_completed_at, completed_at, stopped_at, disabled_at) VALUES (%(account_id)s::UUID, %(dataset_id)s::UUID, %(upload_file_id)s::UUID, %(process_rule_id)s::UUID, %(batch)s, %(name)s, %(position)s, %(processing_started_at)s, %(parsing_completed_at)s, %(splitting_completed_at)s, %(indexing_completed_at)s, %(completed_at)s, %(stopped_at)s, %(disabled_at)s) RETURNING document.id, document.character_count, document.token_count, document.error, document.enabled, document.status, document.updated_at, document.created_at
[2024-10-06 22:21:26,489.489] base.py -> _exec_single_context line:1908 [INFO]: [generated in 0.00030s] {'account_id': '46db30d1-3199-4e79-a0cd-abf12fa6858f', 'dataset_id': UUID('f3f28f75-8e60-4eba-b6df-4d1b390bbd89'), 'upload_file_id': UUID('5e365ff7-2205-4b69-972f-ce752d3911e3'), 'process_rule_id': UUID('63305dfe-221d-451e-ae4f-267cf7dd365b'), 'batch': '20241006222126783350', 'name': 'LLMOps 项目提示词大全.md', 'position': 1, 'processing_started_at': None, 'parsing_completed_at': None, 'splitting_completed_at': None, 'indexing_completed_at': None, 'completed_at': None, 'stopped_at': None, 'disabled_at': None}
[2024-10-06 22:21:26,490.490] base.py -> _commit_impl line:1146 [INFO]: COMMIT
[2024-10-06 22:21:26,498.498] base.py -> _begin_impl line:1103 [INFO]: BEGIN (implicit)
[2024-10-06 22:21:26,499.499] base.py -> _exec_single_context line:1903 [INFO]: SELECT document.id AS document_id, document.account_id AS document_account_id, document.dataset_id AS document_dataset_id, document.upload_file_id AS document_upload_file_id, document.process_rule_id AS document_process_rule_id, document.batch AS document_batch, document.name AS document_name, document.position AS document_position, document.character_count AS document_character_count, document.token_count AS document_token_count, document.processing_started_at AS document_processing_started_at, document.parsing_completed_at AS document_parsing_completed_at, document.splitting_completed_at AS document_splitting_completed_at, document.indexing_completed_at AS document_indexing_completed_at, document.completed_at AS document_completed_at, document.stopped_at AS document_stopped_at, document.error AS document_error, document.enabled AS document_enabled, document.disabled_at AS document_disabled_at, document.status AS document_status, document.updated_at AS document_updated_at, document.created_at AS document_created_at 
FROM document 
WHERE document.id = %(pk_1)s::UUID
[2024-10-06 22:21:26,499.499] base.py -> _exec_single_context line:1908 [INFO]: [generated in 0.00029s] {'pk_1': UUID('72facf61-71e8-430e-8090-77252788b8be')}
[2024-10-06 22:21:26,570.570] base.py -> _rollback_impl line:1129 [INFO]: ROLLBACK
[2024-10-06 22:21:26,571.571] _internal.py -> _log line:96 [INFO]: 127.0.0.1 - - [06/Oct/2024 22:21:26] "POST /datasets/f3f28f75-8e60-4eba-b6df-4d1b390bbd89/documents HTTP/1.1" 200 -
[2024-10-06 22:27:08,633.633] _internal.py -> _log line:96 [INFO]:  * Detected change in 'D:\\Code\\llmops\\llmops-api\\internal\\handler\\dataset_handler.py', reloading
[2024-10-06 22:27:09,537.537] _internal.py -> _log line:96 [INFO]:  * Restarting with stat
[2024-10-06 22:27:18,797.797] _internal.py -> _log line:96 [WARNING]:  * Debugger is active!
[2024-10-06 22:27:18,799.799] _internal.py -> _log line:96 [INFO]:  * Debugger PIN: 102-324-223
[2024-10-06 22:28:18,620.620] _internal.py -> _log line:96 [INFO]:  * Detected change in 'D:\\Code\\llmops\\llmops-api\\internal\\handler\\dataset_handler.py', reloading
[2024-10-06 22:28:19,791.791] _internal.py -> _log line:96 [INFO]:  * Restarting with stat
[2024-10-06 22:28:33,044.044] _internal.py -> _log line:96 [WARNING]:  * Debugger is active!
[2024-10-06 22:28:33,051.051] _internal.py -> _log line:96 [INFO]:  * Debugger PIN: 102-324-223
[2024-10-06 22:34:02,328.328] _internal.py -> _log line:96 [INFO]:  * Detected change in 'D:\\Code\\llmops\\llmops-api\\internal\\handler\\dataset_handler.py', reloading
[2024-10-06 22:34:04,534.534] _internal.py -> _log line:96 [INFO]:  * Restarting with stat
[2024-10-06 22:34:15,191.191] _internal.py -> _log line:96 [WARNING]:  * Debugger is active!
[2024-10-06 22:34:15,193.193] _internal.py -> _log line:96 [INFO]:  * Debugger PIN: 102-324-223
[2024-10-06 22:35:42,241.241] _internal.py -> _log line:96 [INFO]:  * Detected change in 'D:\\Code\\llmops\\llmops-api\\internal\\handler\\dataset_handler.py', reloading
[2024-10-06 22:35:43,332.332] _internal.py -> _log line:96 [INFO]:  * Restarting with stat
[2024-10-06 22:35:53,954.954] _internal.py -> _log line:96 [WARNING]:  * Debugger is active!
[2024-10-06 22:35:53,958.958] _internal.py -> _log line:96 [INFO]:  * Debugger PIN: 102-324-223
[2024-10-06 22:36:42,488.488] _internal.py -> _log line:96 [INFO]:  * Detected change in 'D:\\Code\\llmops\\llmops-api\\internal\\router\\router.py', reloading
[2024-10-06 22:36:43,628.628] _internal.py -> _log line:96 [INFO]:  * Restarting with stat
[2024-10-06 22:36:53,888.888] _internal.py -> _log line:96 [WARNING]:  * Debugger is active!
[2024-10-06 22:36:53,891.891] _internal.py -> _log line:96 [INFO]:  * Debugger PIN: 102-324-223
[2024-10-06 22:37:34,695.695] http.py -> _register_error_handler line:66 [ERROR]: An error occurred: DatasetHandler.hit() got an unexpected keyword argument 'dataset_id'
Traceback (most recent call last):
  File "D:\Code\llmops\llmops-api\venv\lib\site-packages\flask\app.py", line 870, in full_dispatch_request
    rv = self.dispatch_request()
  File "D:\Code\llmops\llmops-api\venv\lib\site-packages\flask\app.py", line 855, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
TypeError: DatasetHandler.hit() got an unexpected keyword argument 'dataset_id'
[2024-10-06 22:37:34,718.718] _internal.py -> _log line:96 [INFO]: 127.0.0.1 - - [06/Oct/2024 22:37:34] "[35m[1mPOST /datasets/f3f28f75-8e60-4eba-b6df-4d1b390bbd89/hit HTTP/1.1[0m" 500 -
[2024-10-06 22:38:13,791.791] http.py -> _register_error_handler line:66 [ERROR]: An error occurred: DatasetHandler.hit() got an unexpected keyword argument 'dataset_id'
Traceback (most recent call last):
  File "D:\Code\llmops\llmops-api\venv\lib\site-packages\flask\app.py", line 870, in full_dispatch_request
    rv = self.dispatch_request()
  File "D:\Code\llmops\llmops-api\venv\lib\site-packages\flask\app.py", line 855, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
TypeError: DatasetHandler.hit() got an unexpected keyword argument 'dataset_id'
[2024-10-06 22:38:13,810.810] _internal.py -> _log line:96 [INFO]: 127.0.0.1 - - [06/Oct/2024 22:38:13] "[35m[1mPOST /datasets/f3f28f75-8e60-4eba-b6df-4d1b390bbd89/hit HTTP/1.1[0m" 500 -
[2024-10-06 22:38:34,370.370] _internal.py -> _log line:96 [INFO]: [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5000
[2024-10-06 22:38:34,370.370] _internal.py -> _log line:96 [INFO]: [33mPress CTRL+C to quit[0m
[2024-10-06 22:38:34,372.372] _internal.py -> _log line:96 [INFO]:  * Restarting with stat
[2024-10-06 22:38:43,698.698] _internal.py -> _log line:96 [WARNING]:  * Debugger is active!
[2024-10-06 22:38:43,701.701] _internal.py -> _log line:96 [INFO]:  * Debugger PIN: 102-324-223
[2024-10-06 22:38:44,843.843] _internal.py -> _log line:96 [INFO]: 127.0.0.1 - - [06/Oct/2024 22:38:44] "POST /datasets/f3f28f75-8e60-4eba-b6df-4d1b390bbd89/hit HTTP/1.1" 200 -
[2024-10-06 22:38:54,159.159] _internal.py -> _log line:96 [INFO]: 127.0.0.1 - - [06/Oct/2024 22:38:54] "POST /datasets/f3f28f75-8e60-4eba-b6df-4d1b390bbd89/hit HTTP/1.1" 200 -
[2024-10-06 22:39:43,186.186] _internal.py -> _log line:96 [INFO]:  * Detected change in 'D:\\Code\\llmops\\llmops-api\\internal\\handler\\dataset_handler.py', reloading
[2024-10-06 22:39:44,334.334] _internal.py -> _log line:96 [INFO]:  * Restarting with stat
[2024-10-06 22:39:54,120.120] _internal.py -> _log line:96 [WARNING]:  * Debugger is active!
[2024-10-06 22:39:54,123.123] _internal.py -> _log line:96 [INFO]:  * Debugger PIN: 102-324-223
[2024-10-06 22:40:07,289.289] _internal.py -> _log line:96 [INFO]: 127.0.0.1 - - [06/Oct/2024 22:40:07] "POST /datasets/f3f28f75-8e60-4eba-b6df-4d1b390bbd89/hit HTTP/1.1" 200 -
[2024-10-06 22:48:39,481.481] base.py -> _exec_single_context line:1903 [INFO]: select pg_catalog.version()
[2024-10-06 22:48:39,482.482] base.py -> _exec_single_context line:1908 [INFO]: [raw sql] {}
[2024-10-06 22:48:39,482.482] base.py -> _exec_single_context line:1903 [INFO]: select current_schema()
[2024-10-06 22:48:39,482.482] base.py -> _exec_single_context line:1908 [INFO]: [raw sql] {}
[2024-10-06 22:48:39,483.483] base.py -> _exec_single_context line:1903 [INFO]: show standard_conforming_strings
[2024-10-06 22:48:39,483.483] base.py -> _exec_single_context line:1908 [INFO]: [raw sql] {}
[2024-10-06 22:48:39,484.484] base.py -> _begin_impl line:1103 [INFO]: BEGIN (implicit)
[2024-10-06 22:48:39,486.486] base.py -> _exec_single_context line:1903 [INFO]: INSERT INTO upload_file (account_id, name, key, size, extension, mime_type, hash) VALUES (%(account_id)s::UUID, %(name)s, %(key)s, %(size)s, %(extension)s, %(mime_type)s, %(hash)s) RETURNING upload_file.id, upload_file.updated_at, upload_file.created_at
[2024-10-06 22:48:39,486.486] base.py -> _exec_single_context line:1908 [INFO]: [generated in 0.00026s] {'account_id': '46db30d1-3199-4e79-a0cd-abf12fa6858f', 'name': '项目API文档-完整.md', 'key': '2024/10/06/80e94a12-7c9c-4869-84c1-b4ee23466d4b.md', 'size': 94003, 'extension': 'md', 'mime_type': 'text/markdown', 'hash': 'f6cb33757f54eff8657045657c8123a8175d36f4be4db2cea80731856d021e03'}
[2024-10-06 22:48:39,489.489] base.py -> _commit_impl line:1146 [INFO]: COMMIT
[2024-10-06 22:48:39,491.491] base.py -> _begin_impl line:1103 [INFO]: BEGIN (implicit)
[2024-10-06 22:48:39,494.494] base.py -> _exec_single_context line:1903 [INFO]: SELECT upload_file.id AS upload_file_id, upload_file.account_id AS upload_file_account_id, upload_file.name AS upload_file_name, upload_file.key AS upload_file_key, upload_file.size AS upload_file_size, upload_file.extension AS upload_file_extension, upload_file.mime_type AS upload_file_mime_type, upload_file.hash AS upload_file_hash, upload_file.updated_at AS upload_file_updated_at, upload_file.created_at AS upload_file_created_at 
FROM upload_file 
WHERE upload_file.id = %(pk_1)s::UUID
[2024-10-06 22:48:39,494.494] base.py -> _exec_single_context line:1908 [INFO]: [generated in 0.00028s] {'pk_1': UUID('4cf181b6-042b-4598-b60b-d45370d00b6b')}
[2024-10-06 22:48:39,496.496] base.py -> _rollback_impl line:1129 [INFO]: ROLLBACK
[2024-10-06 22:48:39,496.496] _internal.py -> _log line:96 [INFO]: 127.0.0.1 - - [06/Oct/2024 22:48:39] "POST /upload-files/file HTTP/1.1" 200 -
[2024-10-06 23:04:11,212.212] base.py -> _begin_impl line:1103 [INFO]: BEGIN (implicit)
[2024-10-06 23:04:11,213.213] base.py -> _exec_single_context line:1903 [INFO]: SELECT dataset.id AS dataset_id, dataset.account_id AS dataset_account_id, dataset.name AS dataset_name, dataset.icon AS dataset_icon, dataset.description AS dataset_description, dataset.updated_at AS dataset_updated_at, dataset.created_at AS dataset_created_at 
FROM dataset 
WHERE dataset.id = %(pk_1)s::UUID
[2024-10-06 23:04:11,213.213] base.py -> _exec_single_context line:1908 [INFO]: [generated in 0.00022s] {'pk_1': UUID('f3f28f75-8e60-4eba-b6df-4d1b390bbd89')}
[2024-10-06 23:04:11,216.216] base.py -> _exec_single_context line:1903 [INFO]: SELECT upload_file.id AS upload_file_id, upload_file.account_id AS upload_file_account_id, upload_file.name AS upload_file_name, upload_file.key AS upload_file_key, upload_file.size AS upload_file_size, upload_file.extension AS upload_file_extension, upload_file.mime_type AS upload_file_mime_type, upload_file.hash AS upload_file_hash, upload_file.updated_at AS upload_file_updated_at, upload_file.created_at AS upload_file_created_at 
FROM upload_file 
WHERE upload_file.account_id = %(account_id_1)s::UUID AND upload_file.id IN (%(id_1_1)s::UUID)
[2024-10-06 23:04:11,217.217] base.py -> _exec_single_context line:1908 [INFO]: [generated in 0.00033s] {'account_id_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f', 'id_1_1': '4cf181b6-042b-4598-b60b-d45370d00b6b'}
[2024-10-06 23:04:11,218.218] base.py -> _exec_single_context line:1903 [INFO]: INSERT INTO process_rule (account_id, dataset_id, mode, rule) VALUES (%(account_id)s::UUID, %(dataset_id)s::UUID, %(mode)s, %(rule)s) RETURNING process_rule.id, process_rule.updated_at, process_rule.created_at
[2024-10-06 23:04:11,219.219] base.py -> _exec_single_context line:1908 [INFO]: [generated in 0.00026s] {'account_id': '46db30d1-3199-4e79-a0cd-abf12fa6858f', 'dataset_id': UUID('f3f28f75-8e60-4eba-b6df-4d1b390bbd89'), 'mode': 'automatic', 'rule': '{"pre_process_rules": [{"id": "remove_extra_space", "enabled": true}, {"id": "remove_url_and_email", "enabled": true}], "segment": {"separators": ["\ ... (15 characters truncated) ... "\\u3002|\\uff01|\\uff1f", "\\\\.\\\\s|\\\\!\\\\s|\\\\?\\\\s", "\\uff1b|;\\\\s", "\\uff0c|,\\\\s", " ", ""], "chunk_size": 500, "chunk_overlap": 50}}'}
[2024-10-06 23:04:11,220.220] base.py -> _commit_impl line:1146 [INFO]: COMMIT
[2024-10-06 23:04:11,227.227] base.py -> _begin_impl line:1103 [INFO]: BEGIN (implicit)
[2024-10-06 23:04:11,231.231] base.py -> _exec_single_context line:1903 [INFO]: SELECT document.id AS document_id, document.account_id AS document_account_id, document.dataset_id AS document_dataset_id, document.upload_file_id AS document_upload_file_id, document.process_rule_id AS document_process_rule_id, document.batch AS document_batch, document.name AS document_name, document.position AS document_position, document.character_count AS document_character_count, document.token_count AS document_token_count, document.processing_started_at AS document_processing_started_at, document.parsing_completed_at AS document_parsing_completed_at, document.splitting_completed_at AS document_splitting_completed_at, document.indexing_completed_at AS document_indexing_completed_at, document.completed_at AS document_completed_at, document.stopped_at AS document_stopped_at, document.error AS document_error, document.enabled AS document_enabled, document.disabled_at AS document_disabled_at, document.status AS document_status, document.updated_at AS document_updated_at, document.created_at AS document_created_at 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID ORDER BY document.position DESC 
 LIMIT %(param_1)s
[2024-10-06 23:04:11,231.231] base.py -> _exec_single_context line:1908 [INFO]: [generated in 0.00024s] {'dataset_id_1': UUID('f3f28f75-8e60-4eba-b6df-4d1b390bbd89'), 'param_1': 1}
[2024-10-06 23:04:11,232.232] base.py -> _exec_single_context line:1903 [INFO]: SELECT upload_file.id AS upload_file_id, upload_file.account_id AS upload_file_account_id, upload_file.name AS upload_file_name, upload_file.key AS upload_file_key, upload_file.size AS upload_file_size, upload_file.extension AS upload_file_extension, upload_file.mime_type AS upload_file_mime_type, upload_file.hash AS upload_file_hash, upload_file.updated_at AS upload_file_updated_at, upload_file.created_at AS upload_file_created_at 
FROM upload_file 
WHERE upload_file.id = %(pk_1)s::UUID
[2024-10-06 23:04:11,232.232] base.py -> _exec_single_context line:1908 [INFO]: [cached since 931.7s ago] {'pk_1': UUID('4cf181b6-042b-4598-b60b-d45370d00b6b')}
[2024-10-06 23:04:11,234.234] base.py -> _exec_single_context line:1903 [INFO]: SELECT process_rule.id AS process_rule_id, process_rule.account_id AS process_rule_account_id, process_rule.dataset_id AS process_rule_dataset_id, process_rule.mode AS process_rule_mode, process_rule.rule AS process_rule_rule, process_rule.updated_at AS process_rule_updated_at, process_rule.created_at AS process_rule_created_at 
FROM process_rule 
WHERE process_rule.id = %(pk_1)s::UUID
[2024-10-06 23:04:11,234.234] base.py -> _exec_single_context line:1908 [INFO]: [generated in 0.00022s] {'pk_1': UUID('ecbdf2e1-e820-4768-9497-7982c1a3e006')}
[2024-10-06 23:04:11,237.237] base.py -> _exec_single_context line:1903 [INFO]: INSERT INTO document (account_id, dataset_id, upload_file_id, process_rule_id, batch, name, position, processing_started_at, parsing_completed_at, splitting_completed_at, indexing_completed_at, completed_at, stopped_at, disabled_at) VALUES (%(account_id)s::UUID, %(dataset_id)s::UUID, %(upload_file_id)s::UUID, %(process_rule_id)s::UUID, %(batch)s, %(name)s, %(position)s, %(processing_started_at)s, %(parsing_completed_at)s, %(splitting_completed_at)s, %(indexing_completed_at)s, %(completed_at)s, %(stopped_at)s, %(disabled_at)s) RETURNING document.id, document.character_count, document.token_count, document.error, document.enabled, document.status, document.updated_at, document.created_at
[2024-10-06 23:04:11,237.237] base.py -> _exec_single_context line:1908 [INFO]: [generated in 0.00029s] {'account_id': '46db30d1-3199-4e79-a0cd-abf12fa6858f', 'dataset_id': UUID('f3f28f75-8e60-4eba-b6df-4d1b390bbd89'), 'upload_file_id': UUID('4cf181b6-042b-4598-b60b-d45370d00b6b'), 'process_rule_id': UUID('ecbdf2e1-e820-4768-9497-7982c1a3e006'), 'batch': '20241006230411116403', 'name': '项目API文档-完整.md', 'position': 2, 'processing_started_at': None, 'parsing_completed_at': None, 'splitting_completed_at': None, 'indexing_completed_at': None, 'completed_at': None, 'stopped_at': None, 'disabled_at': None}
[2024-10-06 23:04:11,237.237] base.py -> _commit_impl line:1146 [INFO]: COMMIT
[2024-10-06 23:04:11,269.269] base.py -> _begin_impl line:1103 [INFO]: BEGIN (implicit)
[2024-10-06 23:04:11,270.270] base.py -> _exec_single_context line:1903 [INFO]: SELECT document.id AS document_id, document.account_id AS document_account_id, document.dataset_id AS document_dataset_id, document.upload_file_id AS document_upload_file_id, document.process_rule_id AS document_process_rule_id, document.batch AS document_batch, document.name AS document_name, document.position AS document_position, document.character_count AS document_character_count, document.token_count AS document_token_count, document.processing_started_at AS document_processing_started_at, document.parsing_completed_at AS document_parsing_completed_at, document.splitting_completed_at AS document_splitting_completed_at, document.indexing_completed_at AS document_indexing_completed_at, document.completed_at AS document_completed_at, document.stopped_at AS document_stopped_at, document.error AS document_error, document.enabled AS document_enabled, document.disabled_at AS document_disabled_at, document.status AS document_status, document.updated_at AS document_updated_at, document.created_at AS document_created_at 
FROM document 
WHERE document.id = %(pk_1)s::UUID
[2024-10-06 23:04:11,270.270] base.py -> _exec_single_context line:1908 [INFO]: [generated in 0.00022s] {'pk_1': UUID('6ddd7c75-a379-41ed-8f93-3e9bd766c850')}
[2024-10-06 23:04:11,414.414] base.py -> _rollback_impl line:1129 [INFO]: ROLLBACK
[2024-10-06 23:04:11,414.414] _internal.py -> _log line:96 [INFO]: 127.0.0.1 - - [06/Oct/2024 23:04:11] "POST /datasets/f3f28f75-8e60-4eba-b6df-4d1b390bbd89/documents HTTP/1.1" 200 -
[2024-10-06 23:43:00,640.640] _internal.py -> _log line:96 [INFO]:  * Detected change in 'D:\\Code\\llmops\\llmops-api\\internal\\service\\indexing_service.py', reloading
[2024-10-06 23:43:02,447.447] _internal.py -> _log line:96 [INFO]:  * Restarting with stat
[2024-10-06 23:43:12,014.014] _internal.py -> _log line:96 [WARNING]:  * Debugger is active!
[2024-10-06 23:43:12,017.017] _internal.py -> _log line:96 [INFO]:  * Debugger PIN: 102-324-223
