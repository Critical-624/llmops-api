[2024-10-05 00:36:54,692.692] _internal.py -> _log line:96 [INFO]:  * Restarting with stat
[2024-10-05 00:37:05,208.208] _internal.py -> _log line:96 [WARNING]:  * Debugger is active!
[2024-10-05 00:37:05,210.210] _internal.py -> _log line:96 [INFO]:  * Debugger PIN: 102-324-223
[2024-10-05 10:06:02,177.177] base.py -> _exec_single_context line:1903 [INFO]: select pg_catalog.version()
[2024-10-05 10:06:02,177.177] base.py -> _exec_single_context line:1908 [INFO]: [raw sql] {}
[2024-10-05 10:06:02,178.178] base.py -> _exec_single_context line:1903 [INFO]: select current_schema()
[2024-10-05 10:06:02,178.178] base.py -> _exec_single_context line:1908 [INFO]: [raw sql] {}
[2024-10-05 10:06:02,179.179] base.py -> _exec_single_context line:1903 [INFO]: show standard_conforming_strings
[2024-10-05 10:06:02,179.179] base.py -> _exec_single_context line:1908 [INFO]: [raw sql] {}
[2024-10-05 10:06:02,179.179] base.py -> _begin_impl line:1103 [INFO]: BEGIN (implicit)
[2024-10-05 10:06:02,181.181] base.py -> _exec_single_context line:1903 [INFO]: SELECT dataset.id AS dataset_id, dataset.account_id AS dataset_account_id, dataset.name AS dataset_name, dataset.icon AS dataset_icon, dataset.description AS dataset_description, dataset.updated_at AS dataset_updated_at, dataset.created_at AS dataset_created_at 
FROM dataset 
WHERE dataset.id = %(pk_1)s::UUID
[2024-10-05 10:06:02,181.181] base.py -> _exec_single_context line:1908 [INFO]: [generated in 0.00015s] {'pk_1': UUID('f3f28f75-8e60-4eba-b6df-4d1b390bbd89')}
[2024-10-05 10:06:02,183.183] base.py -> _exec_single_context line:1903 [INFO]: SELECT upload_file.id AS upload_file_id, upload_file.account_id AS upload_file_account_id, upload_file.name AS upload_file_name, upload_file.key AS upload_file_key, upload_file.size AS upload_file_size, upload_file.extension AS upload_file_extension, upload_file.mime_type AS upload_file_mime_type, upload_file.hash AS upload_file_hash, upload_file.updated_at AS upload_file_updated_at, upload_file.created_at AS upload_file_created_at 
FROM upload_file 
WHERE upload_file.account_id = %(account_id_1)s::UUID AND upload_file.id IN (%(id_1_1)s::UUID, %(id_1_2)s::UUID, %(id_1_3)s::UUID)
[2024-10-05 10:06:02,184.184] base.py -> _exec_single_context line:1908 [INFO]: [generated in 0.00020s] {'account_id_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f', 'id_1_1': '1c32445c-676a-4a61-810b-a4483f310542', 'id_1_2': 'efb8d619-3ff6-452c-9747-5495ae04f63a', 'id_1_3': '3b647fa9-a38f-414a-9318-72c24779389d'}
[2024-10-05 10:06:02,186.186] base.py -> _exec_single_context line:1903 [INFO]: INSERT INTO process_rule (account_id, dataset_id, mode, rule) VALUES (%(account_id)s::UUID, %(dataset_id)s::UUID, %(mode)s, %(rule)s) RETURNING process_rule.id, process_rule.updated_at, process_rule.created_at
[2024-10-05 10:06:02,186.186] base.py -> _exec_single_context line:1908 [INFO]: [generated in 0.00018s] {'account_id': '46db30d1-3199-4e79-a0cd-abf12fa6858f', 'dataset_id': UUID('f3f28f75-8e60-4eba-b6df-4d1b390bbd89'), 'mode': 'automatic', 'rule': '{"pre_process_rules": [{"id": "remove_extra_space", "enabled": true}, {"id": "remove_url_and_email", "enabled": true}], "segment": {"separators": ["\ ... (15 characters truncated) ... "\\u3002|\\uff01|\\uff1f", "\\\\.\\\\s|\\\\!\\\\s|\\\\?\\\\s", "\\uff1b|;\\\\s", "\\uff0c|,\\\\s", " ", ""], "chunk_size": 500, "chunk_overlap": 50}}'}
[2024-10-05 10:06:02,188.188] base.py -> _commit_impl line:1146 [INFO]: COMMIT
[2024-10-05 10:06:02,189.189] base.py -> _begin_impl line:1103 [INFO]: BEGIN (implicit)
[2024-10-05 10:06:02,191.191] base.py -> _exec_single_context line:1903 [INFO]: SELECT document.id AS document_id, document.account_id AS document_account_id, document.dataset_id AS document_dataset_id, document.upload_file_id AS document_upload_file_id, document.process_rule_id AS document_process_rule_id, document.batch AS document_batch, document.name AS document_name, document.position AS document_position, document.character_count AS document_character_count, document.token_count AS document_token_count, document.processing_started_at AS document_processing_started_at, document.parsing_completed_at AS document_parsing_completed_at, document.splitting_completed_at AS document_splitting_completed_at, document.indexing_completed_at AS document_indexing_completed_at, document.completed_at AS document_completed_at, document.stopped_at AS document_stopped_at, document.error AS document_error, document.enabled AS document_enabled, document.disabled_at AS document_disabled_at, document.status AS document_status, document.updated_at AS document_updated_at, document.created_at AS document_created_at 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID ORDER BY document.position DESC 
 LIMIT %(param_1)s
[2024-10-05 10:06:02,192.192] base.py -> _exec_single_context line:1908 [INFO]: [generated in 0.00021s] {'dataset_id_1': UUID('f3f28f75-8e60-4eba-b6df-4d1b390bbd89'), 'param_1': 1}
[2024-10-05 10:06:02,193.193] base.py -> _exec_single_context line:1903 [INFO]: SELECT upload_file.id AS upload_file_id, upload_file.account_id AS upload_file_account_id, upload_file.name AS upload_file_name, upload_file.key AS upload_file_key, upload_file.size AS upload_file_size, upload_file.extension AS upload_file_extension, upload_file.mime_type AS upload_file_mime_type, upload_file.hash AS upload_file_hash, upload_file.updated_at AS upload_file_updated_at, upload_file.created_at AS upload_file_created_at 
FROM upload_file 
WHERE upload_file.id = %(pk_1)s::UUID
[2024-10-05 10:06:02,194.194] base.py -> _exec_single_context line:1908 [INFO]: [generated in 0.00015s] {'pk_1': UUID('1c32445c-676a-4a61-810b-a4483f310542')}
[2024-10-05 10:06:02,195.195] base.py -> _exec_single_context line:1903 [INFO]: SELECT process_rule.id AS process_rule_id, process_rule.account_id AS process_rule_account_id, process_rule.dataset_id AS process_rule_dataset_id, process_rule.mode AS process_rule_mode, process_rule.rule AS process_rule_rule, process_rule.updated_at AS process_rule_updated_at, process_rule.created_at AS process_rule_created_at 
FROM process_rule 
WHERE process_rule.id = %(pk_1)s::UUID
[2024-10-05 10:06:02,195.195] base.py -> _exec_single_context line:1908 [INFO]: [generated in 0.00015s] {'pk_1': UUID('4ce27ef0-3300-4cb1-82cc-dcfed6601d86')}
[2024-10-05 10:06:02,196.196] base.py -> _exec_single_context line:1903 [INFO]: INSERT INTO document (account_id, dataset_id, upload_file_id, process_rule_id, batch, name, position, processing_started_at, parsing_completed_at, splitting_completed_at, indexing_completed_at, completed_at, stopped_at, disabled_at) VALUES (%(account_id)s::UUID, %(dataset_id)s::UUID, %(upload_file_id)s::UUID, %(process_rule_id)s::UUID, %(batch)s, %(name)s, %(position)s, %(processing_started_at)s, %(parsing_completed_at)s, %(splitting_completed_at)s, %(indexing_completed_at)s, %(completed_at)s, %(stopped_at)s, %(disabled_at)s) RETURNING document.id, document.character_count, document.token_count, document.error, document.enabled, document.status, document.updated_at, document.created_at
[2024-10-05 10:06:02,196.196] base.py -> _exec_single_context line:1908 [INFO]: [generated in 0.00017s] {'account_id': '46db30d1-3199-4e79-a0cd-abf12fa6858f', 'dataset_id': UUID('f3f28f75-8e60-4eba-b6df-4d1b390bbd89'), 'upload_file_id': UUID('1c32445c-676a-4a61-810b-a4483f310542'), 'process_rule_id': UUID('4ce27ef0-3300-4cb1-82cc-dcfed6601d86'), 'batch': '20241005100602527465', 'name': '项目API文档-完整.md', 'position': 8, 'processing_started_at': None, 'parsing_completed_at': None, 'splitting_completed_at': None, 'indexing_completed_at': None, 'completed_at': None, 'stopped_at': None, 'disabled_at': None}
[2024-10-05 10:06:02,197.197] base.py -> _commit_impl line:1146 [INFO]: COMMIT
[2024-10-05 10:06:02,198.198] base.py -> _begin_impl line:1103 [INFO]: BEGIN (implicit)
[2024-10-05 10:06:02,198.198] base.py -> _exec_single_context line:1903 [INFO]: SELECT upload_file.id AS upload_file_id, upload_file.account_id AS upload_file_account_id, upload_file.name AS upload_file_name, upload_file.key AS upload_file_key, upload_file.size AS upload_file_size, upload_file.extension AS upload_file_extension, upload_file.mime_type AS upload_file_mime_type, upload_file.hash AS upload_file_hash, upload_file.updated_at AS upload_file_updated_at, upload_file.created_at AS upload_file_created_at 
FROM upload_file 
WHERE upload_file.id = %(pk_1)s::UUID
[2024-10-05 10:06:02,198.198] base.py -> _exec_single_context line:1908 [INFO]: [cached since 0.004915s ago] {'pk_1': UUID('efb8d619-3ff6-452c-9747-5495ae04f63a')}
[2024-10-05 10:06:02,199.199] base.py -> _exec_single_context line:1903 [INFO]: SELECT process_rule.id AS process_rule_id, process_rule.account_id AS process_rule_account_id, process_rule.dataset_id AS process_rule_dataset_id, process_rule.mode AS process_rule_mode, process_rule.rule AS process_rule_rule, process_rule.updated_at AS process_rule_updated_at, process_rule.created_at AS process_rule_created_at 
FROM process_rule 
WHERE process_rule.id = %(pk_1)s::UUID
[2024-10-05 10:06:02,199.199] base.py -> _exec_single_context line:1908 [INFO]: [cached since 0.004544s ago] {'pk_1': UUID('4ce27ef0-3300-4cb1-82cc-dcfed6601d86')}
[2024-10-05 10:06:02,200.200] base.py -> _exec_single_context line:1903 [INFO]: INSERT INTO document (account_id, dataset_id, upload_file_id, process_rule_id, batch, name, position, processing_started_at, parsing_completed_at, splitting_completed_at, indexing_completed_at, completed_at, stopped_at, disabled_at) VALUES (%(account_id)s::UUID, %(dataset_id)s::UUID, %(upload_file_id)s::UUID, %(process_rule_id)s::UUID, %(batch)s, %(name)s, %(position)s, %(processing_started_at)s, %(parsing_completed_at)s, %(splitting_completed_at)s, %(indexing_completed_at)s, %(completed_at)s, %(stopped_at)s, %(disabled_at)s) RETURNING document.id, document.character_count, document.token_count, document.error, document.enabled, document.status, document.updated_at, document.created_at
[2024-10-05 10:06:02,200.200] base.py -> _exec_single_context line:1908 [INFO]: [cached since 0.003832s ago] {'account_id': '46db30d1-3199-4e79-a0cd-abf12fa6858f', 'dataset_id': UUID('f3f28f75-8e60-4eba-b6df-4d1b390bbd89'), 'upload_file_id': UUID('efb8d619-3ff6-452c-9747-5495ae04f63a'), 'process_rule_id': UUID('4ce27ef0-3300-4cb1-82cc-dcfed6601d86'), 'batch': '20241005100602527465', 'name': 'LLMOps 项目自定义 API 插件描述集合.md', 'position': 9, 'processing_started_at': None, 'parsing_completed_at': None, 'splitting_completed_at': None, 'indexing_completed_at': None, 'completed_at': None, 'stopped_at': None, 'disabled_at': None}
[2024-10-05 10:06:02,201.201] base.py -> _commit_impl line:1146 [INFO]: COMMIT
[2024-10-05 10:06:02,202.202] base.py -> _begin_impl line:1103 [INFO]: BEGIN (implicit)
[2024-10-05 10:06:02,202.202] base.py -> _exec_single_context line:1903 [INFO]: SELECT upload_file.id AS upload_file_id, upload_file.account_id AS upload_file_account_id, upload_file.name AS upload_file_name, upload_file.key AS upload_file_key, upload_file.size AS upload_file_size, upload_file.extension AS upload_file_extension, upload_file.mime_type AS upload_file_mime_type, upload_file.hash AS upload_file_hash, upload_file.updated_at AS upload_file_updated_at, upload_file.created_at AS upload_file_created_at 
FROM upload_file 
WHERE upload_file.id = %(pk_1)s::UUID
[2024-10-05 10:06:02,202.202] base.py -> _exec_single_context line:1908 [INFO]: [cached since 0.008195s ago] {'pk_1': UUID('3b647fa9-a38f-414a-9318-72c24779389d')}
[2024-10-05 10:06:02,202.202] base.py -> _exec_single_context line:1903 [INFO]: SELECT process_rule.id AS process_rule_id, process_rule.account_id AS process_rule_account_id, process_rule.dataset_id AS process_rule_dataset_id, process_rule.mode AS process_rule_mode, process_rule.rule AS process_rule_rule, process_rule.updated_at AS process_rule_updated_at, process_rule.created_at AS process_rule_created_at 
FROM process_rule 
WHERE process_rule.id = %(pk_1)s::UUID
[2024-10-05 10:06:02,203.203] base.py -> _exec_single_context line:1908 [INFO]: [cached since 0.007804s ago] {'pk_1': UUID('4ce27ef0-3300-4cb1-82cc-dcfed6601d86')}
[2024-10-05 10:06:02,203.203] base.py -> _exec_single_context line:1903 [INFO]: INSERT INTO document (account_id, dataset_id, upload_file_id, process_rule_id, batch, name, position, processing_started_at, parsing_completed_at, splitting_completed_at, indexing_completed_at, completed_at, stopped_at, disabled_at) VALUES (%(account_id)s::UUID, %(dataset_id)s::UUID, %(upload_file_id)s::UUID, %(process_rule_id)s::UUID, %(batch)s, %(name)s, %(position)s, %(processing_started_at)s, %(parsing_completed_at)s, %(splitting_completed_at)s, %(indexing_completed_at)s, %(completed_at)s, %(stopped_at)s, %(disabled_at)s) RETURNING document.id, document.character_count, document.token_count, document.error, document.enabled, document.status, document.updated_at, document.created_at
[2024-10-05 10:06:02,203.203] base.py -> _exec_single_context line:1908 [INFO]: [cached since 0.007041s ago] {'account_id': '46db30d1-3199-4e79-a0cd-abf12fa6858f', 'dataset_id': UUID('f3f28f75-8e60-4eba-b6df-4d1b390bbd89'), 'upload_file_id': UUID('3b647fa9-a38f-414a-9318-72c24779389d'), 'process_rule_id': UUID('4ce27ef0-3300-4cb1-82cc-dcfed6601d86'), 'batch': '20241005100602527465', 'name': 'LangChain中文文档.md', 'position': 10, 'processing_started_at': None, 'parsing_completed_at': None, 'splitting_completed_at': None, 'indexing_completed_at': None, 'completed_at': None, 'stopped_at': None, 'disabled_at': None}
[2024-10-05 10:06:02,203.203] base.py -> _commit_impl line:1146 [INFO]: COMMIT
[2024-10-05 10:06:02,207.207] base.py -> _begin_impl line:1103 [INFO]: BEGIN (implicit)
[2024-10-05 10:06:02,208.208] base.py -> _exec_single_context line:1903 [INFO]: SELECT document.id AS document_id, document.account_id AS document_account_id, document.dataset_id AS document_dataset_id, document.upload_file_id AS document_upload_file_id, document.process_rule_id AS document_process_rule_id, document.batch AS document_batch, document.name AS document_name, document.position AS document_position, document.character_count AS document_character_count, document.token_count AS document_token_count, document.processing_started_at AS document_processing_started_at, document.parsing_completed_at AS document_parsing_completed_at, document.splitting_completed_at AS document_splitting_completed_at, document.indexing_completed_at AS document_indexing_completed_at, document.completed_at AS document_completed_at, document.stopped_at AS document_stopped_at, document.error AS document_error, document.enabled AS document_enabled, document.disabled_at AS document_disabled_at, document.status AS document_status, document.updated_at AS document_updated_at, document.created_at AS document_created_at 
FROM document 
WHERE document.id = %(pk_1)s::UUID
[2024-10-05 10:06:02,208.208] base.py -> _exec_single_context line:1908 [INFO]: [generated in 0.00014s] {'pk_1': UUID('17be3d2d-40fb-4ea2-9f96-1734264f6972')}
[2024-10-05 10:06:02,209.209] base.py -> _exec_single_context line:1903 [INFO]: SELECT document.id AS document_id, document.account_id AS document_account_id, document.dataset_id AS document_dataset_id, document.upload_file_id AS document_upload_file_id, document.process_rule_id AS document_process_rule_id, document.batch AS document_batch, document.name AS document_name, document.position AS document_position, document.character_count AS document_character_count, document.token_count AS document_token_count, document.processing_started_at AS document_processing_started_at, document.parsing_completed_at AS document_parsing_completed_at, document.splitting_completed_at AS document_splitting_completed_at, document.indexing_completed_at AS document_indexing_completed_at, document.completed_at AS document_completed_at, document.stopped_at AS document_stopped_at, document.error AS document_error, document.enabled AS document_enabled, document.disabled_at AS document_disabled_at, document.status AS document_status, document.updated_at AS document_updated_at, document.created_at AS document_created_at 
FROM document 
WHERE document.id = %(pk_1)s::UUID
[2024-10-05 10:06:02,212.212] base.py -> _exec_single_context line:1908 [INFO]: [cached since 0.003548s ago] {'pk_1': UUID('2b40717d-cc3c-4dd5-bc8e-66ddfebcc4d9')}
[2024-10-05 10:06:02,212.212] base.py -> _exec_single_context line:1903 [INFO]: SELECT document.id AS document_id, document.account_id AS document_account_id, document.dataset_id AS document_dataset_id, document.upload_file_id AS document_upload_file_id, document.process_rule_id AS document_process_rule_id, document.batch AS document_batch, document.name AS document_name, document.position AS document_position, document.character_count AS document_character_count, document.token_count AS document_token_count, document.processing_started_at AS document_processing_started_at, document.parsing_completed_at AS document_parsing_completed_at, document.splitting_completed_at AS document_splitting_completed_at, document.indexing_completed_at AS document_indexing_completed_at, document.completed_at AS document_completed_at, document.stopped_at AS document_stopped_at, document.error AS document_error, document.enabled AS document_enabled, document.disabled_at AS document_disabled_at, document.status AS document_status, document.updated_at AS document_updated_at, document.created_at AS document_created_at 
FROM document 
WHERE document.id = %(pk_1)s::UUID
[2024-10-05 10:06:02,212.212] base.py -> _exec_single_context line:1908 [INFO]: [cached since 0.004334s ago] {'pk_1': UUID('178e9ba4-c805-47b2-a1ab-9a334ea5835d')}
[2024-10-05 10:06:02,248.248] base.py -> _rollback_impl line:1129 [INFO]: ROLLBACK
[2024-10-05 10:06:02,248.248] _internal.py -> _log line:96 [INFO]: 127.0.0.1 - - [05/Oct/2024 10:06:02] "POST /datasets/f3f28f75-8e60-4eba-b6df-4d1b390bbd89/documents HTTP/1.1" 200 -
[2024-10-05 10:11:06,473.473] base.py -> _begin_impl line:1103 [INFO]: BEGIN (implicit)
[2024-10-05 10:11:06,474.474] base.py -> _exec_single_context line:1903 [INFO]: SELECT dataset.id AS dataset_id, dataset.account_id AS dataset_account_id, dataset.name AS dataset_name, dataset.icon AS dataset_icon, dataset.description AS dataset_description, dataset.updated_at AS dataset_updated_at, dataset.created_at AS dataset_created_at 
FROM dataset 
WHERE dataset.id = %(pk_1)s::UUID
[2024-10-05 10:11:06,474.474] base.py -> _exec_single_context line:1908 [INFO]: [cached since 304.3s ago] {'pk_1': UUID('f3f28f75-8e60-4eba-b6df-4d1b390bbd89')}
[2024-10-05 10:11:06,475.475] base.py -> _exec_single_context line:1903 [INFO]: SELECT upload_file.id AS upload_file_id, upload_file.account_id AS upload_file_account_id, upload_file.name AS upload_file_name, upload_file.key AS upload_file_key, upload_file.size AS upload_file_size, upload_file.extension AS upload_file_extension, upload_file.mime_type AS upload_file_mime_type, upload_file.hash AS upload_file_hash, upload_file.updated_at AS upload_file_updated_at, upload_file.created_at AS upload_file_created_at 
FROM upload_file 
WHERE upload_file.account_id = %(account_id_1)s::UUID AND upload_file.id IN (%(id_1_1)s::UUID, %(id_1_2)s::UUID, %(id_1_3)s::UUID)
[2024-10-05 10:11:06,475.475] base.py -> _exec_single_context line:1908 [INFO]: [cached since 304.3s ago] {'account_id_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f', 'id_1_1': '1c32445c-676a-4a61-810b-a4483f310542', 'id_1_2': 'efb8d619-3ff6-452c-9747-5495ae04f63a', 'id_1_3': '3b647fa9-a38f-414a-9318-72c24779389d'}
[2024-10-05 10:11:06,476.476] base.py -> _exec_single_context line:1903 [INFO]: INSERT INTO process_rule (account_id, dataset_id, mode, rule) VALUES (%(account_id)s::UUID, %(dataset_id)s::UUID, %(mode)s, %(rule)s) RETURNING process_rule.id, process_rule.updated_at, process_rule.created_at
[2024-10-05 10:11:06,476.476] base.py -> _exec_single_context line:1908 [INFO]: [cached since 304.3s ago] {'account_id': '46db30d1-3199-4e79-a0cd-abf12fa6858f', 'dataset_id': UUID('f3f28f75-8e60-4eba-b6df-4d1b390bbd89'), 'mode': 'automatic', 'rule': '{"pre_process_rules": [{"id": "remove_extra_space", "enabled": true}, {"id": "remove_url_and_email", "enabled": true}], "segment": {"separators": ["\ ... (15 characters truncated) ... "\\u3002|\\uff01|\\uff1f", "\\\\.\\\\s|\\\\!\\\\s|\\\\?\\\\s", "\\uff1b|;\\\\s", "\\uff0c|,\\\\s", " ", ""], "chunk_size": 500, "chunk_overlap": 50}}'}
[2024-10-05 10:11:06,477.477] base.py -> _commit_impl line:1146 [INFO]: COMMIT
[2024-10-05 10:11:06,479.479] base.py -> _begin_impl line:1103 [INFO]: BEGIN (implicit)
[2024-10-05 10:11:06,480.480] base.py -> _exec_single_context line:1903 [INFO]: SELECT document.id AS document_id, document.account_id AS document_account_id, document.dataset_id AS document_dataset_id, document.upload_file_id AS document_upload_file_id, document.process_rule_id AS document_process_rule_id, document.batch AS document_batch, document.name AS document_name, document.position AS document_position, document.character_count AS document_character_count, document.token_count AS document_token_count, document.processing_started_at AS document_processing_started_at, document.parsing_completed_at AS document_parsing_completed_at, document.splitting_completed_at AS document_splitting_completed_at, document.indexing_completed_at AS document_indexing_completed_at, document.completed_at AS document_completed_at, document.stopped_at AS document_stopped_at, document.error AS document_error, document.enabled AS document_enabled, document.disabled_at AS document_disabled_at, document.status AS document_status, document.updated_at AS document_updated_at, document.created_at AS document_created_at 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID ORDER BY document.position DESC 
 LIMIT %(param_1)s
[2024-10-05 10:11:06,480.480] base.py -> _exec_single_context line:1908 [INFO]: [cached since 304.3s ago] {'dataset_id_1': UUID('f3f28f75-8e60-4eba-b6df-4d1b390bbd89'), 'param_1': 1}
[2024-10-05 10:11:06,481.481] base.py -> _exec_single_context line:1903 [INFO]: SELECT upload_file.id AS upload_file_id, upload_file.account_id AS upload_file_account_id, upload_file.name AS upload_file_name, upload_file.key AS upload_file_key, upload_file.size AS upload_file_size, upload_file.extension AS upload_file_extension, upload_file.mime_type AS upload_file_mime_type, upload_file.hash AS upload_file_hash, upload_file.updated_at AS upload_file_updated_at, upload_file.created_at AS upload_file_created_at 
FROM upload_file 
WHERE upload_file.id = %(pk_1)s::UUID
[2024-10-05 10:11:06,481.481] base.py -> _exec_single_context line:1908 [INFO]: [cached since 304.3s ago] {'pk_1': UUID('1c32445c-676a-4a61-810b-a4483f310542')}
[2024-10-05 10:11:06,482.482] base.py -> _exec_single_context line:1903 [INFO]: SELECT process_rule.id AS process_rule_id, process_rule.account_id AS process_rule_account_id, process_rule.dataset_id AS process_rule_dataset_id, process_rule.mode AS process_rule_mode, process_rule.rule AS process_rule_rule, process_rule.updated_at AS process_rule_updated_at, process_rule.created_at AS process_rule_created_at 
FROM process_rule 
WHERE process_rule.id = %(pk_1)s::UUID
[2024-10-05 10:11:06,482.482] base.py -> _exec_single_context line:1908 [INFO]: [cached since 304.3s ago] {'pk_1': UUID('56767c09-1da9-4d48-a001-c4e75feb81bb')}
[2024-10-05 10:11:06,482.482] base.py -> _exec_single_context line:1903 [INFO]: INSERT INTO document (account_id, dataset_id, upload_file_id, process_rule_id, batch, name, position, processing_started_at, parsing_completed_at, splitting_completed_at, indexing_completed_at, completed_at, stopped_at, disabled_at) VALUES (%(account_id)s::UUID, %(dataset_id)s::UUID, %(upload_file_id)s::UUID, %(process_rule_id)s::UUID, %(batch)s, %(name)s, %(position)s, %(processing_started_at)s, %(parsing_completed_at)s, %(splitting_completed_at)s, %(indexing_completed_at)s, %(completed_at)s, %(stopped_at)s, %(disabled_at)s) RETURNING document.id, document.character_count, document.token_count, document.error, document.enabled, document.status, document.updated_at, document.created_at
[2024-10-05 10:11:06,482.482] base.py -> _exec_single_context line:1908 [INFO]: [cached since 304.3s ago] {'account_id': '46db30d1-3199-4e79-a0cd-abf12fa6858f', 'dataset_id': UUID('f3f28f75-8e60-4eba-b6df-4d1b390bbd89'), 'upload_file_id': UUID('1c32445c-676a-4a61-810b-a4483f310542'), 'process_rule_id': UUID('56767c09-1da9-4d48-a001-c4e75feb81bb'), 'batch': '20241005101106693438', 'name': '项目API文档-完整.md', 'position': 11, 'processing_started_at': None, 'parsing_completed_at': None, 'splitting_completed_at': None, 'indexing_completed_at': None, 'completed_at': None, 'stopped_at': None, 'disabled_at': None}
[2024-10-05 10:11:06,483.483] base.py -> _commit_impl line:1146 [INFO]: COMMIT
[2024-10-05 10:11:06,508.508] base.py -> _begin_impl line:1103 [INFO]: BEGIN (implicit)
[2024-10-05 10:11:06,508.508] base.py -> _exec_single_context line:1903 [INFO]: SELECT upload_file.id AS upload_file_id, upload_file.account_id AS upload_file_account_id, upload_file.name AS upload_file_name, upload_file.key AS upload_file_key, upload_file.size AS upload_file_size, upload_file.extension AS upload_file_extension, upload_file.mime_type AS upload_file_mime_type, upload_file.hash AS upload_file_hash, upload_file.updated_at AS upload_file_updated_at, upload_file.created_at AS upload_file_created_at 
FROM upload_file 
WHERE upload_file.id = %(pk_1)s::UUID
[2024-10-05 10:11:06,509.509] base.py -> _exec_single_context line:1908 [INFO]: [cached since 304.3s ago] {'pk_1': UUID('efb8d619-3ff6-452c-9747-5495ae04f63a')}
[2024-10-05 10:11:06,509.509] base.py -> _exec_single_context line:1903 [INFO]: SELECT process_rule.id AS process_rule_id, process_rule.account_id AS process_rule_account_id, process_rule.dataset_id AS process_rule_dataset_id, process_rule.mode AS process_rule_mode, process_rule.rule AS process_rule_rule, process_rule.updated_at AS process_rule_updated_at, process_rule.created_at AS process_rule_created_at 
FROM process_rule 
WHERE process_rule.id = %(pk_1)s::UUID
[2024-10-05 10:11:06,509.509] base.py -> _exec_single_context line:1908 [INFO]: [cached since 304.3s ago] {'pk_1': UUID('56767c09-1da9-4d48-a001-c4e75feb81bb')}
[2024-10-05 10:11:06,510.510] base.py -> _exec_single_context line:1903 [INFO]: INSERT INTO document (account_id, dataset_id, upload_file_id, process_rule_id, batch, name, position, processing_started_at, parsing_completed_at, splitting_completed_at, indexing_completed_at, completed_at, stopped_at, disabled_at) VALUES (%(account_id)s::UUID, %(dataset_id)s::UUID, %(upload_file_id)s::UUID, %(process_rule_id)s::UUID, %(batch)s, %(name)s, %(position)s, %(processing_started_at)s, %(parsing_completed_at)s, %(splitting_completed_at)s, %(indexing_completed_at)s, %(completed_at)s, %(stopped_at)s, %(disabled_at)s) RETURNING document.id, document.character_count, document.token_count, document.error, document.enabled, document.status, document.updated_at, document.created_at
[2024-10-05 10:11:06,510.510] base.py -> _exec_single_context line:1908 [INFO]: [cached since 304.3s ago] {'account_id': '46db30d1-3199-4e79-a0cd-abf12fa6858f', 'dataset_id': UUID('f3f28f75-8e60-4eba-b6df-4d1b390bbd89'), 'upload_file_id': UUID('efb8d619-3ff6-452c-9747-5495ae04f63a'), 'process_rule_id': UUID('56767c09-1da9-4d48-a001-c4e75feb81bb'), 'batch': '20241005101106693438', 'name': 'LLMOps 项目自定义 API 插件描述集合.md', 'position': 12, 'processing_started_at': None, 'parsing_completed_at': None, 'splitting_completed_at': None, 'indexing_completed_at': None, 'completed_at': None, 'stopped_at': None, 'disabled_at': None}
[2024-10-05 10:11:06,511.511] base.py -> _commit_impl line:1146 [INFO]: COMMIT
[2024-10-05 10:11:06,513.513] base.py -> _begin_impl line:1103 [INFO]: BEGIN (implicit)
[2024-10-05 10:11:06,513.513] base.py -> _exec_single_context line:1903 [INFO]: SELECT upload_file.id AS upload_file_id, upload_file.account_id AS upload_file_account_id, upload_file.name AS upload_file_name, upload_file.key AS upload_file_key, upload_file.size AS upload_file_size, upload_file.extension AS upload_file_extension, upload_file.mime_type AS upload_file_mime_type, upload_file.hash AS upload_file_hash, upload_file.updated_at AS upload_file_updated_at, upload_file.created_at AS upload_file_created_at 
FROM upload_file 
WHERE upload_file.id = %(pk_1)s::UUID
[2024-10-05 10:11:06,513.513] base.py -> _exec_single_context line:1908 [INFO]: [cached since 304.3s ago] {'pk_1': UUID('3b647fa9-a38f-414a-9318-72c24779389d')}
[2024-10-05 10:11:06,514.514] base.py -> _exec_single_context line:1903 [INFO]: SELECT process_rule.id AS process_rule_id, process_rule.account_id AS process_rule_account_id, process_rule.dataset_id AS process_rule_dataset_id, process_rule.mode AS process_rule_mode, process_rule.rule AS process_rule_rule, process_rule.updated_at AS process_rule_updated_at, process_rule.created_at AS process_rule_created_at 
FROM process_rule 
WHERE process_rule.id = %(pk_1)s::UUID
[2024-10-05 10:11:06,514.514] base.py -> _exec_single_context line:1908 [INFO]: [cached since 304.3s ago] {'pk_1': UUID('56767c09-1da9-4d48-a001-c4e75feb81bb')}
[2024-10-05 10:11:06,515.515] base.py -> _exec_single_context line:1903 [INFO]: INSERT INTO document (account_id, dataset_id, upload_file_id, process_rule_id, batch, name, position, processing_started_at, parsing_completed_at, splitting_completed_at, indexing_completed_at, completed_at, stopped_at, disabled_at) VALUES (%(account_id)s::UUID, %(dataset_id)s::UUID, %(upload_file_id)s::UUID, %(process_rule_id)s::UUID, %(batch)s, %(name)s, %(position)s, %(processing_started_at)s, %(parsing_completed_at)s, %(splitting_completed_at)s, %(indexing_completed_at)s, %(completed_at)s, %(stopped_at)s, %(disabled_at)s) RETURNING document.id, document.character_count, document.token_count, document.error, document.enabled, document.status, document.updated_at, document.created_at
[2024-10-05 10:11:06,515.515] base.py -> _exec_single_context line:1908 [INFO]: [cached since 304.3s ago] {'account_id': '46db30d1-3199-4e79-a0cd-abf12fa6858f', 'dataset_id': UUID('f3f28f75-8e60-4eba-b6df-4d1b390bbd89'), 'upload_file_id': UUID('3b647fa9-a38f-414a-9318-72c24779389d'), 'process_rule_id': UUID('56767c09-1da9-4d48-a001-c4e75feb81bb'), 'batch': '20241005101106693438', 'name': 'LangChain中文文档.md', 'position': 13, 'processing_started_at': None, 'parsing_completed_at': None, 'splitting_completed_at': None, 'indexing_completed_at': None, 'completed_at': None, 'stopped_at': None, 'disabled_at': None}
[2024-10-05 10:11:06,516.516] base.py -> _commit_impl line:1146 [INFO]: COMMIT
[2024-10-05 10:11:06,517.517] base.py -> _begin_impl line:1103 [INFO]: BEGIN (implicit)
[2024-10-05 10:11:06,517.517] base.py -> _exec_single_context line:1903 [INFO]: SELECT document.id AS document_id, document.account_id AS document_account_id, document.dataset_id AS document_dataset_id, document.upload_file_id AS document_upload_file_id, document.process_rule_id AS document_process_rule_id, document.batch AS document_batch, document.name AS document_name, document.position AS document_position, document.character_count AS document_character_count, document.token_count AS document_token_count, document.processing_started_at AS document_processing_started_at, document.parsing_completed_at AS document_parsing_completed_at, document.splitting_completed_at AS document_splitting_completed_at, document.indexing_completed_at AS document_indexing_completed_at, document.completed_at AS document_completed_at, document.stopped_at AS document_stopped_at, document.error AS document_error, document.enabled AS document_enabled, document.disabled_at AS document_disabled_at, document.status AS document_status, document.updated_at AS document_updated_at, document.created_at AS document_created_at 
FROM document 
WHERE document.id = %(pk_1)s::UUID
[2024-10-05 10:11:06,517.517] base.py -> _exec_single_context line:1908 [INFO]: [cached since 304.3s ago] {'pk_1': UUID('6185a285-e5f3-4dfa-8d3c-049a766c1df1')}
[2024-10-05 10:11:06,518.518] base.py -> _exec_single_context line:1903 [INFO]: SELECT document.id AS document_id, document.account_id AS document_account_id, document.dataset_id AS document_dataset_id, document.upload_file_id AS document_upload_file_id, document.process_rule_id AS document_process_rule_id, document.batch AS document_batch, document.name AS document_name, document.position AS document_position, document.character_count AS document_character_count, document.token_count AS document_token_count, document.processing_started_at AS document_processing_started_at, document.parsing_completed_at AS document_parsing_completed_at, document.splitting_completed_at AS document_splitting_completed_at, document.indexing_completed_at AS document_indexing_completed_at, document.completed_at AS document_completed_at, document.stopped_at AS document_stopped_at, document.error AS document_error, document.enabled AS document_enabled, document.disabled_at AS document_disabled_at, document.status AS document_status, document.updated_at AS document_updated_at, document.created_at AS document_created_at 
FROM document 
WHERE document.id = %(pk_1)s::UUID
[2024-10-05 10:11:06,519.519] base.py -> _exec_single_context line:1908 [INFO]: [cached since 304.3s ago] {'pk_1': UUID('5d7b59b6-667a-43ee-b2b8-96dd867e24b7')}
[2024-10-05 10:11:06,520.520] base.py -> _exec_single_context line:1903 [INFO]: SELECT document.id AS document_id, document.account_id AS document_account_id, document.dataset_id AS document_dataset_id, document.upload_file_id AS document_upload_file_id, document.process_rule_id AS document_process_rule_id, document.batch AS document_batch, document.name AS document_name, document.position AS document_position, document.character_count AS document_character_count, document.token_count AS document_token_count, document.processing_started_at AS document_processing_started_at, document.parsing_completed_at AS document_parsing_completed_at, document.splitting_completed_at AS document_splitting_completed_at, document.indexing_completed_at AS document_indexing_completed_at, document.completed_at AS document_completed_at, document.stopped_at AS document_stopped_at, document.error AS document_error, document.enabled AS document_enabled, document.disabled_at AS document_disabled_at, document.status AS document_status, document.updated_at AS document_updated_at, document.created_at AS document_created_at 
FROM document 
WHERE document.id = %(pk_1)s::UUID
[2024-10-05 10:11:06,520.520] base.py -> _exec_single_context line:1908 [INFO]: [cached since 304.3s ago] {'pk_1': UUID('09dc3179-20ea-4b74-9cba-7dcee73c8a2e')}
[2024-10-05 10:11:06,537.537] base.py -> _rollback_impl line:1129 [INFO]: ROLLBACK
[2024-10-05 10:11:06,537.537] _internal.py -> _log line:96 [INFO]: 127.0.0.1 - - [05/Oct/2024 10:11:06] "POST /datasets/f3f28f75-8e60-4eba-b6df-4d1b390bbd89/documents HTTP/1.1" 200 -
[2024-10-05 10:47:39,494.494] _internal.py -> _log line:96 [INFO]:  * Detected change in 'D:\\Code\\llmops\\llmops-api\\internal\\task\\demo_task.py', reloading
[2024-10-05 10:47:40,208.208] _internal.py -> _log line:96 [INFO]:  * Restarting with stat
[2024-10-05 11:10:56,595.595] _internal.py -> _log line:96 [INFO]: [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5000
[2024-10-05 11:10:56,595.595] _internal.py -> _log line:96 [INFO]: [33mPress CTRL+C to quit[0m
[2024-10-05 11:10:56,596.596] _internal.py -> _log line:96 [INFO]:  * Restarting with stat
[2024-10-05 11:11:00,221.221] _internal.py -> _log line:96 [WARNING]:  * Debugger is active!
[2024-10-05 11:11:00,223.223] _internal.py -> _log line:96 [INFO]:  * Debugger PIN: 102-324-223
[2024-10-05 11:11:48,652.652] _internal.py -> _log line:96 [INFO]: [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5000
[2024-10-05 11:11:48,653.653] _internal.py -> _log line:96 [INFO]: [33mPress CTRL+C to quit[0m
[2024-10-05 11:11:48,654.654] _internal.py -> _log line:96 [INFO]:  * Restarting with stat
[2024-10-05 11:12:17,305.305] _internal.py -> _log line:96 [WARNING]:  * Debugger is active!
[2024-10-05 11:12:17,307.307] _internal.py -> _log line:96 [INFO]:  * Debugger PIN: 102-324-223
[2024-10-05 11:12:56,505.505] http.py -> _register_error_handler line:66 [ERROR]: An error occurred: (psycopg2.OperationalError) connection to server at "192.168.2.120", port 5432 failed: Connection timed out (0x0000274C/10060)
	Is the server running on that host and accepting TCP/IP connections?

(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "D:\Code\llmops\llmops-api\venv\lib\site-packages\sqlalchemy\engine\base.py", line 146, in __init__
    self._dbapi_connection = engine.raw_connection()
  File "D:\Code\llmops\llmops-api\venv\lib\site-packages\sqlalchemy\engine\base.py", line 3304, in raw_connection
    return self.pool.connect()
  File "D:\Code\llmops\llmops-api\venv\lib\site-packages\sqlalchemy\pool\base.py", line 449, in connect
    return _ConnectionFairy._checkout(self)
  File "D:\Code\llmops\llmops-api\venv\lib\site-packages\sqlalchemy\pool\base.py", line 1263, in _checkout
    fairy = _ConnectionRecord.checkout(pool)
  File "D:\Code\llmops\llmops-api\venv\lib\site-packages\sqlalchemy\pool\base.py", line 712, in checkout
    rec = pool._do_get()
  File "D:\Code\llmops\llmops-api\venv\lib\site-packages\sqlalchemy\pool\impl.py", line 179, in _do_get
    with util.safe_reraise():
  File "D:\Code\llmops\llmops-api\venv\lib\site-packages\sqlalchemy\util\langhelpers.py", line 146, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "D:\Code\llmops\llmops-api\venv\lib\site-packages\sqlalchemy\pool\impl.py", line 177, in _do_get
    return self._create_connection()
  File "D:\Code\llmops\llmops-api\venv\lib\site-packages\sqlalchemy\pool\base.py", line 390, in _create_connection
    return _ConnectionRecord(self)
  File "D:\Code\llmops\llmops-api\venv\lib\site-packages\sqlalchemy\pool\base.py", line 674, in __init__
    self.__connect()
  File "D:\Code\llmops\llmops-api\venv\lib\site-packages\sqlalchemy\pool\base.py", line 900, in __connect
    with util.safe_reraise():
  File "D:\Code\llmops\llmops-api\venv\lib\site-packages\sqlalchemy\util\langhelpers.py", line 146, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "D:\Code\llmops\llmops-api\venv\lib\site-packages\sqlalchemy\pool\base.py", line 896, in __connect
    self.dbapi_connection = connection = pool._invoke_creator(self)
  File "D:\Code\llmops\llmops-api\venv\lib\site-packages\sqlalchemy\engine\create.py", line 643, in connect
    return dialect.connect(*cargs, **cparams)
  File "D:\Code\llmops\llmops-api\venv\lib\site-packages\sqlalchemy\engine\default.py", line 617, in connect
    return self.loaded_dbapi.connect(*cargs, **cparams)
  File "D:\Code\llmops\llmops-api\venv\lib\site-packages\psycopg2\__init__.py", line 122, in connect
    conn = _connect(dsn, connection_factory=connection_factory, **kwasync)
psycopg2.OperationalError: connection to server at "192.168.2.120", port 5432 failed: Connection timed out (0x0000274C/10060)
	Is the server running on that host and accepting TCP/IP connections?


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "D:\Code\llmops\llmops-api\venv\lib\site-packages\flask\app.py", line 870, in full_dispatch_request
    rv = self.dispatch_request()
  File "D:\Code\llmops\llmops-api\venv\lib\site-packages\flask\app.py", line 855, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
  File "D:\Code\llmops\llmops-api\internal\handler\document_handler.py", line 32, in create_documents
    documents, batch = self.document_service.create_documents(dataset_id, **req.data)
  File "D:\Code\llmops\llmops-api\internal\service\document_service.py", line 46, in create_documents
    dataset = self.get(Dataset, dataset_id)
  File "D:\Code\llmops\llmops-api\internal\service\base_service.py", line 43, in get
    return self.db.session.query(model).get(primary_key)
  File "<string>", line 2, in get
  File "D:\Code\llmops\llmops-api\venv\lib\site-packages\sqlalchemy\util\deprecations.py", line 386, in warned
    return fn(*args, **kwargs)  # type: ignore[no-any-return]
  File "D:\Code\llmops\llmops-api\venv\lib\site-packages\sqlalchemy\orm\query.py", line 1127, in get
    return self._get_impl(ident, loading.load_on_pk_identity)
  File "D:\Code\llmops\llmops-api\venv\lib\site-packages\sqlalchemy\orm\query.py", line 1136, in _get_impl
    return self.session._get_impl(
  File "D:\Code\llmops\llmops-api\venv\lib\site-packages\sqlalchemy\orm\session.py", line 3817, in _get_impl
    return db_load_fn(
  File "D:\Code\llmops\llmops-api\venv\lib\site-packages\sqlalchemy\orm\loading.py", line 694, in load_on_pk_identity
    session.execute(
  File "D:\Code\llmops\llmops-api\venv\lib\site-packages\sqlalchemy\orm\session.py", line 2306, in execute
    return self._execute_internal(
  File "D:\Code\llmops\llmops-api\venv\lib\site-packages\sqlalchemy\orm\session.py", line 2181, in _execute_internal
    conn = self._connection_for_bind(bind)
  File "D:\Code\llmops\llmops-api\venv\lib\site-packages\sqlalchemy\orm\session.py", line 2050, in _connection_for_bind
    return trans._connection_for_bind(engine, execution_options)
  File "<string>", line 2, in _connection_for_bind
  File "D:\Code\llmops\llmops-api\venv\lib\site-packages\sqlalchemy\orm\state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
  File "D:\Code\llmops\llmops-api\venv\lib\site-packages\sqlalchemy\orm\session.py", line 1144, in _connection_for_bind
    conn = bind.connect()
  File "D:\Code\llmops\llmops-api\venv\lib\site-packages\sqlalchemy\engine\base.py", line 3280, in connect
    return self._connection_cls(self)
  File "D:\Code\llmops\llmops-api\venv\lib\site-packages\sqlalchemy\engine\base.py", line 148, in __init__
    Connection._handle_dbapi_exception_noconnection(
  File "D:\Code\llmops\llmops-api\venv\lib\site-packages\sqlalchemy\engine\base.py", line 2444, in _handle_dbapi_exception_noconnection
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "D:\Code\llmops\llmops-api\venv\lib\site-packages\sqlalchemy\engine\base.py", line 146, in __init__
    self._dbapi_connection = engine.raw_connection()
  File "D:\Code\llmops\llmops-api\venv\lib\site-packages\sqlalchemy\engine\base.py", line 3304, in raw_connection
    return self.pool.connect()
  File "D:\Code\llmops\llmops-api\venv\lib\site-packages\sqlalchemy\pool\base.py", line 449, in connect
    return _ConnectionFairy._checkout(self)
  File "D:\Code\llmops\llmops-api\venv\lib\site-packages\sqlalchemy\pool\base.py", line 1263, in _checkout
    fairy = _ConnectionRecord.checkout(pool)
  File "D:\Code\llmops\llmops-api\venv\lib\site-packages\sqlalchemy\pool\base.py", line 712, in checkout
    rec = pool._do_get()
  File "D:\Code\llmops\llmops-api\venv\lib\site-packages\sqlalchemy\pool\impl.py", line 179, in _do_get
    with util.safe_reraise():
  File "D:\Code\llmops\llmops-api\venv\lib\site-packages\sqlalchemy\util\langhelpers.py", line 146, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "D:\Code\llmops\llmops-api\venv\lib\site-packages\sqlalchemy\pool\impl.py", line 177, in _do_get
    return self._create_connection()
  File "D:\Code\llmops\llmops-api\venv\lib\site-packages\sqlalchemy\pool\base.py", line 390, in _create_connection
    return _ConnectionRecord(self)
  File "D:\Code\llmops\llmops-api\venv\lib\site-packages\sqlalchemy\pool\base.py", line 674, in __init__
    self.__connect()
  File "D:\Code\llmops\llmops-api\venv\lib\site-packages\sqlalchemy\pool\base.py", line 900, in __connect
    with util.safe_reraise():
  File "D:\Code\llmops\llmops-api\venv\lib\site-packages\sqlalchemy\util\langhelpers.py", line 146, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "D:\Code\llmops\llmops-api\venv\lib\site-packages\sqlalchemy\pool\base.py", line 896, in __connect
    self.dbapi_connection = connection = pool._invoke_creator(self)
  File "D:\Code\llmops\llmops-api\venv\lib\site-packages\sqlalchemy\engine\create.py", line 643, in connect
    return dialect.connect(*cargs, **cparams)
  File "D:\Code\llmops\llmops-api\venv\lib\site-packages\sqlalchemy\engine\default.py", line 617, in connect
    return self.loaded_dbapi.connect(*cargs, **cparams)
  File "D:\Code\llmops\llmops-api\venv\lib\site-packages\psycopg2\__init__.py", line 122, in connect
    conn = _connect(dsn, connection_factory=connection_factory, **kwasync)
sqlalchemy.exc.OperationalError: (psycopg2.OperationalError) connection to server at "192.168.2.120", port 5432 failed: Connection timed out (0x0000274C/10060)
	Is the server running on that host and accepting TCP/IP connections?

(Background on this error at: https://sqlalche.me/e/20/e3q8)
[2024-10-05 11:12:56,567.567] _internal.py -> _log line:96 [INFO]: 127.0.0.1 - - [05/Oct/2024 11:12:56] "[35m[1mPOST /datasets/f3f28f75-8e60-4eba-b6df-4d1b390bbd89/documents HTTP/1.1[0m" 500 -
[2024-10-05 11:13:53,970.970] _internal.py -> _log line:96 [INFO]: [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5000
[2024-10-05 11:13:53,970.970] _internal.py -> _log line:96 [INFO]: [33mPress CTRL+C to quit[0m
[2024-10-05 11:13:53,971.971] _internal.py -> _log line:96 [INFO]:  * Restarting with stat
[2024-10-05 11:14:21,733.733] _internal.py -> _log line:96 [WARNING]:  * Debugger is active!
[2024-10-05 11:14:21,736.736] _internal.py -> _log line:96 [INFO]:  * Debugger PIN: 102-324-223
[2024-10-05 11:16:03,559.559] http.py -> _register_error_handler line:66 [ERROR]: An error occurred: (psycopg2.OperationalError) connection to server at "192.168.8.180", port 5432 failed: No route to host (0x00002751/10065)
	Is the server running on that host and accepting TCP/IP connections?

(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "D:\Code\llmops\llmops-api\venv\lib\site-packages\sqlalchemy\engine\base.py", line 146, in __init__
    self._dbapi_connection = engine.raw_connection()
  File "D:\Code\llmops\llmops-api\venv\lib\site-packages\sqlalchemy\engine\base.py", line 3304, in raw_connection
    return self.pool.connect()
  File "D:\Code\llmops\llmops-api\venv\lib\site-packages\sqlalchemy\pool\base.py", line 449, in connect
    return _ConnectionFairy._checkout(self)
  File "D:\Code\llmops\llmops-api\venv\lib\site-packages\sqlalchemy\pool\base.py", line 1263, in _checkout
    fairy = _ConnectionRecord.checkout(pool)
  File "D:\Code\llmops\llmops-api\venv\lib\site-packages\sqlalchemy\pool\base.py", line 712, in checkout
    rec = pool._do_get()
  File "D:\Code\llmops\llmops-api\venv\lib\site-packages\sqlalchemy\pool\impl.py", line 179, in _do_get
    with util.safe_reraise():
  File "D:\Code\llmops\llmops-api\venv\lib\site-packages\sqlalchemy\util\langhelpers.py", line 146, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "D:\Code\llmops\llmops-api\venv\lib\site-packages\sqlalchemy\pool\impl.py", line 177, in _do_get
    return self._create_connection()
  File "D:\Code\llmops\llmops-api\venv\lib\site-packages\sqlalchemy\pool\base.py", line 390, in _create_connection
    return _ConnectionRecord(self)
  File "D:\Code\llmops\llmops-api\venv\lib\site-packages\sqlalchemy\pool\base.py", line 674, in __init__
    self.__connect()
  File "D:\Code\llmops\llmops-api\venv\lib\site-packages\sqlalchemy\pool\base.py", line 900, in __connect
    with util.safe_reraise():
  File "D:\Code\llmops\llmops-api\venv\lib\site-packages\sqlalchemy\util\langhelpers.py", line 146, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "D:\Code\llmops\llmops-api\venv\lib\site-packages\sqlalchemy\pool\base.py", line 896, in __connect
    self.dbapi_connection = connection = pool._invoke_creator(self)
  File "D:\Code\llmops\llmops-api\venv\lib\site-packages\sqlalchemy\engine\create.py", line 643, in connect
    return dialect.connect(*cargs, **cparams)
  File "D:\Code\llmops\llmops-api\venv\lib\site-packages\sqlalchemy\engine\default.py", line 617, in connect
    return self.loaded_dbapi.connect(*cargs, **cparams)
  File "D:\Code\llmops\llmops-api\venv\lib\site-packages\psycopg2\__init__.py", line 122, in connect
    conn = _connect(dsn, connection_factory=connection_factory, **kwasync)
psycopg2.OperationalError: connection to server at "192.168.8.180", port 5432 failed: No route to host (0x00002751/10065)
	Is the server running on that host and accepting TCP/IP connections?


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "D:\Code\llmops\llmops-api\venv\lib\site-packages\flask\app.py", line 870, in full_dispatch_request
    rv = self.dispatch_request()
  File "D:\Code\llmops\llmops-api\venv\lib\site-packages\flask\app.py", line 855, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
  File "D:\Code\llmops\llmops-api\internal\handler\document_handler.py", line 32, in create_documents
    documents, batch = self.document_service.create_documents(dataset_id, **req.data)
  File "D:\Code\llmops\llmops-api\internal\service\document_service.py", line 46, in create_documents
    dataset = self.get(Dataset, dataset_id)
  File "D:\Code\llmops\llmops-api\internal\service\base_service.py", line 43, in get
    return self.db.session.query(model).get(primary_key)
  File "<string>", line 2, in get
  File "D:\Code\llmops\llmops-api\venv\lib\site-packages\sqlalchemy\util\deprecations.py", line 386, in warned
    return fn(*args, **kwargs)  # type: ignore[no-any-return]
  File "D:\Code\llmops\llmops-api\venv\lib\site-packages\sqlalchemy\orm\query.py", line 1127, in get
    return self._get_impl(ident, loading.load_on_pk_identity)
  File "D:\Code\llmops\llmops-api\venv\lib\site-packages\sqlalchemy\orm\query.py", line 1136, in _get_impl
    return self.session._get_impl(
  File "D:\Code\llmops\llmops-api\venv\lib\site-packages\sqlalchemy\orm\session.py", line 3817, in _get_impl
    return db_load_fn(
  File "D:\Code\llmops\llmops-api\venv\lib\site-packages\sqlalchemy\orm\loading.py", line 694, in load_on_pk_identity
    session.execute(
  File "D:\Code\llmops\llmops-api\venv\lib\site-packages\sqlalchemy\orm\session.py", line 2306, in execute
    return self._execute_internal(
  File "D:\Code\llmops\llmops-api\venv\lib\site-packages\sqlalchemy\orm\session.py", line 2181, in _execute_internal
    conn = self._connection_for_bind(bind)
  File "D:\Code\llmops\llmops-api\venv\lib\site-packages\sqlalchemy\orm\session.py", line 2050, in _connection_for_bind
    return trans._connection_for_bind(engine, execution_options)
  File "<string>", line 2, in _connection_for_bind
  File "D:\Code\llmops\llmops-api\venv\lib\site-packages\sqlalchemy\orm\state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
  File "D:\Code\llmops\llmops-api\venv\lib\site-packages\sqlalchemy\orm\session.py", line 1144, in _connection_for_bind
    conn = bind.connect()
  File "D:\Code\llmops\llmops-api\venv\lib\site-packages\sqlalchemy\engine\base.py", line 3280, in connect
    return self._connection_cls(self)
  File "D:\Code\llmops\llmops-api\venv\lib\site-packages\sqlalchemy\engine\base.py", line 148, in __init__
    Connection._handle_dbapi_exception_noconnection(
  File "D:\Code\llmops\llmops-api\venv\lib\site-packages\sqlalchemy\engine\base.py", line 2444, in _handle_dbapi_exception_noconnection
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "D:\Code\llmops\llmops-api\venv\lib\site-packages\sqlalchemy\engine\base.py", line 146, in __init__
    self._dbapi_connection = engine.raw_connection()
  File "D:\Code\llmops\llmops-api\venv\lib\site-packages\sqlalchemy\engine\base.py", line 3304, in raw_connection
    return self.pool.connect()
  File "D:\Code\llmops\llmops-api\venv\lib\site-packages\sqlalchemy\pool\base.py", line 449, in connect
    return _ConnectionFairy._checkout(self)
  File "D:\Code\llmops\llmops-api\venv\lib\site-packages\sqlalchemy\pool\base.py", line 1263, in _checkout
    fairy = _ConnectionRecord.checkout(pool)
  File "D:\Code\llmops\llmops-api\venv\lib\site-packages\sqlalchemy\pool\base.py", line 712, in checkout
    rec = pool._do_get()
  File "D:\Code\llmops\llmops-api\venv\lib\site-packages\sqlalchemy\pool\impl.py", line 179, in _do_get
    with util.safe_reraise():
  File "D:\Code\llmops\llmops-api\venv\lib\site-packages\sqlalchemy\util\langhelpers.py", line 146, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "D:\Code\llmops\llmops-api\venv\lib\site-packages\sqlalchemy\pool\impl.py", line 177, in _do_get
    return self._create_connection()
  File "D:\Code\llmops\llmops-api\venv\lib\site-packages\sqlalchemy\pool\base.py", line 390, in _create_connection
    return _ConnectionRecord(self)
  File "D:\Code\llmops\llmops-api\venv\lib\site-packages\sqlalchemy\pool\base.py", line 674, in __init__
    self.__connect()
  File "D:\Code\llmops\llmops-api\venv\lib\site-packages\sqlalchemy\pool\base.py", line 900, in __connect
    with util.safe_reraise():
  File "D:\Code\llmops\llmops-api\venv\lib\site-packages\sqlalchemy\util\langhelpers.py", line 146, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "D:\Code\llmops\llmops-api\venv\lib\site-packages\sqlalchemy\pool\base.py", line 896, in __connect
    self.dbapi_connection = connection = pool._invoke_creator(self)
  File "D:\Code\llmops\llmops-api\venv\lib\site-packages\sqlalchemy\engine\create.py", line 643, in connect
    return dialect.connect(*cargs, **cparams)
  File "D:\Code\llmops\llmops-api\venv\lib\site-packages\sqlalchemy\engine\default.py", line 617, in connect
    return self.loaded_dbapi.connect(*cargs, **cparams)
  File "D:\Code\llmops\llmops-api\venv\lib\site-packages\psycopg2\__init__.py", line 122, in connect
    conn = _connect(dsn, connection_factory=connection_factory, **kwasync)
sqlalchemy.exc.OperationalError: (psycopg2.OperationalError) connection to server at "192.168.8.180", port 5432 failed: No route to host (0x00002751/10065)
	Is the server running on that host and accepting TCP/IP connections?

(Background on this error at: https://sqlalche.me/e/20/e3q8)
[2024-10-05 11:16:03,610.610] _internal.py -> _log line:96 [INFO]: 127.0.0.1 - - [05/Oct/2024 11:16:03] "[35m[1mPOST /datasets/f3f28f75-8e60-4eba-b6df-4d1b390bbd89/documents HTTP/1.1[0m" 500 -
[2024-10-05 11:17:50,499.499] _internal.py -> _log line:96 [INFO]: [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5000
[2024-10-05 11:17:50,500.500] _internal.py -> _log line:96 [INFO]: [33mPress CTRL+C to quit[0m
[2024-10-05 11:17:50,501.501] _internal.py -> _log line:96 [INFO]:  * Restarting with stat
[2024-10-05 11:18:41,529.529] _internal.py -> _log line:96 [WARNING]:  * Debugger is active!
[2024-10-05 11:18:41,532.532] _internal.py -> _log line:96 [INFO]:  * Debugger PIN: 102-324-223
[2024-10-05 11:18:41,825.825] base.py -> _exec_single_context line:1903 [INFO]: select pg_catalog.version()
[2024-10-05 11:18:41,826.826] base.py -> _exec_single_context line:1908 [INFO]: [raw sql] {}
[2024-10-05 11:18:41,827.827] base.py -> _exec_single_context line:1903 [INFO]: select current_schema()
[2024-10-05 11:18:41,827.827] base.py -> _exec_single_context line:1908 [INFO]: [raw sql] {}
[2024-10-05 11:18:41,827.827] base.py -> _exec_single_context line:1903 [INFO]: show standard_conforming_strings
[2024-10-05 11:18:41,827.827] base.py -> _exec_single_context line:1908 [INFO]: [raw sql] {}
[2024-10-05 11:18:41,828.828] base.py -> _begin_impl line:1103 [INFO]: BEGIN (implicit)
[2024-10-05 11:18:41,830.830] base.py -> _exec_single_context line:1903 [INFO]: SELECT dataset.id AS dataset_id, dataset.account_id AS dataset_account_id, dataset.name AS dataset_name, dataset.icon AS dataset_icon, dataset.description AS dataset_description, dataset.updated_at AS dataset_updated_at, dataset.created_at AS dataset_created_at 
FROM dataset 
WHERE dataset.id = %(pk_1)s::UUID
[2024-10-05 11:18:41,830.830] base.py -> _exec_single_context line:1908 [INFO]: [generated in 0.00014s] {'pk_1': UUID('f3f28f75-8e60-4eba-b6df-4d1b390bbd89')}
[2024-10-05 11:18:41,886.886] base.py -> _exec_single_context line:1903 [INFO]: SELECT upload_file.id AS upload_file_id, upload_file.account_id AS upload_file_account_id, upload_file.name AS upload_file_name, upload_file.key AS upload_file_key, upload_file.size AS upload_file_size, upload_file.extension AS upload_file_extension, upload_file.mime_type AS upload_file_mime_type, upload_file.hash AS upload_file_hash, upload_file.updated_at AS upload_file_updated_at, upload_file.created_at AS upload_file_created_at 
FROM upload_file 
WHERE upload_file.account_id = %(account_id_1)s::UUID AND upload_file.id IN (%(id_1_1)s::UUID, %(id_1_2)s::UUID, %(id_1_3)s::UUID)
[2024-10-05 11:18:41,886.886] base.py -> _exec_single_context line:1908 [INFO]: [generated in 0.00021s] {'account_id_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f', 'id_1_1': '1c32445c-676a-4a61-810b-a4483f310542', 'id_1_2': 'efb8d619-3ff6-452c-9747-5495ae04f63a', 'id_1_3': '3b647fa9-a38f-414a-9318-72c24779389d'}
[2024-10-05 11:18:41,950.950] base.py -> _exec_single_context line:1903 [INFO]: INSERT INTO process_rule (account_id, dataset_id, mode, rule) VALUES (%(account_id)s::UUID, %(dataset_id)s::UUID, %(mode)s, %(rule)s) RETURNING process_rule.id, process_rule.updated_at, process_rule.created_at
[2024-10-05 11:18:41,950.950] base.py -> _exec_single_context line:1908 [INFO]: [generated in 0.00021s] {'account_id': '46db30d1-3199-4e79-a0cd-abf12fa6858f', 'dataset_id': UUID('f3f28f75-8e60-4eba-b6df-4d1b390bbd89'), 'mode': 'automatic', 'rule': '{"pre_process_rules": [{"id": "remove_extra_space", "enabled": true}, {"id": "remove_url_and_email", "enabled": true}], "segment": {"separators": ["\ ... (15 characters truncated) ... "\\u3002|\\uff01|\\uff1f", "\\\\.\\\\s|\\\\!\\\\s|\\\\?\\\\s", "\\uff1b|;\\\\s", "\\uff0c|,\\\\s", " ", ""], "chunk_size": 500, "chunk_overlap": 50}}'}
[2024-10-05 11:18:42,111.111] base.py -> _commit_impl line:1146 [INFO]: COMMIT
[2024-10-05 11:18:42,134.134] base.py -> _begin_impl line:1103 [INFO]: BEGIN (implicit)
[2024-10-05 11:18:42,136.136] base.py -> _exec_single_context line:1903 [INFO]: SELECT document.id AS document_id, document.account_id AS document_account_id, document.dataset_id AS document_dataset_id, document.upload_file_id AS document_upload_file_id, document.process_rule_id AS document_process_rule_id, document.batch AS document_batch, document.name AS document_name, document.position AS document_position, document.character_count AS document_character_count, document.token_count AS document_token_count, document.processing_started_at AS document_processing_started_at, document.parsing_completed_at AS document_parsing_completed_at, document.splitting_completed_at AS document_splitting_completed_at, document.indexing_completed_at AS document_indexing_completed_at, document.completed_at AS document_completed_at, document.stopped_at AS document_stopped_at, document.error AS document_error, document.enabled AS document_enabled, document.disabled_at AS document_disabled_at, document.status AS document_status, document.updated_at AS document_updated_at, document.created_at AS document_created_at 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID ORDER BY document.position DESC 
 LIMIT %(param_1)s
[2024-10-05 11:18:42,136.136] base.py -> _exec_single_context line:1908 [INFO]: [generated in 0.00017s] {'dataset_id_1': UUID('f3f28f75-8e60-4eba-b6df-4d1b390bbd89'), 'param_1': 1}
[2024-10-05 11:18:42,200.200] base.py -> _exec_single_context line:1903 [INFO]: SELECT upload_file.id AS upload_file_id, upload_file.account_id AS upload_file_account_id, upload_file.name AS upload_file_name, upload_file.key AS upload_file_key, upload_file.size AS upload_file_size, upload_file.extension AS upload_file_extension, upload_file.mime_type AS upload_file_mime_type, upload_file.hash AS upload_file_hash, upload_file.updated_at AS upload_file_updated_at, upload_file.created_at AS upload_file_created_at 
FROM upload_file 
WHERE upload_file.id = %(pk_1)s::UUID
[2024-10-05 11:18:42,200.200] base.py -> _exec_single_context line:1908 [INFO]: [generated in 0.00018s] {'pk_1': UUID('1c32445c-676a-4a61-810b-a4483f310542')}
[2024-10-05 11:18:42,201.201] base.py -> _exec_single_context line:1903 [INFO]: SELECT process_rule.id AS process_rule_id, process_rule.account_id AS process_rule_account_id, process_rule.dataset_id AS process_rule_dataset_id, process_rule.mode AS process_rule_mode, process_rule.rule AS process_rule_rule, process_rule.updated_at AS process_rule_updated_at, process_rule.created_at AS process_rule_created_at 
FROM process_rule 
WHERE process_rule.id = %(pk_1)s::UUID
[2024-10-05 11:18:42,202.202] base.py -> _exec_single_context line:1908 [INFO]: [generated in 0.00016s] {'pk_1': UUID('64e39e0d-2fd3-40a8-8cb0-69ddc361c9b2')}
[2024-10-05 11:18:42,203.203] base.py -> _exec_single_context line:1903 [INFO]: INSERT INTO document (account_id, dataset_id, upload_file_id, process_rule_id, batch, name, position, processing_started_at, parsing_completed_at, splitting_completed_at, indexing_completed_at, completed_at, stopped_at, disabled_at) VALUES (%(account_id)s::UUID, %(dataset_id)s::UUID, %(upload_file_id)s::UUID, %(process_rule_id)s::UUID, %(batch)s, %(name)s, %(position)s, %(processing_started_at)s, %(parsing_completed_at)s, %(splitting_completed_at)s, %(indexing_completed_at)s, %(completed_at)s, %(stopped_at)s, %(disabled_at)s) RETURNING document.id, document.character_count, document.token_count, document.error, document.enabled, document.status, document.updated_at, document.created_at
[2024-10-05 11:18:42,203.203] base.py -> _exec_single_context line:1908 [INFO]: [generated in 0.00017s] {'account_id': '46db30d1-3199-4e79-a0cd-abf12fa6858f', 'dataset_id': UUID('f3f28f75-8e60-4eba-b6df-4d1b390bbd89'), 'upload_file_id': UUID('1c32445c-676a-4a61-810b-a4483f310542'), 'process_rule_id': UUID('64e39e0d-2fd3-40a8-8cb0-69ddc361c9b2'), 'batch': '20241005111841937546', 'name': '项目API文档-完整.md', 'position': 14, 'processing_started_at': None, 'parsing_completed_at': None, 'splitting_completed_at': None, 'indexing_completed_at': None, 'completed_at': None, 'stopped_at': None, 'disabled_at': None}
[2024-10-05 11:18:42,229.229] base.py -> _commit_impl line:1146 [INFO]: COMMIT
[2024-10-05 11:18:42,231.231] base.py -> _begin_impl line:1103 [INFO]: BEGIN (implicit)
[2024-10-05 11:18:42,231.231] base.py -> _exec_single_context line:1903 [INFO]: SELECT upload_file.id AS upload_file_id, upload_file.account_id AS upload_file_account_id, upload_file.name AS upload_file_name, upload_file.key AS upload_file_key, upload_file.size AS upload_file_size, upload_file.extension AS upload_file_extension, upload_file.mime_type AS upload_file_mime_type, upload_file.hash AS upload_file_hash, upload_file.updated_at AS upload_file_updated_at, upload_file.created_at AS upload_file_created_at 
FROM upload_file 
WHERE upload_file.id = %(pk_1)s::UUID
[2024-10-05 11:18:42,231.231] base.py -> _exec_single_context line:1908 [INFO]: [cached since 0.03073s ago] {'pk_1': UUID('efb8d619-3ff6-452c-9747-5495ae04f63a')}
[2024-10-05 11:18:42,232.232] base.py -> _exec_single_context line:1903 [INFO]: SELECT process_rule.id AS process_rule_id, process_rule.account_id AS process_rule_account_id, process_rule.dataset_id AS process_rule_dataset_id, process_rule.mode AS process_rule_mode, process_rule.rule AS process_rule_rule, process_rule.updated_at AS process_rule_updated_at, process_rule.created_at AS process_rule_created_at 
FROM process_rule 
WHERE process_rule.id = %(pk_1)s::UUID
[2024-10-05 11:18:42,232.232] base.py -> _exec_single_context line:1908 [INFO]: [cached since 0.02999s ago] {'pk_1': UUID('64e39e0d-2fd3-40a8-8cb0-69ddc361c9b2')}
[2024-10-05 11:18:42,232.232] base.py -> _exec_single_context line:1903 [INFO]: INSERT INTO document (account_id, dataset_id, upload_file_id, process_rule_id, batch, name, position, processing_started_at, parsing_completed_at, splitting_completed_at, indexing_completed_at, completed_at, stopped_at, disabled_at) VALUES (%(account_id)s::UUID, %(dataset_id)s::UUID, %(upload_file_id)s::UUID, %(process_rule_id)s::UUID, %(batch)s, %(name)s, %(position)s, %(processing_started_at)s, %(parsing_completed_at)s, %(splitting_completed_at)s, %(indexing_completed_at)s, %(completed_at)s, %(stopped_at)s, %(disabled_at)s) RETURNING document.id, document.character_count, document.token_count, document.error, document.enabled, document.status, document.updated_at, document.created_at
[2024-10-05 11:18:42,232.232] base.py -> _exec_single_context line:1908 [INFO]: [cached since 0.02937s ago] {'account_id': '46db30d1-3199-4e79-a0cd-abf12fa6858f', 'dataset_id': UUID('f3f28f75-8e60-4eba-b6df-4d1b390bbd89'), 'upload_file_id': UUID('efb8d619-3ff6-452c-9747-5495ae04f63a'), 'process_rule_id': UUID('64e39e0d-2fd3-40a8-8cb0-69ddc361c9b2'), 'batch': '20241005111841937546', 'name': 'LLMOps 项目自定义 API 插件描述集合.md', 'position': 15, 'processing_started_at': None, 'parsing_completed_at': None, 'splitting_completed_at': None, 'indexing_completed_at': None, 'completed_at': None, 'stopped_at': None, 'disabled_at': None}
[2024-10-05 11:18:42,233.233] base.py -> _commit_impl line:1146 [INFO]: COMMIT
[2024-10-05 11:18:42,234.234] base.py -> _begin_impl line:1103 [INFO]: BEGIN (implicit)
[2024-10-05 11:18:42,234.234] base.py -> _exec_single_context line:1903 [INFO]: SELECT upload_file.id AS upload_file_id, upload_file.account_id AS upload_file_account_id, upload_file.name AS upload_file_name, upload_file.key AS upload_file_key, upload_file.size AS upload_file_size, upload_file.extension AS upload_file_extension, upload_file.mime_type AS upload_file_mime_type, upload_file.hash AS upload_file_hash, upload_file.updated_at AS upload_file_updated_at, upload_file.created_at AS upload_file_created_at 
FROM upload_file 
WHERE upload_file.id = %(pk_1)s::UUID
[2024-10-05 11:18:42,234.234] base.py -> _exec_single_context line:1908 [INFO]: [cached since 0.03423s ago] {'pk_1': UUID('3b647fa9-a38f-414a-9318-72c24779389d')}
[2024-10-05 11:18:42,235.235] base.py -> _exec_single_context line:1903 [INFO]: SELECT process_rule.id AS process_rule_id, process_rule.account_id AS process_rule_account_id, process_rule.dataset_id AS process_rule_dataset_id, process_rule.mode AS process_rule_mode, process_rule.rule AS process_rule_rule, process_rule.updated_at AS process_rule_updated_at, process_rule.created_at AS process_rule_created_at 
FROM process_rule 
WHERE process_rule.id = %(pk_1)s::UUID
[2024-10-05 11:18:42,235.235] base.py -> _exec_single_context line:1908 [INFO]: [cached since 0.03341s ago] {'pk_1': UUID('64e39e0d-2fd3-40a8-8cb0-69ddc361c9b2')}
[2024-10-05 11:18:42,235.235] base.py -> _exec_single_context line:1903 [INFO]: INSERT INTO document (account_id, dataset_id, upload_file_id, process_rule_id, batch, name, position, processing_started_at, parsing_completed_at, splitting_completed_at, indexing_completed_at, completed_at, stopped_at, disabled_at) VALUES (%(account_id)s::UUID, %(dataset_id)s::UUID, %(upload_file_id)s::UUID, %(process_rule_id)s::UUID, %(batch)s, %(name)s, %(position)s, %(processing_started_at)s, %(parsing_completed_at)s, %(splitting_completed_at)s, %(indexing_completed_at)s, %(completed_at)s, %(stopped_at)s, %(disabled_at)s) RETURNING document.id, document.character_count, document.token_count, document.error, document.enabled, document.status, document.updated_at, document.created_at
[2024-10-05 11:18:42,235.235] base.py -> _exec_single_context line:1908 [INFO]: [cached since 0.03274s ago] {'account_id': '46db30d1-3199-4e79-a0cd-abf12fa6858f', 'dataset_id': UUID('f3f28f75-8e60-4eba-b6df-4d1b390bbd89'), 'upload_file_id': UUID('3b647fa9-a38f-414a-9318-72c24779389d'), 'process_rule_id': UUID('64e39e0d-2fd3-40a8-8cb0-69ddc361c9b2'), 'batch': '20241005111841937546', 'name': 'LangChain中文文档.md', 'position': 16, 'processing_started_at': None, 'parsing_completed_at': None, 'splitting_completed_at': None, 'indexing_completed_at': None, 'completed_at': None, 'stopped_at': None, 'disabled_at': None}
[2024-10-05 11:18:42,236.236] base.py -> _commit_impl line:1146 [INFO]: COMMIT
[2024-10-05 11:18:42,240.240] base.py -> _begin_impl line:1103 [INFO]: BEGIN (implicit)
[2024-10-05 11:18:42,241.241] base.py -> _exec_single_context line:1903 [INFO]: SELECT document.id AS document_id, document.account_id AS document_account_id, document.dataset_id AS document_dataset_id, document.upload_file_id AS document_upload_file_id, document.process_rule_id AS document_process_rule_id, document.batch AS document_batch, document.name AS document_name, document.position AS document_position, document.character_count AS document_character_count, document.token_count AS document_token_count, document.processing_started_at AS document_processing_started_at, document.parsing_completed_at AS document_parsing_completed_at, document.splitting_completed_at AS document_splitting_completed_at, document.indexing_completed_at AS document_indexing_completed_at, document.completed_at AS document_completed_at, document.stopped_at AS document_stopped_at, document.error AS document_error, document.enabled AS document_enabled, document.disabled_at AS document_disabled_at, document.status AS document_status, document.updated_at AS document_updated_at, document.created_at AS document_created_at 
FROM document 
WHERE document.id = %(pk_1)s::UUID
[2024-10-05 11:18:42,241.241] base.py -> _exec_single_context line:1908 [INFO]: [generated in 0.00014s] {'pk_1': UUID('dc573e74-29ae-408a-ab0e-21a77fae3b0a')}
[2024-10-05 11:18:42,242.242] base.py -> _exec_single_context line:1903 [INFO]: SELECT document.id AS document_id, document.account_id AS document_account_id, document.dataset_id AS document_dataset_id, document.upload_file_id AS document_upload_file_id, document.process_rule_id AS document_process_rule_id, document.batch AS document_batch, document.name AS document_name, document.position AS document_position, document.character_count AS document_character_count, document.token_count AS document_token_count, document.processing_started_at AS document_processing_started_at, document.parsing_completed_at AS document_parsing_completed_at, document.splitting_completed_at AS document_splitting_completed_at, document.indexing_completed_at AS document_indexing_completed_at, document.completed_at AS document_completed_at, document.stopped_at AS document_stopped_at, document.error AS document_error, document.enabled AS document_enabled, document.disabled_at AS document_disabled_at, document.status AS document_status, document.updated_at AS document_updated_at, document.created_at AS document_created_at 
FROM document 
WHERE document.id = %(pk_1)s::UUID
[2024-10-05 11:18:42,242.242] base.py -> _exec_single_context line:1908 [INFO]: [cached since 0.001402s ago] {'pk_1': UUID('d4e356bb-e49a-4251-b977-5958c6f1bcac')}
[2024-10-05 11:18:42,243.243] base.py -> _exec_single_context line:1903 [INFO]: SELECT document.id AS document_id, document.account_id AS document_account_id, document.dataset_id AS document_dataset_id, document.upload_file_id AS document_upload_file_id, document.process_rule_id AS document_process_rule_id, document.batch AS document_batch, document.name AS document_name, document.position AS document_position, document.character_count AS document_character_count, document.token_count AS document_token_count, document.processing_started_at AS document_processing_started_at, document.parsing_completed_at AS document_parsing_completed_at, document.splitting_completed_at AS document_splitting_completed_at, document.indexing_completed_at AS document_indexing_completed_at, document.completed_at AS document_completed_at, document.stopped_at AS document_stopped_at, document.error AS document_error, document.enabled AS document_enabled, document.disabled_at AS document_disabled_at, document.status AS document_status, document.updated_at AS document_updated_at, document.created_at AS document_created_at 
FROM document 
WHERE document.id = %(pk_1)s::UUID
[2024-10-05 11:18:42,243.243] base.py -> _exec_single_context line:1908 [INFO]: [cached since 0.002105s ago] {'pk_1': UUID('918587cc-7536-4d71-94ca-fc2373253b81')}
[2024-10-05 11:18:42,273.273] base.py -> _rollback_impl line:1129 [INFO]: ROLLBACK
[2024-10-05 11:18:42,274.274] _internal.py -> _log line:96 [INFO]: 127.0.0.1 - - [05/Oct/2024 11:18:42] "POST /datasets/f3f28f75-8e60-4eba-b6df-4d1b390bbd89/documents HTTP/1.1" 200 -
[2024-10-05 11:18:45,428.428] base.py -> _begin_impl line:1103 [INFO]: BEGIN (implicit)
[2024-10-05 11:18:45,428.428] base.py -> _exec_single_context line:1903 [INFO]: SELECT dataset.id AS dataset_id, dataset.account_id AS dataset_account_id, dataset.name AS dataset_name, dataset.icon AS dataset_icon, dataset.description AS dataset_description, dataset.updated_at AS dataset_updated_at, dataset.created_at AS dataset_created_at 
FROM dataset 
WHERE dataset.id = %(pk_1)s::UUID
[2024-10-05 11:18:45,428.428] base.py -> _exec_single_context line:1908 [INFO]: [cached since 3.599s ago] {'pk_1': UUID('f3f28f75-8e60-4eba-b6df-4d1b390bbd89')}
[2024-10-05 11:18:45,429.429] base.py -> _exec_single_context line:1903 [INFO]: SELECT upload_file.id AS upload_file_id, upload_file.account_id AS upload_file_account_id, upload_file.name AS upload_file_name, upload_file.key AS upload_file_key, upload_file.size AS upload_file_size, upload_file.extension AS upload_file_extension, upload_file.mime_type AS upload_file_mime_type, upload_file.hash AS upload_file_hash, upload_file.updated_at AS upload_file_updated_at, upload_file.created_at AS upload_file_created_at 
FROM upload_file 
WHERE upload_file.account_id = %(account_id_1)s::UUID AND upload_file.id IN (%(id_1_1)s::UUID, %(id_1_2)s::UUID, %(id_1_3)s::UUID)
[2024-10-05 11:18:45,429.429] base.py -> _exec_single_context line:1908 [INFO]: [cached since 3.545s ago] {'account_id_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f', 'id_1_1': '1c32445c-676a-4a61-810b-a4483f310542', 'id_1_2': 'efb8d619-3ff6-452c-9747-5495ae04f63a', 'id_1_3': '3b647fa9-a38f-414a-9318-72c24779389d'}
[2024-10-05 11:18:45,430.430] base.py -> _exec_single_context line:1903 [INFO]: INSERT INTO process_rule (account_id, dataset_id, mode, rule) VALUES (%(account_id)s::UUID, %(dataset_id)s::UUID, %(mode)s, %(rule)s) RETURNING process_rule.id, process_rule.updated_at, process_rule.created_at
[2024-10-05 11:18:45,430.430] base.py -> _exec_single_context line:1908 [INFO]: [cached since 3.481s ago] {'account_id': '46db30d1-3199-4e79-a0cd-abf12fa6858f', 'dataset_id': UUID('f3f28f75-8e60-4eba-b6df-4d1b390bbd89'), 'mode': 'automatic', 'rule': '{"pre_process_rules": [{"id": "remove_extra_space", "enabled": true}, {"id": "remove_url_and_email", "enabled": true}], "segment": {"separators": ["\ ... (15 characters truncated) ... "\\u3002|\\uff01|\\uff1f", "\\\\.\\\\s|\\\\!\\\\s|\\\\?\\\\s", "\\uff1b|;\\\\s", "\\uff0c|,\\\\s", " ", ""], "chunk_size": 500, "chunk_overlap": 50}}'}
[2024-10-05 11:18:45,431.431] base.py -> _commit_impl line:1146 [INFO]: COMMIT
[2024-10-05 11:18:45,434.434] base.py -> _begin_impl line:1103 [INFO]: BEGIN (implicit)
[2024-10-05 11:18:45,434.434] base.py -> _exec_single_context line:1903 [INFO]: SELECT document.id AS document_id, document.account_id AS document_account_id, document.dataset_id AS document_dataset_id, document.upload_file_id AS document_upload_file_id, document.process_rule_id AS document_process_rule_id, document.batch AS document_batch, document.name AS document_name, document.position AS document_position, document.character_count AS document_character_count, document.token_count AS document_token_count, document.processing_started_at AS document_processing_started_at, document.parsing_completed_at AS document_parsing_completed_at, document.splitting_completed_at AS document_splitting_completed_at, document.indexing_completed_at AS document_indexing_completed_at, document.completed_at AS document_completed_at, document.stopped_at AS document_stopped_at, document.error AS document_error, document.enabled AS document_enabled, document.disabled_at AS document_disabled_at, document.status AS document_status, document.updated_at AS document_updated_at, document.created_at AS document_created_at 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID ORDER BY document.position DESC 
 LIMIT %(param_1)s
[2024-10-05 11:18:45,434.434] base.py -> _exec_single_context line:1908 [INFO]: [cached since 3.298s ago] {'dataset_id_1': UUID('f3f28f75-8e60-4eba-b6df-4d1b390bbd89'), 'param_1': 1}
[2024-10-05 11:18:45,435.435] base.py -> _exec_single_context line:1903 [INFO]: SELECT upload_file.id AS upload_file_id, upload_file.account_id AS upload_file_account_id, upload_file.name AS upload_file_name, upload_file.key AS upload_file_key, upload_file.size AS upload_file_size, upload_file.extension AS upload_file_extension, upload_file.mime_type AS upload_file_mime_type, upload_file.hash AS upload_file_hash, upload_file.updated_at AS upload_file_updated_at, upload_file.created_at AS upload_file_created_at 
FROM upload_file 
WHERE upload_file.id = %(pk_1)s::UUID
[2024-10-05 11:18:45,435.435] base.py -> _exec_single_context line:1908 [INFO]: [cached since 3.235s ago] {'pk_1': UUID('1c32445c-676a-4a61-810b-a4483f310542')}
[2024-10-05 11:18:45,436.436] base.py -> _exec_single_context line:1903 [INFO]: SELECT process_rule.id AS process_rule_id, process_rule.account_id AS process_rule_account_id, process_rule.dataset_id AS process_rule_dataset_id, process_rule.mode AS process_rule_mode, process_rule.rule AS process_rule_rule, process_rule.updated_at AS process_rule_updated_at, process_rule.created_at AS process_rule_created_at 
FROM process_rule 
WHERE process_rule.id = %(pk_1)s::UUID
[2024-10-05 11:18:45,436.436] base.py -> _exec_single_context line:1908 [INFO]: [cached since 3.235s ago] {'pk_1': UUID('18084566-8441-48b7-8ef2-1f3094edb5ad')}
[2024-10-05 11:18:45,456.456] base.py -> _exec_single_context line:1903 [INFO]: INSERT INTO document (account_id, dataset_id, upload_file_id, process_rule_id, batch, name, position, processing_started_at, parsing_completed_at, splitting_completed_at, indexing_completed_at, completed_at, stopped_at, disabled_at) VALUES (%(account_id)s::UUID, %(dataset_id)s::UUID, %(upload_file_id)s::UUID, %(process_rule_id)s::UUID, %(batch)s, %(name)s, %(position)s, %(processing_started_at)s, %(parsing_completed_at)s, %(splitting_completed_at)s, %(indexing_completed_at)s, %(completed_at)s, %(stopped_at)s, %(disabled_at)s) RETURNING document.id, document.character_count, document.token_count, document.error, document.enabled, document.status, document.updated_at, document.created_at
[2024-10-05 11:18:45,456.456] base.py -> _exec_single_context line:1908 [INFO]: [cached since 3.252s ago] {'account_id': '46db30d1-3199-4e79-a0cd-abf12fa6858f', 'dataset_id': UUID('f3f28f75-8e60-4eba-b6df-4d1b390bbd89'), 'upload_file_id': UUID('1c32445c-676a-4a61-810b-a4483f310542'), 'process_rule_id': UUID('18084566-8441-48b7-8ef2-1f3094edb5ad'), 'batch': '20241005111845193936', 'name': '项目API文档-完整.md', 'position': 17, 'processing_started_at': None, 'parsing_completed_at': None, 'splitting_completed_at': None, 'indexing_completed_at': None, 'completed_at': None, 'stopped_at': None, 'disabled_at': None}
[2024-10-05 11:18:45,457.457] base.py -> _commit_impl line:1146 [INFO]: COMMIT
[2024-10-05 11:18:45,460.460] base.py -> _begin_impl line:1103 [INFO]: BEGIN (implicit)
[2024-10-05 11:18:45,460.460] base.py -> _exec_single_context line:1903 [INFO]: SELECT upload_file.id AS upload_file_id, upload_file.account_id AS upload_file_account_id, upload_file.name AS upload_file_name, upload_file.key AS upload_file_key, upload_file.size AS upload_file_size, upload_file.extension AS upload_file_extension, upload_file.mime_type AS upload_file_mime_type, upload_file.hash AS upload_file_hash, upload_file.updated_at AS upload_file_updated_at, upload_file.created_at AS upload_file_created_at 
FROM upload_file 
WHERE upload_file.id = %(pk_1)s::UUID
[2024-10-05 11:18:45,460.460] base.py -> _exec_single_context line:1908 [INFO]: [cached since 3.261s ago] {'pk_1': UUID('efb8d619-3ff6-452c-9747-5495ae04f63a')}
[2024-10-05 11:18:45,461.461] base.py -> _exec_single_context line:1903 [INFO]: SELECT process_rule.id AS process_rule_id, process_rule.account_id AS process_rule_account_id, process_rule.dataset_id AS process_rule_dataset_id, process_rule.mode AS process_rule_mode, process_rule.rule AS process_rule_rule, process_rule.updated_at AS process_rule_updated_at, process_rule.created_at AS process_rule_created_at 
FROM process_rule 
WHERE process_rule.id = %(pk_1)s::UUID
[2024-10-05 11:18:45,461.461] base.py -> _exec_single_context line:1908 [INFO]: [cached since 3.26s ago] {'pk_1': UUID('18084566-8441-48b7-8ef2-1f3094edb5ad')}
[2024-10-05 11:18:45,462.462] base.py -> _exec_single_context line:1903 [INFO]: INSERT INTO document (account_id, dataset_id, upload_file_id, process_rule_id, batch, name, position, processing_started_at, parsing_completed_at, splitting_completed_at, indexing_completed_at, completed_at, stopped_at, disabled_at) VALUES (%(account_id)s::UUID, %(dataset_id)s::UUID, %(upload_file_id)s::UUID, %(process_rule_id)s::UUID, %(batch)s, %(name)s, %(position)s, %(processing_started_at)s, %(parsing_completed_at)s, %(splitting_completed_at)s, %(indexing_completed_at)s, %(completed_at)s, %(stopped_at)s, %(disabled_at)s) RETURNING document.id, document.character_count, document.token_count, document.error, document.enabled, document.status, document.updated_at, document.created_at
[2024-10-05 11:18:45,462.462] base.py -> _exec_single_context line:1908 [INFO]: [cached since 3.26s ago] {'account_id': '46db30d1-3199-4e79-a0cd-abf12fa6858f', 'dataset_id': UUID('f3f28f75-8e60-4eba-b6df-4d1b390bbd89'), 'upload_file_id': UUID('efb8d619-3ff6-452c-9747-5495ae04f63a'), 'process_rule_id': UUID('18084566-8441-48b7-8ef2-1f3094edb5ad'), 'batch': '20241005111845193936', 'name': 'LLMOps 项目自定义 API 插件描述集合.md', 'position': 18, 'processing_started_at': None, 'parsing_completed_at': None, 'splitting_completed_at': None, 'indexing_completed_at': None, 'completed_at': None, 'stopped_at': None, 'disabled_at': None}
[2024-10-05 11:18:45,463.463] base.py -> _commit_impl line:1146 [INFO]: COMMIT
[2024-10-05 11:18:45,464.464] base.py -> _begin_impl line:1103 [INFO]: BEGIN (implicit)
[2024-10-05 11:18:45,464.464] base.py -> _exec_single_context line:1903 [INFO]: SELECT upload_file.id AS upload_file_id, upload_file.account_id AS upload_file_account_id, upload_file.name AS upload_file_name, upload_file.key AS upload_file_key, upload_file.size AS upload_file_size, upload_file.extension AS upload_file_extension, upload_file.mime_type AS upload_file_mime_type, upload_file.hash AS upload_file_hash, upload_file.updated_at AS upload_file_updated_at, upload_file.created_at AS upload_file_created_at 
FROM upload_file 
WHERE upload_file.id = %(pk_1)s::UUID
[2024-10-05 11:18:45,464.464] base.py -> _exec_single_context line:1908 [INFO]: [cached since 3.265s ago] {'pk_1': UUID('3b647fa9-a38f-414a-9318-72c24779389d')}
[2024-10-05 11:18:45,465.465] base.py -> _exec_single_context line:1903 [INFO]: SELECT process_rule.id AS process_rule_id, process_rule.account_id AS process_rule_account_id, process_rule.dataset_id AS process_rule_dataset_id, process_rule.mode AS process_rule_mode, process_rule.rule AS process_rule_rule, process_rule.updated_at AS process_rule_updated_at, process_rule.created_at AS process_rule_created_at 
FROM process_rule 
WHERE process_rule.id = %(pk_1)s::UUID
[2024-10-05 11:18:45,466.466] base.py -> _exec_single_context line:1908 [INFO]: [cached since 3.264s ago] {'pk_1': UUID('18084566-8441-48b7-8ef2-1f3094edb5ad')}
[2024-10-05 11:18:45,466.466] base.py -> _exec_single_context line:1903 [INFO]: INSERT INTO document (account_id, dataset_id, upload_file_id, process_rule_id, batch, name, position, processing_started_at, parsing_completed_at, splitting_completed_at, indexing_completed_at, completed_at, stopped_at, disabled_at) VALUES (%(account_id)s::UUID, %(dataset_id)s::UUID, %(upload_file_id)s::UUID, %(process_rule_id)s::UUID, %(batch)s, %(name)s, %(position)s, %(processing_started_at)s, %(parsing_completed_at)s, %(splitting_completed_at)s, %(indexing_completed_at)s, %(completed_at)s, %(stopped_at)s, %(disabled_at)s) RETURNING document.id, document.character_count, document.token_count, document.error, document.enabled, document.status, document.updated_at, document.created_at
[2024-10-05 11:18:45,467.467] base.py -> _exec_single_context line:1908 [INFO]: [cached since 3.264s ago] {'account_id': '46db30d1-3199-4e79-a0cd-abf12fa6858f', 'dataset_id': UUID('f3f28f75-8e60-4eba-b6df-4d1b390bbd89'), 'upload_file_id': UUID('3b647fa9-a38f-414a-9318-72c24779389d'), 'process_rule_id': UUID('18084566-8441-48b7-8ef2-1f3094edb5ad'), 'batch': '20241005111845193936', 'name': 'LangChain中文文档.md', 'position': 19, 'processing_started_at': None, 'parsing_completed_at': None, 'splitting_completed_at': None, 'indexing_completed_at': None, 'completed_at': None, 'stopped_at': None, 'disabled_at': None}
[2024-10-05 11:18:45,467.467] base.py -> _commit_impl line:1146 [INFO]: COMMIT
[2024-10-05 11:18:45,468.468] base.py -> _begin_impl line:1103 [INFO]: BEGIN (implicit)
[2024-10-05 11:18:45,468.468] base.py -> _exec_single_context line:1903 [INFO]: SELECT document.id AS document_id, document.account_id AS document_account_id, document.dataset_id AS document_dataset_id, document.upload_file_id AS document_upload_file_id, document.process_rule_id AS document_process_rule_id, document.batch AS document_batch, document.name AS document_name, document.position AS document_position, document.character_count AS document_character_count, document.token_count AS document_token_count, document.processing_started_at AS document_processing_started_at, document.parsing_completed_at AS document_parsing_completed_at, document.splitting_completed_at AS document_splitting_completed_at, document.indexing_completed_at AS document_indexing_completed_at, document.completed_at AS document_completed_at, document.stopped_at AS document_stopped_at, document.error AS document_error, document.enabled AS document_enabled, document.disabled_at AS document_disabled_at, document.status AS document_status, document.updated_at AS document_updated_at, document.created_at AS document_created_at 
FROM document 
WHERE document.id = %(pk_1)s::UUID
[2024-10-05 11:18:45,469.469] base.py -> _exec_single_context line:1908 [INFO]: [cached since 3.227s ago] {'pk_1': UUID('e2227cad-91c4-4847-a9f5-b5ecd2787f6a')}
[2024-10-05 11:18:45,469.469] base.py -> _exec_single_context line:1903 [INFO]: SELECT document.id AS document_id, document.account_id AS document_account_id, document.dataset_id AS document_dataset_id, document.upload_file_id AS document_upload_file_id, document.process_rule_id AS document_process_rule_id, document.batch AS document_batch, document.name AS document_name, document.position AS document_position, document.character_count AS document_character_count, document.token_count AS document_token_count, document.processing_started_at AS document_processing_started_at, document.parsing_completed_at AS document_parsing_completed_at, document.splitting_completed_at AS document_splitting_completed_at, document.indexing_completed_at AS document_indexing_completed_at, document.completed_at AS document_completed_at, document.stopped_at AS document_stopped_at, document.error AS document_error, document.enabled AS document_enabled, document.disabled_at AS document_disabled_at, document.status AS document_status, document.updated_at AS document_updated_at, document.created_at AS document_created_at 
FROM document 
WHERE document.id = %(pk_1)s::UUID
[2024-10-05 11:18:45,469.469] base.py -> _exec_single_context line:1908 [INFO]: [cached since 3.228s ago] {'pk_1': UUID('32f7ab93-9ae3-46a4-8551-d6ef9a7644e5')}
[2024-10-05 11:18:45,470.470] base.py -> _exec_single_context line:1903 [INFO]: SELECT document.id AS document_id, document.account_id AS document_account_id, document.dataset_id AS document_dataset_id, document.upload_file_id AS document_upload_file_id, document.process_rule_id AS document_process_rule_id, document.batch AS document_batch, document.name AS document_name, document.position AS document_position, document.character_count AS document_character_count, document.token_count AS document_token_count, document.processing_started_at AS document_processing_started_at, document.parsing_completed_at AS document_parsing_completed_at, document.splitting_completed_at AS document_splitting_completed_at, document.indexing_completed_at AS document_indexing_completed_at, document.completed_at AS document_completed_at, document.stopped_at AS document_stopped_at, document.error AS document_error, document.enabled AS document_enabled, document.disabled_at AS document_disabled_at, document.status AS document_status, document.updated_at AS document_updated_at, document.created_at AS document_created_at 
FROM document 
WHERE document.id = %(pk_1)s::UUID
[2024-10-05 11:18:45,470.470] base.py -> _exec_single_context line:1908 [INFO]: [cached since 3.229s ago] {'pk_1': UUID('2423b9c3-31df-4f11-90f5-c25196246c3c')}
[2024-10-05 11:18:45,489.489] base.py -> _rollback_impl line:1129 [INFO]: ROLLBACK
[2024-10-05 11:18:45,490.490] _internal.py -> _log line:96 [INFO]: 127.0.0.1 - - [05/Oct/2024 11:18:45] "POST /datasets/f3f28f75-8e60-4eba-b6df-4d1b390bbd89/documents HTTP/1.1" 200 -
[2024-10-05 12:03:39,434.434] base.py -> _begin_impl line:1103 [INFO]: BEGIN (implicit)
[2024-10-05 12:03:39,435.435] base.py -> _exec_single_context line:1903 [INFO]: SELECT dataset.id AS dataset_id, dataset.account_id AS dataset_account_id, dataset.name AS dataset_name, dataset.icon AS dataset_icon, dataset.description AS dataset_description, dataset.updated_at AS dataset_updated_at, dataset.created_at AS dataset_created_at 
FROM dataset 
WHERE dataset.id = %(pk_1)s::UUID
[2024-10-05 12:03:39,435.435] base.py -> _exec_single_context line:1908 [INFO]: [cached since 2698s ago] {'pk_1': UUID('f3f28f75-8e60-4eba-b6df-4d1b390bbd89')}
[2024-10-05 12:03:39,435.435] base.py -> invalidate line:799 [INFO]: Invalidate connection <connection object at 0x0000019972DBEF00; dsn: 'user=postgres password=xxx dbname=llmops host=192.168.8.180 port=5432 client_encoding=utf8', closed: 2> (reason: OperationalError:server closed the connection unexpectedly
	This probably means the server terminated abnormally
	before or while processing the request.
)
[2024-10-05 12:03:39,435.435] http.py -> _register_error_handler line:66 [ERROR]: An error occurred: (psycopg2.OperationalError) server closed the connection unexpectedly
	This probably means the server terminated abnormally
	before or while processing the request.

[SQL: SELECT dataset.id AS dataset_id, dataset.account_id AS dataset_account_id, dataset.name AS dataset_name, dataset.icon AS dataset_icon, dataset.description AS dataset_description, dataset.updated_at AS dataset_updated_at, dataset.created_at AS dataset_created_at 
FROM dataset 
WHERE dataset.id = %(pk_1)s::UUID]
[parameters: {'pk_1': UUID('f3f28f75-8e60-4eba-b6df-4d1b390bbd89')}]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "D:\Code\llmops\llmops-api\venv\lib\site-packages\sqlalchemy\engine\base.py", line 1971, in _exec_single_context
    self.dialect.do_execute(
  File "D:\Code\llmops\llmops-api\venv\lib\site-packages\sqlalchemy\engine\default.py", line 919, in do_execute
    cursor.execute(statement, parameters)
psycopg2.OperationalError: server closed the connection unexpectedly
	This probably means the server terminated abnormally
	before or while processing the request.


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "D:\Code\llmops\llmops-api\venv\lib\site-packages\flask\app.py", line 870, in full_dispatch_request
    rv = self.dispatch_request()
  File "D:\Code\llmops\llmops-api\venv\lib\site-packages\flask\app.py", line 855, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
  File "D:\Code\llmops\llmops-api\internal\handler\document_handler.py", line 32, in create_documents
    documents, batch = self.document_service.create_documents(dataset_id, **req.data)
  File "D:\Code\llmops\llmops-api\internal\service\document_service.py", line 46, in create_documents
    dataset = self.get(Dataset, dataset_id)
  File "D:\Code\llmops\llmops-api\internal\service\base_service.py", line 43, in get
    return self.db.session.query(model).get(primary_key)
  File "<string>", line 2, in get
  File "D:\Code\llmops\llmops-api\venv\lib\site-packages\sqlalchemy\util\deprecations.py", line 386, in warned
    return fn(*args, **kwargs)  # type: ignore[no-any-return]
  File "D:\Code\llmops\llmops-api\venv\lib\site-packages\sqlalchemy\orm\query.py", line 1127, in get
    return self._get_impl(ident, loading.load_on_pk_identity)
  File "D:\Code\llmops\llmops-api\venv\lib\site-packages\sqlalchemy\orm\query.py", line 1136, in _get_impl
    return self.session._get_impl(
  File "D:\Code\llmops\llmops-api\venv\lib\site-packages\sqlalchemy\orm\session.py", line 3817, in _get_impl
    return db_load_fn(
  File "D:\Code\llmops\llmops-api\venv\lib\site-packages\sqlalchemy\orm\loading.py", line 694, in load_on_pk_identity
    session.execute(
  File "D:\Code\llmops\llmops-api\venv\lib\site-packages\sqlalchemy\orm\session.py", line 2306, in execute
    return self._execute_internal(
  File "D:\Code\llmops\llmops-api\venv\lib\site-packages\sqlalchemy\orm\session.py", line 2191, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
  File "D:\Code\llmops\llmops-api\venv\lib\site-packages\sqlalchemy\orm\context.py", line 293, in orm_execute_statement
    result = conn.execute(
  File "D:\Code\llmops\llmops-api\venv\lib\site-packages\sqlalchemy\engine\base.py", line 1422, in execute
    return meth(
  File "D:\Code\llmops\llmops-api\venv\lib\site-packages\sqlalchemy\sql\elements.py", line 514, in _execute_on_connection
    return connection._execute_clauseelement(
  File "D:\Code\llmops\llmops-api\venv\lib\site-packages\sqlalchemy\engine\base.py", line 1644, in _execute_clauseelement
    ret = self._execute_context(
  File "D:\Code\llmops\llmops-api\venv\lib\site-packages\sqlalchemy\engine\base.py", line 1850, in _execute_context
    return self._exec_single_context(
  File "D:\Code\llmops\llmops-api\venv\lib\site-packages\sqlalchemy\engine\base.py", line 1990, in _exec_single_context
    self._handle_dbapi_exception(
  File "D:\Code\llmops\llmops-api\venv\lib\site-packages\sqlalchemy\engine\base.py", line 2357, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "D:\Code\llmops\llmops-api\venv\lib\site-packages\sqlalchemy\engine\base.py", line 1971, in _exec_single_context
    self.dialect.do_execute(
  File "D:\Code\llmops\llmops-api\venv\lib\site-packages\sqlalchemy\engine\default.py", line 919, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (psycopg2.OperationalError) server closed the connection unexpectedly
	This probably means the server terminated abnormally
	before or while processing the request.

[SQL: SELECT dataset.id AS dataset_id, dataset.account_id AS dataset_account_id, dataset.name AS dataset_name, dataset.icon AS dataset_icon, dataset.description AS dataset_description, dataset.updated_at AS dataset_updated_at, dataset.created_at AS dataset_created_at 
FROM dataset 
WHERE dataset.id = %(pk_1)s::UUID]
[parameters: {'pk_1': UUID('f3f28f75-8e60-4eba-b6df-4d1b390bbd89')}]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
[2024-10-05 12:03:39,468.468] _internal.py -> _log line:96 [INFO]: 127.0.0.1 - - [05/Oct/2024 12:03:39] "[35m[1mPOST /datasets/f3f28f75-8e60-4eba-b6df-4d1b390bbd89/documents HTTP/1.1[0m" 500 -
[2024-10-05 12:04:18,385.385] base.py -> _begin_impl line:1103 [INFO]: BEGIN (implicit)
[2024-10-05 12:04:18,385.385] base.py -> _exec_single_context line:1903 [INFO]: SELECT dataset.id AS dataset_id, dataset.account_id AS dataset_account_id, dataset.name AS dataset_name, dataset.icon AS dataset_icon, dataset.description AS dataset_description, dataset.updated_at AS dataset_updated_at, dataset.created_at AS dataset_created_at 
FROM dataset 
WHERE dataset.id = %(pk_1)s::UUID
[2024-10-05 12:04:18,385.385] base.py -> _exec_single_context line:1908 [INFO]: [cached since 2737s ago] {'pk_1': UUID('f3f28f75-8e60-4eba-b6df-4d1b390bbd89')}
[2024-10-05 12:04:18,387.387] base.py -> _exec_single_context line:1903 [INFO]: SELECT upload_file.id AS upload_file_id, upload_file.account_id AS upload_file_account_id, upload_file.name AS upload_file_name, upload_file.key AS upload_file_key, upload_file.size AS upload_file_size, upload_file.extension AS upload_file_extension, upload_file.mime_type AS upload_file_mime_type, upload_file.hash AS upload_file_hash, upload_file.updated_at AS upload_file_updated_at, upload_file.created_at AS upload_file_created_at 
FROM upload_file 
WHERE upload_file.account_id = %(account_id_1)s::UUID AND upload_file.id IN (%(id_1_1)s::UUID, %(id_1_2)s::UUID, %(id_1_3)s::UUID)
[2024-10-05 12:04:18,387.387] base.py -> _exec_single_context line:1908 [INFO]: [cached since 2737s ago] {'account_id_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f', 'id_1_1': '1c32445c-676a-4a61-810b-a4483f310542', 'id_1_2': 'efb8d619-3ff6-452c-9747-5495ae04f63a', 'id_1_3': '3b647fa9-a38f-414a-9318-72c24779389d'}
[2024-10-05 12:04:18,388.388] base.py -> _exec_single_context line:1903 [INFO]: INSERT INTO process_rule (account_id, dataset_id, mode, rule) VALUES (%(account_id)s::UUID, %(dataset_id)s::UUID, %(mode)s, %(rule)s) RETURNING process_rule.id, process_rule.updated_at, process_rule.created_at
[2024-10-05 12:04:18,388.388] base.py -> _exec_single_context line:1908 [INFO]: [cached since 2736s ago] {'account_id': '46db30d1-3199-4e79-a0cd-abf12fa6858f', 'dataset_id': UUID('f3f28f75-8e60-4eba-b6df-4d1b390bbd89'), 'mode': 'automatic', 'rule': '{"pre_process_rules": [{"id": "remove_extra_space", "enabled": true}, {"id": "remove_url_and_email", "enabled": true}], "segment": {"separators": ["\ ... (15 characters truncated) ... "\\u3002|\\uff01|\\uff1f", "\\\\.\\\\s|\\\\!\\\\s|\\\\?\\\\s", "\\uff1b|;\\\\s", "\\uff0c|,\\\\s", " ", ""], "chunk_size": 500, "chunk_overlap": 50}}'}
[2024-10-05 12:04:18,389.389] base.py -> _commit_impl line:1146 [INFO]: COMMIT
[2024-10-05 12:04:18,398.398] base.py -> _begin_impl line:1103 [INFO]: BEGIN (implicit)
[2024-10-05 12:04:18,399.399] base.py -> _exec_single_context line:1903 [INFO]: SELECT document.id AS document_id, document.account_id AS document_account_id, document.dataset_id AS document_dataset_id, document.upload_file_id AS document_upload_file_id, document.process_rule_id AS document_process_rule_id, document.batch AS document_batch, document.name AS document_name, document.position AS document_position, document.character_count AS document_character_count, document.token_count AS document_token_count, document.processing_started_at AS document_processing_started_at, document.parsing_completed_at AS document_parsing_completed_at, document.splitting_completed_at AS document_splitting_completed_at, document.indexing_completed_at AS document_indexing_completed_at, document.completed_at AS document_completed_at, document.stopped_at AS document_stopped_at, document.error AS document_error, document.enabled AS document_enabled, document.disabled_at AS document_disabled_at, document.status AS document_status, document.updated_at AS document_updated_at, document.created_at AS document_created_at 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID ORDER BY document.position DESC 
 LIMIT %(param_1)s
[2024-10-05 12:04:18,399.399] base.py -> _exec_single_context line:1908 [INFO]: [cached since 2736s ago] {'dataset_id_1': UUID('f3f28f75-8e60-4eba-b6df-4d1b390bbd89'), 'param_1': 1}
[2024-10-05 12:04:18,400.400] base.py -> _exec_single_context line:1903 [INFO]: SELECT upload_file.id AS upload_file_id, upload_file.account_id AS upload_file_account_id, upload_file.name AS upload_file_name, upload_file.key AS upload_file_key, upload_file.size AS upload_file_size, upload_file.extension AS upload_file_extension, upload_file.mime_type AS upload_file_mime_type, upload_file.hash AS upload_file_hash, upload_file.updated_at AS upload_file_updated_at, upload_file.created_at AS upload_file_created_at 
FROM upload_file 
WHERE upload_file.id = %(pk_1)s::UUID
[2024-10-05 12:04:18,400.400] base.py -> _exec_single_context line:1908 [INFO]: [cached since 2736s ago] {'pk_1': UUID('1c32445c-676a-4a61-810b-a4483f310542')}
[2024-10-05 12:04:18,401.401] base.py -> _exec_single_context line:1903 [INFO]: SELECT process_rule.id AS process_rule_id, process_rule.account_id AS process_rule_account_id, process_rule.dataset_id AS process_rule_dataset_id, process_rule.mode AS process_rule_mode, process_rule.rule AS process_rule_rule, process_rule.updated_at AS process_rule_updated_at, process_rule.created_at AS process_rule_created_at 
FROM process_rule 
WHERE process_rule.id = %(pk_1)s::UUID
[2024-10-05 12:04:18,401.401] base.py -> _exec_single_context line:1908 [INFO]: [cached since 2736s ago] {'pk_1': UUID('2a41d004-4d99-465c-9b81-527eae666f8d')}
[2024-10-05 12:04:18,401.401] base.py -> _exec_single_context line:1903 [INFO]: INSERT INTO document (account_id, dataset_id, upload_file_id, process_rule_id, batch, name, position, processing_started_at, parsing_completed_at, splitting_completed_at, indexing_completed_at, completed_at, stopped_at, disabled_at) VALUES (%(account_id)s::UUID, %(dataset_id)s::UUID, %(upload_file_id)s::UUID, %(process_rule_id)s::UUID, %(batch)s, %(name)s, %(position)s, %(processing_started_at)s, %(parsing_completed_at)s, %(splitting_completed_at)s, %(indexing_completed_at)s, %(completed_at)s, %(stopped_at)s, %(disabled_at)s) RETURNING document.id, document.character_count, document.token_count, document.error, document.enabled, document.status, document.updated_at, document.created_at
[2024-10-05 12:04:18,401.401] base.py -> _exec_single_context line:1908 [INFO]: [cached since 2736s ago] {'account_id': '46db30d1-3199-4e79-a0cd-abf12fa6858f', 'dataset_id': UUID('f3f28f75-8e60-4eba-b6df-4d1b390bbd89'), 'upload_file_id': UUID('1c32445c-676a-4a61-810b-a4483f310542'), 'process_rule_id': UUID('2a41d004-4d99-465c-9b81-527eae666f8d'), 'batch': '20241005120418287006', 'name': '项目API文档-完整.md', 'position': 20, 'processing_started_at': None, 'parsing_completed_at': None, 'splitting_completed_at': None, 'indexing_completed_at': None, 'completed_at': None, 'stopped_at': None, 'disabled_at': None}
[2024-10-05 12:04:18,403.403] base.py -> _commit_impl line:1146 [INFO]: COMMIT
[2024-10-05 12:04:18,422.422] base.py -> _begin_impl line:1103 [INFO]: BEGIN (implicit)
[2024-10-05 12:04:18,422.422] base.py -> _exec_single_context line:1903 [INFO]: SELECT upload_file.id AS upload_file_id, upload_file.account_id AS upload_file_account_id, upload_file.name AS upload_file_name, upload_file.key AS upload_file_key, upload_file.size AS upload_file_size, upload_file.extension AS upload_file_extension, upload_file.mime_type AS upload_file_mime_type, upload_file.hash AS upload_file_hash, upload_file.updated_at AS upload_file_updated_at, upload_file.created_at AS upload_file_created_at 
FROM upload_file 
WHERE upload_file.id = %(pk_1)s::UUID
[2024-10-05 12:04:18,422.422] base.py -> _exec_single_context line:1908 [INFO]: [cached since 2736s ago] {'pk_1': UUID('efb8d619-3ff6-452c-9747-5495ae04f63a')}
[2024-10-05 12:04:18,423.423] base.py -> _exec_single_context line:1903 [INFO]: SELECT process_rule.id AS process_rule_id, process_rule.account_id AS process_rule_account_id, process_rule.dataset_id AS process_rule_dataset_id, process_rule.mode AS process_rule_mode, process_rule.rule AS process_rule_rule, process_rule.updated_at AS process_rule_updated_at, process_rule.created_at AS process_rule_created_at 
FROM process_rule 
WHERE process_rule.id = %(pk_1)s::UUID
[2024-10-05 12:04:18,423.423] base.py -> _exec_single_context line:1908 [INFO]: [cached since 2736s ago] {'pk_1': UUID('2a41d004-4d99-465c-9b81-527eae666f8d')}
[2024-10-05 12:04:18,424.424] base.py -> _exec_single_context line:1903 [INFO]: INSERT INTO document (account_id, dataset_id, upload_file_id, process_rule_id, batch, name, position, processing_started_at, parsing_completed_at, splitting_completed_at, indexing_completed_at, completed_at, stopped_at, disabled_at) VALUES (%(account_id)s::UUID, %(dataset_id)s::UUID, %(upload_file_id)s::UUID, %(process_rule_id)s::UUID, %(batch)s, %(name)s, %(position)s, %(processing_started_at)s, %(parsing_completed_at)s, %(splitting_completed_at)s, %(indexing_completed_at)s, %(completed_at)s, %(stopped_at)s, %(disabled_at)s) RETURNING document.id, document.character_count, document.token_count, document.error, document.enabled, document.status, document.updated_at, document.created_at
[2024-10-05 12:04:18,424.424] base.py -> _exec_single_context line:1908 [INFO]: [cached since 2736s ago] {'account_id': '46db30d1-3199-4e79-a0cd-abf12fa6858f', 'dataset_id': UUID('f3f28f75-8e60-4eba-b6df-4d1b390bbd89'), 'upload_file_id': UUID('efb8d619-3ff6-452c-9747-5495ae04f63a'), 'process_rule_id': UUID('2a41d004-4d99-465c-9b81-527eae666f8d'), 'batch': '20241005120418287006', 'name': 'LLMOps 项目自定义 API 插件描述集合.md', 'position': 21, 'processing_started_at': None, 'parsing_completed_at': None, 'splitting_completed_at': None, 'indexing_completed_at': None, 'completed_at': None, 'stopped_at': None, 'disabled_at': None}
[2024-10-05 12:04:18,425.425] base.py -> _commit_impl line:1146 [INFO]: COMMIT
[2024-10-05 12:04:18,426.426] base.py -> _begin_impl line:1103 [INFO]: BEGIN (implicit)
[2024-10-05 12:04:18,426.426] base.py -> _exec_single_context line:1903 [INFO]: SELECT upload_file.id AS upload_file_id, upload_file.account_id AS upload_file_account_id, upload_file.name AS upload_file_name, upload_file.key AS upload_file_key, upload_file.size AS upload_file_size, upload_file.extension AS upload_file_extension, upload_file.mime_type AS upload_file_mime_type, upload_file.hash AS upload_file_hash, upload_file.updated_at AS upload_file_updated_at, upload_file.created_at AS upload_file_created_at 
FROM upload_file 
WHERE upload_file.id = %(pk_1)s::UUID
[2024-10-05 12:04:18,426.426] base.py -> _exec_single_context line:1908 [INFO]: [cached since 2736s ago] {'pk_1': UUID('3b647fa9-a38f-414a-9318-72c24779389d')}
[2024-10-05 12:04:18,427.427] base.py -> _exec_single_context line:1903 [INFO]: SELECT process_rule.id AS process_rule_id, process_rule.account_id AS process_rule_account_id, process_rule.dataset_id AS process_rule_dataset_id, process_rule.mode AS process_rule_mode, process_rule.rule AS process_rule_rule, process_rule.updated_at AS process_rule_updated_at, process_rule.created_at AS process_rule_created_at 
FROM process_rule 
WHERE process_rule.id = %(pk_1)s::UUID
[2024-10-05 12:04:18,427.427] base.py -> _exec_single_context line:1908 [INFO]: [cached since 2736s ago] {'pk_1': UUID('2a41d004-4d99-465c-9b81-527eae666f8d')}
[2024-10-05 12:04:18,428.428] base.py -> _exec_single_context line:1903 [INFO]: INSERT INTO document (account_id, dataset_id, upload_file_id, process_rule_id, batch, name, position, processing_started_at, parsing_completed_at, splitting_completed_at, indexing_completed_at, completed_at, stopped_at, disabled_at) VALUES (%(account_id)s::UUID, %(dataset_id)s::UUID, %(upload_file_id)s::UUID, %(process_rule_id)s::UUID, %(batch)s, %(name)s, %(position)s, %(processing_started_at)s, %(parsing_completed_at)s, %(splitting_completed_at)s, %(indexing_completed_at)s, %(completed_at)s, %(stopped_at)s, %(disabled_at)s) RETURNING document.id, document.character_count, document.token_count, document.error, document.enabled, document.status, document.updated_at, document.created_at
[2024-10-05 12:04:18,428.428] base.py -> _exec_single_context line:1908 [INFO]: [cached since 2736s ago] {'account_id': '46db30d1-3199-4e79-a0cd-abf12fa6858f', 'dataset_id': UUID('f3f28f75-8e60-4eba-b6df-4d1b390bbd89'), 'upload_file_id': UUID('3b647fa9-a38f-414a-9318-72c24779389d'), 'process_rule_id': UUID('2a41d004-4d99-465c-9b81-527eae666f8d'), 'batch': '20241005120418287006', 'name': 'LangChain中文文档.md', 'position': 22, 'processing_started_at': None, 'parsing_completed_at': None, 'splitting_completed_at': None, 'indexing_completed_at': None, 'completed_at': None, 'stopped_at': None, 'disabled_at': None}
[2024-10-05 12:04:18,428.428] base.py -> _commit_impl line:1146 [INFO]: COMMIT
[2024-10-05 12:04:18,429.429] base.py -> _begin_impl line:1103 [INFO]: BEGIN (implicit)
[2024-10-05 12:04:18,430.430] base.py -> _exec_single_context line:1903 [INFO]: SELECT document.id AS document_id, document.account_id AS document_account_id, document.dataset_id AS document_dataset_id, document.upload_file_id AS document_upload_file_id, document.process_rule_id AS document_process_rule_id, document.batch AS document_batch, document.name AS document_name, document.position AS document_position, document.character_count AS document_character_count, document.token_count AS document_token_count, document.processing_started_at AS document_processing_started_at, document.parsing_completed_at AS document_parsing_completed_at, document.splitting_completed_at AS document_splitting_completed_at, document.indexing_completed_at AS document_indexing_completed_at, document.completed_at AS document_completed_at, document.stopped_at AS document_stopped_at, document.error AS document_error, document.enabled AS document_enabled, document.disabled_at AS document_disabled_at, document.status AS document_status, document.updated_at AS document_updated_at, document.created_at AS document_created_at 
FROM document 
WHERE document.id = %(pk_1)s::UUID
[2024-10-05 12:04:18,430.430] base.py -> _exec_single_context line:1908 [INFO]: [cached since 2736s ago] {'pk_1': UUID('78893b7b-ecf4-46a1-9dfd-a826af4502e4')}
[2024-10-05 12:04:18,431.431] base.py -> _exec_single_context line:1903 [INFO]: SELECT document.id AS document_id, document.account_id AS document_account_id, document.dataset_id AS document_dataset_id, document.upload_file_id AS document_upload_file_id, document.process_rule_id AS document_process_rule_id, document.batch AS document_batch, document.name AS document_name, document.position AS document_position, document.character_count AS document_character_count, document.token_count AS document_token_count, document.processing_started_at AS document_processing_started_at, document.parsing_completed_at AS document_parsing_completed_at, document.splitting_completed_at AS document_splitting_completed_at, document.indexing_completed_at AS document_indexing_completed_at, document.completed_at AS document_completed_at, document.stopped_at AS document_stopped_at, document.error AS document_error, document.enabled AS document_enabled, document.disabled_at AS document_disabled_at, document.status AS document_status, document.updated_at AS document_updated_at, document.created_at AS document_created_at 
FROM document 
WHERE document.id = %(pk_1)s::UUID
[2024-10-05 12:04:18,431.431] base.py -> _exec_single_context line:1908 [INFO]: [cached since 2736s ago] {'pk_1': UUID('32a1a298-7d7c-4724-bcba-e80f78b3b3e0')}
[2024-10-05 12:04:18,432.432] base.py -> _exec_single_context line:1903 [INFO]: SELECT document.id AS document_id, document.account_id AS document_account_id, document.dataset_id AS document_dataset_id, document.upload_file_id AS document_upload_file_id, document.process_rule_id AS document_process_rule_id, document.batch AS document_batch, document.name AS document_name, document.position AS document_position, document.character_count AS document_character_count, document.token_count AS document_token_count, document.processing_started_at AS document_processing_started_at, document.parsing_completed_at AS document_parsing_completed_at, document.splitting_completed_at AS document_splitting_completed_at, document.indexing_completed_at AS document_indexing_completed_at, document.completed_at AS document_completed_at, document.stopped_at AS document_stopped_at, document.error AS document_error, document.enabled AS document_enabled, document.disabled_at AS document_disabled_at, document.status AS document_status, document.updated_at AS document_updated_at, document.created_at AS document_created_at 
FROM document 
WHERE document.id = %(pk_1)s::UUID
[2024-10-05 12:04:18,432.432] base.py -> _exec_single_context line:1908 [INFO]: [cached since 2736s ago] {'pk_1': UUID('84cf85b5-3a59-41b5-a53e-00ef92bd7f7f')}
[2024-10-05 12:04:18,452.452] base.py -> _rollback_impl line:1129 [INFO]: ROLLBACK
[2024-10-05 12:04:18,452.452] _internal.py -> _log line:96 [INFO]: 127.0.0.1 - - [05/Oct/2024 12:04:18] "POST /datasets/f3f28f75-8e60-4eba-b6df-4d1b390bbd89/documents HTTP/1.1" 200 -
[2024-10-05 12:56:57,135.135] _internal.py -> _log line:96 [INFO]:  * Detected change in 'D:\\Code\\llmops\\llmops-api\\internal\\handler\\app_handler.py', reloading
[2024-10-05 12:56:57,987.987] _internal.py -> _log line:96 [INFO]:  * Restarting with stat
[2024-10-05 12:57:26,716.716] _internal.py -> _log line:96 [WARNING]:  * Debugger is active!
[2024-10-05 12:57:26,718.718] _internal.py -> _log line:96 [INFO]:  * Debugger PIN: 102-324-223
[2024-10-05 13:17:51,776.776] _internal.py -> _log line:96 [INFO]:  * Detected change in 'D:\\Code\\llmops\\llmops-api\\internal\\handler\\app_handler.py', reloading
[2024-10-05 13:17:52,499.499] _internal.py -> _log line:96 [INFO]:  * Restarting with stat
[2024-10-05 13:18:19,692.692] _internal.py -> _log line:96 [WARNING]:  * Debugger is active!
[2024-10-05 13:18:19,694.694] _internal.py -> _log line:96 [INFO]:  * Debugger PIN: 102-324-223
[2024-10-05 13:34:17,779.779] _internal.py -> _log line:96 [INFO]: [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5000
[2024-10-05 13:34:17,779.779] _internal.py -> _log line:96 [INFO]: [33mPress CTRL+C to quit[0m
[2024-10-05 13:34:17,780.780] _internal.py -> _log line:96 [INFO]:  * Restarting with stat
[2024-10-05 13:34:34,281.281] _internal.py -> _log line:96 [WARNING]:  * Debugger is active!
[2024-10-05 13:34:34,284.284] _internal.py -> _log line:96 [INFO]:  * Debugger PIN: 102-324-223
[2024-10-05 13:37:06,306.306] base.py -> _exec_single_context line:1903 [INFO]: select pg_catalog.version()
[2024-10-05 13:37:06,307.307] base.py -> _exec_single_context line:1908 [INFO]: [raw sql] {}
[2024-10-05 13:37:06,308.308] base.py -> _exec_single_context line:1903 [INFO]: select current_schema()
[2024-10-05 13:37:06,308.308] base.py -> _exec_single_context line:1908 [INFO]: [raw sql] {}
[2024-10-05 13:37:06,308.308] base.py -> _exec_single_context line:1903 [INFO]: show standard_conforming_strings
[2024-10-05 13:37:06,308.308] base.py -> _exec_single_context line:1908 [INFO]: [raw sql] {}
[2024-10-05 13:37:06,309.309] base.py -> _begin_impl line:1103 [INFO]: BEGIN (implicit)
[2024-10-05 13:37:06,311.311] base.py -> _exec_single_context line:1903 [INFO]: SELECT dataset.id AS dataset_id, dataset.account_id AS dataset_account_id, dataset.name AS dataset_name, dataset.icon AS dataset_icon, dataset.description AS dataset_description, dataset.updated_at AS dataset_updated_at, dataset.created_at AS dataset_created_at 
FROM dataset 
WHERE dataset.id = %(pk_1)s::UUID
[2024-10-05 13:37:06,311.311] base.py -> _exec_single_context line:1908 [INFO]: [generated in 0.00013s] {'pk_1': UUID('f3f28f75-8e60-4eba-b6df-4d1b390bbd89')}
[2024-10-05 13:37:06,313.313] base.py -> _exec_single_context line:1903 [INFO]: SELECT upload_file.id AS upload_file_id, upload_file.account_id AS upload_file_account_id, upload_file.name AS upload_file_name, upload_file.key AS upload_file_key, upload_file.size AS upload_file_size, upload_file.extension AS upload_file_extension, upload_file.mime_type AS upload_file_mime_type, upload_file.hash AS upload_file_hash, upload_file.updated_at AS upload_file_updated_at, upload_file.created_at AS upload_file_created_at 
FROM upload_file 
WHERE upload_file.account_id = %(account_id_1)s::UUID AND upload_file.id IN (%(id_1_1)s::UUID, %(id_1_2)s::UUID, %(id_1_3)s::UUID)
[2024-10-05 13:37:06,313.313] base.py -> _exec_single_context line:1908 [INFO]: [generated in 0.00020s] {'account_id_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f', 'id_1_1': '1c32445c-676a-4a61-810b-a4483f310542', 'id_1_2': 'efb8d619-3ff6-452c-9747-5495ae04f63a', 'id_1_3': '3b647fa9-a38f-414a-9318-72c24779389d'}
[2024-10-05 13:37:06,315.315] base.py -> _exec_single_context line:1903 [INFO]: INSERT INTO process_rule (account_id, dataset_id, mode, rule) VALUES (%(account_id)s::UUID, %(dataset_id)s::UUID, %(mode)s, %(rule)s) RETURNING process_rule.id, process_rule.updated_at, process_rule.created_at
[2024-10-05 13:37:06,316.316] base.py -> _exec_single_context line:1908 [INFO]: [generated in 0.00021s] {'account_id': '46db30d1-3199-4e79-a0cd-abf12fa6858f', 'dataset_id': UUID('f3f28f75-8e60-4eba-b6df-4d1b390bbd89'), 'mode': 'automatic', 'rule': '{"pre_process_rules": [{"id": "remove_extra_space", "enabled": true}, {"id": "remove_url_and_email", "enabled": true}], "segment": {"separators": ["\ ... (15 characters truncated) ... "\\u3002|\\uff01|\\uff1f", "\\\\.\\\\s|\\\\!\\\\s|\\\\?\\\\s", "\\uff1b|;\\\\s", "\\uff0c|,\\\\s", " ", ""], "chunk_size": 500, "chunk_overlap": 50}}'}
[2024-10-05 13:37:06,317.317] base.py -> _commit_impl line:1146 [INFO]: COMMIT
[2024-10-05 13:37:06,375.375] base.py -> _begin_impl line:1103 [INFO]: BEGIN (implicit)
[2024-10-05 13:37:06,377.377] base.py -> _exec_single_context line:1903 [INFO]: SELECT document.id AS document_id, document.account_id AS document_account_id, document.dataset_id AS document_dataset_id, document.upload_file_id AS document_upload_file_id, document.process_rule_id AS document_process_rule_id, document.batch AS document_batch, document.name AS document_name, document.position AS document_position, document.character_count AS document_character_count, document.token_count AS document_token_count, document.processing_started_at AS document_processing_started_at, document.parsing_completed_at AS document_parsing_completed_at, document.splitting_completed_at AS document_splitting_completed_at, document.indexing_completed_at AS document_indexing_completed_at, document.completed_at AS document_completed_at, document.stopped_at AS document_stopped_at, document.error AS document_error, document.enabled AS document_enabled, document.disabled_at AS document_disabled_at, document.status AS document_status, document.updated_at AS document_updated_at, document.created_at AS document_created_at 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID ORDER BY document.position DESC 
 LIMIT %(param_1)s
[2024-10-05 13:37:06,377.377] base.py -> _exec_single_context line:1908 [INFO]: [generated in 0.00015s] {'dataset_id_1': UUID('f3f28f75-8e60-4eba-b6df-4d1b390bbd89'), 'param_1': 1}
[2024-10-05 13:37:06,379.379] base.py -> _exec_single_context line:1903 [INFO]: SELECT upload_file.id AS upload_file_id, upload_file.account_id AS upload_file_account_id, upload_file.name AS upload_file_name, upload_file.key AS upload_file_key, upload_file.size AS upload_file_size, upload_file.extension AS upload_file_extension, upload_file.mime_type AS upload_file_mime_type, upload_file.hash AS upload_file_hash, upload_file.updated_at AS upload_file_updated_at, upload_file.created_at AS upload_file_created_at 
FROM upload_file 
WHERE upload_file.id = %(pk_1)s::UUID
[2024-10-05 13:37:06,379.379] base.py -> _exec_single_context line:1908 [INFO]: [generated in 0.00018s] {'pk_1': UUID('1c32445c-676a-4a61-810b-a4483f310542')}
[2024-10-05 13:37:06,381.381] base.py -> _exec_single_context line:1903 [INFO]: SELECT process_rule.id AS process_rule_id, process_rule.account_id AS process_rule_account_id, process_rule.dataset_id AS process_rule_dataset_id, process_rule.mode AS process_rule_mode, process_rule.rule AS process_rule_rule, process_rule.updated_at AS process_rule_updated_at, process_rule.created_at AS process_rule_created_at 
FROM process_rule 
WHERE process_rule.id = %(pk_1)s::UUID
[2024-10-05 13:37:06,381.381] base.py -> _exec_single_context line:1908 [INFO]: [generated in 0.00016s] {'pk_1': UUID('fef77abd-cbb7-4000-b378-7186cab5f5dd')}
[2024-10-05 13:37:06,383.383] base.py -> _exec_single_context line:1903 [INFO]: INSERT INTO document (account_id, dataset_id, upload_file_id, process_rule_id, batch, name, position, processing_started_at, parsing_completed_at, splitting_completed_at, indexing_completed_at, completed_at, stopped_at, disabled_at) VALUES (%(account_id)s::UUID, %(dataset_id)s::UUID, %(upload_file_id)s::UUID, %(process_rule_id)s::UUID, %(batch)s, %(name)s, %(position)s, %(processing_started_at)s, %(parsing_completed_at)s, %(splitting_completed_at)s, %(indexing_completed_at)s, %(completed_at)s, %(stopped_at)s, %(disabled_at)s) RETURNING document.id, document.character_count, document.token_count, document.error, document.enabled, document.status, document.updated_at, document.created_at
[2024-10-05 13:37:06,383.383] base.py -> _exec_single_context line:1908 [INFO]: [generated in 0.00023s] {'account_id': '46db30d1-3199-4e79-a0cd-abf12fa6858f', 'dataset_id': UUID('f3f28f75-8e60-4eba-b6df-4d1b390bbd89'), 'upload_file_id': UUID('1c32445c-676a-4a61-810b-a4483f310542'), 'process_rule_id': UUID('fef77abd-cbb7-4000-b378-7186cab5f5dd'), 'batch': '20241005133706945120', 'name': '项目API文档-完整.md', 'position': 23, 'processing_started_at': None, 'parsing_completed_at': None, 'splitting_completed_at': None, 'indexing_completed_at': None, 'completed_at': None, 'stopped_at': None, 'disabled_at': None}
[2024-10-05 13:37:06,384.384] base.py -> _commit_impl line:1146 [INFO]: COMMIT
[2024-10-05 13:37:06,421.421] base.py -> _begin_impl line:1103 [INFO]: BEGIN (implicit)
[2024-10-05 13:37:06,421.421] base.py -> _exec_single_context line:1903 [INFO]: SELECT upload_file.id AS upload_file_id, upload_file.account_id AS upload_file_account_id, upload_file.name AS upload_file_name, upload_file.key AS upload_file_key, upload_file.size AS upload_file_size, upload_file.extension AS upload_file_extension, upload_file.mime_type AS upload_file_mime_type, upload_file.hash AS upload_file_hash, upload_file.updated_at AS upload_file_updated_at, upload_file.created_at AS upload_file_created_at 
FROM upload_file 
WHERE upload_file.id = %(pk_1)s::UUID
[2024-10-05 13:37:06,421.421] base.py -> _exec_single_context line:1908 [INFO]: [cached since 0.04157s ago] {'pk_1': UUID('efb8d619-3ff6-452c-9747-5495ae04f63a')}
[2024-10-05 13:37:06,422.422] base.py -> _exec_single_context line:1903 [INFO]: SELECT process_rule.id AS process_rule_id, process_rule.account_id AS process_rule_account_id, process_rule.dataset_id AS process_rule_dataset_id, process_rule.mode AS process_rule_mode, process_rule.rule AS process_rule_rule, process_rule.updated_at AS process_rule_updated_at, process_rule.created_at AS process_rule_created_at 
FROM process_rule 
WHERE process_rule.id = %(pk_1)s::UUID
[2024-10-05 13:37:06,422.422] base.py -> _exec_single_context line:1908 [INFO]: [cached since 0.04094s ago] {'pk_1': UUID('fef77abd-cbb7-4000-b378-7186cab5f5dd')}
[2024-10-05 13:37:06,423.423] base.py -> _exec_single_context line:1903 [INFO]: INSERT INTO document (account_id, dataset_id, upload_file_id, process_rule_id, batch, name, position, processing_started_at, parsing_completed_at, splitting_completed_at, indexing_completed_at, completed_at, stopped_at, disabled_at) VALUES (%(account_id)s::UUID, %(dataset_id)s::UUID, %(upload_file_id)s::UUID, %(process_rule_id)s::UUID, %(batch)s, %(name)s, %(position)s, %(processing_started_at)s, %(parsing_completed_at)s, %(splitting_completed_at)s, %(indexing_completed_at)s, %(completed_at)s, %(stopped_at)s, %(disabled_at)s) RETURNING document.id, document.character_count, document.token_count, document.error, document.enabled, document.status, document.updated_at, document.created_at
[2024-10-05 13:37:06,423.423] base.py -> _exec_single_context line:1908 [INFO]: [cached since 0.03993s ago] {'account_id': '46db30d1-3199-4e79-a0cd-abf12fa6858f', 'dataset_id': UUID('f3f28f75-8e60-4eba-b6df-4d1b390bbd89'), 'upload_file_id': UUID('efb8d619-3ff6-452c-9747-5495ae04f63a'), 'process_rule_id': UUID('fef77abd-cbb7-4000-b378-7186cab5f5dd'), 'batch': '20241005133706945120', 'name': 'LLMOps 项目自定义 API 插件描述集合.md', 'position': 24, 'processing_started_at': None, 'parsing_completed_at': None, 'splitting_completed_at': None, 'indexing_completed_at': None, 'completed_at': None, 'stopped_at': None, 'disabled_at': None}
[2024-10-05 13:37:06,423.423] base.py -> _commit_impl line:1146 [INFO]: COMMIT
[2024-10-05 13:37:06,465.465] base.py -> _begin_impl line:1103 [INFO]: BEGIN (implicit)
[2024-10-05 13:37:06,466.466] base.py -> _exec_single_context line:1903 [INFO]: SELECT upload_file.id AS upload_file_id, upload_file.account_id AS upload_file_account_id, upload_file.name AS upload_file_name, upload_file.key AS upload_file_key, upload_file.size AS upload_file_size, upload_file.extension AS upload_file_extension, upload_file.mime_type AS upload_file_mime_type, upload_file.hash AS upload_file_hash, upload_file.updated_at AS upload_file_updated_at, upload_file.created_at AS upload_file_created_at 
FROM upload_file 
WHERE upload_file.id = %(pk_1)s::UUID
[2024-10-05 13:37:06,466.466] base.py -> _exec_single_context line:1908 [INFO]: [cached since 0.08601s ago] {'pk_1': UUID('3b647fa9-a38f-414a-9318-72c24779389d')}
[2024-10-05 13:37:06,467.467] base.py -> _exec_single_context line:1903 [INFO]: SELECT process_rule.id AS process_rule_id, process_rule.account_id AS process_rule_account_id, process_rule.dataset_id AS process_rule_dataset_id, process_rule.mode AS process_rule_mode, process_rule.rule AS process_rule_rule, process_rule.updated_at AS process_rule_updated_at, process_rule.created_at AS process_rule_created_at 
FROM process_rule 
WHERE process_rule.id = %(pk_1)s::UUID
[2024-10-05 13:37:06,467.467] base.py -> _exec_single_context line:1908 [INFO]: [cached since 0.08547s ago] {'pk_1': UUID('fef77abd-cbb7-4000-b378-7186cab5f5dd')}
[2024-10-05 13:37:06,467.467] base.py -> _exec_single_context line:1903 [INFO]: INSERT INTO document (account_id, dataset_id, upload_file_id, process_rule_id, batch, name, position, processing_started_at, parsing_completed_at, splitting_completed_at, indexing_completed_at, completed_at, stopped_at, disabled_at) VALUES (%(account_id)s::UUID, %(dataset_id)s::UUID, %(upload_file_id)s::UUID, %(process_rule_id)s::UUID, %(batch)s, %(name)s, %(position)s, %(processing_started_at)s, %(parsing_completed_at)s, %(splitting_completed_at)s, %(indexing_completed_at)s, %(completed_at)s, %(stopped_at)s, %(disabled_at)s) RETURNING document.id, document.character_count, document.token_count, document.error, document.enabled, document.status, document.updated_at, document.created_at
[2024-10-05 13:37:06,468.468] base.py -> _exec_single_context line:1908 [INFO]: [cached since 0.08443s ago] {'account_id': '46db30d1-3199-4e79-a0cd-abf12fa6858f', 'dataset_id': UUID('f3f28f75-8e60-4eba-b6df-4d1b390bbd89'), 'upload_file_id': UUID('3b647fa9-a38f-414a-9318-72c24779389d'), 'process_rule_id': UUID('fef77abd-cbb7-4000-b378-7186cab5f5dd'), 'batch': '20241005133706945120', 'name': 'LangChain中文文档.md', 'position': 25, 'processing_started_at': None, 'parsing_completed_at': None, 'splitting_completed_at': None, 'indexing_completed_at': None, 'completed_at': None, 'stopped_at': None, 'disabled_at': None}
[2024-10-05 13:37:06,468.468] base.py -> _commit_impl line:1146 [INFO]: COMMIT
[2024-10-05 13:37:06,510.510] base.py -> _begin_impl line:1103 [INFO]: BEGIN (implicit)
[2024-10-05 13:37:06,511.511] base.py -> _exec_single_context line:1903 [INFO]: SELECT document.id AS document_id, document.account_id AS document_account_id, document.dataset_id AS document_dataset_id, document.upload_file_id AS document_upload_file_id, document.process_rule_id AS document_process_rule_id, document.batch AS document_batch, document.name AS document_name, document.position AS document_position, document.character_count AS document_character_count, document.token_count AS document_token_count, document.processing_started_at AS document_processing_started_at, document.parsing_completed_at AS document_parsing_completed_at, document.splitting_completed_at AS document_splitting_completed_at, document.indexing_completed_at AS document_indexing_completed_at, document.completed_at AS document_completed_at, document.stopped_at AS document_stopped_at, document.error AS document_error, document.enabled AS document_enabled, document.disabled_at AS document_disabled_at, document.status AS document_status, document.updated_at AS document_updated_at, document.created_at AS document_created_at 
FROM document 
WHERE document.id = %(pk_1)s::UUID
[2024-10-05 13:37:06,511.511] base.py -> _exec_single_context line:1908 [INFO]: [generated in 0.00017s] {'pk_1': UUID('28027a37-e743-459a-9fdf-7271475b326c')}
[2024-10-05 13:37:06,513.513] base.py -> _exec_single_context line:1903 [INFO]: SELECT document.id AS document_id, document.account_id AS document_account_id, document.dataset_id AS document_dataset_id, document.upload_file_id AS document_upload_file_id, document.process_rule_id AS document_process_rule_id, document.batch AS document_batch, document.name AS document_name, document.position AS document_position, document.character_count AS document_character_count, document.token_count AS document_token_count, document.processing_started_at AS document_processing_started_at, document.parsing_completed_at AS document_parsing_completed_at, document.splitting_completed_at AS document_splitting_completed_at, document.indexing_completed_at AS document_indexing_completed_at, document.completed_at AS document_completed_at, document.stopped_at AS document_stopped_at, document.error AS document_error, document.enabled AS document_enabled, document.disabled_at AS document_disabled_at, document.status AS document_status, document.updated_at AS document_updated_at, document.created_at AS document_created_at 
FROM document 
WHERE document.id = %(pk_1)s::UUID
[2024-10-05 13:37:06,513.513] base.py -> _exec_single_context line:1908 [INFO]: [cached since 0.001789s ago] {'pk_1': UUID('d3f2c76f-1778-4321-8d5b-3fb22c46c676')}
[2024-10-05 13:37:06,514.514] base.py -> _exec_single_context line:1903 [INFO]: SELECT document.id AS document_id, document.account_id AS document_account_id, document.dataset_id AS document_dataset_id, document.upload_file_id AS document_upload_file_id, document.process_rule_id AS document_process_rule_id, document.batch AS document_batch, document.name AS document_name, document.position AS document_position, document.character_count AS document_character_count, document.token_count AS document_token_count, document.processing_started_at AS document_processing_started_at, document.parsing_completed_at AS document_parsing_completed_at, document.splitting_completed_at AS document_splitting_completed_at, document.indexing_completed_at AS document_indexing_completed_at, document.completed_at AS document_completed_at, document.stopped_at AS document_stopped_at, document.error AS document_error, document.enabled AS document_enabled, document.disabled_at AS document_disabled_at, document.status AS document_status, document.updated_at AS document_updated_at, document.created_at AS document_created_at 
FROM document 
WHERE document.id = %(pk_1)s::UUID
[2024-10-05 13:37:06,514.514] base.py -> _exec_single_context line:1908 [INFO]: [cached since 0.002837s ago] {'pk_1': UUID('c2b1b8d6-ae68-4d26-b9b3-fc2d4041ac2d')}
[2024-10-05 13:37:06,514.514] base.py -> _rollback_impl line:1129 [INFO]: ROLLBACK
[2024-10-05 13:37:06,515.515] _internal.py -> _log line:96 [INFO]: 127.0.0.1 - - [05/Oct/2024 13:37:06] "POST /datasets/f3f28f75-8e60-4eba-b6df-4d1b390bbd89/documents HTTP/1.1" 200 -
[2024-10-05 15:57:00,613.613] _internal.py -> _log line:96 [INFO]: [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5000
[2024-10-05 15:57:00,614.614] _internal.py -> _log line:96 [INFO]: [33mPress CTRL+C to quit[0m
[2024-10-05 15:57:00,615.615] _internal.py -> _log line:96 [INFO]:  * Restarting with stat
[2024-10-05 15:57:17,745.745] _internal.py -> _log line:96 [WARNING]:  * Debugger is active!
[2024-10-05 15:57:17,747.747] _internal.py -> _log line:96 [INFO]:  * Debugger PIN: 102-324-223
[2024-10-05 15:58:08,681.681] base.py -> _exec_single_context line:1903 [INFO]: select pg_catalog.version()
[2024-10-05 15:58:08,681.681] base.py -> _exec_single_context line:1908 [INFO]: [raw sql] {}
[2024-10-05 15:58:08,683.683] base.py -> _exec_single_context line:1903 [INFO]: select current_schema()
[2024-10-05 15:58:08,684.684] base.py -> _exec_single_context line:1908 [INFO]: [raw sql] {}
[2024-10-05 15:58:08,685.685] base.py -> _exec_single_context line:1903 [INFO]: show standard_conforming_strings
[2024-10-05 15:58:08,685.685] base.py -> _exec_single_context line:1908 [INFO]: [raw sql] {}
[2024-10-05 15:58:08,685.685] base.py -> _begin_impl line:1103 [INFO]: BEGIN (implicit)
[2024-10-05 15:58:08,688.688] base.py -> _exec_single_context line:1903 [INFO]: SELECT dataset.id AS dataset_id, dataset.account_id AS dataset_account_id, dataset.name AS dataset_name, dataset.icon AS dataset_icon, dataset.description AS dataset_description, dataset.updated_at AS dataset_updated_at, dataset.created_at AS dataset_created_at 
FROM dataset 
WHERE dataset.id = %(pk_1)s::UUID
[2024-10-05 15:58:08,688.688] base.py -> _exec_single_context line:1908 [INFO]: [generated in 0.00022s] {'pk_1': UUID('f3f28f75-8e60-4eba-b6df-4d1b390bbd89')}
[2024-10-05 15:58:08,691.691] base.py -> _exec_single_context line:1903 [INFO]: SELECT upload_file.id AS upload_file_id, upload_file.account_id AS upload_file_account_id, upload_file.name AS upload_file_name, upload_file.key AS upload_file_key, upload_file.size AS upload_file_size, upload_file.extension AS upload_file_extension, upload_file.mime_type AS upload_file_mime_type, upload_file.hash AS upload_file_hash, upload_file.updated_at AS upload_file_updated_at, upload_file.created_at AS upload_file_created_at 
FROM upload_file 
WHERE upload_file.account_id = %(account_id_1)s::UUID AND upload_file.id IN (%(id_1_1)s::UUID, %(id_1_2)s::UUID, %(id_1_3)s::UUID)
[2024-10-05 15:58:08,691.691] base.py -> _exec_single_context line:1908 [INFO]: [generated in 0.00027s] {'account_id_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f', 'id_1_1': '1c32445c-676a-4a61-810b-a4483f310542', 'id_1_2': 'efb8d619-3ff6-452c-9747-5495ae04f63a', 'id_1_3': '3b647fa9-a38f-414a-9318-72c24779389d'}
[2024-10-05 15:58:08,694.694] base.py -> _exec_single_context line:1903 [INFO]: INSERT INTO process_rule (account_id, dataset_id, mode, rule) VALUES (%(account_id)s::UUID, %(dataset_id)s::UUID, %(mode)s, %(rule)s) RETURNING process_rule.id, process_rule.updated_at, process_rule.created_at
[2024-10-05 15:58:08,695.695] base.py -> _exec_single_context line:1908 [INFO]: [generated in 0.00026s] {'account_id': '46db30d1-3199-4e79-a0cd-abf12fa6858f', 'dataset_id': UUID('f3f28f75-8e60-4eba-b6df-4d1b390bbd89'), 'mode': 'automatic', 'rule': '{"pre_process_rules": [{"id": "remove_extra_space", "enabled": true}, {"id": "remove_url_and_email", "enabled": true}], "segment": {"separators": ["\ ... (15 characters truncated) ... "\\u3002|\\uff01|\\uff1f", "\\\\.\\\\s|\\\\!\\\\s|\\\\?\\\\s", "\\uff1b|;\\\\s", "\\uff0c|,\\\\s", " ", ""], "chunk_size": 500, "chunk_overlap": 50}}'}
[2024-10-05 15:58:08,696.696] base.py -> _commit_impl line:1146 [INFO]: COMMIT
[2024-10-05 15:58:08,707.707] base.py -> _begin_impl line:1103 [INFO]: BEGIN (implicit)
[2024-10-05 15:58:08,710.710] base.py -> _exec_single_context line:1903 [INFO]: SELECT document.id AS document_id, document.account_id AS document_account_id, document.dataset_id AS document_dataset_id, document.upload_file_id AS document_upload_file_id, document.process_rule_id AS document_process_rule_id, document.batch AS document_batch, document.name AS document_name, document.position AS document_position, document.character_count AS document_character_count, document.token_count AS document_token_count, document.processing_started_at AS document_processing_started_at, document.parsing_completed_at AS document_parsing_completed_at, document.splitting_completed_at AS document_splitting_completed_at, document.indexing_completed_at AS document_indexing_completed_at, document.completed_at AS document_completed_at, document.stopped_at AS document_stopped_at, document.error AS document_error, document.enabled AS document_enabled, document.disabled_at AS document_disabled_at, document.status AS document_status, document.updated_at AS document_updated_at, document.created_at AS document_created_at 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID ORDER BY document.position DESC 
 LIMIT %(param_1)s
[2024-10-05 15:58:08,710.710] base.py -> _exec_single_context line:1908 [INFO]: [generated in 0.00030s] {'dataset_id_1': UUID('f3f28f75-8e60-4eba-b6df-4d1b390bbd89'), 'param_1': 1}
[2024-10-05 15:58:08,713.713] base.py -> _exec_single_context line:1903 [INFO]: SELECT upload_file.id AS upload_file_id, upload_file.account_id AS upload_file_account_id, upload_file.name AS upload_file_name, upload_file.key AS upload_file_key, upload_file.size AS upload_file_size, upload_file.extension AS upload_file_extension, upload_file.mime_type AS upload_file_mime_type, upload_file.hash AS upload_file_hash, upload_file.updated_at AS upload_file_updated_at, upload_file.created_at AS upload_file_created_at 
FROM upload_file 
WHERE upload_file.id = %(pk_1)s::UUID
[2024-10-05 15:58:08,713.713] base.py -> _exec_single_context line:1908 [INFO]: [generated in 0.00022s] {'pk_1': UUID('1c32445c-676a-4a61-810b-a4483f310542')}
[2024-10-05 15:58:08,714.714] base.py -> _exec_single_context line:1903 [INFO]: SELECT process_rule.id AS process_rule_id, process_rule.account_id AS process_rule_account_id, process_rule.dataset_id AS process_rule_dataset_id, process_rule.mode AS process_rule_mode, process_rule.rule AS process_rule_rule, process_rule.updated_at AS process_rule_updated_at, process_rule.created_at AS process_rule_created_at 
FROM process_rule 
WHERE process_rule.id = %(pk_1)s::UUID
[2024-10-05 15:58:08,715.715] base.py -> _exec_single_context line:1908 [INFO]: [generated in 0.00022s] {'pk_1': UUID('e4065f06-2dec-4cb2-a4d5-56d248ffb1ff')}
[2024-10-05 15:58:08,717.717] base.py -> _exec_single_context line:1903 [INFO]: INSERT INTO document (account_id, dataset_id, upload_file_id, process_rule_id, batch, name, position, processing_started_at, parsing_completed_at, splitting_completed_at, indexing_completed_at, completed_at, stopped_at, disabled_at) VALUES (%(account_id)s::UUID, %(dataset_id)s::UUID, %(upload_file_id)s::UUID, %(process_rule_id)s::UUID, %(batch)s, %(name)s, %(position)s, %(processing_started_at)s, %(parsing_completed_at)s, %(splitting_completed_at)s, %(indexing_completed_at)s, %(completed_at)s, %(stopped_at)s, %(disabled_at)s) RETURNING document.id, document.character_count, document.token_count, document.error, document.enabled, document.status, document.updated_at, document.created_at
[2024-10-05 15:58:08,718.718] base.py -> _exec_single_context line:1908 [INFO]: [generated in 0.00029s] {'account_id': '46db30d1-3199-4e79-a0cd-abf12fa6858f', 'dataset_id': UUID('f3f28f75-8e60-4eba-b6df-4d1b390bbd89'), 'upload_file_id': UUID('1c32445c-676a-4a61-810b-a4483f310542'), 'process_rule_id': UUID('e4065f06-2dec-4cb2-a4d5-56d248ffb1ff'), 'batch': '20241005155808824038', 'name': '项目API文档-完整.md', 'position': 1, 'processing_started_at': None, 'parsing_completed_at': None, 'splitting_completed_at': None, 'indexing_completed_at': None, 'completed_at': None, 'stopped_at': None, 'disabled_at': None}
[2024-10-05 15:58:08,719.719] base.py -> _commit_impl line:1146 [INFO]: COMMIT
[2024-10-05 15:58:08,722.722] base.py -> _begin_impl line:1103 [INFO]: BEGIN (implicit)
[2024-10-05 15:58:08,723.723] base.py -> _exec_single_context line:1903 [INFO]: SELECT upload_file.id AS upload_file_id, upload_file.account_id AS upload_file_account_id, upload_file.name AS upload_file_name, upload_file.key AS upload_file_key, upload_file.size AS upload_file_size, upload_file.extension AS upload_file_extension, upload_file.mime_type AS upload_file_mime_type, upload_file.hash AS upload_file_hash, upload_file.updated_at AS upload_file_updated_at, upload_file.created_at AS upload_file_created_at 
FROM upload_file 
WHERE upload_file.id = %(pk_1)s::UUID
[2024-10-05 15:58:08,723.723] base.py -> _exec_single_context line:1908 [INFO]: [cached since 0.009995s ago] {'pk_1': UUID('efb8d619-3ff6-452c-9747-5495ae04f63a')}
[2024-10-05 15:58:08,724.724] base.py -> _exec_single_context line:1903 [INFO]: SELECT process_rule.id AS process_rule_id, process_rule.account_id AS process_rule_account_id, process_rule.dataset_id AS process_rule_dataset_id, process_rule.mode AS process_rule_mode, process_rule.rule AS process_rule_rule, process_rule.updated_at AS process_rule_updated_at, process_rule.created_at AS process_rule_created_at 
FROM process_rule 
WHERE process_rule.id = %(pk_1)s::UUID
[2024-10-05 15:58:08,724.724] base.py -> _exec_single_context line:1908 [INFO]: [cached since 0.009474s ago] {'pk_1': UUID('e4065f06-2dec-4cb2-a4d5-56d248ffb1ff')}
[2024-10-05 15:58:08,725.725] base.py -> _exec_single_context line:1903 [INFO]: INSERT INTO document (account_id, dataset_id, upload_file_id, process_rule_id, batch, name, position, processing_started_at, parsing_completed_at, splitting_completed_at, indexing_completed_at, completed_at, stopped_at, disabled_at) VALUES (%(account_id)s::UUID, %(dataset_id)s::UUID, %(upload_file_id)s::UUID, %(process_rule_id)s::UUID, %(batch)s, %(name)s, %(position)s, %(processing_started_at)s, %(parsing_completed_at)s, %(splitting_completed_at)s, %(indexing_completed_at)s, %(completed_at)s, %(stopped_at)s, %(disabled_at)s) RETURNING document.id, document.character_count, document.token_count, document.error, document.enabled, document.status, document.updated_at, document.created_at
[2024-10-05 15:58:08,725.725] base.py -> _exec_single_context line:1908 [INFO]: [cached since 0.007735s ago] {'account_id': '46db30d1-3199-4e79-a0cd-abf12fa6858f', 'dataset_id': UUID('f3f28f75-8e60-4eba-b6df-4d1b390bbd89'), 'upload_file_id': UUID('efb8d619-3ff6-452c-9747-5495ae04f63a'), 'process_rule_id': UUID('e4065f06-2dec-4cb2-a4d5-56d248ffb1ff'), 'batch': '20241005155808824038', 'name': 'LLMOps 项目自定义 API 插件描述集合.md', 'position': 2, 'processing_started_at': None, 'parsing_completed_at': None, 'splitting_completed_at': None, 'indexing_completed_at': None, 'completed_at': None, 'stopped_at': None, 'disabled_at': None}
[2024-10-05 15:58:08,726.726] base.py -> _commit_impl line:1146 [INFO]: COMMIT
[2024-10-05 15:58:08,727.727] base.py -> _begin_impl line:1103 [INFO]: BEGIN (implicit)
[2024-10-05 15:58:08,728.728] base.py -> _exec_single_context line:1903 [INFO]: SELECT upload_file.id AS upload_file_id, upload_file.account_id AS upload_file_account_id, upload_file.name AS upload_file_name, upload_file.key AS upload_file_key, upload_file.size AS upload_file_size, upload_file.extension AS upload_file_extension, upload_file.mime_type AS upload_file_mime_type, upload_file.hash AS upload_file_hash, upload_file.updated_at AS upload_file_updated_at, upload_file.created_at AS upload_file_created_at 
FROM upload_file 
WHERE upload_file.id = %(pk_1)s::UUID
[2024-10-05 15:58:08,728.728] base.py -> _exec_single_context line:1908 [INFO]: [cached since 0.01474s ago] {'pk_1': UUID('3b647fa9-a38f-414a-9318-72c24779389d')}
[2024-10-05 15:58:08,729.729] base.py -> _exec_single_context line:1903 [INFO]: SELECT process_rule.id AS process_rule_id, process_rule.account_id AS process_rule_account_id, process_rule.dataset_id AS process_rule_dataset_id, process_rule.mode AS process_rule_mode, process_rule.rule AS process_rule_rule, process_rule.updated_at AS process_rule_updated_at, process_rule.created_at AS process_rule_created_at 
FROM process_rule 
WHERE process_rule.id = %(pk_1)s::UUID
[2024-10-05 15:58:08,729.729] base.py -> _exec_single_context line:1908 [INFO]: [cached since 0.01411s ago] {'pk_1': UUID('e4065f06-2dec-4cb2-a4d5-56d248ffb1ff')}
[2024-10-05 15:58:08,730.730] base.py -> _exec_single_context line:1903 [INFO]: INSERT INTO document (account_id, dataset_id, upload_file_id, process_rule_id, batch, name, position, processing_started_at, parsing_completed_at, splitting_completed_at, indexing_completed_at, completed_at, stopped_at, disabled_at) VALUES (%(account_id)s::UUID, %(dataset_id)s::UUID, %(upload_file_id)s::UUID, %(process_rule_id)s::UUID, %(batch)s, %(name)s, %(position)s, %(processing_started_at)s, %(parsing_completed_at)s, %(splitting_completed_at)s, %(indexing_completed_at)s, %(completed_at)s, %(stopped_at)s, %(disabled_at)s) RETURNING document.id, document.character_count, document.token_count, document.error, document.enabled, document.status, document.updated_at, document.created_at
[2024-10-05 15:58:08,730.730] base.py -> _exec_single_context line:1908 [INFO]: [cached since 0.01233s ago] {'account_id': '46db30d1-3199-4e79-a0cd-abf12fa6858f', 'dataset_id': UUID('f3f28f75-8e60-4eba-b6df-4d1b390bbd89'), 'upload_file_id': UUID('3b647fa9-a38f-414a-9318-72c24779389d'), 'process_rule_id': UUID('e4065f06-2dec-4cb2-a4d5-56d248ffb1ff'), 'batch': '20241005155808824038', 'name': 'LangChain中文文档.md', 'position': 3, 'processing_started_at': None, 'parsing_completed_at': None, 'splitting_completed_at': None, 'indexing_completed_at': None, 'completed_at': None, 'stopped_at': None, 'disabled_at': None}
[2024-10-05 15:58:08,731.731] base.py -> _commit_impl line:1146 [INFO]: COMMIT
[2024-10-05 15:58:08,738.738] base.py -> _begin_impl line:1103 [INFO]: BEGIN (implicit)
[2024-10-05 15:58:08,739.739] base.py -> _exec_single_context line:1903 [INFO]: SELECT document.id AS document_id, document.account_id AS document_account_id, document.dataset_id AS document_dataset_id, document.upload_file_id AS document_upload_file_id, document.process_rule_id AS document_process_rule_id, document.batch AS document_batch, document.name AS document_name, document.position AS document_position, document.character_count AS document_character_count, document.token_count AS document_token_count, document.processing_started_at AS document_processing_started_at, document.parsing_completed_at AS document_parsing_completed_at, document.splitting_completed_at AS document_splitting_completed_at, document.indexing_completed_at AS document_indexing_completed_at, document.completed_at AS document_completed_at, document.stopped_at AS document_stopped_at, document.error AS document_error, document.enabled AS document_enabled, document.disabled_at AS document_disabled_at, document.status AS document_status, document.updated_at AS document_updated_at, document.created_at AS document_created_at 
FROM document 
WHERE document.id = %(pk_1)s::UUID
[2024-10-05 15:58:08,739.739] base.py -> _exec_single_context line:1908 [INFO]: [generated in 0.00024s] {'pk_1': UUID('ddc3b7dd-ab3c-477a-ae03-337073332a1c')}
[2024-10-05 15:58:08,740.740] base.py -> _exec_single_context line:1903 [INFO]: SELECT document.id AS document_id, document.account_id AS document_account_id, document.dataset_id AS document_dataset_id, document.upload_file_id AS document_upload_file_id, document.process_rule_id AS document_process_rule_id, document.batch AS document_batch, document.name AS document_name, document.position AS document_position, document.character_count AS document_character_count, document.token_count AS document_token_count, document.processing_started_at AS document_processing_started_at, document.parsing_completed_at AS document_parsing_completed_at, document.splitting_completed_at AS document_splitting_completed_at, document.indexing_completed_at AS document_indexing_completed_at, document.completed_at AS document_completed_at, document.stopped_at AS document_stopped_at, document.error AS document_error, document.enabled AS document_enabled, document.disabled_at AS document_disabled_at, document.status AS document_status, document.updated_at AS document_updated_at, document.created_at AS document_created_at 
FROM document 
WHERE document.id = %(pk_1)s::UUID
[2024-10-05 15:58:08,740.740] base.py -> _exec_single_context line:1908 [INFO]: [cached since 0.001916s ago] {'pk_1': UUID('18c30ffb-6fa9-4d86-8621-c5096d210954')}
[2024-10-05 15:58:08,741.741] base.py -> _exec_single_context line:1903 [INFO]: SELECT document.id AS document_id, document.account_id AS document_account_id, document.dataset_id AS document_dataset_id, document.upload_file_id AS document_upload_file_id, document.process_rule_id AS document_process_rule_id, document.batch AS document_batch, document.name AS document_name, document.position AS document_position, document.character_count AS document_character_count, document.token_count AS document_token_count, document.processing_started_at AS document_processing_started_at, document.parsing_completed_at AS document_parsing_completed_at, document.splitting_completed_at AS document_splitting_completed_at, document.indexing_completed_at AS document_indexing_completed_at, document.completed_at AS document_completed_at, document.stopped_at AS document_stopped_at, document.error AS document_error, document.enabled AS document_enabled, document.disabled_at AS document_disabled_at, document.status AS document_status, document.updated_at AS document_updated_at, document.created_at AS document_created_at 
FROM document 
WHERE document.id = %(pk_1)s::UUID
[2024-10-05 15:58:08,741.741] base.py -> _exec_single_context line:1908 [INFO]: [cached since 0.003028s ago] {'pk_1': UUID('487f3d02-f716-48d7-91be-230df4f61bd7')}
[2024-10-05 15:58:08,810.810] base.py -> _rollback_impl line:1129 [INFO]: ROLLBACK
[2024-10-05 15:58:08,810.810] _internal.py -> _log line:96 [INFO]: 127.0.0.1 - - [05/Oct/2024 15:58:08] "POST /datasets/f3f28f75-8e60-4eba-b6df-4d1b390bbd89/documents HTTP/1.1" 200 -
[2024-10-05 16:31:55,690.690] _internal.py -> _log line:96 [INFO]: [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5000
[2024-10-05 16:31:55,690.690] _internal.py -> _log line:96 [INFO]: [33mPress CTRL+C to quit[0m
[2024-10-05 16:31:55,692.692] _internal.py -> _log line:96 [INFO]:  * Restarting with stat
[2024-10-05 16:32:13,451.451] _internal.py -> _log line:96 [WARNING]:  * Debugger is active!
[2024-10-05 16:32:13,457.457] _internal.py -> _log line:96 [INFO]:  * Debugger PIN: 102-324-223
[2024-10-05 16:57:10,785.785] _internal.py -> _log line:96 [INFO]:  * Detected change in 'D:\\Code\\llmops\\llmops-api\\internal\\service\\indexing_service.py', reloading
[2024-10-05 16:57:11,408.408] _internal.py -> _log line:96 [INFO]:  * Restarting with stat
[2024-10-05 16:57:27,661.661] _internal.py -> _log line:96 [WARNING]:  * Debugger is active!
[2024-10-05 16:57:27,664.664] _internal.py -> _log line:96 [INFO]:  * Debugger PIN: 102-324-223
[2024-10-05 21:11:09,700.700] _internal.py -> _log line:96 [INFO]:  * Detected change in 'D:\\Code\\llmops\\llmops-api\\internal\\service\\indexing_service.py', reloading
[2024-10-05 21:11:10,511.511] _internal.py -> _log line:96 [INFO]:  * Restarting with stat
[2024-10-05 21:11:26,440.440] _internal.py -> _log line:96 [WARNING]:  * Debugger is active!
[2024-10-05 21:11:26,443.443] _internal.py -> _log line:96 [INFO]:  * Debugger PIN: 102-324-223
[2024-10-05 21:12:09,533.533] _internal.py -> _log line:96 [INFO]:  * Detected change in 'D:\\Code\\llmops\\llmops-api\\internal\\service\\indexing_service.py', reloading
[2024-10-05 21:12:10,125.125] _internal.py -> _log line:96 [INFO]:  * Restarting with stat
[2024-10-05 21:12:26,037.037] _internal.py -> _log line:96 [WARNING]:  * Debugger is active!
[2024-10-05 21:12:26,039.039] _internal.py -> _log line:96 [INFO]:  * Debugger PIN: 102-324-223
[2024-10-05 21:14:48,311.311] _internal.py -> _log line:96 [INFO]:  * Detected change in 'D:\\Code\\llmops\\llmops-api\\internal\\service\\keyword_table_service.py', reloading
[2024-10-05 21:14:48,978.978] _internal.py -> _log line:96 [INFO]:  * Restarting with stat
[2024-10-05 21:15:05,286.286] _internal.py -> _log line:96 [WARNING]:  * Debugger is active!
[2024-10-05 21:15:05,288.288] _internal.py -> _log line:96 [INFO]:  * Debugger PIN: 102-324-223
[2024-10-05 21:16:50,415.415] _internal.py -> _log line:96 [INFO]:  * Detected change in 'D:\\Code\\llmops\\llmops-api\\internal\\service\\keyword_table_service.py', reloading
[2024-10-05 21:16:51,086.086] _internal.py -> _log line:96 [INFO]:  * Restarting with stat
[2024-10-05 21:17:07,779.779] _internal.py -> _log line:96 [WARNING]:  * Debugger is active!
[2024-10-05 21:17:07,782.782] _internal.py -> _log line:96 [INFO]:  * Debugger PIN: 102-324-223
[2024-10-05 21:17:09,555.555] _internal.py -> _log line:96 [INFO]:  * Detected change in 'D:\\Code\\llmops\\llmops-api\\internal\\service\\__init__.py', reloading
[2024-10-05 21:17:10,227.227] _internal.py -> _log line:96 [INFO]:  * Restarting with stat
[2024-10-05 21:17:27,030.030] _internal.py -> _log line:96 [WARNING]:  * Debugger is active!
[2024-10-05 21:17:27,032.032] _internal.py -> _log line:96 [INFO]:  * Debugger PIN: 102-324-223
[2024-10-05 21:18:51,535.535] _internal.py -> _log line:96 [INFO]:  * Detected change in 'D:\\Code\\llmops\\llmops-api\\internal\\service\\indexing_service.py', reloading
[2024-10-05 21:18:52,282.282] _internal.py -> _log line:96 [INFO]:  * Restarting with stat
[2024-10-05 21:19:08,261.261] _internal.py -> _log line:96 [WARNING]:  * Debugger is active!
[2024-10-05 21:19:08,263.263] _internal.py -> _log line:96 [INFO]:  * Debugger PIN: 102-324-223
[2024-10-05 21:22:30,602.602] _internal.py -> _log line:96 [INFO]:  * Detected change in 'D:\\Code\\llmops\\llmops-api\\internal\\service\\indexing_service.py', reloading
[2024-10-05 21:22:31,278.278] _internal.py -> _log line:96 [INFO]:  * Restarting with stat
[2024-10-05 21:22:46,825.825] _internal.py -> _log line:96 [WARNING]:  * Debugger is active!
[2024-10-05 21:22:46,827.827] _internal.py -> _log line:96 [INFO]:  * Debugger PIN: 102-324-223
[2024-10-05 21:23:24,908.908] _internal.py -> _log line:96 [INFO]:  * Detected change in 'D:\\Code\\llmops\\llmops-api\\internal\\service\\indexing_service.py', reloading
[2024-10-05 21:23:25,607.607] _internal.py -> _log line:96 [INFO]:  * Restarting with stat
[2024-10-05 21:23:44,176.176] _internal.py -> _log line:96 [WARNING]:  * Debugger is active!
[2024-10-05 21:23:44,179.179] _internal.py -> _log line:96 [INFO]:  * Debugger PIN: 102-324-223
[2024-10-05 21:28:28,997.997] _internal.py -> _log line:96 [INFO]:  * Detected change in 'D:\\Code\\llmops\\llmops-api\\internal\\service\\indexing_service.py', reloading
[2024-10-05 21:28:29,689.689] _internal.py -> _log line:96 [INFO]:  * Restarting with stat
[2024-10-05 21:28:46,122.122] _internal.py -> _log line:96 [WARNING]:  * Debugger is active!
[2024-10-05 21:28:46,123.123] _internal.py -> _log line:96 [INFO]:  * Debugger PIN: 102-324-223
[2024-10-05 21:32:13,233.233] _internal.py -> _log line:96 [INFO]:  * Detected change in 'D:\\Code\\llmops\\llmops-api\\internal\\service\\indexing_service.py', reloading
[2024-10-05 21:32:13,914.914] _internal.py -> _log line:96 [INFO]:  * Restarting with stat
[2024-10-05 21:32:28,694.694] _internal.py -> _log line:96 [WARNING]:  * Debugger is active!
[2024-10-05 21:32:28,696.696] _internal.py -> _log line:96 [INFO]:  * Debugger PIN: 102-324-223
[2024-10-05 21:33:42,823.823] _internal.py -> _log line:96 [INFO]:  * Detected change in 'D:\\Code\\llmops\\llmops-api\\internal\\service\\indexing_service.py', reloading
[2024-10-05 21:33:43,438.438] _internal.py -> _log line:96 [INFO]:  * Restarting with stat
[2024-10-05 21:33:59,407.407] _internal.py -> _log line:96 [WARNING]:  * Debugger is active!
[2024-10-05 21:33:59,409.409] _internal.py -> _log line:96 [INFO]:  * Debugger PIN: 102-324-223
[2024-10-05 21:34:29,333.333] _internal.py -> _log line:96 [INFO]: [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5000
[2024-10-05 21:34:29,333.333] _internal.py -> _log line:96 [INFO]: [33mPress CTRL+C to quit[0m
[2024-10-05 21:34:29,334.334] _internal.py -> _log line:96 [INFO]:  * Restarting with stat
[2024-10-05 21:34:45,603.603] _internal.py -> _log line:96 [WARNING]:  * Debugger is active!
[2024-10-05 21:34:45,605.605] _internal.py -> _log line:96 [INFO]:  * Debugger PIN: 102-324-223
[2024-10-05 21:39:46,654.654] base.py -> _exec_single_context line:1903 [INFO]: select pg_catalog.version()
[2024-10-05 21:39:46,654.654] base.py -> _exec_single_context line:1908 [INFO]: [raw sql] {}
[2024-10-05 21:39:46,655.655] base.py -> _exec_single_context line:1903 [INFO]: select current_schema()
[2024-10-05 21:39:46,656.656] base.py -> _exec_single_context line:1908 [INFO]: [raw sql] {}
[2024-10-05 21:39:46,656.656] base.py -> _exec_single_context line:1903 [INFO]: show standard_conforming_strings
[2024-10-05 21:39:46,656.656] base.py -> _exec_single_context line:1908 [INFO]: [raw sql] {}
[2024-10-05 21:39:46,657.657] base.py -> _begin_impl line:1103 [INFO]: BEGIN (implicit)
[2024-10-05 21:39:46,659.659] base.py -> _exec_single_context line:1903 [INFO]: INSERT INTO upload_file (account_id, name, key, size, extension, mime_type, hash) VALUES (%(account_id)s::UUID, %(name)s, %(key)s, %(size)s, %(extension)s, %(mime_type)s, %(hash)s) RETURNING upload_file.id, upload_file.updated_at, upload_file.created_at
[2024-10-05 21:39:46,659.659] base.py -> _exec_single_context line:1908 [INFO]: [generated in 0.00024s] {'account_id': '46db30d1-3199-4e79-a0cd-abf12fa6858f', 'name': '项目API文档-完整.md', 'key': '2024/10/05/709df023-0393-436d-a6b5-605d3a396242.md', 'size': 94003, 'extension': 'md', 'mime_type': 'text/markdown', 'hash': 'f6cb33757f54eff8657045657c8123a8175d36f4be4db2cea80731856d021e03'}
[2024-10-05 21:39:46,661.661] base.py -> _commit_impl line:1146 [INFO]: COMMIT
[2024-10-05 21:39:46,712.712] base.py -> _begin_impl line:1103 [INFO]: BEGIN (implicit)
[2024-10-05 21:39:46,714.714] base.py -> _exec_single_context line:1903 [INFO]: SELECT upload_file.id AS upload_file_id, upload_file.account_id AS upload_file_account_id, upload_file.name AS upload_file_name, upload_file.key AS upload_file_key, upload_file.size AS upload_file_size, upload_file.extension AS upload_file_extension, upload_file.mime_type AS upload_file_mime_type, upload_file.hash AS upload_file_hash, upload_file.updated_at AS upload_file_updated_at, upload_file.created_at AS upload_file_created_at 
FROM upload_file 
WHERE upload_file.id = %(pk_1)s::UUID
[2024-10-05 21:39:46,715.715] base.py -> _exec_single_context line:1908 [INFO]: [generated in 0.00027s] {'pk_1': UUID('8728b357-a69f-4100-a966-657abec58de6')}
[2024-10-05 21:39:46,717.717] base.py -> _rollback_impl line:1129 [INFO]: ROLLBACK
[2024-10-05 21:39:46,717.717] _internal.py -> _log line:96 [INFO]: 127.0.0.1 - - [05/Oct/2024 21:39:46] "POST /upload-files/file HTTP/1.1" 200 -
[2024-10-05 21:40:06,219.219] base.py -> _begin_impl line:1103 [INFO]: BEGIN (implicit)
[2024-10-05 21:40:06,221.221] base.py -> _exec_single_context line:1903 [INFO]: SELECT dataset.id AS dataset_id, dataset.account_id AS dataset_account_id, dataset.name AS dataset_name, dataset.icon AS dataset_icon, dataset.description AS dataset_description, dataset.updated_at AS dataset_updated_at, dataset.created_at AS dataset_created_at 
FROM dataset 
WHERE dataset.id = %(pk_1)s::UUID
[2024-10-05 21:40:06,221.221] base.py -> _exec_single_context line:1908 [INFO]: [generated in 0.00021s] {'pk_1': UUID('f3f28f75-8e60-4eba-b6df-4d1b390bbd89')}
[2024-10-05 21:40:06,224.224] base.py -> _exec_single_context line:1903 [INFO]: SELECT upload_file.id AS upload_file_id, upload_file.account_id AS upload_file_account_id, upload_file.name AS upload_file_name, upload_file.key AS upload_file_key, upload_file.size AS upload_file_size, upload_file.extension AS upload_file_extension, upload_file.mime_type AS upload_file_mime_type, upload_file.hash AS upload_file_hash, upload_file.updated_at AS upload_file_updated_at, upload_file.created_at AS upload_file_created_at 
FROM upload_file 
WHERE upload_file.account_id = %(account_id_1)s::UUID AND upload_file.id IN (%(id_1_1)s::UUID)
[2024-10-05 21:40:06,224.224] base.py -> _exec_single_context line:1908 [INFO]: [generated in 0.00026s] {'account_id_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f', 'id_1_1': '8728b357-a69f-4100-a966-657abec58de6'}
[2024-10-05 21:40:06,226.226] base.py -> _exec_single_context line:1903 [INFO]: INSERT INTO process_rule (account_id, dataset_id, mode, rule) VALUES (%(account_id)s::UUID, %(dataset_id)s::UUID, %(mode)s, %(rule)s) RETURNING process_rule.id, process_rule.updated_at, process_rule.created_at
[2024-10-05 21:40:06,226.226] base.py -> _exec_single_context line:1908 [INFO]: [generated in 0.00023s] {'account_id': '46db30d1-3199-4e79-a0cd-abf12fa6858f', 'dataset_id': UUID('f3f28f75-8e60-4eba-b6df-4d1b390bbd89'), 'mode': 'automatic', 'rule': '{"pre_process_rules": [{"id": "remove_extra_space", "enabled": true}, {"id": "remove_url_and_email", "enabled": true}], "segment": {"separators": ["\ ... (15 characters truncated) ... "\\u3002|\\uff01|\\uff1f", "\\\\.\\\\s|\\\\!\\\\s|\\\\?\\\\s", "\\uff1b|;\\\\s", "\\uff0c|,\\\\s", " ", ""], "chunk_size": 500, "chunk_overlap": 50}}'}
[2024-10-05 21:40:06,227.227] base.py -> _commit_impl line:1146 [INFO]: COMMIT
[2024-10-05 21:40:06,230.230] base.py -> _begin_impl line:1103 [INFO]: BEGIN (implicit)
[2024-10-05 21:40:06,233.233] base.py -> _exec_single_context line:1903 [INFO]: SELECT document.id AS document_id, document.account_id AS document_account_id, document.dataset_id AS document_dataset_id, document.upload_file_id AS document_upload_file_id, document.process_rule_id AS document_process_rule_id, document.batch AS document_batch, document.name AS document_name, document.position AS document_position, document.character_count AS document_character_count, document.token_count AS document_token_count, document.processing_started_at AS document_processing_started_at, document.parsing_completed_at AS document_parsing_completed_at, document.splitting_completed_at AS document_splitting_completed_at, document.indexing_completed_at AS document_indexing_completed_at, document.completed_at AS document_completed_at, document.stopped_at AS document_stopped_at, document.error AS document_error, document.enabled AS document_enabled, document.disabled_at AS document_disabled_at, document.status AS document_status, document.updated_at AS document_updated_at, document.created_at AS document_created_at 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID ORDER BY document.position DESC 
 LIMIT %(param_1)s
[2024-10-05 21:40:06,233.233] base.py -> _exec_single_context line:1908 [INFO]: [generated in 0.00024s] {'dataset_id_1': UUID('f3f28f75-8e60-4eba-b6df-4d1b390bbd89'), 'param_1': 1}
[2024-10-05 21:40:06,234.234] base.py -> _exec_single_context line:1903 [INFO]: SELECT upload_file.id AS upload_file_id, upload_file.account_id AS upload_file_account_id, upload_file.name AS upload_file_name, upload_file.key AS upload_file_key, upload_file.size AS upload_file_size, upload_file.extension AS upload_file_extension, upload_file.mime_type AS upload_file_mime_type, upload_file.hash AS upload_file_hash, upload_file.updated_at AS upload_file_updated_at, upload_file.created_at AS upload_file_created_at 
FROM upload_file 
WHERE upload_file.id = %(pk_1)s::UUID
[2024-10-05 21:40:06,234.234] base.py -> _exec_single_context line:1908 [INFO]: [cached since 19.52s ago] {'pk_1': UUID('8728b357-a69f-4100-a966-657abec58de6')}
[2024-10-05 21:40:06,236.236] base.py -> _exec_single_context line:1903 [INFO]: SELECT process_rule.id AS process_rule_id, process_rule.account_id AS process_rule_account_id, process_rule.dataset_id AS process_rule_dataset_id, process_rule.mode AS process_rule_mode, process_rule.rule AS process_rule_rule, process_rule.updated_at AS process_rule_updated_at, process_rule.created_at AS process_rule_created_at 
FROM process_rule 
WHERE process_rule.id = %(pk_1)s::UUID
[2024-10-05 21:40:06,236.236] base.py -> _exec_single_context line:1908 [INFO]: [generated in 0.00020s] {'pk_1': UUID('d801edc4-edd9-486b-890f-53b008755c51')}
[2024-10-05 21:40:06,238.238] base.py -> _exec_single_context line:1903 [INFO]: INSERT INTO document (account_id, dataset_id, upload_file_id, process_rule_id, batch, name, position, processing_started_at, parsing_completed_at, splitting_completed_at, indexing_completed_at, completed_at, stopped_at, disabled_at) VALUES (%(account_id)s::UUID, %(dataset_id)s::UUID, %(upload_file_id)s::UUID, %(process_rule_id)s::UUID, %(batch)s, %(name)s, %(position)s, %(processing_started_at)s, %(parsing_completed_at)s, %(splitting_completed_at)s, %(indexing_completed_at)s, %(completed_at)s, %(stopped_at)s, %(disabled_at)s) RETURNING document.id, document.character_count, document.token_count, document.error, document.enabled, document.status, document.updated_at, document.created_at
[2024-10-05 21:40:06,238.238] base.py -> _exec_single_context line:1908 [INFO]: [generated in 0.00027s] {'account_id': '46db30d1-3199-4e79-a0cd-abf12fa6858f', 'dataset_id': UUID('f3f28f75-8e60-4eba-b6df-4d1b390bbd89'), 'upload_file_id': UUID('8728b357-a69f-4100-a966-657abec58de6'), 'process_rule_id': UUID('d801edc4-edd9-486b-890f-53b008755c51'), 'batch': '20241005214006516302', 'name': '项目API文档-完整.md', 'position': 1, 'processing_started_at': None, 'parsing_completed_at': None, 'splitting_completed_at': None, 'indexing_completed_at': None, 'completed_at': None, 'stopped_at': None, 'disabled_at': None}
[2024-10-05 21:40:06,240.240] base.py -> _commit_impl line:1146 [INFO]: COMMIT
[2024-10-05 21:40:06,246.246] base.py -> _begin_impl line:1103 [INFO]: BEGIN (implicit)
[2024-10-05 21:40:06,248.248] base.py -> _exec_single_context line:1903 [INFO]: SELECT document.id AS document_id, document.account_id AS document_account_id, document.dataset_id AS document_dataset_id, document.upload_file_id AS document_upload_file_id, document.process_rule_id AS document_process_rule_id, document.batch AS document_batch, document.name AS document_name, document.position AS document_position, document.character_count AS document_character_count, document.token_count AS document_token_count, document.processing_started_at AS document_processing_started_at, document.parsing_completed_at AS document_parsing_completed_at, document.splitting_completed_at AS document_splitting_completed_at, document.indexing_completed_at AS document_indexing_completed_at, document.completed_at AS document_completed_at, document.stopped_at AS document_stopped_at, document.error AS document_error, document.enabled AS document_enabled, document.disabled_at AS document_disabled_at, document.status AS document_status, document.updated_at AS document_updated_at, document.created_at AS document_created_at 
FROM document 
WHERE document.id = %(pk_1)s::UUID
[2024-10-05 21:40:06,248.248] base.py -> _exec_single_context line:1908 [INFO]: [generated in 0.00021s] {'pk_1': UUID('f99eeaab-745b-4b81-969c-0a0c9141e201')}
[2024-10-05 21:40:06,311.311] base.py -> _rollback_impl line:1129 [INFO]: ROLLBACK
[2024-10-05 21:40:06,312.312] _internal.py -> _log line:96 [INFO]: 127.0.0.1 - - [05/Oct/2024 21:40:06] "POST /datasets/f3f28f75-8e60-4eba-b6df-4d1b390bbd89/documents HTTP/1.1" 200 -
[2024-10-05 21:41:34,242.242] base.py -> _begin_impl line:1103 [INFO]: BEGIN (implicit)
[2024-10-05 21:41:34,243.243] base.py -> _exec_single_context line:1903 [INFO]: SELECT dataset.id AS dataset_id, dataset.account_id AS dataset_account_id, dataset.name AS dataset_name, dataset.icon AS dataset_icon, dataset.description AS dataset_description, dataset.updated_at AS dataset_updated_at, dataset.created_at AS dataset_created_at 
FROM dataset 
WHERE dataset.id = %(pk_1)s::UUID
[2024-10-05 21:41:34,243.243] base.py -> _exec_single_context line:1908 [INFO]: [cached since 88.02s ago] {'pk_1': UUID('f3f28f75-8e60-4eba-b6df-4d1b390bbd89')}
[2024-10-05 21:41:34,244.244] base.py -> _exec_single_context line:1903 [INFO]: SELECT upload_file.id AS upload_file_id, upload_file.account_id AS upload_file_account_id, upload_file.name AS upload_file_name, upload_file.key AS upload_file_key, upload_file.size AS upload_file_size, upload_file.extension AS upload_file_extension, upload_file.mime_type AS upload_file_mime_type, upload_file.hash AS upload_file_hash, upload_file.updated_at AS upload_file_updated_at, upload_file.created_at AS upload_file_created_at 
FROM upload_file 
WHERE upload_file.account_id = %(account_id_1)s::UUID AND upload_file.id IN (%(id_1_1)s::UUID)
[2024-10-05 21:41:34,244.244] base.py -> _exec_single_context line:1908 [INFO]: [cached since 88.02s ago] {'account_id_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f', 'id_1_1': '8728b357-a69f-4100-a966-657abec58de6'}
[2024-10-05 21:41:34,245.245] base.py -> _exec_single_context line:1903 [INFO]: INSERT INTO process_rule (account_id, dataset_id, mode, rule) VALUES (%(account_id)s::UUID, %(dataset_id)s::UUID, %(mode)s, %(rule)s) RETURNING process_rule.id, process_rule.updated_at, process_rule.created_at
[2024-10-05 21:41:34,245.245] base.py -> _exec_single_context line:1908 [INFO]: [cached since 88.02s ago] {'account_id': '46db30d1-3199-4e79-a0cd-abf12fa6858f', 'dataset_id': UUID('f3f28f75-8e60-4eba-b6df-4d1b390bbd89'), 'mode': 'automatic', 'rule': '{"pre_process_rules": [{"id": "remove_extra_space", "enabled": true}, {"id": "remove_url_and_email", "enabled": true}], "segment": {"separators": ["\ ... (15 characters truncated) ... "\\u3002|\\uff01|\\uff1f", "\\\\.\\\\s|\\\\!\\\\s|\\\\?\\\\s", "\\uff1b|;\\\\s", "\\uff0c|,\\\\s", " ", ""], "chunk_size": 500, "chunk_overlap": 50}}'}
[2024-10-05 21:41:34,246.246] base.py -> _commit_impl line:1146 [INFO]: COMMIT
[2024-10-05 21:41:34,249.249] base.py -> _begin_impl line:1103 [INFO]: BEGIN (implicit)
[2024-10-05 21:41:34,249.249] base.py -> _exec_single_context line:1903 [INFO]: SELECT document.id AS document_id, document.account_id AS document_account_id, document.dataset_id AS document_dataset_id, document.upload_file_id AS document_upload_file_id, document.process_rule_id AS document_process_rule_id, document.batch AS document_batch, document.name AS document_name, document.position AS document_position, document.character_count AS document_character_count, document.token_count AS document_token_count, document.processing_started_at AS document_processing_started_at, document.parsing_completed_at AS document_parsing_completed_at, document.splitting_completed_at AS document_splitting_completed_at, document.indexing_completed_at AS document_indexing_completed_at, document.completed_at AS document_completed_at, document.stopped_at AS document_stopped_at, document.error AS document_error, document.enabled AS document_enabled, document.disabled_at AS document_disabled_at, document.status AS document_status, document.updated_at AS document_updated_at, document.created_at AS document_created_at 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID ORDER BY document.position DESC 
 LIMIT %(param_1)s
[2024-10-05 21:41:34,249.249] base.py -> _exec_single_context line:1908 [INFO]: [cached since 88.02s ago] {'dataset_id_1': UUID('f3f28f75-8e60-4eba-b6df-4d1b390bbd89'), 'param_1': 1}
[2024-10-05 21:41:34,250.250] base.py -> _exec_single_context line:1903 [INFO]: SELECT upload_file.id AS upload_file_id, upload_file.account_id AS upload_file_account_id, upload_file.name AS upload_file_name, upload_file.key AS upload_file_key, upload_file.size AS upload_file_size, upload_file.extension AS upload_file_extension, upload_file.mime_type AS upload_file_mime_type, upload_file.hash AS upload_file_hash, upload_file.updated_at AS upload_file_updated_at, upload_file.created_at AS upload_file_created_at 
FROM upload_file 
WHERE upload_file.id = %(pk_1)s::UUID
[2024-10-05 21:41:34,250.250] base.py -> _exec_single_context line:1908 [INFO]: [cached since 107.5s ago] {'pk_1': UUID('8728b357-a69f-4100-a966-657abec58de6')}
[2024-10-05 21:41:34,251.251] base.py -> _exec_single_context line:1903 [INFO]: SELECT process_rule.id AS process_rule_id, process_rule.account_id AS process_rule_account_id, process_rule.dataset_id AS process_rule_dataset_id, process_rule.mode AS process_rule_mode, process_rule.rule AS process_rule_rule, process_rule.updated_at AS process_rule_updated_at, process_rule.created_at AS process_rule_created_at 
FROM process_rule 
WHERE process_rule.id = %(pk_1)s::UUID
[2024-10-05 21:41:34,251.251] base.py -> _exec_single_context line:1908 [INFO]: [cached since 88.01s ago] {'pk_1': UUID('4ae98422-1bac-449d-aec5-d177a56d6971')}
[2024-10-05 21:41:34,252.252] base.py -> _exec_single_context line:1903 [INFO]: INSERT INTO document (account_id, dataset_id, upload_file_id, process_rule_id, batch, name, position, processing_started_at, parsing_completed_at, splitting_completed_at, indexing_completed_at, completed_at, stopped_at, disabled_at) VALUES (%(account_id)s::UUID, %(dataset_id)s::UUID, %(upload_file_id)s::UUID, %(process_rule_id)s::UUID, %(batch)s, %(name)s, %(position)s, %(processing_started_at)s, %(parsing_completed_at)s, %(splitting_completed_at)s, %(indexing_completed_at)s, %(completed_at)s, %(stopped_at)s, %(disabled_at)s) RETURNING document.id, document.character_count, document.token_count, document.error, document.enabled, document.status, document.updated_at, document.created_at
[2024-10-05 21:41:34,252.252] base.py -> _exec_single_context line:1908 [INFO]: [cached since 88.01s ago] {'account_id': '46db30d1-3199-4e79-a0cd-abf12fa6858f', 'dataset_id': UUID('f3f28f75-8e60-4eba-b6df-4d1b390bbd89'), 'upload_file_id': UUID('8728b357-a69f-4100-a966-657abec58de6'), 'process_rule_id': UUID('4ae98422-1bac-449d-aec5-d177a56d6971'), 'batch': '20241005214134992018', 'name': '项目API文档-完整.md', 'position': 2, 'processing_started_at': None, 'parsing_completed_at': None, 'splitting_completed_at': None, 'indexing_completed_at': None, 'completed_at': None, 'stopped_at': None, 'disabled_at': None}
[2024-10-05 21:41:34,254.254] base.py -> _commit_impl line:1146 [INFO]: COMMIT
[2024-10-05 21:41:34,256.256] base.py -> _begin_impl line:1103 [INFO]: BEGIN (implicit)
[2024-10-05 21:41:34,256.256] base.py -> _exec_single_context line:1903 [INFO]: SELECT document.id AS document_id, document.account_id AS document_account_id, document.dataset_id AS document_dataset_id, document.upload_file_id AS document_upload_file_id, document.process_rule_id AS document_process_rule_id, document.batch AS document_batch, document.name AS document_name, document.position AS document_position, document.character_count AS document_character_count, document.token_count AS document_token_count, document.processing_started_at AS document_processing_started_at, document.parsing_completed_at AS document_parsing_completed_at, document.splitting_completed_at AS document_splitting_completed_at, document.indexing_completed_at AS document_indexing_completed_at, document.completed_at AS document_completed_at, document.stopped_at AS document_stopped_at, document.error AS document_error, document.enabled AS document_enabled, document.disabled_at AS document_disabled_at, document.status AS document_status, document.updated_at AS document_updated_at, document.created_at AS document_created_at 
FROM document 
WHERE document.id = %(pk_1)s::UUID
[2024-10-05 21:41:34,256.256] base.py -> _exec_single_context line:1908 [INFO]: [cached since 88.01s ago] {'pk_1': UUID('d8430243-6f7e-49c4-af0a-2c6811a28ee1')}
[2024-10-05 21:41:34,277.277] base.py -> _rollback_impl line:1129 [INFO]: ROLLBACK
[2024-10-05 21:41:34,278.278] _internal.py -> _log line:96 [INFO]: 127.0.0.1 - - [05/Oct/2024 21:41:34] "POST /datasets/f3f28f75-8e60-4eba-b6df-4d1b390bbd89/documents HTTP/1.1" 200 -
[2024-10-05 21:43:24,342.342] _internal.py -> _log line:96 [INFO]:  * Detected change in 'D:\\Code\\llmops\\llmops-api\\internal\\service\\indexing_service.py', reloading
[2024-10-05 21:43:25,094.094] _internal.py -> _log line:96 [INFO]:  * Restarting with stat
[2024-10-05 21:43:41,527.527] _internal.py -> _log line:96 [WARNING]:  * Debugger is active!
[2024-10-05 21:43:41,529.529] _internal.py -> _log line:96 [INFO]:  * Debugger PIN: 102-324-223
[2024-10-05 21:43:51,118.118] _internal.py -> _log line:96 [INFO]:  * Detected change in 'D:\\Code\\llmops\\llmops-api\\internal\\service\\indexing_service.py', reloading
[2024-10-05 21:43:51,764.764] _internal.py -> _log line:96 [INFO]:  * Restarting with stat
[2024-10-05 21:44:07,184.184] _internal.py -> _log line:96 [WARNING]:  * Debugger is active!
[2024-10-05 21:44:07,187.187] _internal.py -> _log line:96 [INFO]:  * Debugger PIN: 102-324-223
[2024-10-05 21:44:18,037.037] _internal.py -> _log line:96 [INFO]:  * Detected change in 'D:\\Code\\llmops\\llmops-api\\internal\\service\\indexing_service.py', reloading
[2024-10-05 21:44:18,633.633] _internal.py -> _log line:96 [INFO]:  * Restarting with stat
[2024-10-05 21:44:33,603.603] _internal.py -> _log line:96 [WARNING]:  * Debugger is active!
[2024-10-05 21:44:33,606.606] _internal.py -> _log line:96 [INFO]:  * Debugger PIN: 102-324-223
[2024-10-05 21:47:00,415.415] _internal.py -> _log line:96 [INFO]: [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5000
[2024-10-05 21:47:00,415.415] _internal.py -> _log line:96 [INFO]: [33mPress CTRL+C to quit[0m
[2024-10-05 21:47:00,416.416] _internal.py -> _log line:96 [INFO]:  * Restarting with stat
[2024-10-05 21:47:16,448.448] _internal.py -> _log line:96 [WARNING]:  * Debugger is active!
[2024-10-05 21:47:16,451.451] _internal.py -> _log line:96 [INFO]:  * Debugger PIN: 102-324-223
[2024-10-05 21:50:42,871.871] base.py -> _exec_single_context line:1903 [INFO]: select pg_catalog.version()
[2024-10-05 21:50:42,872.872] base.py -> _exec_single_context line:1908 [INFO]: [raw sql] {}
[2024-10-05 21:50:42,873.873] base.py -> _exec_single_context line:1903 [INFO]: select current_schema()
[2024-10-05 21:50:42,873.873] base.py -> _exec_single_context line:1908 [INFO]: [raw sql] {}
[2024-10-05 21:50:42,874.874] base.py -> _exec_single_context line:1903 [INFO]: show standard_conforming_strings
[2024-10-05 21:50:42,874.874] base.py -> _exec_single_context line:1908 [INFO]: [raw sql] {}
[2024-10-05 21:50:42,875.875] base.py -> _begin_impl line:1103 [INFO]: BEGIN (implicit)
[2024-10-05 21:50:42,876.876] base.py -> _exec_single_context line:1903 [INFO]: INSERT INTO upload_file (account_id, name, key, size, extension, mime_type, hash) VALUES (%(account_id)s::UUID, %(name)s, %(key)s, %(size)s, %(extension)s, %(mime_type)s, %(hash)s) RETURNING upload_file.id, upload_file.updated_at, upload_file.created_at
[2024-10-05 21:50:42,877.877] base.py -> _exec_single_context line:1908 [INFO]: [generated in 0.00022s] {'account_id': '46db30d1-3199-4e79-a0cd-abf12fa6858f', 'name': '项目API文档-完整.md', 'key': '2024/10/05/a2d1a84f-6025-4021-ac73-cd232f222cd3.md', 'size': 94003, 'extension': 'md', 'mime_type': 'text/markdown', 'hash': 'f6cb33757f54eff8657045657c8123a8175d36f4be4db2cea80731856d021e03'}
[2024-10-05 21:50:42,878.878] base.py -> _commit_impl line:1146 [INFO]: COMMIT
[2024-10-05 21:50:42,882.882] base.py -> _begin_impl line:1103 [INFO]: BEGIN (implicit)
[2024-10-05 21:50:42,884.884] base.py -> _exec_single_context line:1903 [INFO]: SELECT upload_file.id AS upload_file_id, upload_file.account_id AS upload_file_account_id, upload_file.name AS upload_file_name, upload_file.key AS upload_file_key, upload_file.size AS upload_file_size, upload_file.extension AS upload_file_extension, upload_file.mime_type AS upload_file_mime_type, upload_file.hash AS upload_file_hash, upload_file.updated_at AS upload_file_updated_at, upload_file.created_at AS upload_file_created_at 
FROM upload_file 
WHERE upload_file.id = %(pk_1)s::UUID
[2024-10-05 21:50:42,884.884] base.py -> _exec_single_context line:1908 [INFO]: [generated in 0.00024s] {'pk_1': UUID('51fb5f8d-8968-4180-b833-caf583a11d99')}
[2024-10-05 21:50:42,886.886] base.py -> _rollback_impl line:1129 [INFO]: ROLLBACK
[2024-10-05 21:50:42,886.886] _internal.py -> _log line:96 [INFO]: 127.0.0.1 - - [05/Oct/2024 21:50:42] "POST /upload-files/file HTTP/1.1" 200 -
[2024-10-05 21:50:58,924.924] base.py -> _begin_impl line:1103 [INFO]: BEGIN (implicit)
[2024-10-05 21:50:58,926.926] base.py -> _exec_single_context line:1903 [INFO]: SELECT dataset.id AS dataset_id, dataset.account_id AS dataset_account_id, dataset.name AS dataset_name, dataset.icon AS dataset_icon, dataset.description AS dataset_description, dataset.updated_at AS dataset_updated_at, dataset.created_at AS dataset_created_at 
FROM dataset 
WHERE dataset.id = %(pk_1)s::UUID
[2024-10-05 21:50:58,926.926] base.py -> _exec_single_context line:1908 [INFO]: [generated in 0.00024s] {'pk_1': UUID('f3f28f75-8e60-4eba-b6df-4d1b390bbd89')}
[2024-10-05 21:50:58,928.928] base.py -> _exec_single_context line:1903 [INFO]: SELECT upload_file.id AS upload_file_id, upload_file.account_id AS upload_file_account_id, upload_file.name AS upload_file_name, upload_file.key AS upload_file_key, upload_file.size AS upload_file_size, upload_file.extension AS upload_file_extension, upload_file.mime_type AS upload_file_mime_type, upload_file.hash AS upload_file_hash, upload_file.updated_at AS upload_file_updated_at, upload_file.created_at AS upload_file_created_at 
FROM upload_file 
WHERE upload_file.account_id = %(account_id_1)s::UUID AND upload_file.id IN (%(id_1_1)s::UUID)
[2024-10-05 21:50:58,929.929] base.py -> _exec_single_context line:1908 [INFO]: [generated in 0.00033s] {'account_id_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f', 'id_1_1': '51fb5f8d-8968-4180-b833-caf583a11d99'}
[2024-10-05 21:50:58,931.931] base.py -> _exec_single_context line:1903 [INFO]: INSERT INTO process_rule (account_id, dataset_id, mode, rule) VALUES (%(account_id)s::UUID, %(dataset_id)s::UUID, %(mode)s, %(rule)s) RETURNING process_rule.id, process_rule.updated_at, process_rule.created_at
[2024-10-05 21:50:58,931.931] base.py -> _exec_single_context line:1908 [INFO]: [generated in 0.00028s] {'account_id': '46db30d1-3199-4e79-a0cd-abf12fa6858f', 'dataset_id': UUID('f3f28f75-8e60-4eba-b6df-4d1b390bbd89'), 'mode': 'automatic', 'rule': '{"pre_process_rules": [{"id": "remove_extra_space", "enabled": true}, {"id": "remove_url_and_email", "enabled": true}], "segment": {"separators": ["\ ... (15 characters truncated) ... "\\u3002|\\uff01|\\uff1f", "\\\\.\\\\s|\\\\!\\\\s|\\\\?\\\\s", "\\uff1b|;\\\\s", "\\uff0c|,\\\\s", " ", ""], "chunk_size": 500, "chunk_overlap": 50}}'}
[2024-10-05 21:50:58,932.932] base.py -> _commit_impl line:1146 [INFO]: COMMIT
[2024-10-05 21:50:58,937.937] base.py -> _begin_impl line:1103 [INFO]: BEGIN (implicit)
[2024-10-05 21:50:58,940.940] base.py -> _exec_single_context line:1903 [INFO]: SELECT document.id AS document_id, document.account_id AS document_account_id, document.dataset_id AS document_dataset_id, document.upload_file_id AS document_upload_file_id, document.process_rule_id AS document_process_rule_id, document.batch AS document_batch, document.name AS document_name, document.position AS document_position, document.character_count AS document_character_count, document.token_count AS document_token_count, document.processing_started_at AS document_processing_started_at, document.parsing_completed_at AS document_parsing_completed_at, document.splitting_completed_at AS document_splitting_completed_at, document.indexing_completed_at AS document_indexing_completed_at, document.completed_at AS document_completed_at, document.stopped_at AS document_stopped_at, document.error AS document_error, document.enabled AS document_enabled, document.disabled_at AS document_disabled_at, document.status AS document_status, document.updated_at AS document_updated_at, document.created_at AS document_created_at 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID ORDER BY document.position DESC 
 LIMIT %(param_1)s
[2024-10-05 21:50:58,940.940] base.py -> _exec_single_context line:1908 [INFO]: [generated in 0.00025s] {'dataset_id_1': UUID('f3f28f75-8e60-4eba-b6df-4d1b390bbd89'), 'param_1': 1}
[2024-10-05 21:50:58,942.942] base.py -> _exec_single_context line:1903 [INFO]: SELECT upload_file.id AS upload_file_id, upload_file.account_id AS upload_file_account_id, upload_file.name AS upload_file_name, upload_file.key AS upload_file_key, upload_file.size AS upload_file_size, upload_file.extension AS upload_file_extension, upload_file.mime_type AS upload_file_mime_type, upload_file.hash AS upload_file_hash, upload_file.updated_at AS upload_file_updated_at, upload_file.created_at AS upload_file_created_at 
FROM upload_file 
WHERE upload_file.id = %(pk_1)s::UUID
[2024-10-05 21:50:58,942.942] base.py -> _exec_single_context line:1908 [INFO]: [cached since 16.06s ago] {'pk_1': UUID('51fb5f8d-8968-4180-b833-caf583a11d99')}
[2024-10-05 21:50:58,944.944] base.py -> _exec_single_context line:1903 [INFO]: SELECT process_rule.id AS process_rule_id, process_rule.account_id AS process_rule_account_id, process_rule.dataset_id AS process_rule_dataset_id, process_rule.mode AS process_rule_mode, process_rule.rule AS process_rule_rule, process_rule.updated_at AS process_rule_updated_at, process_rule.created_at AS process_rule_created_at 
FROM process_rule 
WHERE process_rule.id = %(pk_1)s::UUID
[2024-10-05 21:50:58,944.944] base.py -> _exec_single_context line:1908 [INFO]: [generated in 0.00032s] {'pk_1': UUID('3a6926ea-64f2-449d-bfe4-a7e1da39bf39')}
[2024-10-05 21:50:58,946.946] base.py -> _exec_single_context line:1903 [INFO]: INSERT INTO document (account_id, dataset_id, upload_file_id, process_rule_id, batch, name, position, processing_started_at, parsing_completed_at, splitting_completed_at, indexing_completed_at, completed_at, stopped_at, disabled_at) VALUES (%(account_id)s::UUID, %(dataset_id)s::UUID, %(upload_file_id)s::UUID, %(process_rule_id)s::UUID, %(batch)s, %(name)s, %(position)s, %(processing_started_at)s, %(parsing_completed_at)s, %(splitting_completed_at)s, %(indexing_completed_at)s, %(completed_at)s, %(stopped_at)s, %(disabled_at)s) RETURNING document.id, document.character_count, document.token_count, document.error, document.enabled, document.status, document.updated_at, document.created_at
[2024-10-05 21:50:58,946.946] base.py -> _exec_single_context line:1908 [INFO]: [generated in 0.00024s] {'account_id': '46db30d1-3199-4e79-a0cd-abf12fa6858f', 'dataset_id': UUID('f3f28f75-8e60-4eba-b6df-4d1b390bbd89'), 'upload_file_id': UUID('51fb5f8d-8968-4180-b833-caf583a11d99'), 'process_rule_id': UUID('3a6926ea-64f2-449d-bfe4-a7e1da39bf39'), 'batch': '20241005215058635500', 'name': '项目API文档-完整.md', 'position': 1, 'processing_started_at': None, 'parsing_completed_at': None, 'splitting_completed_at': None, 'indexing_completed_at': None, 'completed_at': None, 'stopped_at': None, 'disabled_at': None}
[2024-10-05 21:50:58,947.947] base.py -> _commit_impl line:1146 [INFO]: COMMIT
[2024-10-05 21:50:58,971.971] base.py -> _begin_impl line:1103 [INFO]: BEGIN (implicit)
[2024-10-05 21:50:58,972.972] base.py -> _exec_single_context line:1903 [INFO]: SELECT document.id AS document_id, document.account_id AS document_account_id, document.dataset_id AS document_dataset_id, document.upload_file_id AS document_upload_file_id, document.process_rule_id AS document_process_rule_id, document.batch AS document_batch, document.name AS document_name, document.position AS document_position, document.character_count AS document_character_count, document.token_count AS document_token_count, document.processing_started_at AS document_processing_started_at, document.parsing_completed_at AS document_parsing_completed_at, document.splitting_completed_at AS document_splitting_completed_at, document.indexing_completed_at AS document_indexing_completed_at, document.completed_at AS document_completed_at, document.stopped_at AS document_stopped_at, document.error AS document_error, document.enabled AS document_enabled, document.disabled_at AS document_disabled_at, document.status AS document_status, document.updated_at AS document_updated_at, document.created_at AS document_created_at 
FROM document 
WHERE document.id = %(pk_1)s::UUID
[2024-10-05 21:50:58,972.972] base.py -> _exec_single_context line:1908 [INFO]: [generated in 0.00021s] {'pk_1': UUID('a8afb9dc-3f1f-4ebc-b339-197e97474146')}
[2024-10-05 21:50:59,036.036] base.py -> _rollback_impl line:1129 [INFO]: ROLLBACK
[2024-10-05 21:50:59,037.037] _internal.py -> _log line:96 [INFO]: 127.0.0.1 - - [05/Oct/2024 21:50:59] "POST /datasets/f3f28f75-8e60-4eba-b6df-4d1b390bbd89/documents HTTP/1.1" 200 -
