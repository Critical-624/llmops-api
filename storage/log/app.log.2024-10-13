[2024-10-13 09:35:36,791.791] _internal.py -> _log line:96 [INFO]:  * Restarting with stat
[2024-10-13 09:35:41,137.137] _internal.py -> _log line:96 [WARNING]:  * Debugger is active!
[2024-10-13 09:35:41,140.140] _internal.py -> _log line:96 [INFO]:  * Debugger PIN: 102-324-223
[2024-10-13 09:37:15,489.489] _internal.py -> _log line:96 [INFO]:  * Detected change in 'D:\\Code\\llmops\\llmops-api\\internal\\core\\retrievers\\semantic_retriever.py', reloading
[2024-10-13 09:37:15,760.760] _internal.py -> _log line:96 [INFO]:  * Restarting with stat
[2024-10-13 09:37:20,196.196] _internal.py -> _log line:96 [WARNING]:  * Debugger is active!
[2024-10-13 09:37:20,199.199] _internal.py -> _log line:96 [INFO]:  * Debugger PIN: 102-324-223
[2024-10-13 09:39:14,152.152] _internal.py -> _log line:96 [INFO]:  * Detected change in 'D:\\Code\\llmops\\llmops-api\\internal\\core\\retrievers\\semantic_retriever.py', reloading
[2024-10-13 09:39:14,412.412] _internal.py -> _log line:96 [INFO]:  * Restarting with stat
[2024-10-13 09:39:18,563.563] _internal.py -> _log line:96 [WARNING]:  * Debugger is active!
[2024-10-13 09:39:18,566.566] _internal.py -> _log line:96 [INFO]:  * Debugger PIN: 102-324-223
[2024-10-13 09:41:39,573.573] base.py -> _exec_single_context line:1903 [INFO]: select pg_catalog.version()
[2024-10-13 09:41:39,573.573] base.py -> _exec_single_context line:1908 [INFO]: [raw sql] {}
[2024-10-13 09:41:39,574.574] base.py -> _exec_single_context line:1903 [INFO]: select current_schema()
[2024-10-13 09:41:39,574.574] base.py -> _exec_single_context line:1908 [INFO]: [raw sql] {}
[2024-10-13 09:41:39,574.574] base.py -> _exec_single_context line:1903 [INFO]: show standard_conforming_strings
[2024-10-13 09:41:39,574.574] base.py -> _exec_single_context line:1908 [INFO]: [raw sql] {}
[2024-10-13 09:41:39,575.575] base.py -> _begin_impl line:1103 [INFO]: BEGIN (implicit)
[2024-10-13 09:41:39,576.576] base.py -> _exec_single_context line:1903 [INFO]: SELECT dataset.id AS dataset_id, dataset.account_id AS dataset_account_id, dataset.name AS dataset_name, dataset.icon AS dataset_icon, dataset.description AS dataset_description, dataset.updated_at AS dataset_updated_at, dataset.created_at AS dataset_created_at 
FROM dataset 
WHERE dataset.id = %(pk_1)s::UUID
[2024-10-13 09:41:39,576.576] base.py -> _exec_single_context line:1908 [INFO]: [generated in 0.00014s] {'pk_1': UUID('f3f28f75-8e60-4eba-b6df-4d1b390bbd89')}
[2024-10-13 09:41:39,579.579] base.py -> _exec_single_context line:1903 [INFO]: SELECT dataset.id AS dataset_id, dataset.account_id AS dataset_account_id, dataset.name AS dataset_name, dataset.icon AS dataset_icon, dataset.description AS dataset_description, dataset.updated_at AS dataset_updated_at, dataset.created_at AS dataset_created_at 
FROM dataset 
WHERE dataset.id IN (%(id_1_1)s::UUID) AND dataset.account_id = %(account_id_1)s::UUID
[2024-10-13 09:41:39,579.579] base.py -> _exec_single_context line:1908 [INFO]: [generated in 0.00019s] {'account_id_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f', 'id_1_1': UUID('f3f28f75-8e60-4eba-b6df-4d1b390bbd89')}
[2024-10-13 09:41:41,379.379] base.py -> similarity_search_with_relevance_scores line:572 [WARNING]: No relevant docs were retrieved using the relevance score threshold 0.9
[2024-10-13 09:41:41,381.381] base.py -> _exec_single_context line:1903 [INFO]: UPDATE segment SET hit_count=(segment.hit_count + %(hit_count_1)s) WHERE segment.id IN (NULL) AND (1 != 1)
[2024-10-13 09:41:41,381.381] base.py -> _exec_single_context line:1908 [INFO]: [generated in 0.00035s] {'hit_count_1': 1}
[2024-10-13 09:41:41,382.382] base.py -> _commit_impl line:1146 [INFO]: COMMIT
[2024-10-13 09:41:41,383.383] base.py -> _begin_impl line:1103 [INFO]: BEGIN (implicit)
[2024-10-13 09:41:41,384.384] base.py -> _exec_single_context line:1903 [INFO]: SELECT segment.id AS segment_id, segment.account_id AS segment_account_id, segment.dataset_id AS segment_dataset_id, segment.document_id AS segment_document_id, segment.node_id AS segment_node_id, segment.position AS segment_position, segment.content AS segment_content, segment.character_count AS segment_character_count, segment.token_count AS segment_token_count, segment.keywords AS segment_keywords, segment.hash AS segment_hash, segment.hit_count AS segment_hit_count, segment.enabled AS segment_enabled, segment.disabled_at AS segment_disabled_at, segment.processing_started_at AS segment_processing_started_at, segment.indexing_completed_at AS segment_indexing_completed_at, segment.completed_at AS segment_completed_at, segment.stopped_at AS segment_stopped_at, segment.error AS segment_error, segment.status AS segment_status, segment.updated_at AS segment_updated_at, segment.created_at AS segment_created_at 
FROM segment 
WHERE segment.id IN (NULL) AND (1 != 1)
[2024-10-13 09:41:41,384.384] base.py -> _exec_single_context line:1908 [INFO]: [generated in 0.00017s] {}
[2024-10-13 09:41:41,385.385] base.py -> _rollback_impl line:1129 [INFO]: ROLLBACK
[2024-10-13 09:41:41,385.385] _internal.py -> _log line:96 [INFO]: 127.0.0.1 - - [13/Oct/2024 09:41:41] "POST /datasets/f3f28f75-8e60-4eba-b6df-4d1b390bbd89/hit HTTP/1.1" 200 -
[2024-10-13 09:41:46,537.537] base.py -> _begin_impl line:1103 [INFO]: BEGIN (implicit)
[2024-10-13 09:41:46,538.538] base.py -> _exec_single_context line:1903 [INFO]: SELECT dataset.id AS dataset_id, dataset.account_id AS dataset_account_id, dataset.name AS dataset_name, dataset.icon AS dataset_icon, dataset.description AS dataset_description, dataset.updated_at AS dataset_updated_at, dataset.created_at AS dataset_created_at 
FROM dataset 
WHERE dataset.id = %(pk_1)s::UUID
[2024-10-13 09:41:46,538.538] base.py -> _exec_single_context line:1908 [INFO]: [cached since 6.962s ago] {'pk_1': UUID('f3f28f75-8e60-4eba-b6df-4d1b390bbd89')}
[2024-10-13 09:41:46,539.539] base.py -> _exec_single_context line:1903 [INFO]: SELECT dataset.id AS dataset_id, dataset.account_id AS dataset_account_id, dataset.name AS dataset_name, dataset.icon AS dataset_icon, dataset.description AS dataset_description, dataset.updated_at AS dataset_updated_at, dataset.created_at AS dataset_created_at 
FROM dataset 
WHERE dataset.id IN (%(id_1_1)s::UUID) AND dataset.account_id = %(account_id_1)s::UUID
[2024-10-13 09:41:46,540.540] base.py -> _exec_single_context line:1908 [INFO]: [cached since 6.961s ago] {'account_id_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f', 'id_1_1': UUID('f3f28f75-8e60-4eba-b6df-4d1b390bbd89')}
[2024-10-13 09:41:47,999.999] base.py -> _exec_single_context line:1903 [INFO]: INSERT INTO dataset_query (dataset_id, query, source, source_app_id, created_by) VALUES (%(dataset_id)s::UUID, %(query)s, %(source)s, %(source_app_id)s::UUID, %(created_by)s::UUID) RETURNING dataset_query.id, dataset_query.updated_at, dataset_query.created_at
[2024-10-13 09:41:47,999.999] base.py -> _exec_single_context line:1908 [INFO]: [generated in 0.00033s] {'dataset_id': UUID('f3f28f75-8e60-4eba-b6df-4d1b390bbd89'), 'query': '想学习flask，有什么建议么？', 'source': <RetrievalSource.HIT_TESTING: 'hit_testing'>, 'source_app_id': None, 'created_by': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2024-10-13 09:41:48,000.000] base.py -> _commit_impl line:1146 [INFO]: COMMIT
[2024-10-13 09:41:48,020.020] base.py -> _begin_impl line:1103 [INFO]: BEGIN (implicit)
[2024-10-13 09:41:48,021.021] base.py -> _exec_single_context line:1903 [INFO]: INSERT INTO dataset_query (dataset_id, query, source, source_app_id, created_by) VALUES (%(dataset_id)s::UUID, %(query)s, %(source)s, %(source_app_id)s::UUID, %(created_by)s::UUID) RETURNING dataset_query.id, dataset_query.updated_at, dataset_query.created_at
[2024-10-13 09:41:48,021.021] base.py -> _exec_single_context line:1908 [INFO]: [cached since 0.0229s ago] {'dataset_id': UUID('f3f28f75-8e60-4eba-b6df-4d1b390bbd89'), 'query': '想学习flask，有什么建议么？', 'source': <RetrievalSource.HIT_TESTING: 'hit_testing'>, 'source_app_id': None, 'created_by': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2024-10-13 09:41:48,022.022] base.py -> _commit_impl line:1146 [INFO]: COMMIT
[2024-10-13 09:41:48,023.023] base.py -> _begin_impl line:1103 [INFO]: BEGIN (implicit)
[2024-10-13 09:41:48,024.024] base.py -> _exec_single_context line:1903 [INFO]: INSERT INTO dataset_query (dataset_id, query, source, source_app_id, created_by) VALUES (%(dataset_id)s::UUID, %(query)s, %(source)s, %(source_app_id)s::UUID, %(created_by)s::UUID) RETURNING dataset_query.id, dataset_query.updated_at, dataset_query.created_at
[2024-10-13 09:41:48,024.024] base.py -> _exec_single_context line:1908 [INFO]: [cached since 0.02556s ago] {'dataset_id': UUID('f3f28f75-8e60-4eba-b6df-4d1b390bbd89'), 'query': '想学习flask，有什么建议么？', 'source': <RetrievalSource.HIT_TESTING: 'hit_testing'>, 'source_app_id': None, 'created_by': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2024-10-13 09:41:48,025.025] base.py -> _commit_impl line:1146 [INFO]: COMMIT
[2024-10-13 09:41:48,026.026] base.py -> _begin_impl line:1103 [INFO]: BEGIN (implicit)
[2024-10-13 09:41:48,027.027] base.py -> _exec_single_context line:1903 [INFO]: INSERT INTO dataset_query (dataset_id, query, source, source_app_id, created_by) VALUES (%(dataset_id)s::UUID, %(query)s, %(source)s, %(source_app_id)s::UUID, %(created_by)s::UUID) RETURNING dataset_query.id, dataset_query.updated_at, dataset_query.created_at
[2024-10-13 09:41:48,027.027] base.py -> _exec_single_context line:1908 [INFO]: [cached since 0.02869s ago] {'dataset_id': UUID('f3f28f75-8e60-4eba-b6df-4d1b390bbd89'), 'query': '想学习flask，有什么建议么？', 'source': <RetrievalSource.HIT_TESTING: 'hit_testing'>, 'source_app_id': None, 'created_by': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2024-10-13 09:41:48,028.028] base.py -> _commit_impl line:1146 [INFO]: COMMIT
[2024-10-13 09:41:48,029.029] base.py -> _begin_impl line:1103 [INFO]: BEGIN (implicit)
[2024-10-13 09:41:48,029.029] base.py -> _exec_single_context line:1903 [INFO]: INSERT INTO dataset_query (dataset_id, query, source, source_app_id, created_by) VALUES (%(dataset_id)s::UUID, %(query)s, %(source)s, %(source_app_id)s::UUID, %(created_by)s::UUID) RETURNING dataset_query.id, dataset_query.updated_at, dataset_query.created_at
[2024-10-13 09:41:48,029.029] base.py -> _exec_single_context line:1908 [INFO]: [cached since 0.03101s ago] {'dataset_id': UUID('f3f28f75-8e60-4eba-b6df-4d1b390bbd89'), 'query': '想学习flask，有什么建议么？', 'source': <RetrievalSource.HIT_TESTING: 'hit_testing'>, 'source_app_id': None, 'created_by': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2024-10-13 09:41:48,030.030] base.py -> _commit_impl line:1146 [INFO]: COMMIT
[2024-10-13 09:41:48,031.031] base.py -> _begin_impl line:1103 [INFO]: BEGIN (implicit)
[2024-10-13 09:41:48,032.032] base.py -> _exec_single_context line:1903 [INFO]: INSERT INTO dataset_query (dataset_id, query, source, source_app_id, created_by) VALUES (%(dataset_id)s::UUID, %(query)s, %(source)s, %(source_app_id)s::UUID, %(created_by)s::UUID) RETURNING dataset_query.id, dataset_query.updated_at, dataset_query.created_at
[2024-10-13 09:41:48,032.032] base.py -> _exec_single_context line:1908 [INFO]: [cached since 0.03334s ago] {'dataset_id': UUID('f3f28f75-8e60-4eba-b6df-4d1b390bbd89'), 'query': '想学习flask，有什么建议么？', 'source': <RetrievalSource.HIT_TESTING: 'hit_testing'>, 'source_app_id': None, 'created_by': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2024-10-13 09:41:48,032.032] base.py -> _commit_impl line:1146 [INFO]: COMMIT
[2024-10-13 09:41:48,033.033] base.py -> _begin_impl line:1103 [INFO]: BEGIN (implicit)
[2024-10-13 09:41:48,034.034] base.py -> _exec_single_context line:1903 [INFO]: INSERT INTO dataset_query (dataset_id, query, source, source_app_id, created_by) VALUES (%(dataset_id)s::UUID, %(query)s, %(source)s, %(source_app_id)s::UUID, %(created_by)s::UUID) RETURNING dataset_query.id, dataset_query.updated_at, dataset_query.created_at
[2024-10-13 09:41:48,034.034] base.py -> _exec_single_context line:1908 [INFO]: [cached since 0.03545s ago] {'dataset_id': UUID('f3f28f75-8e60-4eba-b6df-4d1b390bbd89'), 'query': '想学习flask，有什么建议么？', 'source': <RetrievalSource.HIT_TESTING: 'hit_testing'>, 'source_app_id': None, 'created_by': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2024-10-13 09:41:48,035.035] base.py -> _commit_impl line:1146 [INFO]: COMMIT
[2024-10-13 09:41:48,036.036] base.py -> _begin_impl line:1103 [INFO]: BEGIN (implicit)
[2024-10-13 09:41:48,036.036] base.py -> _exec_single_context line:1903 [INFO]: INSERT INTO dataset_query (dataset_id, query, source, source_app_id, created_by) VALUES (%(dataset_id)s::UUID, %(query)s, %(source)s, %(source_app_id)s::UUID, %(created_by)s::UUID) RETURNING dataset_query.id, dataset_query.updated_at, dataset_query.created_at
[2024-10-13 09:41:48,036.036] base.py -> _exec_single_context line:1908 [INFO]: [cached since 0.03768s ago] {'dataset_id': UUID('f3f28f75-8e60-4eba-b6df-4d1b390bbd89'), 'query': '想学习flask，有什么建议么？', 'source': <RetrievalSource.HIT_TESTING: 'hit_testing'>, 'source_app_id': None, 'created_by': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2024-10-13 09:41:48,037.037] base.py -> _commit_impl line:1146 [INFO]: COMMIT
[2024-10-13 09:41:48,039.039] base.py -> _begin_impl line:1103 [INFO]: BEGIN (implicit)
[2024-10-13 09:41:48,039.039] base.py -> _exec_single_context line:1903 [INFO]: INSERT INTO dataset_query (dataset_id, query, source, source_app_id, created_by) VALUES (%(dataset_id)s::UUID, %(query)s, %(source)s, %(source_app_id)s::UUID, %(created_by)s::UUID) RETURNING dataset_query.id, dataset_query.updated_at, dataset_query.created_at
[2024-10-13 09:41:48,039.039] base.py -> _exec_single_context line:1908 [INFO]: [cached since 0.04037s ago] {'dataset_id': UUID('f3f28f75-8e60-4eba-b6df-4d1b390bbd89'), 'query': '想学习flask，有什么建议么？', 'source': <RetrievalSource.HIT_TESTING: 'hit_testing'>, 'source_app_id': None, 'created_by': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2024-10-13 09:41:48,040.040] base.py -> _commit_impl line:1146 [INFO]: COMMIT
[2024-10-13 09:41:48,041.041] base.py -> _begin_impl line:1103 [INFO]: BEGIN (implicit)
[2024-10-13 09:41:48,041.041] base.py -> _exec_single_context line:1903 [INFO]: INSERT INTO dataset_query (dataset_id, query, source, source_app_id, created_by) VALUES (%(dataset_id)s::UUID, %(query)s, %(source)s, %(source_app_id)s::UUID, %(created_by)s::UUID) RETURNING dataset_query.id, dataset_query.updated_at, dataset_query.created_at
[2024-10-13 09:41:48,041.041] base.py -> _exec_single_context line:1908 [INFO]: [cached since 0.04265s ago] {'dataset_id': UUID('f3f28f75-8e60-4eba-b6df-4d1b390bbd89'), 'query': '想学习flask，有什么建议么？', 'source': <RetrievalSource.HIT_TESTING: 'hit_testing'>, 'source_app_id': None, 'created_by': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2024-10-13 09:41:48,042.042] base.py -> _commit_impl line:1146 [INFO]: COMMIT
[2024-10-13 09:41:48,043.043] base.py -> _begin_impl line:1103 [INFO]: BEGIN (implicit)
[2024-10-13 09:41:48,043.043] base.py -> _exec_single_context line:1903 [INFO]: UPDATE segment SET hit_count=(segment.hit_count + %(hit_count_1)s) WHERE segment.id IN (%(id_1_1)s::UUID, %(id_1_2)s::UUID, %(id_1_3)s::UUID, %(id_1_4)s::UUID, %(id_1_5)s::UUID, %(id_1_6)s::UUID, %(id_1_7)s::UUID, %(id_1_8)s::UUID, %(id_1_9)s::UUID, %(id_1_10)s::UUID)
[2024-10-13 09:41:48,043.043] base.py -> _exec_single_context line:1908 [INFO]: [cached since 6.662s ago] {'hit_count_1': 1, 'id_1_1': UUID('4bb0d451-b34b-4b97-8ddd-3afbe47236f1'), 'id_1_2': UUID('e8d2ffa0-5ff3-4673-976f-5a14d5ba55fa'), 'id_1_3': UUID('3472fa81-8d88-4cb4-bd9b-7d28f9a7f9eb'), 'id_1_4': UUID('b3f3d69d-6ea6-43c4-bba4-b1c63b08474e'), 'id_1_5': UUID('fa5a8ee4-591a-4965-b82b-0ff6dca67be4'), 'id_1_6': UUID('4adb6c36-fb5d-4818-87d4-dc7983a74812'), 'id_1_7': UUID('25e9fe45-24f2-4f5c-a2f7-86e15bf5f920'), 'id_1_8': UUID('07bb092a-200a-4745-b47d-40ec367b796a'), 'id_1_9': UUID('df2676ee-80e3-4f2a-8264-e964737999d7'), 'id_1_10': UUID('e2408665-8364-4efa-9aa0-99e4cf3815ee')}
[2024-10-13 09:41:48,044.044] base.py -> _commit_impl line:1146 [INFO]: COMMIT
[2024-10-13 09:41:48,046.046] base.py -> _begin_impl line:1103 [INFO]: BEGIN (implicit)
[2024-10-13 09:41:48,046.046] base.py -> _exec_single_context line:1903 [INFO]: SELECT segment.id AS segment_id, segment.account_id AS segment_account_id, segment.dataset_id AS segment_dataset_id, segment.document_id AS segment_document_id, segment.node_id AS segment_node_id, segment.position AS segment_position, segment.content AS segment_content, segment.character_count AS segment_character_count, segment.token_count AS segment_token_count, segment.keywords AS segment_keywords, segment.hash AS segment_hash, segment.hit_count AS segment_hit_count, segment.enabled AS segment_enabled, segment.disabled_at AS segment_disabled_at, segment.processing_started_at AS segment_processing_started_at, segment.indexing_completed_at AS segment_indexing_completed_at, segment.completed_at AS segment_completed_at, segment.stopped_at AS segment_stopped_at, segment.error AS segment_error, segment.status AS segment_status, segment.updated_at AS segment_updated_at, segment.created_at AS segment_created_at 
FROM segment 
WHERE segment.id IN (%(id_1_1)s::UUID, %(id_1_2)s::UUID, %(id_1_3)s::UUID, %(id_1_4)s::UUID, %(id_1_5)s::UUID, %(id_1_6)s::UUID, %(id_1_7)s::UUID, %(id_1_8)s::UUID, %(id_1_9)s::UUID, %(id_1_10)s::UUID)
[2024-10-13 09:41:48,046.046] base.py -> _exec_single_context line:1908 [INFO]: [cached since 6.663s ago] {'id_1_1': '4bb0d451-b34b-4b97-8ddd-3afbe47236f1', 'id_1_2': 'e8d2ffa0-5ff3-4673-976f-5a14d5ba55fa', 'id_1_3': '3472fa81-8d88-4cb4-bd9b-7d28f9a7f9eb', 'id_1_4': 'b3f3d69d-6ea6-43c4-bba4-b1c63b08474e', 'id_1_5': 'fa5a8ee4-591a-4965-b82b-0ff6dca67be4', 'id_1_6': '4adb6c36-fb5d-4818-87d4-dc7983a74812', 'id_1_7': '25e9fe45-24f2-4f5c-a2f7-86e15bf5f920', 'id_1_8': '07bb092a-200a-4745-b47d-40ec367b796a', 'id_1_9': 'df2676ee-80e3-4f2a-8264-e964737999d7', 'id_1_10': 'e2408665-8364-4efa-9aa0-99e4cf3815ee'}
[2024-10-13 09:41:48,051.051] base.py -> _exec_single_context line:1903 [INFO]: SELECT document.id AS document_id, document.account_id AS document_account_id, document.dataset_id AS document_dataset_id, document.upload_file_id AS document_upload_file_id, document.process_rule_id AS document_process_rule_id, document.batch AS document_batch, document.name AS document_name, document.position AS document_position, document.character_count AS document_character_count, document.token_count AS document_token_count, document.processing_started_at AS document_processing_started_at, document.parsing_completed_at AS document_parsing_completed_at, document.splitting_completed_at AS document_splitting_completed_at, document.indexing_completed_at AS document_indexing_completed_at, document.completed_at AS document_completed_at, document.stopped_at AS document_stopped_at, document.error AS document_error, document.enabled AS document_enabled, document.disabled_at AS document_disabled_at, document.status AS document_status, document.updated_at AS document_updated_at, document.created_at AS document_created_at 
FROM document 
WHERE document.id = %(pk_1)s::UUID
[2024-10-13 09:41:48,052.052] base.py -> _exec_single_context line:1908 [INFO]: [generated in 0.00161s] {'pk_1': UUID('d4b902e3-a013-4780-93fa-6fc300ab6bf8')}
[2024-10-13 09:41:48,055.055] base.py -> _exec_single_context line:1903 [INFO]: SELECT upload_file.id AS upload_file_id, upload_file.account_id AS upload_file_account_id, upload_file.name AS upload_file_name, upload_file.key AS upload_file_key, upload_file.size AS upload_file_size, upload_file.extension AS upload_file_extension, upload_file.mime_type AS upload_file_mime_type, upload_file.hash AS upload_file_hash, upload_file.updated_at AS upload_file_updated_at, upload_file.created_at AS upload_file_created_at 
FROM upload_file 
WHERE upload_file.id = %(id_1)s::UUID
[2024-10-13 09:41:48,055.055] base.py -> _exec_single_context line:1908 [INFO]: [generated in 0.00028s] {'id_1': UUID('4cdddf4d-6642-4bb3-87be-63dc77408c7e')}
[2024-10-13 09:41:48,057.057] base.py -> _exec_single_context line:1903 [INFO]: SELECT upload_file.id AS upload_file_id, upload_file.account_id AS upload_file_account_id, upload_file.name AS upload_file_name, upload_file.key AS upload_file_key, upload_file.size AS upload_file_size, upload_file.extension AS upload_file_extension, upload_file.mime_type AS upload_file_mime_type, upload_file.hash AS upload_file_hash, upload_file.updated_at AS upload_file_updated_at, upload_file.created_at AS upload_file_created_at 
FROM upload_file 
WHERE upload_file.id = %(id_1)s::UUID
[2024-10-13 09:41:48,057.057] base.py -> _exec_single_context line:1908 [INFO]: [cached since 0.00226s ago] {'id_1': UUID('4cdddf4d-6642-4bb3-87be-63dc77408c7e')}
[2024-10-13 09:41:48,058.058] base.py -> _exec_single_context line:1903 [INFO]: SELECT upload_file.id AS upload_file_id, upload_file.account_id AS upload_file_account_id, upload_file.name AS upload_file_name, upload_file.key AS upload_file_key, upload_file.size AS upload_file_size, upload_file.extension AS upload_file_extension, upload_file.mime_type AS upload_file_mime_type, upload_file.hash AS upload_file_hash, upload_file.updated_at AS upload_file_updated_at, upload_file.created_at AS upload_file_created_at 
FROM upload_file 
WHERE upload_file.id = %(id_1)s::UUID
[2024-10-13 09:41:48,059.059] base.py -> _exec_single_context line:1908 [INFO]: [cached since 0.003435s ago] {'id_1': UUID('4cdddf4d-6642-4bb3-87be-63dc77408c7e')}
[2024-10-13 09:41:48,060.060] base.py -> _exec_single_context line:1903 [INFO]: SELECT upload_file.id AS upload_file_id, upload_file.account_id AS upload_file_account_id, upload_file.name AS upload_file_name, upload_file.key AS upload_file_key, upload_file.size AS upload_file_size, upload_file.extension AS upload_file_extension, upload_file.mime_type AS upload_file_mime_type, upload_file.hash AS upload_file_hash, upload_file.updated_at AS upload_file_updated_at, upload_file.created_at AS upload_file_created_at 
FROM upload_file 
WHERE upload_file.id = %(id_1)s::UUID
[2024-10-13 09:41:48,060.060] base.py -> _exec_single_context line:1908 [INFO]: [cached since 0.004597s ago] {'id_1': UUID('4cdddf4d-6642-4bb3-87be-63dc77408c7e')}
[2024-10-13 09:41:48,061.061] base.py -> _exec_single_context line:1903 [INFO]: SELECT upload_file.id AS upload_file_id, upload_file.account_id AS upload_file_account_id, upload_file.name AS upload_file_name, upload_file.key AS upload_file_key, upload_file.size AS upload_file_size, upload_file.extension AS upload_file_extension, upload_file.mime_type AS upload_file_mime_type, upload_file.hash AS upload_file_hash, upload_file.updated_at AS upload_file_updated_at, upload_file.created_at AS upload_file_created_at 
FROM upload_file 
WHERE upload_file.id = %(id_1)s::UUID
[2024-10-13 09:41:48,062.062] base.py -> _exec_single_context line:1908 [INFO]: [cached since 0.006502s ago] {'id_1': UUID('4cdddf4d-6642-4bb3-87be-63dc77408c7e')}
[2024-10-13 09:41:48,063.063] base.py -> _exec_single_context line:1903 [INFO]: SELECT upload_file.id AS upload_file_id, upload_file.account_id AS upload_file_account_id, upload_file.name AS upload_file_name, upload_file.key AS upload_file_key, upload_file.size AS upload_file_size, upload_file.extension AS upload_file_extension, upload_file.mime_type AS upload_file_mime_type, upload_file.hash AS upload_file_hash, upload_file.updated_at AS upload_file_updated_at, upload_file.created_at AS upload_file_created_at 
FROM upload_file 
WHERE upload_file.id = %(id_1)s::UUID
[2024-10-13 09:41:48,063.063] base.py -> _exec_single_context line:1908 [INFO]: [cached since 0.008117s ago] {'id_1': UUID('4cdddf4d-6642-4bb3-87be-63dc77408c7e')}
[2024-10-13 09:41:48,064.064] base.py -> _exec_single_context line:1903 [INFO]: SELECT upload_file.id AS upload_file_id, upload_file.account_id AS upload_file_account_id, upload_file.name AS upload_file_name, upload_file.key AS upload_file_key, upload_file.size AS upload_file_size, upload_file.extension AS upload_file_extension, upload_file.mime_type AS upload_file_mime_type, upload_file.hash AS upload_file_hash, upload_file.updated_at AS upload_file_updated_at, upload_file.created_at AS upload_file_created_at 
FROM upload_file 
WHERE upload_file.id = %(id_1)s::UUID
[2024-10-13 09:41:48,064.064] base.py -> _exec_single_context line:1908 [INFO]: [cached since 0.009163s ago] {'id_1': UUID('4cdddf4d-6642-4bb3-87be-63dc77408c7e')}
[2024-10-13 09:41:48,065.065] base.py -> _exec_single_context line:1903 [INFO]: SELECT upload_file.id AS upload_file_id, upload_file.account_id AS upload_file_account_id, upload_file.name AS upload_file_name, upload_file.key AS upload_file_key, upload_file.size AS upload_file_size, upload_file.extension AS upload_file_extension, upload_file.mime_type AS upload_file_mime_type, upload_file.hash AS upload_file_hash, upload_file.updated_at AS upload_file_updated_at, upload_file.created_at AS upload_file_created_at 
FROM upload_file 
WHERE upload_file.id = %(id_1)s::UUID
[2024-10-13 09:41:48,065.065] base.py -> _exec_single_context line:1908 [INFO]: [cached since 0.01021s ago] {'id_1': UUID('4cdddf4d-6642-4bb3-87be-63dc77408c7e')}
[2024-10-13 09:41:48,066.066] base.py -> _exec_single_context line:1903 [INFO]: SELECT upload_file.id AS upload_file_id, upload_file.account_id AS upload_file_account_id, upload_file.name AS upload_file_name, upload_file.key AS upload_file_key, upload_file.size AS upload_file_size, upload_file.extension AS upload_file_extension, upload_file.mime_type AS upload_file_mime_type, upload_file.hash AS upload_file_hash, upload_file.updated_at AS upload_file_updated_at, upload_file.created_at AS upload_file_created_at 
FROM upload_file 
WHERE upload_file.id = %(id_1)s::UUID
[2024-10-13 09:41:48,066.066] base.py -> _exec_single_context line:1908 [INFO]: [cached since 0.01118s ago] {'id_1': UUID('4cdddf4d-6642-4bb3-87be-63dc77408c7e')}
[2024-10-13 09:41:48,067.067] base.py -> _exec_single_context line:1903 [INFO]: SELECT upload_file.id AS upload_file_id, upload_file.account_id AS upload_file_account_id, upload_file.name AS upload_file_name, upload_file.key AS upload_file_key, upload_file.size AS upload_file_size, upload_file.extension AS upload_file_extension, upload_file.mime_type AS upload_file_mime_type, upload_file.hash AS upload_file_hash, upload_file.updated_at AS upload_file_updated_at, upload_file.created_at AS upload_file_created_at 
FROM upload_file 
WHERE upload_file.id = %(id_1)s::UUID
[2024-10-13 09:41:48,067.067] base.py -> _exec_single_context line:1908 [INFO]: [cached since 0.01217s ago] {'id_1': UUID('4cdddf4d-6642-4bb3-87be-63dc77408c7e')}
[2024-10-13 09:41:48,069.069] base.py -> _rollback_impl line:1129 [INFO]: ROLLBACK
[2024-10-13 09:41:48,070.070] _internal.py -> _log line:96 [INFO]: 127.0.0.1 - - [13/Oct/2024 09:41:48] "POST /datasets/f3f28f75-8e60-4eba-b6df-4d1b390bbd89/hit HTTP/1.1" 200 -
[2024-10-13 09:41:53,821.821] base.py -> _begin_impl line:1103 [INFO]: BEGIN (implicit)
[2024-10-13 09:41:53,821.821] base.py -> _exec_single_context line:1903 [INFO]: SELECT dataset.id AS dataset_id, dataset.account_id AS dataset_account_id, dataset.name AS dataset_name, dataset.icon AS dataset_icon, dataset.description AS dataset_description, dataset.updated_at AS dataset_updated_at, dataset.created_at AS dataset_created_at 
FROM dataset 
WHERE dataset.id = %(pk_1)s::UUID
[2024-10-13 09:41:53,821.821] base.py -> _exec_single_context line:1908 [INFO]: [cached since 14.25s ago] {'pk_1': UUID('f3f28f75-8e60-4eba-b6df-4d1b390bbd89')}
[2024-10-13 09:41:53,823.823] base.py -> _exec_single_context line:1903 [INFO]: SELECT dataset.id AS dataset_id, dataset.account_id AS dataset_account_id, dataset.name AS dataset_name, dataset.icon AS dataset_icon, dataset.description AS dataset_description, dataset.updated_at AS dataset_updated_at, dataset.created_at AS dataset_created_at 
FROM dataset 
WHERE dataset.id IN (%(id_1_1)s::UUID) AND dataset.account_id = %(account_id_1)s::UUID
[2024-10-13 09:41:53,823.823] base.py -> _exec_single_context line:1908 [INFO]: [cached since 14.24s ago] {'account_id_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f', 'id_1_1': UUID('f3f28f75-8e60-4eba-b6df-4d1b390bbd89')}
[2024-10-13 09:41:55,300.300] base.py -> _exec_single_context line:1903 [INFO]: INSERT INTO dataset_query (dataset_id, query, source, source_app_id, created_by) VALUES (%(dataset_id)s::UUID, %(query)s, %(source)s, %(source_app_id)s::UUID, %(created_by)s::UUID) RETURNING dataset_query.id, dataset_query.updated_at, dataset_query.created_at
[2024-10-13 09:41:55,300.300] base.py -> _exec_single_context line:1908 [INFO]: [cached since 7.302s ago] {'dataset_id': UUID('f3f28f75-8e60-4eba-b6df-4d1b390bbd89'), 'query': '想学习flask，有什么建议么？', 'source': <RetrievalSource.HIT_TESTING: 'hit_testing'>, 'source_app_id': None, 'created_by': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2024-10-13 09:41:55,301.301] base.py -> _commit_impl line:1146 [INFO]: COMMIT
[2024-10-13 09:41:55,308.308] base.py -> _begin_impl line:1103 [INFO]: BEGIN (implicit)
[2024-10-13 09:41:55,309.309] base.py -> _exec_single_context line:1903 [INFO]: INSERT INTO dataset_query (dataset_id, query, source, source_app_id, created_by) VALUES (%(dataset_id)s::UUID, %(query)s, %(source)s, %(source_app_id)s::UUID, %(created_by)s::UUID) RETURNING dataset_query.id, dataset_query.updated_at, dataset_query.created_at
[2024-10-13 09:41:55,309.309] base.py -> _exec_single_context line:1908 [INFO]: [cached since 7.311s ago] {'dataset_id': UUID('f3f28f75-8e60-4eba-b6df-4d1b390bbd89'), 'query': '想学习flask，有什么建议么？', 'source': <RetrievalSource.HIT_TESTING: 'hit_testing'>, 'source_app_id': None, 'created_by': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2024-10-13 09:41:55,310.310] base.py -> _commit_impl line:1146 [INFO]: COMMIT
[2024-10-13 09:41:55,336.336] base.py -> _begin_impl line:1103 [INFO]: BEGIN (implicit)
[2024-10-13 09:41:55,337.337] base.py -> _exec_single_context line:1903 [INFO]: INSERT INTO dataset_query (dataset_id, query, source, source_app_id, created_by) VALUES (%(dataset_id)s::UUID, %(query)s, %(source)s, %(source_app_id)s::UUID, %(created_by)s::UUID) RETURNING dataset_query.id, dataset_query.updated_at, dataset_query.created_at
[2024-10-13 09:41:55,337.337] base.py -> _exec_single_context line:1908 [INFO]: [cached since 7.339s ago] {'dataset_id': UUID('f3f28f75-8e60-4eba-b6df-4d1b390bbd89'), 'query': '想学习flask，有什么建议么？', 'source': <RetrievalSource.HIT_TESTING: 'hit_testing'>, 'source_app_id': None, 'created_by': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2024-10-13 09:41:55,338.338] base.py -> _commit_impl line:1146 [INFO]: COMMIT
[2024-10-13 09:41:55,348.348] base.py -> _begin_impl line:1103 [INFO]: BEGIN (implicit)
[2024-10-13 09:41:55,348.348] base.py -> _exec_single_context line:1903 [INFO]: INSERT INTO dataset_query (dataset_id, query, source, source_app_id, created_by) VALUES (%(dataset_id)s::UUID, %(query)s, %(source)s, %(source_app_id)s::UUID, %(created_by)s::UUID) RETURNING dataset_query.id, dataset_query.updated_at, dataset_query.created_at
[2024-10-13 09:41:55,348.348] base.py -> _exec_single_context line:1908 [INFO]: [cached since 7.35s ago] {'dataset_id': UUID('f3f28f75-8e60-4eba-b6df-4d1b390bbd89'), 'query': '想学习flask，有什么建议么？', 'source': <RetrievalSource.HIT_TESTING: 'hit_testing'>, 'source_app_id': None, 'created_by': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2024-10-13 09:41:55,349.349] base.py -> _commit_impl line:1146 [INFO]: COMMIT
[2024-10-13 09:41:55,351.351] base.py -> _begin_impl line:1103 [INFO]: BEGIN (implicit)
[2024-10-13 09:41:55,352.352] base.py -> _exec_single_context line:1903 [INFO]: INSERT INTO dataset_query (dataset_id, query, source, source_app_id, created_by) VALUES (%(dataset_id)s::UUID, %(query)s, %(source)s, %(source_app_id)s::UUID, %(created_by)s::UUID) RETURNING dataset_query.id, dataset_query.updated_at, dataset_query.created_at
[2024-10-13 09:41:55,352.352] base.py -> _exec_single_context line:1908 [INFO]: [cached since 7.354s ago] {'dataset_id': UUID('f3f28f75-8e60-4eba-b6df-4d1b390bbd89'), 'query': '想学习flask，有什么建议么？', 'source': <RetrievalSource.HIT_TESTING: 'hit_testing'>, 'source_app_id': None, 'created_by': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2024-10-13 09:41:55,353.353] base.py -> _commit_impl line:1146 [INFO]: COMMIT
[2024-10-13 09:41:55,355.355] base.py -> _begin_impl line:1103 [INFO]: BEGIN (implicit)
[2024-10-13 09:41:55,355.355] base.py -> _exec_single_context line:1903 [INFO]: INSERT INTO dataset_query (dataset_id, query, source, source_app_id, created_by) VALUES (%(dataset_id)s::UUID, %(query)s, %(source)s, %(source_app_id)s::UUID, %(created_by)s::UUID) RETURNING dataset_query.id, dataset_query.updated_at, dataset_query.created_at
[2024-10-13 09:41:55,356.356] base.py -> _exec_single_context line:1908 [INFO]: [cached since 7.357s ago] {'dataset_id': UUID('f3f28f75-8e60-4eba-b6df-4d1b390bbd89'), 'query': '想学习flask，有什么建议么？', 'source': <RetrievalSource.HIT_TESTING: 'hit_testing'>, 'source_app_id': None, 'created_by': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2024-10-13 09:41:55,357.357] base.py -> _commit_impl line:1146 [INFO]: COMMIT
[2024-10-13 09:41:55,358.358] base.py -> _begin_impl line:1103 [INFO]: BEGIN (implicit)
[2024-10-13 09:41:55,358.358] base.py -> _exec_single_context line:1903 [INFO]: INSERT INTO dataset_query (dataset_id, query, source, source_app_id, created_by) VALUES (%(dataset_id)s::UUID, %(query)s, %(source)s, %(source_app_id)s::UUID, %(created_by)s::UUID) RETURNING dataset_query.id, dataset_query.updated_at, dataset_query.created_at
[2024-10-13 09:41:55,359.359] base.py -> _exec_single_context line:1908 [INFO]: [cached since 7.361s ago] {'dataset_id': UUID('f3f28f75-8e60-4eba-b6df-4d1b390bbd89'), 'query': '想学习flask，有什么建议么？', 'source': <RetrievalSource.HIT_TESTING: 'hit_testing'>, 'source_app_id': None, 'created_by': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2024-10-13 09:41:55,360.360] base.py -> _commit_impl line:1146 [INFO]: COMMIT
[2024-10-13 09:41:55,361.361] base.py -> _begin_impl line:1103 [INFO]: BEGIN (implicit)
[2024-10-13 09:41:55,362.362] base.py -> _exec_single_context line:1903 [INFO]: INSERT INTO dataset_query (dataset_id, query, source, source_app_id, created_by) VALUES (%(dataset_id)s::UUID, %(query)s, %(source)s, %(source_app_id)s::UUID, %(created_by)s::UUID) RETURNING dataset_query.id, dataset_query.updated_at, dataset_query.created_at
[2024-10-13 09:41:55,362.362] base.py -> _exec_single_context line:1908 [INFO]: [cached since 7.363s ago] {'dataset_id': UUID('f3f28f75-8e60-4eba-b6df-4d1b390bbd89'), 'query': '想学习flask，有什么建议么？', 'source': <RetrievalSource.HIT_TESTING: 'hit_testing'>, 'source_app_id': None, 'created_by': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2024-10-13 09:41:55,362.362] base.py -> _commit_impl line:1146 [INFO]: COMMIT
[2024-10-13 09:41:55,364.364] base.py -> _begin_impl line:1103 [INFO]: BEGIN (implicit)
[2024-10-13 09:41:55,364.364] base.py -> _exec_single_context line:1903 [INFO]: INSERT INTO dataset_query (dataset_id, query, source, source_app_id, created_by) VALUES (%(dataset_id)s::UUID, %(query)s, %(source)s, %(source_app_id)s::UUID, %(created_by)s::UUID) RETURNING dataset_query.id, dataset_query.updated_at, dataset_query.created_at
[2024-10-13 09:41:55,364.364] base.py -> _exec_single_context line:1908 [INFO]: [cached since 7.366s ago] {'dataset_id': UUID('f3f28f75-8e60-4eba-b6df-4d1b390bbd89'), 'query': '想学习flask，有什么建议么？', 'source': <RetrievalSource.HIT_TESTING: 'hit_testing'>, 'source_app_id': None, 'created_by': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2024-10-13 09:41:55,365.365] base.py -> _commit_impl line:1146 [INFO]: COMMIT
[2024-10-13 09:41:55,366.366] base.py -> _begin_impl line:1103 [INFO]: BEGIN (implicit)
[2024-10-13 09:41:55,366.366] base.py -> _exec_single_context line:1903 [INFO]: INSERT INTO dataset_query (dataset_id, query, source, source_app_id, created_by) VALUES (%(dataset_id)s::UUID, %(query)s, %(source)s, %(source_app_id)s::UUID, %(created_by)s::UUID) RETURNING dataset_query.id, dataset_query.updated_at, dataset_query.created_at
[2024-10-13 09:41:55,367.367] base.py -> _exec_single_context line:1908 [INFO]: [cached since 7.368s ago] {'dataset_id': UUID('f3f28f75-8e60-4eba-b6df-4d1b390bbd89'), 'query': '想学习flask，有什么建议么？', 'source': <RetrievalSource.HIT_TESTING: 'hit_testing'>, 'source_app_id': None, 'created_by': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2024-10-13 09:41:55,367.367] base.py -> _commit_impl line:1146 [INFO]: COMMIT
[2024-10-13 09:41:55,369.369] base.py -> _begin_impl line:1103 [INFO]: BEGIN (implicit)
[2024-10-13 09:41:55,369.369] base.py -> _exec_single_context line:1903 [INFO]: UPDATE segment SET hit_count=(segment.hit_count + %(hit_count_1)s) WHERE segment.id IN (%(id_1_1)s::UUID, %(id_1_2)s::UUID, %(id_1_3)s::UUID, %(id_1_4)s::UUID, %(id_1_5)s::UUID, %(id_1_6)s::UUID, %(id_1_7)s::UUID, %(id_1_8)s::UUID, %(id_1_9)s::UUID, %(id_1_10)s::UUID)
[2024-10-13 09:41:55,369.369] base.py -> _exec_single_context line:1908 [INFO]: [cached since 13.99s ago] {'hit_count_1': 1, 'id_1_1': UUID('4bb0d451-b34b-4b97-8ddd-3afbe47236f1'), 'id_1_2': UUID('e8d2ffa0-5ff3-4673-976f-5a14d5ba55fa'), 'id_1_3': UUID('3472fa81-8d88-4cb4-bd9b-7d28f9a7f9eb'), 'id_1_4': UUID('b3f3d69d-6ea6-43c4-bba4-b1c63b08474e'), 'id_1_5': UUID('fa5a8ee4-591a-4965-b82b-0ff6dca67be4'), 'id_1_6': UUID('4adb6c36-fb5d-4818-87d4-dc7983a74812'), 'id_1_7': UUID('25e9fe45-24f2-4f5c-a2f7-86e15bf5f920'), 'id_1_8': UUID('07bb092a-200a-4745-b47d-40ec367b796a'), 'id_1_9': UUID('df2676ee-80e3-4f2a-8264-e964737999d7'), 'id_1_10': UUID('e2408665-8364-4efa-9aa0-99e4cf3815ee')}
[2024-10-13 09:41:55,370.370] base.py -> _commit_impl line:1146 [INFO]: COMMIT
[2024-10-13 09:41:55,371.371] base.py -> _begin_impl line:1103 [INFO]: BEGIN (implicit)
[2024-10-13 09:41:55,371.371] base.py -> _exec_single_context line:1903 [INFO]: SELECT segment.id AS segment_id, segment.account_id AS segment_account_id, segment.dataset_id AS segment_dataset_id, segment.document_id AS segment_document_id, segment.node_id AS segment_node_id, segment.position AS segment_position, segment.content AS segment_content, segment.character_count AS segment_character_count, segment.token_count AS segment_token_count, segment.keywords AS segment_keywords, segment.hash AS segment_hash, segment.hit_count AS segment_hit_count, segment.enabled AS segment_enabled, segment.disabled_at AS segment_disabled_at, segment.processing_started_at AS segment_processing_started_at, segment.indexing_completed_at AS segment_indexing_completed_at, segment.completed_at AS segment_completed_at, segment.stopped_at AS segment_stopped_at, segment.error AS segment_error, segment.status AS segment_status, segment.updated_at AS segment_updated_at, segment.created_at AS segment_created_at 
FROM segment 
WHERE segment.id IN (%(id_1_1)s::UUID, %(id_1_2)s::UUID, %(id_1_3)s::UUID, %(id_1_4)s::UUID, %(id_1_5)s::UUID, %(id_1_6)s::UUID, %(id_1_7)s::UUID, %(id_1_8)s::UUID, %(id_1_9)s::UUID, %(id_1_10)s::UUID)
[2024-10-13 09:41:55,372.372] base.py -> _exec_single_context line:1908 [INFO]: [cached since 13.99s ago] {'id_1_1': '4bb0d451-b34b-4b97-8ddd-3afbe47236f1', 'id_1_2': 'e8d2ffa0-5ff3-4673-976f-5a14d5ba55fa', 'id_1_3': '3472fa81-8d88-4cb4-bd9b-7d28f9a7f9eb', 'id_1_4': 'b3f3d69d-6ea6-43c4-bba4-b1c63b08474e', 'id_1_5': 'fa5a8ee4-591a-4965-b82b-0ff6dca67be4', 'id_1_6': '4adb6c36-fb5d-4818-87d4-dc7983a74812', 'id_1_7': '25e9fe45-24f2-4f5c-a2f7-86e15bf5f920', 'id_1_8': '07bb092a-200a-4745-b47d-40ec367b796a', 'id_1_9': 'df2676ee-80e3-4f2a-8264-e964737999d7', 'id_1_10': 'e2408665-8364-4efa-9aa0-99e4cf3815ee'}
[2024-10-13 09:41:55,373.373] base.py -> _exec_single_context line:1903 [INFO]: SELECT document.id AS document_id, document.account_id AS document_account_id, document.dataset_id AS document_dataset_id, document.upload_file_id AS document_upload_file_id, document.process_rule_id AS document_process_rule_id, document.batch AS document_batch, document.name AS document_name, document.position AS document_position, document.character_count AS document_character_count, document.token_count AS document_token_count, document.processing_started_at AS document_processing_started_at, document.parsing_completed_at AS document_parsing_completed_at, document.splitting_completed_at AS document_splitting_completed_at, document.indexing_completed_at AS document_indexing_completed_at, document.completed_at AS document_completed_at, document.stopped_at AS document_stopped_at, document.error AS document_error, document.enabled AS document_enabled, document.disabled_at AS document_disabled_at, document.status AS document_status, document.updated_at AS document_updated_at, document.created_at AS document_created_at 
FROM document 
WHERE document.id = %(pk_1)s::UUID
[2024-10-13 09:41:55,374.374] base.py -> _exec_single_context line:1908 [INFO]: [cached since 7.323s ago] {'pk_1': UUID('d4b902e3-a013-4780-93fa-6fc300ab6bf8')}
[2024-10-13 09:41:55,375.375] base.py -> _exec_single_context line:1903 [INFO]: SELECT upload_file.id AS upload_file_id, upload_file.account_id AS upload_file_account_id, upload_file.name AS upload_file_name, upload_file.key AS upload_file_key, upload_file.size AS upload_file_size, upload_file.extension AS upload_file_extension, upload_file.mime_type AS upload_file_mime_type, upload_file.hash AS upload_file_hash, upload_file.updated_at AS upload_file_updated_at, upload_file.created_at AS upload_file_created_at 
FROM upload_file 
WHERE upload_file.id = %(id_1)s::UUID
[2024-10-13 09:41:55,375.375] base.py -> _exec_single_context line:1908 [INFO]: [cached since 7.319s ago] {'id_1': UUID('4cdddf4d-6642-4bb3-87be-63dc77408c7e')}
[2024-10-13 09:41:55,376.376] base.py -> _exec_single_context line:1903 [INFO]: SELECT upload_file.id AS upload_file_id, upload_file.account_id AS upload_file_account_id, upload_file.name AS upload_file_name, upload_file.key AS upload_file_key, upload_file.size AS upload_file_size, upload_file.extension AS upload_file_extension, upload_file.mime_type AS upload_file_mime_type, upload_file.hash AS upload_file_hash, upload_file.updated_at AS upload_file_updated_at, upload_file.created_at AS upload_file_created_at 
FROM upload_file 
WHERE upload_file.id = %(id_1)s::UUID
[2024-10-13 09:41:55,376.376] base.py -> _exec_single_context line:1908 [INFO]: [cached since 7.321s ago] {'id_1': UUID('4cdddf4d-6642-4bb3-87be-63dc77408c7e')}
[2024-10-13 09:41:55,377.377] base.py -> _exec_single_context line:1903 [INFO]: SELECT upload_file.id AS upload_file_id, upload_file.account_id AS upload_file_account_id, upload_file.name AS upload_file_name, upload_file.key AS upload_file_key, upload_file.size AS upload_file_size, upload_file.extension AS upload_file_extension, upload_file.mime_type AS upload_file_mime_type, upload_file.hash AS upload_file_hash, upload_file.updated_at AS upload_file_updated_at, upload_file.created_at AS upload_file_created_at 
FROM upload_file 
WHERE upload_file.id = %(id_1)s::UUID
[2024-10-13 09:41:55,377.377] base.py -> _exec_single_context line:1908 [INFO]: [cached since 7.322s ago] {'id_1': UUID('4cdddf4d-6642-4bb3-87be-63dc77408c7e')}
[2024-10-13 09:41:55,378.378] base.py -> _exec_single_context line:1903 [INFO]: SELECT upload_file.id AS upload_file_id, upload_file.account_id AS upload_file_account_id, upload_file.name AS upload_file_name, upload_file.key AS upload_file_key, upload_file.size AS upload_file_size, upload_file.extension AS upload_file_extension, upload_file.mime_type AS upload_file_mime_type, upload_file.hash AS upload_file_hash, upload_file.updated_at AS upload_file_updated_at, upload_file.created_at AS upload_file_created_at 
FROM upload_file 
WHERE upload_file.id = %(id_1)s::UUID
[2024-10-13 09:41:55,378.378] base.py -> _exec_single_context line:1908 [INFO]: [cached since 7.323s ago] {'id_1': UUID('4cdddf4d-6642-4bb3-87be-63dc77408c7e')}
[2024-10-13 09:41:55,379.379] base.py -> _exec_single_context line:1903 [INFO]: SELECT upload_file.id AS upload_file_id, upload_file.account_id AS upload_file_account_id, upload_file.name AS upload_file_name, upload_file.key AS upload_file_key, upload_file.size AS upload_file_size, upload_file.extension AS upload_file_extension, upload_file.mime_type AS upload_file_mime_type, upload_file.hash AS upload_file_hash, upload_file.updated_at AS upload_file_updated_at, upload_file.created_at AS upload_file_created_at 
FROM upload_file 
WHERE upload_file.id = %(id_1)s::UUID
[2024-10-13 09:41:55,379.379] base.py -> _exec_single_context line:1908 [INFO]: [cached since 7.324s ago] {'id_1': UUID('4cdddf4d-6642-4bb3-87be-63dc77408c7e')}
[2024-10-13 09:41:55,380.380] base.py -> _exec_single_context line:1903 [INFO]: SELECT upload_file.id AS upload_file_id, upload_file.account_id AS upload_file_account_id, upload_file.name AS upload_file_name, upload_file.key AS upload_file_key, upload_file.size AS upload_file_size, upload_file.extension AS upload_file_extension, upload_file.mime_type AS upload_file_mime_type, upload_file.hash AS upload_file_hash, upload_file.updated_at AS upload_file_updated_at, upload_file.created_at AS upload_file_created_at 
FROM upload_file 
WHERE upload_file.id = %(id_1)s::UUID
[2024-10-13 09:41:55,380.380] base.py -> _exec_single_context line:1908 [INFO]: [cached since 7.325s ago] {'id_1': UUID('4cdddf4d-6642-4bb3-87be-63dc77408c7e')}
[2024-10-13 09:41:55,381.381] base.py -> _exec_single_context line:1903 [INFO]: SELECT upload_file.id AS upload_file_id, upload_file.account_id AS upload_file_account_id, upload_file.name AS upload_file_name, upload_file.key AS upload_file_key, upload_file.size AS upload_file_size, upload_file.extension AS upload_file_extension, upload_file.mime_type AS upload_file_mime_type, upload_file.hash AS upload_file_hash, upload_file.updated_at AS upload_file_updated_at, upload_file.created_at AS upload_file_created_at 
FROM upload_file 
WHERE upload_file.id = %(id_1)s::UUID
[2024-10-13 09:41:55,381.381] base.py -> _exec_single_context line:1908 [INFO]: [cached since 7.326s ago] {'id_1': UUID('4cdddf4d-6642-4bb3-87be-63dc77408c7e')}
[2024-10-13 09:41:55,382.382] base.py -> _exec_single_context line:1903 [INFO]: SELECT upload_file.id AS upload_file_id, upload_file.account_id AS upload_file_account_id, upload_file.name AS upload_file_name, upload_file.key AS upload_file_key, upload_file.size AS upload_file_size, upload_file.extension AS upload_file_extension, upload_file.mime_type AS upload_file_mime_type, upload_file.hash AS upload_file_hash, upload_file.updated_at AS upload_file_updated_at, upload_file.created_at AS upload_file_created_at 
FROM upload_file 
WHERE upload_file.id = %(id_1)s::UUID
[2024-10-13 09:41:55,382.382] base.py -> _exec_single_context line:1908 [INFO]: [cached since 7.327s ago] {'id_1': UUID('4cdddf4d-6642-4bb3-87be-63dc77408c7e')}
[2024-10-13 09:41:55,383.383] base.py -> _exec_single_context line:1903 [INFO]: SELECT upload_file.id AS upload_file_id, upload_file.account_id AS upload_file_account_id, upload_file.name AS upload_file_name, upload_file.key AS upload_file_key, upload_file.size AS upload_file_size, upload_file.extension AS upload_file_extension, upload_file.mime_type AS upload_file_mime_type, upload_file.hash AS upload_file_hash, upload_file.updated_at AS upload_file_updated_at, upload_file.created_at AS upload_file_created_at 
FROM upload_file 
WHERE upload_file.id = %(id_1)s::UUID
[2024-10-13 09:41:55,383.383] base.py -> _exec_single_context line:1908 [INFO]: [cached since 7.328s ago] {'id_1': UUID('4cdddf4d-6642-4bb3-87be-63dc77408c7e')}
[2024-10-13 09:41:55,384.384] base.py -> _exec_single_context line:1903 [INFO]: SELECT upload_file.id AS upload_file_id, upload_file.account_id AS upload_file_account_id, upload_file.name AS upload_file_name, upload_file.key AS upload_file_key, upload_file.size AS upload_file_size, upload_file.extension AS upload_file_extension, upload_file.mime_type AS upload_file_mime_type, upload_file.hash AS upload_file_hash, upload_file.updated_at AS upload_file_updated_at, upload_file.created_at AS upload_file_created_at 
FROM upload_file 
WHERE upload_file.id = %(id_1)s::UUID
[2024-10-13 09:41:55,385.385] base.py -> _exec_single_context line:1908 [INFO]: [cached since 7.329s ago] {'id_1': UUID('4cdddf4d-6642-4bb3-87be-63dc77408c7e')}
[2024-10-13 09:41:55,387.387] base.py -> _rollback_impl line:1129 [INFO]: ROLLBACK
[2024-10-13 09:41:55,388.388] _internal.py -> _log line:96 [INFO]: 127.0.0.1 - - [13/Oct/2024 09:41:55] "POST /datasets/f3f28f75-8e60-4eba-b6df-4d1b390bbd89/hit HTTP/1.1" 200 -
[2024-10-13 09:42:06,134.134] base.py -> _begin_impl line:1103 [INFO]: BEGIN (implicit)
[2024-10-13 09:42:06,135.135] base.py -> _exec_single_context line:1903 [INFO]: SELECT dataset.id AS dataset_id, dataset.account_id AS dataset_account_id, dataset.name AS dataset_name, dataset.icon AS dataset_icon, dataset.description AS dataset_description, dataset.updated_at AS dataset_updated_at, dataset.created_at AS dataset_created_at 
FROM dataset 
WHERE dataset.id = %(pk_1)s::UUID
[2024-10-13 09:42:06,135.135] base.py -> _exec_single_context line:1908 [INFO]: [cached since 26.56s ago] {'pk_1': UUID('f3f28f75-8e60-4eba-b6df-4d1b390bbd89')}
[2024-10-13 09:42:06,136.136] base.py -> _exec_single_context line:1903 [INFO]: SELECT dataset.id AS dataset_id, dataset.account_id AS dataset_account_id, dataset.name AS dataset_name, dataset.icon AS dataset_icon, dataset.description AS dataset_description, dataset.updated_at AS dataset_updated_at, dataset.created_at AS dataset_created_at 
FROM dataset 
WHERE dataset.id IN (%(id_1_1)s::UUID) AND dataset.account_id = %(account_id_1)s::UUID
[2024-10-13 09:42:06,136.136] base.py -> _exec_single_context line:1908 [INFO]: [cached since 26.56s ago] {'account_id_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f', 'id_1_1': UUID('f3f28f75-8e60-4eba-b6df-4d1b390bbd89')}
[2024-10-13 09:42:07,572.572] __init__.py -> initialize line:113 [DEBUG]: Building prefix dict from the default dictionary ...
[2024-10-13 09:42:07,572.572] __init__.py -> initialize line:132 [DEBUG]: Loading model from cache C:\Users\Administrator\AppData\Local\Temp\jieba.cache
[2024-10-13 09:42:08,064.064] __init__.py -> initialize line:164 [DEBUG]: Loading model cost 0.492 seconds.
[2024-10-13 09:42:08,064.064] __init__.py -> initialize line:166 [DEBUG]: Prefix dict has been built successfully.
[2024-10-13 09:42:08,066.066] base.py -> _exec_single_context line:1903 [INFO]: SELECT keyword_table.keyword_table AS keyword_table_keyword_table 
FROM keyword_table 
WHERE keyword_table.dataset_id IN (%(dataset_id_1_1)s::UUID)
[2024-10-13 09:42:08,066.066] base.py -> _exec_single_context line:1908 [INFO]: [generated in 0.00029s] {'dataset_id_1_1': UUID('f3f28f75-8e60-4eba-b6df-4d1b390bbd89')}
[2024-10-13 09:42:08,068.068] base.py -> _exec_single_context line:1903 [INFO]: SELECT segment.id AS segment_id, segment.account_id AS segment_account_id, segment.dataset_id AS segment_dataset_id, segment.document_id AS segment_document_id, segment.node_id AS segment_node_id, segment.position AS segment_position, segment.content AS segment_content, segment.character_count AS segment_character_count, segment.token_count AS segment_token_count, segment.keywords AS segment_keywords, segment.hash AS segment_hash, segment.hit_count AS segment_hit_count, segment.enabled AS segment_enabled, segment.disabled_at AS segment_disabled_at, segment.processing_started_at AS segment_processing_started_at, segment.indexing_completed_at AS segment_indexing_completed_at, segment.completed_at AS segment_completed_at, segment.stopped_at AS segment_stopped_at, segment.error AS segment_error, segment.status AS segment_status, segment.updated_at AS segment_updated_at, segment.created_at AS segment_created_at 
FROM segment 
WHERE segment.id IN (NULL) AND (1 != 1)
[2024-10-13 09:42:08,068.068] base.py -> _exec_single_context line:1908 [INFO]: [cached since 26.68s ago] {}
[2024-10-13 09:42:08,070.070] base.py -> _exec_single_context line:1903 [INFO]: INSERT INTO dataset_query (dataset_id, query, source, source_app_id, created_by) VALUES (%(dataset_id)s::UUID, %(query)s, %(source)s, %(source_app_id)s::UUID, %(created_by)s::UUID) RETURNING dataset_query.id, dataset_query.updated_at, dataset_query.created_at
[2024-10-13 09:42:08,070.070] base.py -> _exec_single_context line:1908 [INFO]: [cached since 20.07s ago] {'dataset_id': UUID('f3f28f75-8e60-4eba-b6df-4d1b390bbd89'), 'query': '想学习flask，有什么建议么？', 'source': <RetrievalSource.HIT_TESTING: 'hit_testing'>, 'source_app_id': None, 'created_by': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2024-10-13 09:42:08,071.071] base.py -> _commit_impl line:1146 [INFO]: COMMIT
[2024-10-13 09:42:08,074.074] base.py -> _begin_impl line:1103 [INFO]: BEGIN (implicit)
[2024-10-13 09:42:08,074.074] base.py -> _exec_single_context line:1903 [INFO]: INSERT INTO dataset_query (dataset_id, query, source, source_app_id, created_by) VALUES (%(dataset_id)s::UUID, %(query)s, %(source)s, %(source_app_id)s::UUID, %(created_by)s::UUID) RETURNING dataset_query.id, dataset_query.updated_at, dataset_query.created_at
[2024-10-13 09:42:08,074.074] base.py -> _exec_single_context line:1908 [INFO]: [cached since 20.08s ago] {'dataset_id': UUID('f3f28f75-8e60-4eba-b6df-4d1b390bbd89'), 'query': '想学习flask，有什么建议么？', 'source': <RetrievalSource.HIT_TESTING: 'hit_testing'>, 'source_app_id': None, 'created_by': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2024-10-13 09:42:08,075.075] base.py -> _commit_impl line:1146 [INFO]: COMMIT
[2024-10-13 09:42:08,076.076] base.py -> _begin_impl line:1103 [INFO]: BEGIN (implicit)
[2024-10-13 09:42:08,077.077] base.py -> _exec_single_context line:1903 [INFO]: INSERT INTO dataset_query (dataset_id, query, source, source_app_id, created_by) VALUES (%(dataset_id)s::UUID, %(query)s, %(source)s, %(source_app_id)s::UUID, %(created_by)s::UUID) RETURNING dataset_query.id, dataset_query.updated_at, dataset_query.created_at
[2024-10-13 09:42:08,077.077] base.py -> _exec_single_context line:1908 [INFO]: [cached since 20.08s ago] {'dataset_id': UUID('f3f28f75-8e60-4eba-b6df-4d1b390bbd89'), 'query': '想学习flask，有什么建议么？', 'source': <RetrievalSource.HIT_TESTING: 'hit_testing'>, 'source_app_id': None, 'created_by': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2024-10-13 09:42:08,078.078] base.py -> _commit_impl line:1146 [INFO]: COMMIT
[2024-10-13 09:42:08,079.079] base.py -> _begin_impl line:1103 [INFO]: BEGIN (implicit)
[2024-10-13 09:42:08,079.079] base.py -> _exec_single_context line:1903 [INFO]: INSERT INTO dataset_query (dataset_id, query, source, source_app_id, created_by) VALUES (%(dataset_id)s::UUID, %(query)s, %(source)s, %(source_app_id)s::UUID, %(created_by)s::UUID) RETURNING dataset_query.id, dataset_query.updated_at, dataset_query.created_at
[2024-10-13 09:42:08,079.079] base.py -> _exec_single_context line:1908 [INFO]: [cached since 20.08s ago] {'dataset_id': UUID('f3f28f75-8e60-4eba-b6df-4d1b390bbd89'), 'query': '想学习flask，有什么建议么？', 'source': <RetrievalSource.HIT_TESTING: 'hit_testing'>, 'source_app_id': None, 'created_by': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2024-10-13 09:42:08,080.080] base.py -> _commit_impl line:1146 [INFO]: COMMIT
[2024-10-13 09:42:08,082.082] base.py -> _begin_impl line:1103 [INFO]: BEGIN (implicit)
[2024-10-13 09:42:08,082.082] base.py -> _exec_single_context line:1903 [INFO]: INSERT INTO dataset_query (dataset_id, query, source, source_app_id, created_by) VALUES (%(dataset_id)s::UUID, %(query)s, %(source)s, %(source_app_id)s::UUID, %(created_by)s::UUID) RETURNING dataset_query.id, dataset_query.updated_at, dataset_query.created_at
[2024-10-13 09:42:08,082.082] base.py -> _exec_single_context line:1908 [INFO]: [cached since 20.08s ago] {'dataset_id': UUID('f3f28f75-8e60-4eba-b6df-4d1b390bbd89'), 'query': '想学习flask，有什么建议么？', 'source': <RetrievalSource.HIT_TESTING: 'hit_testing'>, 'source_app_id': None, 'created_by': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2024-10-13 09:42:08,083.083] base.py -> _commit_impl line:1146 [INFO]: COMMIT
[2024-10-13 09:42:08,085.085] base.py -> _begin_impl line:1103 [INFO]: BEGIN (implicit)
[2024-10-13 09:42:08,085.085] base.py -> _exec_single_context line:1903 [INFO]: INSERT INTO dataset_query (dataset_id, query, source, source_app_id, created_by) VALUES (%(dataset_id)s::UUID, %(query)s, %(source)s, %(source_app_id)s::UUID, %(created_by)s::UUID) RETURNING dataset_query.id, dataset_query.updated_at, dataset_query.created_at
[2024-10-13 09:42:08,085.085] base.py -> _exec_single_context line:1908 [INFO]: [cached since 20.09s ago] {'dataset_id': UUID('f3f28f75-8e60-4eba-b6df-4d1b390bbd89'), 'query': '想学习flask，有什么建议么？', 'source': <RetrievalSource.HIT_TESTING: 'hit_testing'>, 'source_app_id': None, 'created_by': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2024-10-13 09:42:08,086.086] base.py -> _commit_impl line:1146 [INFO]: COMMIT
[2024-10-13 09:42:08,087.087] base.py -> _begin_impl line:1103 [INFO]: BEGIN (implicit)
[2024-10-13 09:42:08,087.087] base.py -> _exec_single_context line:1903 [INFO]: INSERT INTO dataset_query (dataset_id, query, source, source_app_id, created_by) VALUES (%(dataset_id)s::UUID, %(query)s, %(source)s, %(source_app_id)s::UUID, %(created_by)s::UUID) RETURNING dataset_query.id, dataset_query.updated_at, dataset_query.created_at
[2024-10-13 09:42:08,088.088] base.py -> _exec_single_context line:1908 [INFO]: [cached since 20.09s ago] {'dataset_id': UUID('f3f28f75-8e60-4eba-b6df-4d1b390bbd89'), 'query': '想学习flask，有什么建议么？', 'source': <RetrievalSource.HIT_TESTING: 'hit_testing'>, 'source_app_id': None, 'created_by': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2024-10-13 09:42:08,088.088] base.py -> _commit_impl line:1146 [INFO]: COMMIT
[2024-10-13 09:42:08,090.090] base.py -> _begin_impl line:1103 [INFO]: BEGIN (implicit)
[2024-10-13 09:42:08,090.090] base.py -> _exec_single_context line:1903 [INFO]: INSERT INTO dataset_query (dataset_id, query, source, source_app_id, created_by) VALUES (%(dataset_id)s::UUID, %(query)s, %(source)s, %(source_app_id)s::UUID, %(created_by)s::UUID) RETURNING dataset_query.id, dataset_query.updated_at, dataset_query.created_at
[2024-10-13 09:42:08,090.090] base.py -> _exec_single_context line:1908 [INFO]: [cached since 20.09s ago] {'dataset_id': UUID('f3f28f75-8e60-4eba-b6df-4d1b390bbd89'), 'query': '想学习flask，有什么建议么？', 'source': <RetrievalSource.HIT_TESTING: 'hit_testing'>, 'source_app_id': None, 'created_by': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2024-10-13 09:42:08,091.091] base.py -> _commit_impl line:1146 [INFO]: COMMIT
[2024-10-13 09:42:08,092.092] base.py -> _begin_impl line:1103 [INFO]: BEGIN (implicit)
[2024-10-13 09:42:08,092.092] base.py -> _exec_single_context line:1903 [INFO]: INSERT INTO dataset_query (dataset_id, query, source, source_app_id, created_by) VALUES (%(dataset_id)s::UUID, %(query)s, %(source)s, %(source_app_id)s::UUID, %(created_by)s::UUID) RETURNING dataset_query.id, dataset_query.updated_at, dataset_query.created_at
[2024-10-13 09:42:08,093.093] base.py -> _exec_single_context line:1908 [INFO]: [cached since 20.09s ago] {'dataset_id': UUID('f3f28f75-8e60-4eba-b6df-4d1b390bbd89'), 'query': '想学习flask，有什么建议么？', 'source': <RetrievalSource.HIT_TESTING: 'hit_testing'>, 'source_app_id': None, 'created_by': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2024-10-13 09:42:08,093.093] base.py -> _commit_impl line:1146 [INFO]: COMMIT
[2024-10-13 09:42:08,095.095] base.py -> _begin_impl line:1103 [INFO]: BEGIN (implicit)
[2024-10-13 09:42:08,095.095] base.py -> _exec_single_context line:1903 [INFO]: INSERT INTO dataset_query (dataset_id, query, source, source_app_id, created_by) VALUES (%(dataset_id)s::UUID, %(query)s, %(source)s, %(source_app_id)s::UUID, %(created_by)s::UUID) RETURNING dataset_query.id, dataset_query.updated_at, dataset_query.created_at
[2024-10-13 09:42:08,095.095] base.py -> _exec_single_context line:1908 [INFO]: [cached since 20.1s ago] {'dataset_id': UUID('f3f28f75-8e60-4eba-b6df-4d1b390bbd89'), 'query': '想学习flask，有什么建议么？', 'source': <RetrievalSource.HIT_TESTING: 'hit_testing'>, 'source_app_id': None, 'created_by': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2024-10-13 09:42:08,096.096] base.py -> _commit_impl line:1146 [INFO]: COMMIT
[2024-10-13 09:42:08,097.097] base.py -> _begin_impl line:1103 [INFO]: BEGIN (implicit)
[2024-10-13 09:42:08,098.098] base.py -> _exec_single_context line:1903 [INFO]: UPDATE segment SET hit_count=(segment.hit_count + %(hit_count_1)s) WHERE segment.id IN (%(id_1_1)s::UUID, %(id_1_2)s::UUID, %(id_1_3)s::UUID, %(id_1_4)s::UUID, %(id_1_5)s::UUID, %(id_1_6)s::UUID, %(id_1_7)s::UUID, %(id_1_8)s::UUID, %(id_1_9)s::UUID, %(id_1_10)s::UUID)
[2024-10-13 09:42:08,098.098] base.py -> _exec_single_context line:1908 [INFO]: [cached since 26.72s ago] {'hit_count_1': 1, 'id_1_1': UUID('4bb0d451-b34b-4b97-8ddd-3afbe47236f1'), 'id_1_2': UUID('e8d2ffa0-5ff3-4673-976f-5a14d5ba55fa'), 'id_1_3': UUID('3472fa81-8d88-4cb4-bd9b-7d28f9a7f9eb'), 'id_1_4': UUID('b3f3d69d-6ea6-43c4-bba4-b1c63b08474e'), 'id_1_5': UUID('fa5a8ee4-591a-4965-b82b-0ff6dca67be4'), 'id_1_6': UUID('4adb6c36-fb5d-4818-87d4-dc7983a74812'), 'id_1_7': UUID('25e9fe45-24f2-4f5c-a2f7-86e15bf5f920'), 'id_1_8': UUID('07bb092a-200a-4745-b47d-40ec367b796a'), 'id_1_9': UUID('df2676ee-80e3-4f2a-8264-e964737999d7'), 'id_1_10': UUID('e2408665-8364-4efa-9aa0-99e4cf3815ee')}
[2024-10-13 09:42:08,099.099] base.py -> _commit_impl line:1146 [INFO]: COMMIT
[2024-10-13 09:42:08,099.099] base.py -> _begin_impl line:1103 [INFO]: BEGIN (implicit)
[2024-10-13 09:42:08,100.100] base.py -> _exec_single_context line:1903 [INFO]: SELECT segment.id AS segment_id, segment.account_id AS segment_account_id, segment.dataset_id AS segment_dataset_id, segment.document_id AS segment_document_id, segment.node_id AS segment_node_id, segment.position AS segment_position, segment.content AS segment_content, segment.character_count AS segment_character_count, segment.token_count AS segment_token_count, segment.keywords AS segment_keywords, segment.hash AS segment_hash, segment.hit_count AS segment_hit_count, segment.enabled AS segment_enabled, segment.disabled_at AS segment_disabled_at, segment.processing_started_at AS segment_processing_started_at, segment.indexing_completed_at AS segment_indexing_completed_at, segment.completed_at AS segment_completed_at, segment.stopped_at AS segment_stopped_at, segment.error AS segment_error, segment.status AS segment_status, segment.updated_at AS segment_updated_at, segment.created_at AS segment_created_at 
FROM segment 
WHERE segment.id IN (%(id_1_1)s::UUID, %(id_1_2)s::UUID, %(id_1_3)s::UUID, %(id_1_4)s::UUID, %(id_1_5)s::UUID, %(id_1_6)s::UUID, %(id_1_7)s::UUID, %(id_1_8)s::UUID, %(id_1_9)s::UUID, %(id_1_10)s::UUID)
[2024-10-13 09:42:08,100.100] base.py -> _exec_single_context line:1908 [INFO]: [cached since 26.72s ago] {'id_1_1': '4bb0d451-b34b-4b97-8ddd-3afbe47236f1', 'id_1_2': 'e8d2ffa0-5ff3-4673-976f-5a14d5ba55fa', 'id_1_3': '3472fa81-8d88-4cb4-bd9b-7d28f9a7f9eb', 'id_1_4': 'b3f3d69d-6ea6-43c4-bba4-b1c63b08474e', 'id_1_5': 'fa5a8ee4-591a-4965-b82b-0ff6dca67be4', 'id_1_6': '4adb6c36-fb5d-4818-87d4-dc7983a74812', 'id_1_7': '25e9fe45-24f2-4f5c-a2f7-86e15bf5f920', 'id_1_8': '07bb092a-200a-4745-b47d-40ec367b796a', 'id_1_9': 'df2676ee-80e3-4f2a-8264-e964737999d7', 'id_1_10': 'e2408665-8364-4efa-9aa0-99e4cf3815ee'}
[2024-10-13 09:42:08,102.102] base.py -> _exec_single_context line:1903 [INFO]: SELECT document.id AS document_id, document.account_id AS document_account_id, document.dataset_id AS document_dataset_id, document.upload_file_id AS document_upload_file_id, document.process_rule_id AS document_process_rule_id, document.batch AS document_batch, document.name AS document_name, document.position AS document_position, document.character_count AS document_character_count, document.token_count AS document_token_count, document.processing_started_at AS document_processing_started_at, document.parsing_completed_at AS document_parsing_completed_at, document.splitting_completed_at AS document_splitting_completed_at, document.indexing_completed_at AS document_indexing_completed_at, document.completed_at AS document_completed_at, document.stopped_at AS document_stopped_at, document.error AS document_error, document.enabled AS document_enabled, document.disabled_at AS document_disabled_at, document.status AS document_status, document.updated_at AS document_updated_at, document.created_at AS document_created_at 
FROM document 
WHERE document.id = %(pk_1)s::UUID
[2024-10-13 09:42:08,102.102] base.py -> _exec_single_context line:1908 [INFO]: [cached since 20.05s ago] {'pk_1': UUID('d4b902e3-a013-4780-93fa-6fc300ab6bf8')}
[2024-10-13 09:42:08,103.103] base.py -> _exec_single_context line:1903 [INFO]: SELECT upload_file.id AS upload_file_id, upload_file.account_id AS upload_file_account_id, upload_file.name AS upload_file_name, upload_file.key AS upload_file_key, upload_file.size AS upload_file_size, upload_file.extension AS upload_file_extension, upload_file.mime_type AS upload_file_mime_type, upload_file.hash AS upload_file_hash, upload_file.updated_at AS upload_file_updated_at, upload_file.created_at AS upload_file_created_at 
FROM upload_file 
WHERE upload_file.id = %(id_1)s::UUID
[2024-10-13 09:42:08,104.104] base.py -> _exec_single_context line:1908 [INFO]: [cached since 20.05s ago] {'id_1': UUID('4cdddf4d-6642-4bb3-87be-63dc77408c7e')}
[2024-10-13 09:42:08,104.104] base.py -> _exec_single_context line:1903 [INFO]: SELECT upload_file.id AS upload_file_id, upload_file.account_id AS upload_file_account_id, upload_file.name AS upload_file_name, upload_file.key AS upload_file_key, upload_file.size AS upload_file_size, upload_file.extension AS upload_file_extension, upload_file.mime_type AS upload_file_mime_type, upload_file.hash AS upload_file_hash, upload_file.updated_at AS upload_file_updated_at, upload_file.created_at AS upload_file_created_at 
FROM upload_file 
WHERE upload_file.id = %(id_1)s::UUID
[2024-10-13 09:42:08,105.105] base.py -> _exec_single_context line:1908 [INFO]: [cached since 20.05s ago] {'id_1': UUID('4cdddf4d-6642-4bb3-87be-63dc77408c7e')}
[2024-10-13 09:42:08,105.105] base.py -> _exec_single_context line:1903 [INFO]: SELECT upload_file.id AS upload_file_id, upload_file.account_id AS upload_file_account_id, upload_file.name AS upload_file_name, upload_file.key AS upload_file_key, upload_file.size AS upload_file_size, upload_file.extension AS upload_file_extension, upload_file.mime_type AS upload_file_mime_type, upload_file.hash AS upload_file_hash, upload_file.updated_at AS upload_file_updated_at, upload_file.created_at AS upload_file_created_at 
FROM upload_file 
WHERE upload_file.id = %(id_1)s::UUID
[2024-10-13 09:42:08,106.106] base.py -> _exec_single_context line:1908 [INFO]: [cached since 20.05s ago] {'id_1': UUID('4cdddf4d-6642-4bb3-87be-63dc77408c7e')}
[2024-10-13 09:42:08,107.107] base.py -> _exec_single_context line:1903 [INFO]: SELECT upload_file.id AS upload_file_id, upload_file.account_id AS upload_file_account_id, upload_file.name AS upload_file_name, upload_file.key AS upload_file_key, upload_file.size AS upload_file_size, upload_file.extension AS upload_file_extension, upload_file.mime_type AS upload_file_mime_type, upload_file.hash AS upload_file_hash, upload_file.updated_at AS upload_file_updated_at, upload_file.created_at AS upload_file_created_at 
FROM upload_file 
WHERE upload_file.id = %(id_1)s::UUID
[2024-10-13 09:42:08,107.107] base.py -> _exec_single_context line:1908 [INFO]: [cached since 20.05s ago] {'id_1': UUID('4cdddf4d-6642-4bb3-87be-63dc77408c7e')}
[2024-10-13 09:42:08,108.108] base.py -> _exec_single_context line:1903 [INFO]: SELECT upload_file.id AS upload_file_id, upload_file.account_id AS upload_file_account_id, upload_file.name AS upload_file_name, upload_file.key AS upload_file_key, upload_file.size AS upload_file_size, upload_file.extension AS upload_file_extension, upload_file.mime_type AS upload_file_mime_type, upload_file.hash AS upload_file_hash, upload_file.updated_at AS upload_file_updated_at, upload_file.created_at AS upload_file_created_at 
FROM upload_file 
WHERE upload_file.id = %(id_1)s::UUID
[2024-10-13 09:42:08,108.108] base.py -> _exec_single_context line:1908 [INFO]: [cached since 20.05s ago] {'id_1': UUID('4cdddf4d-6642-4bb3-87be-63dc77408c7e')}
[2024-10-13 09:42:08,109.109] base.py -> _exec_single_context line:1903 [INFO]: SELECT upload_file.id AS upload_file_id, upload_file.account_id AS upload_file_account_id, upload_file.name AS upload_file_name, upload_file.key AS upload_file_key, upload_file.size AS upload_file_size, upload_file.extension AS upload_file_extension, upload_file.mime_type AS upload_file_mime_type, upload_file.hash AS upload_file_hash, upload_file.updated_at AS upload_file_updated_at, upload_file.created_at AS upload_file_created_at 
FROM upload_file 
WHERE upload_file.id = %(id_1)s::UUID
[2024-10-13 09:42:08,109.109] base.py -> _exec_single_context line:1908 [INFO]: [cached since 20.05s ago] {'id_1': UUID('4cdddf4d-6642-4bb3-87be-63dc77408c7e')}
[2024-10-13 09:42:08,110.110] base.py -> _exec_single_context line:1903 [INFO]: SELECT upload_file.id AS upload_file_id, upload_file.account_id AS upload_file_account_id, upload_file.name AS upload_file_name, upload_file.key AS upload_file_key, upload_file.size AS upload_file_size, upload_file.extension AS upload_file_extension, upload_file.mime_type AS upload_file_mime_type, upload_file.hash AS upload_file_hash, upload_file.updated_at AS upload_file_updated_at, upload_file.created_at AS upload_file_created_at 
FROM upload_file 
WHERE upload_file.id = %(id_1)s::UUID
[2024-10-13 09:42:08,110.110] base.py -> _exec_single_context line:1908 [INFO]: [cached since 20.06s ago] {'id_1': UUID('4cdddf4d-6642-4bb3-87be-63dc77408c7e')}
[2024-10-13 09:42:08,111.111] base.py -> _exec_single_context line:1903 [INFO]: SELECT upload_file.id AS upload_file_id, upload_file.account_id AS upload_file_account_id, upload_file.name AS upload_file_name, upload_file.key AS upload_file_key, upload_file.size AS upload_file_size, upload_file.extension AS upload_file_extension, upload_file.mime_type AS upload_file_mime_type, upload_file.hash AS upload_file_hash, upload_file.updated_at AS upload_file_updated_at, upload_file.created_at AS upload_file_created_at 
FROM upload_file 
WHERE upload_file.id = %(id_1)s::UUID
[2024-10-13 09:42:08,111.111] base.py -> _exec_single_context line:1908 [INFO]: [cached since 20.06s ago] {'id_1': UUID('4cdddf4d-6642-4bb3-87be-63dc77408c7e')}
[2024-10-13 09:42:08,112.112] base.py -> _exec_single_context line:1903 [INFO]: SELECT upload_file.id AS upload_file_id, upload_file.account_id AS upload_file_account_id, upload_file.name AS upload_file_name, upload_file.key AS upload_file_key, upload_file.size AS upload_file_size, upload_file.extension AS upload_file_extension, upload_file.mime_type AS upload_file_mime_type, upload_file.hash AS upload_file_hash, upload_file.updated_at AS upload_file_updated_at, upload_file.created_at AS upload_file_created_at 
FROM upload_file 
WHERE upload_file.id = %(id_1)s::UUID
[2024-10-13 09:42:08,112.112] base.py -> _exec_single_context line:1908 [INFO]: [cached since 20.06s ago] {'id_1': UUID('4cdddf4d-6642-4bb3-87be-63dc77408c7e')}
[2024-10-13 09:42:08,113.113] base.py -> _exec_single_context line:1903 [INFO]: SELECT upload_file.id AS upload_file_id, upload_file.account_id AS upload_file_account_id, upload_file.name AS upload_file_name, upload_file.key AS upload_file_key, upload_file.size AS upload_file_size, upload_file.extension AS upload_file_extension, upload_file.mime_type AS upload_file_mime_type, upload_file.hash AS upload_file_hash, upload_file.updated_at AS upload_file_updated_at, upload_file.created_at AS upload_file_created_at 
FROM upload_file 
WHERE upload_file.id = %(id_1)s::UUID
[2024-10-13 09:42:08,113.113] base.py -> _exec_single_context line:1908 [INFO]: [cached since 20.06s ago] {'id_1': UUID('4cdddf4d-6642-4bb3-87be-63dc77408c7e')}
[2024-10-13 09:42:08,116.116] base.py -> _rollback_impl line:1129 [INFO]: ROLLBACK
[2024-10-13 09:42:08,117.117] _internal.py -> _log line:96 [INFO]: 127.0.0.1 - - [13/Oct/2024 09:42:08] "POST /datasets/f3f28f75-8e60-4eba-b6df-4d1b390bbd89/hit HTTP/1.1" 200 -
[2024-10-13 15:40:55,496.496] _internal.py -> _log line:96 [INFO]:  * Detected change in 'D:\\Code\\llmops\\llmops-api\\internal\\handler\\segment_handler.py', reloading
[2024-10-13 15:40:56,842.842] _internal.py -> _log line:96 [INFO]:  * Restarting with stat
[2024-10-13 15:41:01,983.983] _internal.py -> _log line:96 [WARNING]:  * Debugger is active!
[2024-10-13 15:41:01,986.986] _internal.py -> _log line:96 [INFO]:  * Debugger PIN: 102-324-223
[2024-10-13 15:44:57,593.593] _internal.py -> _log line:96 [INFO]:  * Detected change in 'D:\\Code\\llmops\\llmops-api\\internal\\handler\\segment_handler.py', reloading
[2024-10-13 15:44:57,895.895] _internal.py -> _log line:96 [INFO]:  * Restarting with stat
[2024-10-13 15:45:02,652.652] _internal.py -> _log line:96 [WARNING]:  * Debugger is active!
[2024-10-13 15:45:02,654.654] _internal.py -> _log line:96 [INFO]:  * Debugger PIN: 102-324-223
[2024-10-13 15:46:39,361.361] _internal.py -> _log line:96 [INFO]:  * Detected change in 'D:\\Code\\llmops\\llmops-api\\internal\\service\\segment_service.py', reloading
[2024-10-13 15:46:39,656.656] _internal.py -> _log line:96 [INFO]:  * Restarting with stat
[2024-10-13 15:46:44,464.464] _internal.py -> _log line:96 [WARNING]:  * Debugger is active!
[2024-10-13 15:46:44,467.467] _internal.py -> _log line:96 [INFO]:  * Debugger PIN: 102-324-223
[2024-10-13 15:47:26,163.163] _internal.py -> _log line:96 [INFO]:  * Detected change in 'D:\\Code\\llmops\\llmops-api\\internal\\service\\segment_service.py', reloading
[2024-10-13 15:47:26,423.423] _internal.py -> _log line:96 [INFO]:  * Restarting with stat
[2024-10-13 15:47:30,970.970] _internal.py -> _log line:96 [WARNING]:  * Debugger is active!
[2024-10-13 15:47:30,973.973] _internal.py -> _log line:96 [INFO]:  * Debugger PIN: 102-324-223
[2024-10-13 15:48:33,341.341] _internal.py -> _log line:96 [INFO]:  * Detected change in 'D:\\Code\\llmops\\llmops-api\\internal\\service\\segment_service.py', reloading
[2024-10-13 15:48:33,668.668] _internal.py -> _log line:96 [INFO]:  * Restarting with stat
[2024-10-13 15:48:38,084.084] _internal.py -> _log line:96 [WARNING]:  * Debugger is active!
[2024-10-13 15:48:38,087.087] _internal.py -> _log line:96 [INFO]:  * Debugger PIN: 102-324-223
[2024-10-13 15:49:49,637.637] _internal.py -> _log line:96 [INFO]:  * Detected change in 'D:\\Code\\llmops\\llmops-api\\internal\\service\\segment_service.py', reloading
[2024-10-13 15:49:49,910.910] _internal.py -> _log line:96 [INFO]:  * Restarting with stat
[2024-10-13 15:49:54,262.262] _internal.py -> _log line:96 [WARNING]:  * Debugger is active!
[2024-10-13 15:49:54,265.265] _internal.py -> _log line:96 [INFO]:  * Debugger PIN: 102-324-223
[2024-10-13 15:50:23,222.222] _internal.py -> _log line:96 [INFO]:  * Detected change in 'D:\\Code\\llmops\\llmops-api\\internal\\service\\segment_service.py', reloading
[2024-10-13 15:50:23,535.535] _internal.py -> _log line:96 [INFO]:  * Restarting with stat
[2024-10-13 15:50:28,547.547] _internal.py -> _log line:96 [WARNING]:  * Debugger is active!
[2024-10-13 15:50:28,550.550] _internal.py -> _log line:96 [INFO]:  * Debugger PIN: 102-324-223
[2024-10-13 15:51:12,504.504] _internal.py -> _log line:96 [INFO]:  * Detected change in 'D:\\Code\\llmops\\llmops-api\\internal\\service\\segment_service.py', reloading
[2024-10-13 15:51:12,794.794] _internal.py -> _log line:96 [INFO]:  * Restarting with stat
[2024-10-13 15:51:17,019.019] _internal.py -> _log line:96 [WARNING]:  * Debugger is active!
[2024-10-13 15:51:17,021.021] _internal.py -> _log line:96 [INFO]:  * Debugger PIN: 102-324-223
[2024-10-13 15:51:51,892.892] _internal.py -> _log line:96 [INFO]:  * Detected change in 'D:\\Code\\llmops\\llmops-api\\internal\\service\\segment_service.py', reloading
[2024-10-13 15:51:52,174.174] _internal.py -> _log line:96 [INFO]:  * Restarting with stat
[2024-10-13 15:52:07,482.482] _internal.py -> _log line:96 [INFO]:  * Restarting with stat
[2024-10-13 15:52:11,828.828] _internal.py -> _log line:96 [WARNING]:  * Debugger is active!
[2024-10-13 15:52:11,831.831] _internal.py -> _log line:96 [INFO]:  * Debugger PIN: 102-324-223
[2024-10-13 15:52:35,087.087] _internal.py -> _log line:96 [INFO]:  * Detected change in 'D:\\Code\\llmops\\llmops-api\\internal\\service\\segment_service.py', reloading
[2024-10-13 15:52:35,409.409] _internal.py -> _log line:96 [INFO]:  * Restarting with stat
[2024-10-13 15:52:40,001.001] _internal.py -> _log line:96 [WARNING]:  * Debugger is active!
[2024-10-13 15:52:40,004.004] _internal.py -> _log line:96 [INFO]:  * Debugger PIN: 102-324-223
[2024-10-13 15:52:59,780.780] _internal.py -> _log line:96 [INFO]:  * Detected change in 'D:\\Code\\llmops\\llmops-api\\internal\\service\\segment_service.py', reloading
[2024-10-13 15:53:00,073.073] _internal.py -> _log line:96 [INFO]:  * Restarting with stat
[2024-10-13 15:53:04,591.591] _internal.py -> _log line:96 [WARNING]:  * Debugger is active!
[2024-10-13 15:53:04,594.594] _internal.py -> _log line:96 [INFO]:  * Debugger PIN: 102-324-223
[2024-10-13 16:06:07,789.789] _internal.py -> _log line:96 [INFO]:  * Detected change in 'D:\\Code\\llmops\\llmops-api\\internal\\service\\segment_service.py', reloading
[2024-10-13 16:06:08,070.070] _internal.py -> _log line:96 [INFO]:  * Restarting with stat
[2024-10-13 16:06:12,260.260] _internal.py -> _log line:96 [WARNING]:  * Debugger is active!
[2024-10-13 16:06:12,263.263] _internal.py -> _log line:96 [INFO]:  * Debugger PIN: 102-324-223
[2024-10-13 16:44:50,326.326] _internal.py -> _log line:96 [INFO]:  * Detected change in 'D:\\Code\\llmops\\llmops-api\\internal\\service\\segment_service.py', reloading
[2024-10-13 16:44:50,658.658] _internal.py -> _log line:96 [INFO]:  * Restarting with stat
[2024-10-13 16:44:55,093.093] _internal.py -> _log line:96 [WARNING]:  * Debugger is active!
[2024-10-13 16:44:55,096.096] _internal.py -> _log line:96 [INFO]:  * Debugger PIN: 102-324-223
[2024-10-13 16:45:42,432.432] _internal.py -> _log line:96 [INFO]:  * Detected change in 'D:\\Code\\llmops\\llmops-api\\internal\\service\\segment_service.py', reloading
[2024-10-13 16:45:42,777.777] _internal.py -> _log line:96 [INFO]:  * Restarting with stat
[2024-10-13 16:45:47,123.123] _internal.py -> _log line:96 [WARNING]:  * Debugger is active!
[2024-10-13 16:45:47,126.126] _internal.py -> _log line:96 [INFO]:  * Debugger PIN: 102-324-223
[2024-10-13 16:49:35,775.775] _internal.py -> _log line:96 [INFO]:  * Detected change in 'D:\\Code\\llmops\\llmops-api\\internal\\service\\segment_service.py', reloading
[2024-10-13 16:49:36,068.068] _internal.py -> _log line:96 [INFO]:  * Restarting with stat
[2024-10-13 16:49:40,724.724] _internal.py -> _log line:96 [WARNING]:  * Debugger is active!
[2024-10-13 16:49:40,727.727] _internal.py -> _log line:96 [INFO]:  * Debugger PIN: 102-324-223
[2024-10-13 16:50:08,457.457] _internal.py -> _log line:96 [INFO]:  * Detected change in 'D:\\Code\\llmops\\llmops-api\\internal\\service\\segment_service.py', reloading
[2024-10-13 16:50:08,756.756] _internal.py -> _log line:96 [INFO]:  * Restarting with stat
[2024-10-13 16:50:13,115.115] _internal.py -> _log line:96 [WARNING]:  * Debugger is active!
[2024-10-13 16:50:13,118.118] _internal.py -> _log line:96 [INFO]:  * Debugger PIN: 102-324-223
[2024-10-13 16:53:08,488.488] _internal.py -> _log line:96 [INFO]:  * Detected change in 'D:\\Code\\llmops\\llmops-api\\internal\\service\\segment_service.py', reloading
[2024-10-13 16:53:08,842.842] _internal.py -> _log line:96 [INFO]:  * Restarting with stat
[2024-10-13 16:53:13,624.624] _internal.py -> _log line:96 [WARNING]:  * Debugger is active!
[2024-10-13 16:53:13,627.627] _internal.py -> _log line:96 [INFO]:  * Debugger PIN: 102-324-223
[2024-10-13 17:16:00,853.853] base.py -> _exec_single_context line:1903 [INFO]: select pg_catalog.version()
[2024-10-13 17:16:00,853.853] base.py -> _exec_single_context line:1908 [INFO]: [raw sql] {}
[2024-10-13 17:16:00,854.854] base.py -> _exec_single_context line:1903 [INFO]: select current_schema()
[2024-10-13 17:16:00,854.854] base.py -> _exec_single_context line:1908 [INFO]: [raw sql] {}
[2024-10-13 17:16:00,855.855] base.py -> _exec_single_context line:1903 [INFO]: show standard_conforming_strings
[2024-10-13 17:16:00,855.855] base.py -> _exec_single_context line:1908 [INFO]: [raw sql] {}
[2024-10-13 17:16:00,856.856] base.py -> _begin_impl line:1103 [INFO]: BEGIN (implicit)
[2024-10-13 17:16:00,858.858] base.py -> _exec_single_context line:1903 [INFO]: SELECT dataset.id AS dataset_id, dataset.account_id AS dataset_account_id, dataset.name AS dataset_name, dataset.icon AS dataset_icon, dataset.description AS dataset_description, dataset.updated_at AS dataset_updated_at, dataset.created_at AS dataset_created_at 
FROM dataset 
WHERE dataset.id = %(pk_1)s::UUID
[2024-10-13 17:16:00,858.858] base.py -> _exec_single_context line:1908 [INFO]: [generated in 0.00028s] {'pk_1': UUID('f3f28f75-8e60-4eba-b6df-4d1b390bbd89')}
[2024-10-13 17:16:00,861.861] base.py -> _exec_single_context line:1903 [INFO]: SELECT dataset.id AS dataset_id, dataset.account_id AS dataset_account_id, dataset.name AS dataset_name, dataset.icon AS dataset_icon, dataset.description AS dataset_description, dataset.updated_at AS dataset_updated_at, dataset.created_at AS dataset_created_at 
FROM dataset 
WHERE dataset.id IN (%(id_1_1)s::UUID) AND dataset.account_id = %(account_id_1)s::UUID
[2024-10-13 17:16:00,861.861] base.py -> _exec_single_context line:1908 [INFO]: [generated in 0.00026s] {'account_id_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f', 'id_1_1': UUID('f3f28f75-8e60-4eba-b6df-4d1b390bbd89')}
[2024-10-13 17:16:03,161.161] __init__.py -> initialize line:113 [DEBUG]: Building prefix dict from the default dictionary ...
[2024-10-13 17:16:03,162.162] __init__.py -> initialize line:132 [DEBUG]: Loading model from cache C:\Users\Administrator\AppData\Local\Temp\jieba.cache
[2024-10-13 17:16:03,657.657] __init__.py -> initialize line:164 [DEBUG]: Loading model cost 0.495 seconds.
[2024-10-13 17:16:03,657.657] __init__.py -> initialize line:166 [DEBUG]: Prefix dict has been built successfully.
[2024-10-13 17:16:03,659.659] base.py -> _exec_single_context line:1903 [INFO]: SELECT keyword_table.keyword_table AS keyword_table_keyword_table 
FROM keyword_table 
WHERE keyword_table.dataset_id IN (%(dataset_id_1_1)s::UUID)
[2024-10-13 17:16:03,659.659] base.py -> _exec_single_context line:1908 [INFO]: [generated in 0.00028s] {'dataset_id_1_1': UUID('f3f28f75-8e60-4eba-b6df-4d1b390bbd89')}
[2024-10-13 17:16:03,663.663] base.py -> _exec_single_context line:1903 [INFO]: SELECT segment.id AS segment_id, segment.account_id AS segment_account_id, segment.dataset_id AS segment_dataset_id, segment.document_id AS segment_document_id, segment.node_id AS segment_node_id, segment.position AS segment_position, segment.content AS segment_content, segment.character_count AS segment_character_count, segment.token_count AS segment_token_count, segment.keywords AS segment_keywords, segment.hash AS segment_hash, segment.hit_count AS segment_hit_count, segment.enabled AS segment_enabled, segment.disabled_at AS segment_disabled_at, segment.processing_started_at AS segment_processing_started_at, segment.indexing_completed_at AS segment_indexing_completed_at, segment.completed_at AS segment_completed_at, segment.stopped_at AS segment_stopped_at, segment.error AS segment_error, segment.status AS segment_status, segment.updated_at AS segment_updated_at, segment.created_at AS segment_created_at 
FROM segment 
WHERE segment.id IN (NULL) AND (1 != 1)
[2024-10-13 17:16:03,663.663] base.py -> _exec_single_context line:1908 [INFO]: [generated in 0.00025s] {}
[2024-10-13 17:16:03,667.667] base.py -> _exec_single_context line:1903 [INFO]: INSERT INTO dataset_query (dataset_id, query, source, source_app_id, created_by) VALUES (%(dataset_id)s::UUID, %(query)s, %(source)s, %(source_app_id)s::UUID, %(created_by)s::UUID) RETURNING dataset_query.id, dataset_query.updated_at, dataset_query.created_at
[2024-10-13 17:16:03,667.667] base.py -> _exec_single_context line:1908 [INFO]: [generated in 0.00027s] {'dataset_id': UUID('f3f28f75-8e60-4eba-b6df-4d1b390bbd89'), 'query': '想学习flask，有什么建议么？', 'source': <RetrievalSource.HIT_TESTING: 'hit_testing'>, 'source_app_id': None, 'created_by': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2024-10-13 17:16:03,668.668] base.py -> _commit_impl line:1146 [INFO]: COMMIT
[2024-10-13 17:16:03,689.689] base.py -> _begin_impl line:1103 [INFO]: BEGIN (implicit)
[2024-10-13 17:16:03,689.689] base.py -> _exec_single_context line:1903 [INFO]: INSERT INTO dataset_query (dataset_id, query, source, source_app_id, created_by) VALUES (%(dataset_id)s::UUID, %(query)s, %(source)s, %(source_app_id)s::UUID, %(created_by)s::UUID) RETURNING dataset_query.id, dataset_query.updated_at, dataset_query.created_at
[2024-10-13 17:16:03,689.689] base.py -> _exec_single_context line:1908 [INFO]: [cached since 0.02274s ago] {'dataset_id': UUID('f3f28f75-8e60-4eba-b6df-4d1b390bbd89'), 'query': '想学习flask，有什么建议么？', 'source': <RetrievalSource.HIT_TESTING: 'hit_testing'>, 'source_app_id': None, 'created_by': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2024-10-13 17:16:03,690.690] base.py -> _commit_impl line:1146 [INFO]: COMMIT
[2024-10-13 17:16:03,691.691] base.py -> _begin_impl line:1103 [INFO]: BEGIN (implicit)
[2024-10-13 17:16:03,692.692] base.py -> _exec_single_context line:1903 [INFO]: INSERT INTO dataset_query (dataset_id, query, source, source_app_id, created_by) VALUES (%(dataset_id)s::UUID, %(query)s, %(source)s, %(source_app_id)s::UUID, %(created_by)s::UUID) RETURNING dataset_query.id, dataset_query.updated_at, dataset_query.created_at
[2024-10-13 17:16:03,692.692] base.py -> _exec_single_context line:1908 [INFO]: [cached since 0.02526s ago] {'dataset_id': UUID('f3f28f75-8e60-4eba-b6df-4d1b390bbd89'), 'query': '想学习flask，有什么建议么？', 'source': <RetrievalSource.HIT_TESTING: 'hit_testing'>, 'source_app_id': None, 'created_by': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2024-10-13 17:16:03,693.693] base.py -> _commit_impl line:1146 [INFO]: COMMIT
[2024-10-13 17:16:03,694.694] base.py -> _begin_impl line:1103 [INFO]: BEGIN (implicit)
[2024-10-13 17:16:03,694.694] base.py -> _exec_single_context line:1903 [INFO]: INSERT INTO dataset_query (dataset_id, query, source, source_app_id, created_by) VALUES (%(dataset_id)s::UUID, %(query)s, %(source)s, %(source_app_id)s::UUID, %(created_by)s::UUID) RETURNING dataset_query.id, dataset_query.updated_at, dataset_query.created_at
[2024-10-13 17:16:03,694.694] base.py -> _exec_single_context line:1908 [INFO]: [cached since 0.02774s ago] {'dataset_id': UUID('f3f28f75-8e60-4eba-b6df-4d1b390bbd89'), 'query': '想学习flask，有什么建议么？', 'source': <RetrievalSource.HIT_TESTING: 'hit_testing'>, 'source_app_id': None, 'created_by': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2024-10-13 17:16:03,695.695] base.py -> _commit_impl line:1146 [INFO]: COMMIT
[2024-10-13 17:16:03,696.696] base.py -> _begin_impl line:1103 [INFO]: BEGIN (implicit)
[2024-10-13 17:16:03,697.697] base.py -> _exec_single_context line:1903 [INFO]: INSERT INTO dataset_query (dataset_id, query, source, source_app_id, created_by) VALUES (%(dataset_id)s::UUID, %(query)s, %(source)s, %(source_app_id)s::UUID, %(created_by)s::UUID) RETURNING dataset_query.id, dataset_query.updated_at, dataset_query.created_at
[2024-10-13 17:16:03,697.697] base.py -> _exec_single_context line:1908 [INFO]: [cached since 0.03016s ago] {'dataset_id': UUID('f3f28f75-8e60-4eba-b6df-4d1b390bbd89'), 'query': '想学习flask，有什么建议么？', 'source': <RetrievalSource.HIT_TESTING: 'hit_testing'>, 'source_app_id': None, 'created_by': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2024-10-13 17:16:03,698.698] base.py -> _commit_impl line:1146 [INFO]: COMMIT
[2024-10-13 17:16:03,699.699] base.py -> _begin_impl line:1103 [INFO]: BEGIN (implicit)
[2024-10-13 17:16:03,699.699] base.py -> _exec_single_context line:1903 [INFO]: INSERT INTO dataset_query (dataset_id, query, source, source_app_id, created_by) VALUES (%(dataset_id)s::UUID, %(query)s, %(source)s, %(source_app_id)s::UUID, %(created_by)s::UUID) RETURNING dataset_query.id, dataset_query.updated_at, dataset_query.created_at
[2024-10-13 17:16:03,699.699] base.py -> _exec_single_context line:1908 [INFO]: [cached since 0.03251s ago] {'dataset_id': UUID('f3f28f75-8e60-4eba-b6df-4d1b390bbd89'), 'query': '想学习flask，有什么建议么？', 'source': <RetrievalSource.HIT_TESTING: 'hit_testing'>, 'source_app_id': None, 'created_by': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2024-10-13 17:16:03,700.700] base.py -> _commit_impl line:1146 [INFO]: COMMIT
[2024-10-13 17:16:03,701.701] base.py -> _begin_impl line:1103 [INFO]: BEGIN (implicit)
[2024-10-13 17:16:03,701.701] base.py -> _exec_single_context line:1903 [INFO]: INSERT INTO dataset_query (dataset_id, query, source, source_app_id, created_by) VALUES (%(dataset_id)s::UUID, %(query)s, %(source)s, %(source_app_id)s::UUID, %(created_by)s::UUID) RETURNING dataset_query.id, dataset_query.updated_at, dataset_query.created_at
[2024-10-13 17:16:03,701.701] base.py -> _exec_single_context line:1908 [INFO]: [cached since 0.03531s ago] {'dataset_id': UUID('f3f28f75-8e60-4eba-b6df-4d1b390bbd89'), 'query': '想学习flask，有什么建议么？', 'source': <RetrievalSource.HIT_TESTING: 'hit_testing'>, 'source_app_id': None, 'created_by': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2024-10-13 17:16:03,702.702] base.py -> _commit_impl line:1146 [INFO]: COMMIT
[2024-10-13 17:16:03,703.703] base.py -> _begin_impl line:1103 [INFO]: BEGIN (implicit)
[2024-10-13 17:16:03,704.704] base.py -> _exec_single_context line:1903 [INFO]: INSERT INTO dataset_query (dataset_id, query, source, source_app_id, created_by) VALUES (%(dataset_id)s::UUID, %(query)s, %(source)s, %(source_app_id)s::UUID, %(created_by)s::UUID) RETURNING dataset_query.id, dataset_query.updated_at, dataset_query.created_at
[2024-10-13 17:16:03,704.704] base.py -> _exec_single_context line:1908 [INFO]: [cached since 0.03775s ago] {'dataset_id': UUID('f3f28f75-8e60-4eba-b6df-4d1b390bbd89'), 'query': '想学习flask，有什么建议么？', 'source': <RetrievalSource.HIT_TESTING: 'hit_testing'>, 'source_app_id': None, 'created_by': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2024-10-13 17:16:03,704.704] base.py -> _commit_impl line:1146 [INFO]: COMMIT
[2024-10-13 17:16:03,706.706] base.py -> _begin_impl line:1103 [INFO]: BEGIN (implicit)
[2024-10-13 17:16:03,706.706] base.py -> _exec_single_context line:1903 [INFO]: INSERT INTO dataset_query (dataset_id, query, source, source_app_id, created_by) VALUES (%(dataset_id)s::UUID, %(query)s, %(source)s, %(source_app_id)s::UUID, %(created_by)s::UUID) RETURNING dataset_query.id, dataset_query.updated_at, dataset_query.created_at
[2024-10-13 17:16:03,706.706] base.py -> _exec_single_context line:1908 [INFO]: [cached since 0.04006s ago] {'dataset_id': UUID('f3f28f75-8e60-4eba-b6df-4d1b390bbd89'), 'query': '想学习flask，有什么建议么？', 'source': <RetrievalSource.HIT_TESTING: 'hit_testing'>, 'source_app_id': None, 'created_by': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2024-10-13 17:16:03,707.707] base.py -> _commit_impl line:1146 [INFO]: COMMIT
[2024-10-13 17:16:03,708.708] base.py -> _begin_impl line:1103 [INFO]: BEGIN (implicit)
[2024-10-13 17:16:03,708.708] base.py -> _exec_single_context line:1903 [INFO]: INSERT INTO dataset_query (dataset_id, query, source, source_app_id, created_by) VALUES (%(dataset_id)s::UUID, %(query)s, %(source)s, %(source_app_id)s::UUID, %(created_by)s::UUID) RETURNING dataset_query.id, dataset_query.updated_at, dataset_query.created_at
[2024-10-13 17:16:03,708.708] base.py -> _exec_single_context line:1908 [INFO]: [cached since 0.04235s ago] {'dataset_id': UUID('f3f28f75-8e60-4eba-b6df-4d1b390bbd89'), 'query': '想学习flask，有什么建议么？', 'source': <RetrievalSource.HIT_TESTING: 'hit_testing'>, 'source_app_id': None, 'created_by': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2024-10-13 17:16:03,709.709] base.py -> _commit_impl line:1146 [INFO]: COMMIT
[2024-10-13 17:16:03,711.711] base.py -> _begin_impl line:1103 [INFO]: BEGIN (implicit)
[2024-10-13 17:16:03,712.712] base.py -> _exec_single_context line:1903 [INFO]: UPDATE segment SET hit_count=(segment.hit_count + %(hit_count_1)s) WHERE segment.id IN (%(id_1_1)s::UUID, %(id_1_2)s::UUID, %(id_1_3)s::UUID, %(id_1_4)s::UUID, %(id_1_5)s::UUID, %(id_1_6)s::UUID, %(id_1_7)s::UUID, %(id_1_8)s::UUID, %(id_1_9)s::UUID, %(id_1_10)s::UUID)
[2024-10-13 17:16:03,712.712] base.py -> _exec_single_context line:1908 [INFO]: [generated in 0.00027s] {'hit_count_1': 1, 'id_1_1': UUID('4bb0d451-b34b-4b97-8ddd-3afbe47236f1'), 'id_1_2': UUID('e8d2ffa0-5ff3-4673-976f-5a14d5ba55fa'), 'id_1_3': UUID('3472fa81-8d88-4cb4-bd9b-7d28f9a7f9eb'), 'id_1_4': UUID('b3f3d69d-6ea6-43c4-bba4-b1c63b08474e'), 'id_1_5': UUID('fa5a8ee4-591a-4965-b82b-0ff6dca67be4'), 'id_1_6': UUID('4adb6c36-fb5d-4818-87d4-dc7983a74812'), 'id_1_7': UUID('25e9fe45-24f2-4f5c-a2f7-86e15bf5f920'), 'id_1_8': UUID('07bb092a-200a-4745-b47d-40ec367b796a'), 'id_1_9': UUID('df2676ee-80e3-4f2a-8264-e964737999d7'), 'id_1_10': UUID('e2408665-8364-4efa-9aa0-99e4cf3815ee')}
[2024-10-13 17:16:03,713.713] base.py -> _commit_impl line:1146 [INFO]: COMMIT
[2024-10-13 17:16:03,715.715] base.py -> _begin_impl line:1103 [INFO]: BEGIN (implicit)
[2024-10-13 17:16:03,715.715] base.py -> _exec_single_context line:1903 [INFO]: SELECT segment.id AS segment_id, segment.account_id AS segment_account_id, segment.dataset_id AS segment_dataset_id, segment.document_id AS segment_document_id, segment.node_id AS segment_node_id, segment.position AS segment_position, segment.content AS segment_content, segment.character_count AS segment_character_count, segment.token_count AS segment_token_count, segment.keywords AS segment_keywords, segment.hash AS segment_hash, segment.hit_count AS segment_hit_count, segment.enabled AS segment_enabled, segment.disabled_at AS segment_disabled_at, segment.processing_started_at AS segment_processing_started_at, segment.indexing_completed_at AS segment_indexing_completed_at, segment.completed_at AS segment_completed_at, segment.stopped_at AS segment_stopped_at, segment.error AS segment_error, segment.status AS segment_status, segment.updated_at AS segment_updated_at, segment.created_at AS segment_created_at 
FROM segment 
WHERE segment.id IN (%(id_1_1)s::UUID, %(id_1_2)s::UUID, %(id_1_3)s::UUID, %(id_1_4)s::UUID, %(id_1_5)s::UUID, %(id_1_6)s::UUID, %(id_1_7)s::UUID, %(id_1_8)s::UUID, %(id_1_9)s::UUID, %(id_1_10)s::UUID)
[2024-10-13 17:16:03,715.715] base.py -> _exec_single_context line:1908 [INFO]: [cached since 0.05274s ago] {'id_1_1': '4bb0d451-b34b-4b97-8ddd-3afbe47236f1', 'id_1_2': 'e8d2ffa0-5ff3-4673-976f-5a14d5ba55fa', 'id_1_3': '3472fa81-8d88-4cb4-bd9b-7d28f9a7f9eb', 'id_1_4': 'b3f3d69d-6ea6-43c4-bba4-b1c63b08474e', 'id_1_5': 'fa5a8ee4-591a-4965-b82b-0ff6dca67be4', 'id_1_6': '4adb6c36-fb5d-4818-87d4-dc7983a74812', 'id_1_7': '25e9fe45-24f2-4f5c-a2f7-86e15bf5f920', 'id_1_8': '07bb092a-200a-4745-b47d-40ec367b796a', 'id_1_9': 'df2676ee-80e3-4f2a-8264-e964737999d7', 'id_1_10': 'e2408665-8364-4efa-9aa0-99e4cf3815ee'}
[2024-10-13 17:16:03,721.721] base.py -> _exec_single_context line:1903 [INFO]: SELECT document.id AS document_id, document.account_id AS document_account_id, document.dataset_id AS document_dataset_id, document.upload_file_id AS document_upload_file_id, document.process_rule_id AS document_process_rule_id, document.batch AS document_batch, document.name AS document_name, document.position AS document_position, document.character_count AS document_character_count, document.token_count AS document_token_count, document.processing_started_at AS document_processing_started_at, document.parsing_completed_at AS document_parsing_completed_at, document.splitting_completed_at AS document_splitting_completed_at, document.indexing_completed_at AS document_indexing_completed_at, document.completed_at AS document_completed_at, document.stopped_at AS document_stopped_at, document.error AS document_error, document.enabled AS document_enabled, document.disabled_at AS document_disabled_at, document.status AS document_status, document.updated_at AS document_updated_at, document.created_at AS document_created_at 
FROM document 
WHERE document.id = %(pk_1)s::UUID
[2024-10-13 17:16:03,721.721] base.py -> _exec_single_context line:1908 [INFO]: [generated in 0.00029s] {'pk_1': UUID('d4b902e3-a013-4780-93fa-6fc300ab6bf8')}
[2024-10-13 17:16:03,724.724] base.py -> _exec_single_context line:1903 [INFO]: SELECT upload_file.id AS upload_file_id, upload_file.account_id AS upload_file_account_id, upload_file.name AS upload_file_name, upload_file.key AS upload_file_key, upload_file.size AS upload_file_size, upload_file.extension AS upload_file_extension, upload_file.mime_type AS upload_file_mime_type, upload_file.hash AS upload_file_hash, upload_file.updated_at AS upload_file_updated_at, upload_file.created_at AS upload_file_created_at 
FROM upload_file 
WHERE upload_file.id = %(id_1)s::UUID
[2024-10-13 17:16:03,724.724] base.py -> _exec_single_context line:1908 [INFO]: [generated in 0.00027s] {'id_1': UUID('4cdddf4d-6642-4bb3-87be-63dc77408c7e')}
[2024-10-13 17:16:03,726.726] base.py -> _exec_single_context line:1903 [INFO]: SELECT upload_file.id AS upload_file_id, upload_file.account_id AS upload_file_account_id, upload_file.name AS upload_file_name, upload_file.key AS upload_file_key, upload_file.size AS upload_file_size, upload_file.extension AS upload_file_extension, upload_file.mime_type AS upload_file_mime_type, upload_file.hash AS upload_file_hash, upload_file.updated_at AS upload_file_updated_at, upload_file.created_at AS upload_file_created_at 
FROM upload_file 
WHERE upload_file.id = %(id_1)s::UUID
[2024-10-13 17:16:03,727.727] base.py -> _exec_single_context line:1908 [INFO]: [cached since 0.002764s ago] {'id_1': UUID('4cdddf4d-6642-4bb3-87be-63dc77408c7e')}
[2024-10-13 17:16:03,728.728] base.py -> _exec_single_context line:1903 [INFO]: SELECT upload_file.id AS upload_file_id, upload_file.account_id AS upload_file_account_id, upload_file.name AS upload_file_name, upload_file.key AS upload_file_key, upload_file.size AS upload_file_size, upload_file.extension AS upload_file_extension, upload_file.mime_type AS upload_file_mime_type, upload_file.hash AS upload_file_hash, upload_file.updated_at AS upload_file_updated_at, upload_file.created_at AS upload_file_created_at 
FROM upload_file 
WHERE upload_file.id = %(id_1)s::UUID
[2024-10-13 17:16:03,728.728] base.py -> _exec_single_context line:1908 [INFO]: [cached since 0.004025s ago] {'id_1': UUID('4cdddf4d-6642-4bb3-87be-63dc77408c7e')}
[2024-10-13 17:16:03,729.729] base.py -> _exec_single_context line:1903 [INFO]: SELECT upload_file.id AS upload_file_id, upload_file.account_id AS upload_file_account_id, upload_file.name AS upload_file_name, upload_file.key AS upload_file_key, upload_file.size AS upload_file_size, upload_file.extension AS upload_file_extension, upload_file.mime_type AS upload_file_mime_type, upload_file.hash AS upload_file_hash, upload_file.updated_at AS upload_file_updated_at, upload_file.created_at AS upload_file_created_at 
FROM upload_file 
WHERE upload_file.id = %(id_1)s::UUID
[2024-10-13 17:16:03,729.729] base.py -> _exec_single_context line:1908 [INFO]: [cached since 0.005143s ago] {'id_1': UUID('4cdddf4d-6642-4bb3-87be-63dc77408c7e')}
[2024-10-13 17:16:03,730.730] base.py -> _exec_single_context line:1903 [INFO]: SELECT upload_file.id AS upload_file_id, upload_file.account_id AS upload_file_account_id, upload_file.name AS upload_file_name, upload_file.key AS upload_file_key, upload_file.size AS upload_file_size, upload_file.extension AS upload_file_extension, upload_file.mime_type AS upload_file_mime_type, upload_file.hash AS upload_file_hash, upload_file.updated_at AS upload_file_updated_at, upload_file.created_at AS upload_file_created_at 
FROM upload_file 
WHERE upload_file.id = %(id_1)s::UUID
[2024-10-13 17:16:03,731.731] base.py -> _exec_single_context line:1908 [INFO]: [cached since 0.006709s ago] {'id_1': UUID('4cdddf4d-6642-4bb3-87be-63dc77408c7e')}
[2024-10-13 17:16:03,732.732] base.py -> _exec_single_context line:1903 [INFO]: SELECT upload_file.id AS upload_file_id, upload_file.account_id AS upload_file_account_id, upload_file.name AS upload_file_name, upload_file.key AS upload_file_key, upload_file.size AS upload_file_size, upload_file.extension AS upload_file_extension, upload_file.mime_type AS upload_file_mime_type, upload_file.hash AS upload_file_hash, upload_file.updated_at AS upload_file_updated_at, upload_file.created_at AS upload_file_created_at 
FROM upload_file 
WHERE upload_file.id = %(id_1)s::UUID
[2024-10-13 17:16:03,732.732] base.py -> _exec_single_context line:1908 [INFO]: [cached since 0.008038s ago] {'id_1': UUID('4cdddf4d-6642-4bb3-87be-63dc77408c7e')}
[2024-10-13 17:16:03,733.733] base.py -> _exec_single_context line:1903 [INFO]: SELECT upload_file.id AS upload_file_id, upload_file.account_id AS upload_file_account_id, upload_file.name AS upload_file_name, upload_file.key AS upload_file_key, upload_file.size AS upload_file_size, upload_file.extension AS upload_file_extension, upload_file.mime_type AS upload_file_mime_type, upload_file.hash AS upload_file_hash, upload_file.updated_at AS upload_file_updated_at, upload_file.created_at AS upload_file_created_at 
FROM upload_file 
WHERE upload_file.id = %(id_1)s::UUID
[2024-10-13 17:16:03,733.733] base.py -> _exec_single_context line:1908 [INFO]: [cached since 0.009164s ago] {'id_1': UUID('4cdddf4d-6642-4bb3-87be-63dc77408c7e')}
[2024-10-13 17:16:03,735.735] base.py -> _exec_single_context line:1903 [INFO]: SELECT upload_file.id AS upload_file_id, upload_file.account_id AS upload_file_account_id, upload_file.name AS upload_file_name, upload_file.key AS upload_file_key, upload_file.size AS upload_file_size, upload_file.extension AS upload_file_extension, upload_file.mime_type AS upload_file_mime_type, upload_file.hash AS upload_file_hash, upload_file.updated_at AS upload_file_updated_at, upload_file.created_at AS upload_file_created_at 
FROM upload_file 
WHERE upload_file.id = %(id_1)s::UUID
[2024-10-13 17:16:03,735.735] base.py -> _exec_single_context line:1908 [INFO]: [cached since 0.0112s ago] {'id_1': UUID('4cdddf4d-6642-4bb3-87be-63dc77408c7e')}
[2024-10-13 17:16:03,736.736] base.py -> _exec_single_context line:1903 [INFO]: SELECT upload_file.id AS upload_file_id, upload_file.account_id AS upload_file_account_id, upload_file.name AS upload_file_name, upload_file.key AS upload_file_key, upload_file.size AS upload_file_size, upload_file.extension AS upload_file_extension, upload_file.mime_type AS upload_file_mime_type, upload_file.hash AS upload_file_hash, upload_file.updated_at AS upload_file_updated_at, upload_file.created_at AS upload_file_created_at 
FROM upload_file 
WHERE upload_file.id = %(id_1)s::UUID
[2024-10-13 17:16:03,737.737] base.py -> _exec_single_context line:1908 [INFO]: [cached since 0.01251s ago] {'id_1': UUID('4cdddf4d-6642-4bb3-87be-63dc77408c7e')}
[2024-10-13 17:16:03,737.737] base.py -> _exec_single_context line:1903 [INFO]: SELECT upload_file.id AS upload_file_id, upload_file.account_id AS upload_file_account_id, upload_file.name AS upload_file_name, upload_file.key AS upload_file_key, upload_file.size AS upload_file_size, upload_file.extension AS upload_file_extension, upload_file.mime_type AS upload_file_mime_type, upload_file.hash AS upload_file_hash, upload_file.updated_at AS upload_file_updated_at, upload_file.created_at AS upload_file_created_at 
FROM upload_file 
WHERE upload_file.id = %(id_1)s::UUID
[2024-10-13 17:16:03,738.738] base.py -> _exec_single_context line:1908 [INFO]: [cached since 0.01368s ago] {'id_1': UUID('4cdddf4d-6642-4bb3-87be-63dc77408c7e')}
[2024-10-13 17:16:03,740.740] base.py -> _rollback_impl line:1129 [INFO]: ROLLBACK
[2024-10-13 17:16:03,740.740] _internal.py -> _log line:96 [INFO]: 127.0.0.1 - - [13/Oct/2024 17:16:03] "POST /datasets/f3f28f75-8e60-4eba-b6df-4d1b390bbd89/hit HTTP/1.1" 200 -
[2024-10-13 17:29:11,584.584] base.py -> _begin_impl line:1103 [INFO]: BEGIN (implicit)
[2024-10-13 17:29:11,584.584] base.py -> _exec_single_context line:1903 [INFO]: SELECT document.id AS document_id, document.account_id AS document_account_id, document.dataset_id AS document_dataset_id, document.upload_file_id AS document_upload_file_id, document.process_rule_id AS document_process_rule_id, document.batch AS document_batch, document.name AS document_name, document.position AS document_position, document.character_count AS document_character_count, document.token_count AS document_token_count, document.processing_started_at AS document_processing_started_at, document.parsing_completed_at AS document_parsing_completed_at, document.splitting_completed_at AS document_splitting_completed_at, document.indexing_completed_at AS document_indexing_completed_at, document.completed_at AS document_completed_at, document.stopped_at AS document_stopped_at, document.error AS document_error, document.enabled AS document_enabled, document.disabled_at AS document_disabled_at, document.status AS document_status, document.updated_at AS document_updated_at, document.created_at AS document_created_at 
FROM document 
WHERE document.id = %(pk_1)s::UUID
[2024-10-13 17:29:11,584.584] base.py -> _exec_single_context line:1908 [INFO]: [cached since 787.9s ago] {'pk_1': UUID('d4b902e3-a013-4780-93fa-6fc300ab6bf8')}
[2024-10-13 17:29:11,588.588] base.py -> _exec_single_context line:1903 [INFO]: SELECT segment.id AS segment_id, segment.account_id AS segment_account_id, segment.dataset_id AS segment_dataset_id, segment.document_id AS segment_document_id, segment.node_id AS segment_node_id, segment.position AS segment_position, segment.content AS segment_content, segment.character_count AS segment_character_count, segment.token_count AS segment_token_count, segment.keywords AS segment_keywords, segment.hash AS segment_hash, segment.hit_count AS segment_hit_count, segment.enabled AS segment_enabled, segment.disabled_at AS segment_disabled_at, segment.processing_started_at AS segment_processing_started_at, segment.indexing_completed_at AS segment_indexing_completed_at, segment.completed_at AS segment_completed_at, segment.stopped_at AS segment_stopped_at, segment.error AS segment_error, segment.status AS segment_status, segment.updated_at AS segment_updated_at, segment.created_at AS segment_created_at 
FROM segment 
WHERE segment.document_id = %(document_id_1)s::UUID ORDER BY segment.position ASC 
 LIMIT %(param_1)s OFFSET %(param_2)s
[2024-10-13 17:29:11,588.588] base.py -> _exec_single_context line:1908 [INFO]: [generated in 0.00026s] {'document_id_1': UUID('d4b902e3-a013-4780-93fa-6fc300ab6bf8'), 'param_1': 20, 'param_2': 0}
[2024-10-13 17:29:11,593.593] base.py -> _exec_single_context line:1903 [INFO]: SELECT count(*) AS count_1 
FROM (SELECT segment.id AS id, segment.account_id AS account_id, segment.dataset_id AS dataset_id, segment.document_id AS document_id, segment.node_id AS node_id, segment.position AS position, segment.content AS content, segment.character_count AS character_count, segment.token_count AS token_count, segment.keywords AS keywords, segment.hash AS hash, segment.hit_count AS hit_count, segment.enabled AS enabled, segment.disabled_at AS disabled_at, segment.processing_started_at AS processing_started_at, segment.indexing_completed_at AS indexing_completed_at, segment.completed_at AS completed_at, segment.stopped_at AS stopped_at, segment.error AS error, segment.status AS status, segment.updated_at AS updated_at, segment.created_at AS created_at 
FROM segment 
WHERE segment.document_id = %(document_id_1)s::UUID) AS anon_1
[2024-10-13 17:29:11,594.594] base.py -> _exec_single_context line:1908 [INFO]: [generated in 0.00030s] {'document_id_1': UUID('d4b902e3-a013-4780-93fa-6fc300ab6bf8')}
[2024-10-13 17:29:11,598.598] base.py -> _rollback_impl line:1129 [INFO]: ROLLBACK
[2024-10-13 17:29:11,598.598] _internal.py -> _log line:96 [INFO]: 127.0.0.1 - - [13/Oct/2024 17:29:11] "GET /datasets/f3f28f75-8e60-4eba-b6df-4d1b390bbd89/documents/d4b902e3-a013-4780-93fa-6fc300ab6bf8/segments?current_page=1&page_size=20 HTTP/1.1" 200 -
[2024-10-13 17:29:27,178.178] base.py -> _begin_impl line:1103 [INFO]: BEGIN (implicit)
[2024-10-13 17:29:27,179.179] base.py -> _exec_single_context line:1903 [INFO]: SELECT document.id AS document_id, document.account_id AS document_account_id, document.dataset_id AS document_dataset_id, document.upload_file_id AS document_upload_file_id, document.process_rule_id AS document_process_rule_id, document.batch AS document_batch, document.name AS document_name, document.position AS document_position, document.character_count AS document_character_count, document.token_count AS document_token_count, document.processing_started_at AS document_processing_started_at, document.parsing_completed_at AS document_parsing_completed_at, document.splitting_completed_at AS document_splitting_completed_at, document.indexing_completed_at AS document_indexing_completed_at, document.completed_at AS document_completed_at, document.stopped_at AS document_stopped_at, document.error AS document_error, document.enabled AS document_enabled, document.disabled_at AS document_disabled_at, document.status AS document_status, document.updated_at AS document_updated_at, document.created_at AS document_created_at 
FROM document 
WHERE document.id = %(pk_1)s::UUID
[2024-10-13 17:29:27,179.179] base.py -> _exec_single_context line:1908 [INFO]: [cached since 803.5s ago] {'pk_1': UUID('d4b902e3-a013-4780-93fa-6fc300ab6bf8')}
[2024-10-13 17:29:27,180.180] base.py -> _exec_single_context line:1903 [INFO]: SELECT segment.id AS segment_id, segment.account_id AS segment_account_id, segment.dataset_id AS segment_dataset_id, segment.document_id AS segment_document_id, segment.node_id AS segment_node_id, segment.position AS segment_position, segment.content AS segment_content, segment.character_count AS segment_character_count, segment.token_count AS segment_token_count, segment.keywords AS segment_keywords, segment.hash AS segment_hash, segment.hit_count AS segment_hit_count, segment.enabled AS segment_enabled, segment.disabled_at AS segment_disabled_at, segment.processing_started_at AS segment_processing_started_at, segment.indexing_completed_at AS segment_indexing_completed_at, segment.completed_at AS segment_completed_at, segment.stopped_at AS segment_stopped_at, segment.error AS segment_error, segment.status AS segment_status, segment.updated_at AS segment_updated_at, segment.created_at AS segment_created_at 
FROM segment 
WHERE segment.document_id = %(document_id_1)s::UUID ORDER BY segment.position ASC 
 LIMIT %(param_1)s OFFSET %(param_2)s
[2024-10-13 17:29:27,180.180] base.py -> _exec_single_context line:1908 [INFO]: [cached since 15.59s ago] {'document_id_1': UUID('d4b902e3-a013-4780-93fa-6fc300ab6bf8'), 'param_1': 20, 'param_2': 40}
[2024-10-13 17:29:27,182.182] base.py -> _exec_single_context line:1903 [INFO]: SELECT count(*) AS count_1 
FROM (SELECT segment.id AS id, segment.account_id AS account_id, segment.dataset_id AS dataset_id, segment.document_id AS document_id, segment.node_id AS node_id, segment.position AS position, segment.content AS content, segment.character_count AS character_count, segment.token_count AS token_count, segment.keywords AS keywords, segment.hash AS hash, segment.hit_count AS hit_count, segment.enabled AS enabled, segment.disabled_at AS disabled_at, segment.processing_started_at AS processing_started_at, segment.indexing_completed_at AS indexing_completed_at, segment.completed_at AS completed_at, segment.stopped_at AS stopped_at, segment.error AS error, segment.status AS status, segment.updated_at AS updated_at, segment.created_at AS created_at 
FROM segment 
WHERE segment.document_id = %(document_id_1)s::UUID) AS anon_1
[2024-10-13 17:29:27,183.183] base.py -> _exec_single_context line:1908 [INFO]: [cached since 15.59s ago] {'document_id_1': UUID('d4b902e3-a013-4780-93fa-6fc300ab6bf8')}
[2024-10-13 17:29:27,186.186] base.py -> _rollback_impl line:1129 [INFO]: ROLLBACK
[2024-10-13 17:29:27,187.187] _internal.py -> _log line:96 [INFO]: 127.0.0.1 - - [13/Oct/2024 17:29:27] "GET /datasets/f3f28f75-8e60-4eba-b6df-4d1b390bbd89/documents/d4b902e3-a013-4780-93fa-6fc300ab6bf8/segments?current_page=3&page_size=20 HTTP/1.1" 200 -
[2024-10-13 17:29:35,124.124] base.py -> _begin_impl line:1103 [INFO]: BEGIN (implicit)
[2024-10-13 17:29:35,125.125] base.py -> _exec_single_context line:1903 [INFO]: SELECT document.id AS document_id, document.account_id AS document_account_id, document.dataset_id AS document_dataset_id, document.upload_file_id AS document_upload_file_id, document.process_rule_id AS document_process_rule_id, document.batch AS document_batch, document.name AS document_name, document.position AS document_position, document.character_count AS document_character_count, document.token_count AS document_token_count, document.processing_started_at AS document_processing_started_at, document.parsing_completed_at AS document_parsing_completed_at, document.splitting_completed_at AS document_splitting_completed_at, document.indexing_completed_at AS document_indexing_completed_at, document.completed_at AS document_completed_at, document.stopped_at AS document_stopped_at, document.error AS document_error, document.enabled AS document_enabled, document.disabled_at AS document_disabled_at, document.status AS document_status, document.updated_at AS document_updated_at, document.created_at AS document_created_at 
FROM document 
WHERE document.id = %(pk_1)s::UUID
[2024-10-13 17:29:35,125.125] base.py -> _exec_single_context line:1908 [INFO]: [cached since 811.4s ago] {'pk_1': UUID('d4b902e3-a013-4780-93fa-6fc300ab6bf8')}
[2024-10-13 17:29:35,127.127] base.py -> _exec_single_context line:1903 [INFO]: SELECT segment.id AS segment_id, segment.account_id AS segment_account_id, segment.dataset_id AS segment_dataset_id, segment.document_id AS segment_document_id, segment.node_id AS segment_node_id, segment.position AS segment_position, segment.content AS segment_content, segment.character_count AS segment_character_count, segment.token_count AS segment_token_count, segment.keywords AS segment_keywords, segment.hash AS segment_hash, segment.hit_count AS segment_hit_count, segment.enabled AS segment_enabled, segment.disabled_at AS segment_disabled_at, segment.processing_started_at AS segment_processing_started_at, segment.indexing_completed_at AS segment_indexing_completed_at, segment.completed_at AS segment_completed_at, segment.stopped_at AS segment_stopped_at, segment.error AS segment_error, segment.status AS segment_status, segment.updated_at AS segment_updated_at, segment.created_at AS segment_created_at 
FROM segment 
WHERE segment.document_id = %(document_id_1)s::UUID ORDER BY segment.position ASC 
 LIMIT %(param_1)s OFFSET %(param_2)s
[2024-10-13 17:29:35,127.127] base.py -> _exec_single_context line:1908 [INFO]: [cached since 23.54s ago] {'document_id_1': UUID('d4b902e3-a013-4780-93fa-6fc300ab6bf8'), 'param_1': 20, 'param_2': 60}
[2024-10-13 17:29:35,128.128] base.py -> _exec_single_context line:1903 [INFO]: SELECT count(*) AS count_1 
FROM (SELECT segment.id AS id, segment.account_id AS account_id, segment.dataset_id AS dataset_id, segment.document_id AS document_id, segment.node_id AS node_id, segment.position AS position, segment.content AS content, segment.character_count AS character_count, segment.token_count AS token_count, segment.keywords AS keywords, segment.hash AS hash, segment.hit_count AS hit_count, segment.enabled AS enabled, segment.disabled_at AS disabled_at, segment.processing_started_at AS processing_started_at, segment.indexing_completed_at AS indexing_completed_at, segment.completed_at AS completed_at, segment.stopped_at AS stopped_at, segment.error AS error, segment.status AS status, segment.updated_at AS updated_at, segment.created_at AS created_at 
FROM segment 
WHERE segment.document_id = %(document_id_1)s::UUID) AS anon_1
[2024-10-13 17:29:35,128.128] base.py -> _exec_single_context line:1908 [INFO]: [cached since 23.53s ago] {'document_id_1': UUID('d4b902e3-a013-4780-93fa-6fc300ab6bf8')}
[2024-10-13 17:29:35,128.128] base.py -> _rollback_impl line:1129 [INFO]: ROLLBACK
[2024-10-13 17:29:35,129.129] _internal.py -> _log line:96 [INFO]: 127.0.0.1 - - [13/Oct/2024 17:29:35] "GET /datasets/f3f28f75-8e60-4eba-b6df-4d1b390bbd89/documents/d4b902e3-a013-4780-93fa-6fc300ab6bf8/segments?current_page=4&page_size=20 HTTP/1.1" 200 -
[2024-10-13 17:29:42,999.999] base.py -> _begin_impl line:1103 [INFO]: BEGIN (implicit)
[2024-10-13 17:29:42,999.999] base.py -> _exec_single_context line:1903 [INFO]: SELECT document.id AS document_id, document.account_id AS document_account_id, document.dataset_id AS document_dataset_id, document.upload_file_id AS document_upload_file_id, document.process_rule_id AS document_process_rule_id, document.batch AS document_batch, document.name AS document_name, document.position AS document_position, document.character_count AS document_character_count, document.token_count AS document_token_count, document.processing_started_at AS document_processing_started_at, document.parsing_completed_at AS document_parsing_completed_at, document.splitting_completed_at AS document_splitting_completed_at, document.indexing_completed_at AS document_indexing_completed_at, document.completed_at AS document_completed_at, document.stopped_at AS document_stopped_at, document.error AS document_error, document.enabled AS document_enabled, document.disabled_at AS document_disabled_at, document.status AS document_status, document.updated_at AS document_updated_at, document.created_at AS document_created_at 
FROM document 
WHERE document.id = %(pk_1)s::UUID
[2024-10-13 17:29:42,999.999] base.py -> _exec_single_context line:1908 [INFO]: [cached since 819.3s ago] {'pk_1': UUID('d4b902e3-a013-4780-93fa-6fc300ab6bf8')}
[2024-10-13 17:29:43,000.000] base.py -> _exec_single_context line:1903 [INFO]: SELECT segment.id AS segment_id, segment.account_id AS segment_account_id, segment.dataset_id AS segment_dataset_id, segment.document_id AS segment_document_id, segment.node_id AS segment_node_id, segment.position AS segment_position, segment.content AS segment_content, segment.character_count AS segment_character_count, segment.token_count AS segment_token_count, segment.keywords AS segment_keywords, segment.hash AS segment_hash, segment.hit_count AS segment_hit_count, segment.enabled AS segment_enabled, segment.disabled_at AS segment_disabled_at, segment.processing_started_at AS segment_processing_started_at, segment.indexing_completed_at AS segment_indexing_completed_at, segment.completed_at AS segment_completed_at, segment.stopped_at AS segment_stopped_at, segment.error AS segment_error, segment.status AS segment_status, segment.updated_at AS segment_updated_at, segment.created_at AS segment_created_at 
FROM segment 
WHERE segment.document_id = %(document_id_1)s::UUID ORDER BY segment.position ASC 
 LIMIT %(param_1)s OFFSET %(param_2)s
[2024-10-13 17:29:43,001.001] base.py -> _exec_single_context line:1908 [INFO]: [cached since 31.41s ago] {'document_id_1': UUID('d4b902e3-a013-4780-93fa-6fc300ab6bf8'), 'param_1': 20, 'param_2': 0}
[2024-10-13 17:29:43,003.003] base.py -> _exec_single_context line:1903 [INFO]: SELECT count(*) AS count_1 
FROM (SELECT segment.id AS id, segment.account_id AS account_id, segment.dataset_id AS dataset_id, segment.document_id AS document_id, segment.node_id AS node_id, segment.position AS position, segment.content AS content, segment.character_count AS character_count, segment.token_count AS token_count, segment.keywords AS keywords, segment.hash AS hash, segment.hit_count AS hit_count, segment.enabled AS enabled, segment.disabled_at AS disabled_at, segment.processing_started_at AS processing_started_at, segment.indexing_completed_at AS indexing_completed_at, segment.completed_at AS completed_at, segment.stopped_at AS stopped_at, segment.error AS error, segment.status AS status, segment.updated_at AS updated_at, segment.created_at AS created_at 
FROM segment 
WHERE segment.document_id = %(document_id_1)s::UUID) AS anon_1
[2024-10-13 17:29:43,003.003] base.py -> _exec_single_context line:1908 [INFO]: [cached since 31.41s ago] {'document_id_1': UUID('d4b902e3-a013-4780-93fa-6fc300ab6bf8')}
[2024-10-13 17:29:43,007.007] base.py -> _rollback_impl line:1129 [INFO]: ROLLBACK
[2024-10-13 17:29:43,008.008] _internal.py -> _log line:96 [INFO]: 127.0.0.1 - - [13/Oct/2024 17:29:43] "GET /datasets/f3f28f75-8e60-4eba-b6df-4d1b390bbd89/documents/d4b902e3-a013-4780-93fa-6fc300ab6bf8/segments?current_page=1&page_size=20 HTTP/1.1" 200 -
[2024-10-13 17:29:55,513.513] base.py -> _begin_impl line:1103 [INFO]: BEGIN (implicit)
[2024-10-13 17:29:55,513.513] base.py -> _exec_single_context line:1903 [INFO]: SELECT document.id AS document_id, document.account_id AS document_account_id, document.dataset_id AS document_dataset_id, document.upload_file_id AS document_upload_file_id, document.process_rule_id AS document_process_rule_id, document.batch AS document_batch, document.name AS document_name, document.position AS document_position, document.character_count AS document_character_count, document.token_count AS document_token_count, document.processing_started_at AS document_processing_started_at, document.parsing_completed_at AS document_parsing_completed_at, document.splitting_completed_at AS document_splitting_completed_at, document.indexing_completed_at AS document_indexing_completed_at, document.completed_at AS document_completed_at, document.stopped_at AS document_stopped_at, document.error AS document_error, document.enabled AS document_enabled, document.disabled_at AS document_disabled_at, document.status AS document_status, document.updated_at AS document_updated_at, document.created_at AS document_created_at 
FROM document 
WHERE document.id = %(pk_1)s::UUID
[2024-10-13 17:29:55,514.514] base.py -> _exec_single_context line:1908 [INFO]: [cached since 831.8s ago] {'pk_1': UUID('d4b902e3-a013-4780-93fa-6fc300ab6bf8')}
[2024-10-13 17:29:55,516.516] base.py -> _exec_single_context line:1903 [INFO]: SELECT coalesce(max(segment.position), %(coalesce_2)s) AS coalesce_1 
FROM segment 
WHERE segment.document_id = %(document_id_1)s::UUID
[2024-10-13 17:29:55,516.516] base.py -> _exec_single_context line:1908 [INFO]: [generated in 0.00022s] {'coalesce_2': 0, 'document_id_1': UUID('d4b902e3-a013-4780-93fa-6fc300ab6bf8')}
[2024-10-13 17:29:55,518.518] base.py -> _exec_single_context line:1903 [INFO]: INSERT INTO segment (account_id, dataset_id, document_id, node_id, position, content, character_count, token_count, keywords, hash, enabled, disabled_at, processing_started_at, indexing_completed_at, completed_at, stopped_at, status) VALUES (%(account_id)s::UUID, %(dataset_id)s::UUID, %(document_id)s::UUID, %(node_id)s::UUID, %(position)s, %(content)s, %(character_count)s, %(token_count)s, %(keywords)s, %(hash)s, %(enabled)s, %(disabled_at)s, %(processing_started_at)s, %(indexing_completed_at)s, %(completed_at)s, %(stopped_at)s, %(status)s) RETURNING segment.id, segment.hit_count, segment.error, segment.updated_at, segment.created_at
[2024-10-13 17:29:55,518.518] base.py -> _exec_single_context line:1908 [INFO]: [generated in 0.00030s] {'account_id': '46db30d1-3199-4e79-a0cd-abf12fa6858f', 'dataset_id': UUID('f3f28f75-8e60-4eba-b6df-4d1b390bbd89'), 'document_id': UUID('d4b902e3-a013-4780-93fa-6fc300ab6bf8'), 'node_id': UUID('9ccf1f66-6ea0-4d7f-bde4-545f75ac0baa'), 'position': 62, 'content': '慕课网，程序员的梦工厂', 'character_count': 11, 'token_count': 16, 'keywords': '["\\u6155\\u8bfe\\u7f51", "\\u7a0b\\u5e8f\\u5458", "\\u68a6\\u5de5\\u5382"]', 'hash': '8a3aa27bd72d41601fba5ca067a30c1f3864b47b99989b1a6561a3ec1a672287', 'enabled': True, 'disabled_at': None, 'processing_started_at': datetime.datetime(2024, 10, 13, 17, 29, 55, 517001), 'indexing_completed_at': datetime.datetime(2024, 10, 13, 17, 29, 55, 517001), 'completed_at': datetime.datetime(2024, 10, 13, 17, 29, 55, 517001), 'stopped_at': None, 'status': <SegmentStatus.COMPLETED: 'completed'>}
[2024-10-13 17:29:55,520.520] base.py -> _commit_impl line:1146 [INFO]: COMMIT
[2024-10-13 17:29:55,553.553] base.py -> _begin_impl line:1103 [INFO]: BEGIN (implicit)
[2024-10-13 17:29:55,554.554] base.py -> _exec_single_context line:1903 [INFO]: SELECT document.id AS document_id, document.account_id AS document_account_id, document.dataset_id AS document_dataset_id, document.upload_file_id AS document_upload_file_id, document.process_rule_id AS document_process_rule_id, document.batch AS document_batch, document.name AS document_name, document.position AS document_position, document.character_count AS document_character_count, document.token_count AS document_token_count, document.processing_started_at AS document_processing_started_at, document.parsing_completed_at AS document_parsing_completed_at, document.splitting_completed_at AS document_splitting_completed_at, document.indexing_completed_at AS document_indexing_completed_at, document.completed_at AS document_completed_at, document.stopped_at AS document_stopped_at, document.error AS document_error, document.enabled AS document_enabled, document.disabled_at AS document_disabled_at, document.status AS document_status, document.updated_at AS document_updated_at, document.created_at AS document_created_at 
FROM document 
WHERE document.id = %(pk_1)s::UUID
[2024-10-13 17:29:55,554.554] base.py -> _exec_single_context line:1908 [INFO]: [generated in 0.00029s] {'pk_1': UUID('d4b902e3-a013-4780-93fa-6fc300ab6bf8')}
[2024-10-13 17:29:55,556.556] base.py -> _exec_single_context line:1903 [INFO]: SELECT segment.id AS segment_id, segment.account_id AS segment_account_id, segment.dataset_id AS segment_dataset_id, segment.document_id AS segment_document_id, segment.node_id AS segment_node_id, segment.position AS segment_position, segment.content AS segment_content, segment.character_count AS segment_character_count, segment.token_count AS segment_token_count, segment.keywords AS segment_keywords, segment.hash AS segment_hash, segment.hit_count AS segment_hit_count, segment.enabled AS segment_enabled, segment.disabled_at AS segment_disabled_at, segment.processing_started_at AS segment_processing_started_at, segment.indexing_completed_at AS segment_indexing_completed_at, segment.completed_at AS segment_completed_at, segment.stopped_at AS segment_stopped_at, segment.error AS segment_error, segment.status AS segment_status, segment.updated_at AS segment_updated_at, segment.created_at AS segment_created_at 
FROM segment 
WHERE segment.id = %(pk_1)s::UUID
[2024-10-13 17:29:55,556.556] base.py -> _exec_single_context line:1908 [INFO]: [generated in 0.00023s] {'pk_1': UUID('4082e83b-af35-40d5-a6cc-2a9b52151716')}
[2024-10-13 17:29:57,624.624] base.py -> _exec_single_context line:1903 [INFO]: SELECT coalesce(sum(segment.character_count), %(coalesce_2)s) AS coalesce_1, coalesce(sum(segment.token_count), %(coalesce_4)s) AS coalesce_3 
FROM segment 
 LIMIT %(param_1)s
[2024-10-13 17:29:57,625.625] base.py -> _exec_single_context line:1908 [INFO]: [generated in 0.00029s] {'coalesce_2': 0, 'coalesce_4': 0, 'param_1': 1}
[2024-10-13 17:29:57,627.627] base.py -> _exec_single_context line:1903 [INFO]: UPDATE document SET character_count=%(character_count)s, token_count=%(token_count)s WHERE document.id = %(document_id)s::UUID
[2024-10-13 17:29:57,627.627] base.py -> _exec_single_context line:1908 [INFO]: [generated in 0.00022s] {'character_count': 48319, 'token_count': 25428, 'document_id': UUID('d4b902e3-a013-4780-93fa-6fc300ab6bf8')}
[2024-10-13 17:29:57,628.628] base.py -> _commit_impl line:1146 [INFO]: COMMIT
[2024-10-13 17:29:57,629.629] base.py -> _begin_impl line:1103 [INFO]: BEGIN (implicit)
[2024-10-13 17:29:57,629.629] base.py -> _exec_single_context line:1903 [INFO]: SELECT document.id AS document_id, document.account_id AS document_account_id, document.dataset_id AS document_dataset_id, document.upload_file_id AS document_upload_file_id, document.process_rule_id AS document_process_rule_id, document.batch AS document_batch, document.name AS document_name, document.position AS document_position, document.character_count AS document_character_count, document.token_count AS document_token_count, document.processing_started_at AS document_processing_started_at, document.parsing_completed_at AS document_parsing_completed_at, document.splitting_completed_at AS document_splitting_completed_at, document.indexing_completed_at AS document_indexing_completed_at, document.completed_at AS document_completed_at, document.stopped_at AS document_stopped_at, document.error AS document_error, document.enabled AS document_enabled, document.disabled_at AS document_disabled_at, document.status AS document_status, document.updated_at AS document_updated_at, document.created_at AS document_created_at 
FROM document 
WHERE document.id = %(pk_1)s::UUID
[2024-10-13 17:29:57,629.629] base.py -> _exec_single_context line:1908 [INFO]: [cached since 2.075s ago] {'pk_1': UUID('d4b902e3-a013-4780-93fa-6fc300ab6bf8')}
[2024-10-13 17:29:57,630.630] base.py -> _exec_single_context line:1903 [INFO]: SELECT segment.id AS segment_id, segment.account_id AS segment_account_id, segment.dataset_id AS segment_dataset_id, segment.document_id AS segment_document_id, segment.node_id AS segment_node_id, segment.position AS segment_position, segment.content AS segment_content, segment.character_count AS segment_character_count, segment.token_count AS segment_token_count, segment.keywords AS segment_keywords, segment.hash AS segment_hash, segment.hit_count AS segment_hit_count, segment.enabled AS segment_enabled, segment.disabled_at AS segment_disabled_at, segment.processing_started_at AS segment_processing_started_at, segment.indexing_completed_at AS segment_indexing_completed_at, segment.completed_at AS segment_completed_at, segment.stopped_at AS segment_stopped_at, segment.error AS segment_error, segment.status AS segment_status, segment.updated_at AS segment_updated_at, segment.created_at AS segment_created_at 
FROM segment 
WHERE segment.id = %(pk_1)s::UUID
[2024-10-13 17:29:57,631.631] base.py -> _exec_single_context line:1908 [INFO]: [cached since 2.074s ago] {'pk_1': UUID('4082e83b-af35-40d5-a6cc-2a9b52151716')}
[2024-10-13 17:29:57,633.633] base.py -> _exec_single_context line:1903 [INFO]: SELECT keyword_table.id AS keyword_table_id, keyword_table.dataset_id AS keyword_table_dataset_id, keyword_table.keyword_table AS keyword_table_keyword_table, keyword_table.updated_at AS keyword_table_updated_at, keyword_table.created_at AS keyword_table_created_at 
FROM keyword_table 
WHERE keyword_table.dataset_id = %(dataset_id_1)s::UUID
[2024-10-13 17:29:57,633.633] base.py -> _exec_single_context line:1908 [INFO]: [generated in 0.00026s] {'dataset_id_1': UUID('f3f28f75-8e60-4eba-b6df-4d1b390bbd89')}
[2024-10-13 17:29:57,635.635] base.py -> _exec_single_context line:1903 [INFO]: SELECT segment.id AS segment_id, segment.keywords AS segment_keywords 
FROM segment 
WHERE segment.id IN (%(id_1_1)s::UUID)
[2024-10-13 17:29:57,635.635] base.py -> _exec_single_context line:1908 [INFO]: [generated in 0.00024s] {'id_1_1': UUID('4082e83b-af35-40d5-a6cc-2a9b52151716')}
[2024-10-13 17:29:57,637.637] base.py -> _exec_single_context line:1903 [INFO]: UPDATE keyword_table SET keyword_table=%(keyword_table)s WHERE keyword_table.id = %(keyword_table_id)s::UUID
[2024-10-13 17:29:57,637.637] base.py -> _exec_single_context line:1908 [INFO]: [generated in 0.00045s] {'keyword_table': '{"10": ["c81d9e46-a567-40d7-8bdb-e9abad764ca9"], "23": ["5a7ab6b7-5cf7-424a-adaa-8e181549f487"], "24": ["5a7ab6b7-5cf7-424a-adaa-8e181549f487"], "25" ... (27198 characters truncated) ... 2a9b52151716"], "\\u7a0b\\u5e8f\\u5458": ["4082e83b-af35-40d5-a6cc-2a9b52151716"], "\\u68a6\\u5de5\\u5382": ["4082e83b-af35-40d5-a6cc-2a9b52151716"]}', 'keyword_table_id': UUID('2619c055-4d83-40f0-b0ed-6e7c75ebe0a9')}
[2024-10-13 17:29:57,639.639] base.py -> _commit_impl line:1146 [INFO]: COMMIT
[2024-10-13 17:29:57,641.641] _internal.py -> _log line:96 [INFO]: 127.0.0.1 - - [13/Oct/2024 17:29:57] "POST /datasets/f3f28f75-8e60-4eba-b6df-4d1b390bbd89/documents/d4b902e3-a013-4780-93fa-6fc300ab6bf8/segments HTTP/1.1" 200 -
[2024-10-13 17:30:04,547.547] base.py -> _begin_impl line:1103 [INFO]: BEGIN (implicit)
[2024-10-13 17:30:04,548.548] base.py -> _exec_single_context line:1903 [INFO]: SELECT document.id AS document_id, document.account_id AS document_account_id, document.dataset_id AS document_dataset_id, document.upload_file_id AS document_upload_file_id, document.process_rule_id AS document_process_rule_id, document.batch AS document_batch, document.name AS document_name, document.position AS document_position, document.character_count AS document_character_count, document.token_count AS document_token_count, document.processing_started_at AS document_processing_started_at, document.parsing_completed_at AS document_parsing_completed_at, document.splitting_completed_at AS document_splitting_completed_at, document.indexing_completed_at AS document_indexing_completed_at, document.completed_at AS document_completed_at, document.stopped_at AS document_stopped_at, document.error AS document_error, document.enabled AS document_enabled, document.disabled_at AS document_disabled_at, document.status AS document_status, document.updated_at AS document_updated_at, document.created_at AS document_created_at 
FROM document 
WHERE document.id = %(pk_1)s::UUID
[2024-10-13 17:30:04,548.548] base.py -> _exec_single_context line:1908 [INFO]: [cached since 840.8s ago] {'pk_1': UUID('d4b902e3-a013-4780-93fa-6fc300ab6bf8')}
[2024-10-13 17:30:04,549.549] base.py -> _exec_single_context line:1903 [INFO]: SELECT segment.id AS segment_id, segment.account_id AS segment_account_id, segment.dataset_id AS segment_dataset_id, segment.document_id AS segment_document_id, segment.node_id AS segment_node_id, segment.position AS segment_position, segment.content AS segment_content, segment.character_count AS segment_character_count, segment.token_count AS segment_token_count, segment.keywords AS segment_keywords, segment.hash AS segment_hash, segment.hit_count AS segment_hit_count, segment.enabled AS segment_enabled, segment.disabled_at AS segment_disabled_at, segment.processing_started_at AS segment_processing_started_at, segment.indexing_completed_at AS segment_indexing_completed_at, segment.completed_at AS segment_completed_at, segment.stopped_at AS segment_stopped_at, segment.error AS segment_error, segment.status AS segment_status, segment.updated_at AS segment_updated_at, segment.created_at AS segment_created_at 
FROM segment 
WHERE segment.document_id = %(document_id_1)s::UUID ORDER BY segment.position ASC 
 LIMIT %(param_1)s OFFSET %(param_2)s
[2024-10-13 17:30:04,550.550] base.py -> _exec_single_context line:1908 [INFO]: [cached since 52.96s ago] {'document_id_1': UUID('d4b902e3-a013-4780-93fa-6fc300ab6bf8'), 'param_1': 20, 'param_2': 0}
[2024-10-13 17:30:04,551.551] base.py -> _exec_single_context line:1903 [INFO]: SELECT count(*) AS count_1 
FROM (SELECT segment.id AS id, segment.account_id AS account_id, segment.dataset_id AS dataset_id, segment.document_id AS document_id, segment.node_id AS node_id, segment.position AS position, segment.content AS content, segment.character_count AS character_count, segment.token_count AS token_count, segment.keywords AS keywords, segment.hash AS hash, segment.hit_count AS hit_count, segment.enabled AS enabled, segment.disabled_at AS disabled_at, segment.processing_started_at AS processing_started_at, segment.indexing_completed_at AS indexing_completed_at, segment.completed_at AS completed_at, segment.stopped_at AS stopped_at, segment.error AS error, segment.status AS status, segment.updated_at AS updated_at, segment.created_at AS created_at 
FROM segment 
WHERE segment.document_id = %(document_id_1)s::UUID) AS anon_1
[2024-10-13 17:30:04,552.552] base.py -> _exec_single_context line:1908 [INFO]: [cached since 52.96s ago] {'document_id_1': UUID('d4b902e3-a013-4780-93fa-6fc300ab6bf8')}
[2024-10-13 17:30:04,554.554] base.py -> _rollback_impl line:1129 [INFO]: ROLLBACK
[2024-10-13 17:30:04,555.555] _internal.py -> _log line:96 [INFO]: 127.0.0.1 - - [13/Oct/2024 17:30:04] "GET /datasets/f3f28f75-8e60-4eba-b6df-4d1b390bbd89/documents/d4b902e3-a013-4780-93fa-6fc300ab6bf8/segments?current_page=1&page_size=20 HTTP/1.1" 200 -
[2024-10-13 17:30:06,956.956] base.py -> _begin_impl line:1103 [INFO]: BEGIN (implicit)
[2024-10-13 17:30:06,957.957] base.py -> _exec_single_context line:1903 [INFO]: SELECT document.id AS document_id, document.account_id AS document_account_id, document.dataset_id AS document_dataset_id, document.upload_file_id AS document_upload_file_id, document.process_rule_id AS document_process_rule_id, document.batch AS document_batch, document.name AS document_name, document.position AS document_position, document.character_count AS document_character_count, document.token_count AS document_token_count, document.processing_started_at AS document_processing_started_at, document.parsing_completed_at AS document_parsing_completed_at, document.splitting_completed_at AS document_splitting_completed_at, document.indexing_completed_at AS document_indexing_completed_at, document.completed_at AS document_completed_at, document.stopped_at AS document_stopped_at, document.error AS document_error, document.enabled AS document_enabled, document.disabled_at AS document_disabled_at, document.status AS document_status, document.updated_at AS document_updated_at, document.created_at AS document_created_at 
FROM document 
WHERE document.id = %(pk_1)s::UUID
[2024-10-13 17:30:06,957.957] base.py -> _exec_single_context line:1908 [INFO]: [cached since 843.2s ago] {'pk_1': UUID('d4b902e3-a013-4780-93fa-6fc300ab6bf8')}
[2024-10-13 17:30:06,959.959] base.py -> _exec_single_context line:1903 [INFO]: SELECT segment.id AS segment_id, segment.account_id AS segment_account_id, segment.dataset_id AS segment_dataset_id, segment.document_id AS segment_document_id, segment.node_id AS segment_node_id, segment.position AS segment_position, segment.content AS segment_content, segment.character_count AS segment_character_count, segment.token_count AS segment_token_count, segment.keywords AS segment_keywords, segment.hash AS segment_hash, segment.hit_count AS segment_hit_count, segment.enabled AS segment_enabled, segment.disabled_at AS segment_disabled_at, segment.processing_started_at AS segment_processing_started_at, segment.indexing_completed_at AS segment_indexing_completed_at, segment.completed_at AS segment_completed_at, segment.stopped_at AS segment_stopped_at, segment.error AS segment_error, segment.status AS segment_status, segment.updated_at AS segment_updated_at, segment.created_at AS segment_created_at 
FROM segment 
WHERE segment.document_id = %(document_id_1)s::UUID AND segment.content ILIKE %(content_1)s ORDER BY segment.position ASC 
 LIMIT %(param_1)s OFFSET %(param_2)s
[2024-10-13 17:30:06,960.960] base.py -> _exec_single_context line:1908 [INFO]: [generated in 0.00025s] {'document_id_1': UUID('d4b902e3-a013-4780-93fa-6fc300ab6bf8'), 'content_1': '%慕课%', 'param_1': 20, 'param_2': 0}
[2024-10-13 17:30:06,963.963] base.py -> _exec_single_context line:1903 [INFO]: SELECT count(*) AS count_1 
FROM (SELECT segment.id AS id, segment.account_id AS account_id, segment.dataset_id AS dataset_id, segment.document_id AS document_id, segment.node_id AS node_id, segment.position AS position, segment.content AS content, segment.character_count AS character_count, segment.token_count AS token_count, segment.keywords AS keywords, segment.hash AS hash, segment.hit_count AS hit_count, segment.enabled AS enabled, segment.disabled_at AS disabled_at, segment.processing_started_at AS processing_started_at, segment.indexing_completed_at AS indexing_completed_at, segment.completed_at AS completed_at, segment.stopped_at AS stopped_at, segment.error AS error, segment.status AS status, segment.updated_at AS updated_at, segment.created_at AS created_at 
FROM segment 
WHERE segment.document_id = %(document_id_1)s::UUID AND segment.content ILIKE %(content_1)s) AS anon_1
[2024-10-13 17:30:06,963.963] base.py -> _exec_single_context line:1908 [INFO]: [generated in 0.00024s] {'document_id_1': UUID('d4b902e3-a013-4780-93fa-6fc300ab6bf8'), 'content_1': '%慕课%'}
[2024-10-13 17:30:06,967.967] base.py -> _rollback_impl line:1129 [INFO]: ROLLBACK
[2024-10-13 17:30:06,967.967] _internal.py -> _log line:96 [INFO]: 127.0.0.1 - - [13/Oct/2024 17:30:06] "GET /datasets/f3f28f75-8e60-4eba-b6df-4d1b390bbd89/documents/d4b902e3-a013-4780-93fa-6fc300ab6bf8/segments?current_page=1&page_size=20&search_word=慕课 HTTP/1.1" 200 -
[2024-10-13 17:30:21,171.171] base.py -> _begin_impl line:1103 [INFO]: BEGIN (implicit)
[2024-10-13 17:30:21,171.171] base.py -> _exec_single_context line:1903 [INFO]: SELECT document.id AS document_id, document.account_id AS document_account_id, document.dataset_id AS document_dataset_id, document.upload_file_id AS document_upload_file_id, document.process_rule_id AS document_process_rule_id, document.batch AS document_batch, document.name AS document_name, document.position AS document_position, document.character_count AS document_character_count, document.token_count AS document_token_count, document.processing_started_at AS document_processing_started_at, document.parsing_completed_at AS document_parsing_completed_at, document.splitting_completed_at AS document_splitting_completed_at, document.indexing_completed_at AS document_indexing_completed_at, document.completed_at AS document_completed_at, document.stopped_at AS document_stopped_at, document.error AS document_error, document.enabled AS document_enabled, document.disabled_at AS document_disabled_at, document.status AS document_status, document.updated_at AS document_updated_at, document.created_at AS document_created_at 
FROM document 
WHERE document.id = %(pk_1)s::UUID
[2024-10-13 17:30:21,171.171] base.py -> _exec_single_context line:1908 [INFO]: [cached since 857.4s ago] {'pk_1': UUID('d4b902e3-a013-4780-93fa-6fc300ab6bf8')}
[2024-10-13 17:30:21,172.172] base.py -> _exec_single_context line:1903 [INFO]: SELECT segment.id AS segment_id, segment.account_id AS segment_account_id, segment.dataset_id AS segment_dataset_id, segment.document_id AS segment_document_id, segment.node_id AS segment_node_id, segment.position AS segment_position, segment.content AS segment_content, segment.character_count AS segment_character_count, segment.token_count AS segment_token_count, segment.keywords AS segment_keywords, segment.hash AS segment_hash, segment.hit_count AS segment_hit_count, segment.enabled AS segment_enabled, segment.disabled_at AS segment_disabled_at, segment.processing_started_at AS segment_processing_started_at, segment.indexing_completed_at AS segment_indexing_completed_at, segment.completed_at AS segment_completed_at, segment.stopped_at AS segment_stopped_at, segment.error AS segment_error, segment.status AS segment_status, segment.updated_at AS segment_updated_at, segment.created_at AS segment_created_at 
FROM segment 
WHERE segment.document_id = %(document_id_1)s::UUID AND segment.content ILIKE %(content_1)s ORDER BY segment.position ASC 
 LIMIT %(param_1)s OFFSET %(param_2)s
[2024-10-13 17:30:21,172.172] base.py -> _exec_single_context line:1908 [INFO]: [cached since 14.21s ago] {'document_id_1': UUID('d4b902e3-a013-4780-93fa-6fc300ab6bf8'), 'content_1': '%梦工厂%', 'param_1': 20, 'param_2': 0}
[2024-10-13 17:30:21,174.174] base.py -> _exec_single_context line:1903 [INFO]: SELECT count(*) AS count_1 
FROM (SELECT segment.id AS id, segment.account_id AS account_id, segment.dataset_id AS dataset_id, segment.document_id AS document_id, segment.node_id AS node_id, segment.position AS position, segment.content AS content, segment.character_count AS character_count, segment.token_count AS token_count, segment.keywords AS keywords, segment.hash AS hash, segment.hit_count AS hit_count, segment.enabled AS enabled, segment.disabled_at AS disabled_at, segment.processing_started_at AS processing_started_at, segment.indexing_completed_at AS indexing_completed_at, segment.completed_at AS completed_at, segment.stopped_at AS stopped_at, segment.error AS error, segment.status AS status, segment.updated_at AS updated_at, segment.created_at AS created_at 
FROM segment 
WHERE segment.document_id = %(document_id_1)s::UUID AND segment.content ILIKE %(content_1)s) AS anon_1
[2024-10-13 17:30:21,174.174] base.py -> _exec_single_context line:1908 [INFO]: [cached since 14.21s ago] {'document_id_1': UUID('d4b902e3-a013-4780-93fa-6fc300ab6bf8'), 'content_1': '%梦工厂%'}
[2024-10-13 17:30:21,176.176] base.py -> _rollback_impl line:1129 [INFO]: ROLLBACK
[2024-10-13 17:30:21,176.176] _internal.py -> _log line:96 [INFO]: 127.0.0.1 - - [13/Oct/2024 17:30:21] "GET /datasets/f3f28f75-8e60-4eba-b6df-4d1b390bbd89/documents/d4b902e3-a013-4780-93fa-6fc300ab6bf8/segments?current_page=1&page_size=20&search_word=梦工厂 HTTP/1.1" 200 -
[2024-10-13 17:30:31,611.611] base.py -> _begin_impl line:1103 [INFO]: BEGIN (implicit)
[2024-10-13 17:30:31,611.611] base.py -> _exec_single_context line:1903 [INFO]: SELECT dataset.id AS dataset_id, dataset.account_id AS dataset_account_id, dataset.name AS dataset_name, dataset.icon AS dataset_icon, dataset.description AS dataset_description, dataset.updated_at AS dataset_updated_at, dataset.created_at AS dataset_created_at 
FROM dataset 
WHERE dataset.id = %(pk_1)s::UUID
[2024-10-13 17:30:31,612.612] base.py -> _exec_single_context line:1908 [INFO]: [cached since 870.8s ago] {'pk_1': UUID('f3f28f75-8e60-4eba-b6df-4d1b390bbd89')}
[2024-10-13 17:30:31,614.614] base.py -> _exec_single_context line:1903 [INFO]: SELECT dataset_query.id AS dataset_query_id, dataset_query.dataset_id AS dataset_query_dataset_id, dataset_query.query AS dataset_query_query, dataset_query.source AS dataset_query_source, dataset_query.source_app_id AS dataset_query_source_app_id, dataset_query.created_by AS dataset_query_created_by, dataset_query.updated_at AS dataset_query_updated_at, dataset_query.created_at AS dataset_query_created_at 
FROM dataset_query 
WHERE dataset_query.dataset_id = %(dataset_id_1)s::UUID ORDER BY dataset_query.created_at DESC 
 LIMIT %(param_1)s
[2024-10-13 17:30:31,614.614] base.py -> _exec_single_context line:1908 [INFO]: [generated in 0.00023s] {'dataset_id_1': UUID('f3f28f75-8e60-4eba-b6df-4d1b390bbd89'), 'param_1': 10}
[2024-10-13 17:30:31,616.616] base.py -> _rollback_impl line:1129 [INFO]: ROLLBACK
[2024-10-13 17:30:31,617.617] _internal.py -> _log line:96 [INFO]: 127.0.0.1 - - [13/Oct/2024 17:30:31] "GET /datasets/f3f28f75-8e60-4eba-b6df-4d1b390bbd89/queries HTTP/1.1" 200 -
[2024-10-13 17:30:36,128.128] base.py -> _begin_impl line:1103 [INFO]: BEGIN (implicit)
[2024-10-13 17:30:36,128.128] base.py -> _exec_single_context line:1903 [INFO]: SELECT dataset.id AS dataset_id, dataset.account_id AS dataset_account_id, dataset.name AS dataset_name, dataset.icon AS dataset_icon, dataset.description AS dataset_description, dataset.updated_at AS dataset_updated_at, dataset.created_at AS dataset_created_at 
FROM dataset 
WHERE dataset.id = %(pk_1)s::UUID
[2024-10-13 17:30:36,129.129] base.py -> _exec_single_context line:1908 [INFO]: [cached since 875.3s ago] {'pk_1': UUID('f3f28f75-8e60-4eba-b6df-4d1b390bbd89')}
[2024-10-13 17:30:36,131.131] base.py -> _exec_single_context line:1903 [INFO]: SELECT document.id AS document_id, document.account_id AS document_account_id, document.dataset_id AS document_dataset_id, document.upload_file_id AS document_upload_file_id, document.process_rule_id AS document_process_rule_id, document.batch AS document_batch, document.name AS document_name, document.position AS document_position, document.character_count AS document_character_count, document.token_count AS document_token_count, document.processing_started_at AS document_processing_started_at, document.parsing_completed_at AS document_parsing_completed_at, document.splitting_completed_at AS document_splitting_completed_at, document.indexing_completed_at AS document_indexing_completed_at, document.completed_at AS document_completed_at, document.stopped_at AS document_stopped_at, document.error AS document_error, document.enabled AS document_enabled, document.disabled_at AS document_disabled_at, document.status AS document_status, document.updated_at AS document_updated_at, document.created_at AS document_created_at 
FROM document 
WHERE document.account_id = %(account_id_1)s::UUID AND document.dataset_id = %(dataset_id_1)s::UUID ORDER BY document.created_at DESC 
 LIMIT %(param_1)s OFFSET %(param_2)s
[2024-10-13 17:30:36,131.131] base.py -> _exec_single_context line:1908 [INFO]: [generated in 0.00023s] {'account_id_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f', 'dataset_id_1': UUID('f3f28f75-8e60-4eba-b6df-4d1b390bbd89'), 'param_1': 20, 'param_2': 0}
[2024-10-13 17:30:36,134.134] base.py -> _exec_single_context line:1903 [INFO]: SELECT count(*) AS count_1 
FROM (SELECT document.id AS id, document.account_id AS account_id, document.dataset_id AS dataset_id, document.upload_file_id AS upload_file_id, document.process_rule_id AS process_rule_id, document.batch AS batch, document.name AS name, document.position AS position, document.character_count AS character_count, document.token_count AS token_count, document.processing_started_at AS processing_started_at, document.parsing_completed_at AS parsing_completed_at, document.splitting_completed_at AS splitting_completed_at, document.indexing_completed_at AS indexing_completed_at, document.completed_at AS completed_at, document.stopped_at AS stopped_at, document.error AS error, document.enabled AS enabled, document.disabled_at AS disabled_at, document.status AS status, document.updated_at AS updated_at, document.created_at AS created_at 
FROM document 
WHERE document.account_id = %(account_id_1)s::UUID AND document.dataset_id = %(dataset_id_1)s::UUID) AS anon_1
[2024-10-13 17:30:36,134.134] base.py -> _exec_single_context line:1908 [INFO]: [generated in 0.00023s] {'account_id_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f', 'dataset_id_1': UUID('f3f28f75-8e60-4eba-b6df-4d1b390bbd89')}
[2024-10-13 17:30:36,136.136] base.py -> _exec_single_context line:1903 [INFO]: SELECT coalesce(sum(segment.hit_count), %(coalesce_2)s) AS coalesce_1 
FROM segment 
WHERE segment.document_id = %(document_id_1)s::UUID
[2024-10-13 17:30:36,136.136] base.py -> _exec_single_context line:1908 [INFO]: [generated in 0.00020s] {'coalesce_2': 0, 'document_id_1': UUID('d4b902e3-a013-4780-93fa-6fc300ab6bf8')}
[2024-10-13 17:30:36,137.137] base.py -> _rollback_impl line:1129 [INFO]: ROLLBACK
[2024-10-13 17:30:36,137.137] _internal.py -> _log line:96 [INFO]: 127.0.0.1 - - [13/Oct/2024 17:30:36] "GET /datasets/f3f28f75-8e60-4eba-b6df-4d1b390bbd89/documents?current_page=1&page_size=20 HTTP/1.1" 200 -
[2024-10-13 17:30:47,913.913] http.py -> _register_error_handler line:66 [ERROR]: An error occurred: 404 Not Found: The requested URL was not found on the server. If you entered the URL manually please check your spelling and try again.
Traceback (most recent call last):
  File "D:\Code\llmops\llmops-api\venv\lib\site-packages\flask\app.py", line 870, in full_dispatch_request
    rv = self.dispatch_request()
  File "D:\Code\llmops\llmops-api\venv\lib\site-packages\flask\app.py", line 844, in dispatch_request
    self.raise_routing_exception(req)
  File "D:\Code\llmops\llmops-api\venv\lib\site-packages\flask\app.py", line 453, in raise_routing_exception
    raise request.routing_exception  # type: ignore[misc]
  File "D:\Code\llmops\llmops-api\venv\lib\site-packages\flask\ctx.py", line 362, in match_request
    result = self.url_adapter.match(return_rule=True)  # type: ignore
  File "D:\Code\llmops\llmops-api\venv\lib\site-packages\werkzeug\routing\map.py", line 624, in match
    raise NotFound() from None
werkzeug.exceptions.NotFound: 404 Not Found: The requested URL was not found on the server. If you entered the URL manually please check your spelling and try again.
[2024-10-13 17:30:47,943.943] _internal.py -> _log line:96 [INFO]: 127.0.0.1 - - [13/Oct/2024 17:30:47] "[35m[1mGET /datasets/f3f28f75-8e60-4eba-b6df-4d1b390bbd89/documents/d4b902e3-a013-4780-93fa-6fc300ab6bf8/segments/4082e83b-af35-40d5-a6cc-2a9b52151716/delete HTTP/1.1[0m" 500 -
[2024-10-13 17:31:32,564.564] _internal.py -> _log line:96 [INFO]:  * Detected change in 'D:\\Code\\llmops\\llmops-api\\internal\\router\\router.py', reloading
[2024-10-13 17:31:32,871.871] _internal.py -> _log line:96 [INFO]:  * Restarting with stat
[2024-10-13 17:31:37,122.122] _internal.py -> _log line:96 [WARNING]:  * Debugger is active!
[2024-10-13 17:31:37,125.125] _internal.py -> _log line:96 [INFO]:  * Debugger PIN: 102-324-223
[2024-10-13 17:40:00,013.013] http.py -> _register_error_handler line:66 [ERROR]: An error occurred: 405 Method Not Allowed: The method is not allowed for the requested URL.
Traceback (most recent call last):
  File "D:\Code\llmops\llmops-api\venv\lib\site-packages\flask\app.py", line 870, in full_dispatch_request
    rv = self.dispatch_request()
  File "D:\Code\llmops\llmops-api\venv\lib\site-packages\flask\app.py", line 844, in dispatch_request
    self.raise_routing_exception(req)
  File "D:\Code\llmops\llmops-api\venv\lib\site-packages\flask\app.py", line 453, in raise_routing_exception
    raise request.routing_exception  # type: ignore[misc]
  File "D:\Code\llmops\llmops-api\venv\lib\site-packages\flask\ctx.py", line 362, in match_request
    result = self.url_adapter.match(return_rule=True)  # type: ignore
  File "D:\Code\llmops\llmops-api\venv\lib\site-packages\werkzeug\routing\map.py", line 619, in match
    raise MethodNotAllowed(valid_methods=list(e.have_match_for)) from None
werkzeug.exceptions.MethodNotAllowed: 405 Method Not Allowed: The method is not allowed for the requested URL.
[2024-10-13 17:40:00,022.022] _internal.py -> _log line:96 [INFO]: 127.0.0.1 - - [13/Oct/2024 17:40:00] "[35m[1mGET /datasets/f3f28f75-8e60-4eba-b6df-4d1b390bbd89/documents/d4b902e3-a013-4780-93fa-6fc300ab6bf8/segments/4082e83b-af35-40d5-a6cc-2a9b52151716/delete HTTP/1.1[0m" 500 -
[2024-10-13 17:40:03,990.990] base.py -> _exec_single_context line:1903 [INFO]: select pg_catalog.version()
[2024-10-13 17:40:03,990.990] base.py -> _exec_single_context line:1908 [INFO]: [raw sql] {}
[2024-10-13 17:40:03,991.991] base.py -> _exec_single_context line:1903 [INFO]: select current_schema()
[2024-10-13 17:40:03,991.991] base.py -> _exec_single_context line:1908 [INFO]: [raw sql] {}
[2024-10-13 17:40:03,992.992] base.py -> _exec_single_context line:1903 [INFO]: show standard_conforming_strings
[2024-10-13 17:40:03,992.992] base.py -> _exec_single_context line:1908 [INFO]: [raw sql] {}
[2024-10-13 17:40:03,993.993] base.py -> _begin_impl line:1103 [INFO]: BEGIN (implicit)
[2024-10-13 17:40:03,997.997] base.py -> _exec_single_context line:1903 [INFO]: SELECT segment.id AS segment_id, segment.account_id AS segment_account_id, segment.dataset_id AS segment_dataset_id, segment.document_id AS segment_document_id, segment.node_id AS segment_node_id, segment.position AS segment_position, segment.content AS segment_content, segment.character_count AS segment_character_count, segment.token_count AS segment_token_count, segment.keywords AS segment_keywords, segment.hash AS segment_hash, segment.hit_count AS segment_hit_count, segment.enabled AS segment_enabled, segment.disabled_at AS segment_disabled_at, segment.processing_started_at AS segment_processing_started_at, segment.indexing_completed_at AS segment_indexing_completed_at, segment.completed_at AS segment_completed_at, segment.stopped_at AS segment_stopped_at, segment.error AS segment_error, segment.status AS segment_status, segment.updated_at AS segment_updated_at, segment.created_at AS segment_created_at 
FROM segment 
WHERE segment.id = %(pk_1)s::UUID
[2024-10-13 17:40:03,997.997] base.py -> _exec_single_context line:1908 [INFO]: [generated in 0.00033s] {'pk_1': UUID('4082e83b-af35-40d5-a6cc-2a9b52151716')}
[2024-10-13 17:40:04,001.001] base.py -> _exec_single_context line:1903 [INFO]: SELECT document.id AS document_id, document.account_id AS document_account_id, document.dataset_id AS document_dataset_id, document.upload_file_id AS document_upload_file_id, document.process_rule_id AS document_process_rule_id, document.batch AS document_batch, document.name AS document_name, document.position AS document_position, document.character_count AS document_character_count, document.token_count AS document_token_count, document.processing_started_at AS document_processing_started_at, document.parsing_completed_at AS document_parsing_completed_at, document.splitting_completed_at AS document_splitting_completed_at, document.indexing_completed_at AS document_indexing_completed_at, document.completed_at AS document_completed_at, document.stopped_at AS document_stopped_at, document.error AS document_error, document.enabled AS document_enabled, document.disabled_at AS document_disabled_at, document.status AS document_status, document.updated_at AS document_updated_at, document.created_at AS document_created_at 
FROM document 
WHERE document.id = %(pk_1)s::UUID
[2024-10-13 17:40:04,001.001] base.py -> _exec_single_context line:1908 [INFO]: [generated in 0.00021s] {'pk_1': UUID('d4b902e3-a013-4780-93fa-6fc300ab6bf8')}
[2024-10-13 17:40:04,003.003] base.py -> _exec_single_context line:1903 [INFO]: DELETE FROM segment WHERE segment.id = %(id)s::UUID
[2024-10-13 17:40:04,003.003] base.py -> _exec_single_context line:1908 [INFO]: [generated in 0.00021s] {'id': UUID('4082e83b-af35-40d5-a6cc-2a9b52151716')}
[2024-10-13 17:40:04,004.004] base.py -> _commit_impl line:1146 [INFO]: COMMIT
[2024-10-13 17:40:04,041.041] base.py -> _begin_impl line:1103 [INFO]: BEGIN (implicit)
[2024-10-13 17:40:04,042.042] base.py -> _exec_single_context line:1903 [INFO]: SELECT keyword_table.id AS keyword_table_id, keyword_table.dataset_id AS keyword_table_dataset_id, keyword_table.keyword_table AS keyword_table_keyword_table, keyword_table.updated_at AS keyword_table_updated_at, keyword_table.created_at AS keyword_table_created_at 
FROM keyword_table 
WHERE keyword_table.dataset_id = %(dataset_id_1)s::UUID
[2024-10-13 17:40:04,043.043] base.py -> _exec_single_context line:1908 [INFO]: [generated in 0.00025s] {'dataset_id_1': UUID('f3f28f75-8e60-4eba-b6df-4d1b390bbd89')}
[2024-10-13 17:40:04,046.046] base.py -> _exec_single_context line:1903 [INFO]: UPDATE keyword_table SET keyword_table=%(keyword_table)s WHERE keyword_table.id = %(keyword_table_id)s::UUID
[2024-10-13 17:40:04,046.046] base.py -> _exec_single_context line:1908 [INFO]: [generated in 0.00044s] {'keyword_table': '{"10": ["c81d9e46-a567-40d7-8bdb-e9abad764ca9"], "23": ["5a7ab6b7-5cf7-424a-adaa-8e181549f487"], "24": ["5a7ab6b7-5cf7-424a-adaa-8e181549f487"], "25" ... (26997 characters truncated) ... , "\\u82f1\\u6587\\u5355\\u8bcd": ["7bec2cf6-db6c-4c37-91fa-b197f836c7f8"], "\\u9519\\u8bef\\u4fe1\\u606f": ["f93e4395-74b2-4420-afd8-dad834ba34b8"]}', 'keyword_table_id': UUID('2619c055-4d83-40f0-b0ed-6e7c75ebe0a9')}
[2024-10-13 17:40:04,048.048] base.py -> _commit_impl line:1146 [INFO]: COMMIT
[2024-10-13 17:40:04,066.066] base.py -> _begin_impl line:1103 [INFO]: BEGIN (implicit)
[2024-10-13 17:40:04,067.067] base.py -> _exec_single_context line:1903 [INFO]: SELECT coalesce(sum(segment.character_count), %(coalesce_2)s) AS coalesce_1, coalesce(sum(segment.token_count), %(coalesce_4)s) AS coalesce_3 
FROM segment 
 LIMIT %(param_1)s
[2024-10-13 17:40:04,067.067] base.py -> _exec_single_context line:1908 [INFO]: [generated in 0.00022s] {'coalesce_2': 0, 'coalesce_4': 0, 'param_1': 1}
[2024-10-13 17:40:04,069.069] base.py -> _exec_single_context line:1903 [INFO]: SELECT document.id AS document_id, document.account_id AS document_account_id, document.dataset_id AS document_dataset_id, document.upload_file_id AS document_upload_file_id, document.process_rule_id AS document_process_rule_id, document.batch AS document_batch, document.name AS document_name, document.position AS document_position, document.character_count AS document_character_count, document.token_count AS document_token_count, document.processing_started_at AS document_processing_started_at, document.parsing_completed_at AS document_parsing_completed_at, document.splitting_completed_at AS document_splitting_completed_at, document.indexing_completed_at AS document_indexing_completed_at, document.completed_at AS document_completed_at, document.stopped_at AS document_stopped_at, document.error AS document_error, document.enabled AS document_enabled, document.disabled_at AS document_disabled_at, document.status AS document_status, document.updated_at AS document_updated_at, document.created_at AS document_created_at 
FROM document 
WHERE document.id = %(pk_1)s::UUID
[2024-10-13 17:40:04,070.070] base.py -> _exec_single_context line:1908 [INFO]: [generated in 0.00026s] {'pk_1': UUID('d4b902e3-a013-4780-93fa-6fc300ab6bf8')}
[2024-10-13 17:40:04,071.071] base.py -> _exec_single_context line:1903 [INFO]: UPDATE document SET character_count=%(character_count)s, token_count=%(token_count)s WHERE document.id = %(document_id)s::UUID
[2024-10-13 17:40:04,071.071] base.py -> _exec_single_context line:1908 [INFO]: [generated in 0.00021s] {'character_count': 48308, 'token_count': 25412, 'document_id': UUID('d4b902e3-a013-4780-93fa-6fc300ab6bf8')}
[2024-10-13 17:40:04,071.071] base.py -> _commit_impl line:1146 [INFO]: COMMIT
[2024-10-13 17:40:04,073.073] _internal.py -> _log line:96 [INFO]: 127.0.0.1 - - [13/Oct/2024 17:40:04] "POST /datasets/f3f28f75-8e60-4eba-b6df-4d1b390bbd89/documents/d4b902e3-a013-4780-93fa-6fc300ab6bf8/segments/4082e83b-af35-40d5-a6cc-2a9b52151716/delete HTTP/1.1" 200 -
[2024-10-13 17:40:08,595.595] base.py -> _begin_impl line:1103 [INFO]: BEGIN (implicit)
[2024-10-13 17:40:08,596.596] base.py -> _exec_single_context line:1903 [INFO]: SELECT document.id AS document_id, document.account_id AS document_account_id, document.dataset_id AS document_dataset_id, document.upload_file_id AS document_upload_file_id, document.process_rule_id AS document_process_rule_id, document.batch AS document_batch, document.name AS document_name, document.position AS document_position, document.character_count AS document_character_count, document.token_count AS document_token_count, document.processing_started_at AS document_processing_started_at, document.parsing_completed_at AS document_parsing_completed_at, document.splitting_completed_at AS document_splitting_completed_at, document.indexing_completed_at AS document_indexing_completed_at, document.completed_at AS document_completed_at, document.stopped_at AS document_stopped_at, document.error AS document_error, document.enabled AS document_enabled, document.disabled_at AS document_disabled_at, document.status AS document_status, document.updated_at AS document_updated_at, document.created_at AS document_created_at 
FROM document 
WHERE document.id = %(pk_1)s::UUID
[2024-10-13 17:40:08,596.596] base.py -> _exec_single_context line:1908 [INFO]: [cached since 4.595s ago] {'pk_1': UUID('d4b902e3-a013-4780-93fa-6fc300ab6bf8')}
[2024-10-13 17:40:08,599.599] base.py -> _exec_single_context line:1903 [INFO]: SELECT segment.id AS segment_id, segment.account_id AS segment_account_id, segment.dataset_id AS segment_dataset_id, segment.document_id AS segment_document_id, segment.node_id AS segment_node_id, segment.position AS segment_position, segment.content AS segment_content, segment.character_count AS segment_character_count, segment.token_count AS segment_token_count, segment.keywords AS segment_keywords, segment.hash AS segment_hash, segment.hit_count AS segment_hit_count, segment.enabled AS segment_enabled, segment.disabled_at AS segment_disabled_at, segment.processing_started_at AS segment_processing_started_at, segment.indexing_completed_at AS segment_indexing_completed_at, segment.completed_at AS segment_completed_at, segment.stopped_at AS segment_stopped_at, segment.error AS segment_error, segment.status AS segment_status, segment.updated_at AS segment_updated_at, segment.created_at AS segment_created_at 
FROM segment 
WHERE segment.document_id = %(document_id_1)s::UUID AND segment.content ILIKE %(content_1)s ORDER BY segment.position ASC 
 LIMIT %(param_1)s OFFSET %(param_2)s
[2024-10-13 17:40:08,599.599] base.py -> _exec_single_context line:1908 [INFO]: [generated in 0.00027s] {'document_id_1': UUID('d4b902e3-a013-4780-93fa-6fc300ab6bf8'), 'content_1': '%梦工厂%', 'param_1': 20, 'param_2': 0}
[2024-10-13 17:40:08,603.603] base.py -> _exec_single_context line:1903 [INFO]: SELECT count(*) AS count_1 
FROM (SELECT segment.id AS id, segment.account_id AS account_id, segment.dataset_id AS dataset_id, segment.document_id AS document_id, segment.node_id AS node_id, segment.position AS position, segment.content AS content, segment.character_count AS character_count, segment.token_count AS token_count, segment.keywords AS keywords, segment.hash AS hash, segment.hit_count AS hit_count, segment.enabled AS enabled, segment.disabled_at AS disabled_at, segment.processing_started_at AS processing_started_at, segment.indexing_completed_at AS indexing_completed_at, segment.completed_at AS completed_at, segment.stopped_at AS stopped_at, segment.error AS error, segment.status AS status, segment.updated_at AS updated_at, segment.created_at AS created_at 
FROM segment 
WHERE segment.document_id = %(document_id_1)s::UUID AND segment.content ILIKE %(content_1)s) AS anon_1
[2024-10-13 17:40:08,603.603] base.py -> _exec_single_context line:1908 [INFO]: [generated in 0.00026s] {'document_id_1': UUID('d4b902e3-a013-4780-93fa-6fc300ab6bf8'), 'content_1': '%梦工厂%'}
[2024-10-13 17:40:08,606.606] base.py -> _rollback_impl line:1129 [INFO]: ROLLBACK
[2024-10-13 17:40:08,606.606] _internal.py -> _log line:96 [INFO]: 127.0.0.1 - - [13/Oct/2024 17:40:08] "GET /datasets/f3f28f75-8e60-4eba-b6df-4d1b390bbd89/documents/d4b902e3-a013-4780-93fa-6fc300ab6bf8/segments?current_page=1&page_size=20&search_word=梦工厂 HTTP/1.1" 200 -
[2024-10-13 17:40:15,226.226] base.py -> _begin_impl line:1103 [INFO]: BEGIN (implicit)
[2024-10-13 17:40:15,227.227] base.py -> _exec_single_context line:1903 [INFO]: SELECT dataset.id AS dataset_id, dataset.account_id AS dataset_account_id, dataset.name AS dataset_name, dataset.icon AS dataset_icon, dataset.description AS dataset_description, dataset.updated_at AS dataset_updated_at, dataset.created_at AS dataset_created_at 
FROM dataset 
WHERE dataset.id = %(pk_1)s::UUID
[2024-10-13 17:40:15,227.227] base.py -> _exec_single_context line:1908 [INFO]: [generated in 0.00024s] {'pk_1': UUID('f3f28f75-8e60-4eba-b6df-4d1b390bbd89')}
[2024-10-13 17:40:15,229.229] base.py -> _exec_single_context line:1903 [INFO]: SELECT document.id AS document_id, document.account_id AS document_account_id, document.dataset_id AS document_dataset_id, document.upload_file_id AS document_upload_file_id, document.process_rule_id AS document_process_rule_id, document.batch AS document_batch, document.name AS document_name, document.position AS document_position, document.character_count AS document_character_count, document.token_count AS document_token_count, document.processing_started_at AS document_processing_started_at, document.parsing_completed_at AS document_parsing_completed_at, document.splitting_completed_at AS document_splitting_completed_at, document.indexing_completed_at AS document_indexing_completed_at, document.completed_at AS document_completed_at, document.stopped_at AS document_stopped_at, document.error AS document_error, document.enabled AS document_enabled, document.disabled_at AS document_disabled_at, document.status AS document_status, document.updated_at AS document_updated_at, document.created_at AS document_created_at 
FROM document 
WHERE document.account_id = %(account_id_1)s::UUID AND document.dataset_id = %(dataset_id_1)s::UUID ORDER BY document.created_at DESC 
 LIMIT %(param_1)s OFFSET %(param_2)s
[2024-10-13 17:40:15,229.229] base.py -> _exec_single_context line:1908 [INFO]: [generated in 0.00027s] {'account_id_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f', 'dataset_id_1': UUID('f3f28f75-8e60-4eba-b6df-4d1b390bbd89'), 'param_1': 20, 'param_2': 0}
[2024-10-13 17:40:15,232.232] base.py -> _exec_single_context line:1903 [INFO]: SELECT count(*) AS count_1 
FROM (SELECT document.id AS id, document.account_id AS account_id, document.dataset_id AS dataset_id, document.upload_file_id AS upload_file_id, document.process_rule_id AS process_rule_id, document.batch AS batch, document.name AS name, document.position AS position, document.character_count AS character_count, document.token_count AS token_count, document.processing_started_at AS processing_started_at, document.parsing_completed_at AS parsing_completed_at, document.splitting_completed_at AS splitting_completed_at, document.indexing_completed_at AS indexing_completed_at, document.completed_at AS completed_at, document.stopped_at AS stopped_at, document.error AS error, document.enabled AS enabled, document.disabled_at AS disabled_at, document.status AS status, document.updated_at AS updated_at, document.created_at AS created_at 
FROM document 
WHERE document.account_id = %(account_id_1)s::UUID AND document.dataset_id = %(dataset_id_1)s::UUID) AS anon_1
[2024-10-13 17:40:15,232.232] base.py -> _exec_single_context line:1908 [INFO]: [generated in 0.00023s] {'account_id_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f', 'dataset_id_1': UUID('f3f28f75-8e60-4eba-b6df-4d1b390bbd89')}
[2024-10-13 17:40:15,234.234] base.py -> _exec_single_context line:1903 [INFO]: SELECT coalesce(sum(segment.hit_count), %(coalesce_2)s) AS coalesce_1 
FROM segment 
WHERE segment.document_id = %(document_id_1)s::UUID
[2024-10-13 17:40:15,234.234] base.py -> _exec_single_context line:1908 [INFO]: [generated in 0.00028s] {'coalesce_2': 0, 'document_id_1': UUID('d4b902e3-a013-4780-93fa-6fc300ab6bf8')}
[2024-10-13 17:40:15,235.235] base.py -> _rollback_impl line:1129 [INFO]: ROLLBACK
[2024-10-13 17:40:15,235.235] _internal.py -> _log line:96 [INFO]: 127.0.0.1 - - [13/Oct/2024 17:40:15] "GET /datasets/f3f28f75-8e60-4eba-b6df-4d1b390bbd89/documents?current_page=1&page_size=20 HTTP/1.1" 200 -
[2024-10-13 17:52:10,447.447] base.py -> _begin_impl line:1103 [INFO]: BEGIN (implicit)
[2024-10-13 17:52:10,447.447] base.py -> _exec_single_context line:1903 [INFO]: SELECT document.id AS document_id, document.account_id AS document_account_id, document.dataset_id AS document_dataset_id, document.upload_file_id AS document_upload_file_id, document.process_rule_id AS document_process_rule_id, document.batch AS document_batch, document.name AS document_name, document.position AS document_position, document.character_count AS document_character_count, document.token_count AS document_token_count, document.processing_started_at AS document_processing_started_at, document.parsing_completed_at AS document_parsing_completed_at, document.splitting_completed_at AS document_splitting_completed_at, document.indexing_completed_at AS document_indexing_completed_at, document.completed_at AS document_completed_at, document.stopped_at AS document_stopped_at, document.error AS document_error, document.enabled AS document_enabled, document.disabled_at AS document_disabled_at, document.status AS document_status, document.updated_at AS document_updated_at, document.created_at AS document_created_at 
FROM document 
WHERE document.id = %(pk_1)s::UUID
[2024-10-13 17:52:10,447.447] base.py -> _exec_single_context line:1908 [INFO]: [cached since 726.4s ago] {'pk_1': UUID('d4b902e3-a013-4780-93fa-6fc300ab6bf8')}
[2024-10-13 17:52:10,450.450] base.py -> _exec_single_context line:1903 [INFO]: SELECT coalesce(max(segment.position), %(coalesce_2)s) AS coalesce_1 
FROM segment 
WHERE segment.document_id = %(document_id_1)s::UUID
[2024-10-13 17:52:10,450.450] base.py -> _exec_single_context line:1908 [INFO]: [generated in 0.00021s] {'coalesce_2': 0, 'document_id_1': UUID('d4b902e3-a013-4780-93fa-6fc300ab6bf8')}
[2024-10-13 17:52:10,452.452] base.py -> _exec_single_context line:1903 [INFO]: INSERT INTO segment (account_id, dataset_id, document_id, node_id, position, content, character_count, token_count, keywords, hash, enabled, disabled_at, processing_started_at, indexing_completed_at, completed_at, stopped_at, status) VALUES (%(account_id)s::UUID, %(dataset_id)s::UUID, %(document_id)s::UUID, %(node_id)s::UUID, %(position)s, %(content)s, %(character_count)s, %(token_count)s, %(keywords)s, %(hash)s, %(enabled)s, %(disabled_at)s, %(processing_started_at)s, %(indexing_completed_at)s, %(completed_at)s, %(stopped_at)s, %(status)s) RETURNING segment.id, segment.hit_count, segment.error, segment.updated_at, segment.created_at
[2024-10-13 17:52:10,452.452] base.py -> _exec_single_context line:1908 [INFO]: [generated in 0.00028s] {'account_id': '46db30d1-3199-4e79-a0cd-abf12fa6858f', 'dataset_id': UUID('f3f28f75-8e60-4eba-b6df-4d1b390bbd89'), 'document_id': UUID('d4b902e3-a013-4780-93fa-6fc300ab6bf8'), 'node_id': UUID('5ccf3554-b150-45c1-b0b8-f3c7e99eeca8'), 'position': 62, 'content': '慕课网，程序员的梦工厂', 'character_count': 11, 'token_count': 16, 'keywords': '["\\u6155\\u8bfe\\u7f51", "\\u7a0b\\u5e8f\\u5458", "\\u68a6\\u5de5\\u5382"]', 'hash': '8a3aa27bd72d41601fba5ca067a30c1f3864b47b99989b1a6561a3ec1a672287', 'enabled': True, 'disabled_at': None, 'processing_started_at': datetime.datetime(2024, 10, 13, 17, 52, 10, 451318), 'indexing_completed_at': datetime.datetime(2024, 10, 13, 17, 52, 10, 451318), 'completed_at': datetime.datetime(2024, 10, 13, 17, 52, 10, 451318), 'stopped_at': None, 'status': <SegmentStatus.COMPLETED: 'completed'>}
[2024-10-13 17:52:10,454.454] base.py -> _commit_impl line:1146 [INFO]: COMMIT
[2024-10-13 17:52:10,457.457] base.py -> _begin_impl line:1103 [INFO]: BEGIN (implicit)
[2024-10-13 17:52:10,458.458] base.py -> _exec_single_context line:1903 [INFO]: SELECT document.id AS document_id, document.account_id AS document_account_id, document.dataset_id AS document_dataset_id, document.upload_file_id AS document_upload_file_id, document.process_rule_id AS document_process_rule_id, document.batch AS document_batch, document.name AS document_name, document.position AS document_position, document.character_count AS document_character_count, document.token_count AS document_token_count, document.processing_started_at AS document_processing_started_at, document.parsing_completed_at AS document_parsing_completed_at, document.splitting_completed_at AS document_splitting_completed_at, document.indexing_completed_at AS document_indexing_completed_at, document.completed_at AS document_completed_at, document.stopped_at AS document_stopped_at, document.error AS document_error, document.enabled AS document_enabled, document.disabled_at AS document_disabled_at, document.status AS document_status, document.updated_at AS document_updated_at, document.created_at AS document_created_at 
FROM document 
WHERE document.id = %(pk_1)s::UUID
[2024-10-13 17:52:10,458.458] base.py -> _exec_single_context line:1908 [INFO]: [cached since 726.4s ago] {'pk_1': UUID('d4b902e3-a013-4780-93fa-6fc300ab6bf8')}
[2024-10-13 17:52:10,460.460] base.py -> _exec_single_context line:1903 [INFO]: SELECT segment.id AS segment_id, segment.account_id AS segment_account_id, segment.dataset_id AS segment_dataset_id, segment.document_id AS segment_document_id, segment.node_id AS segment_node_id, segment.position AS segment_position, segment.content AS segment_content, segment.character_count AS segment_character_count, segment.token_count AS segment_token_count, segment.keywords AS segment_keywords, segment.hash AS segment_hash, segment.hit_count AS segment_hit_count, segment.enabled AS segment_enabled, segment.disabled_at AS segment_disabled_at, segment.processing_started_at AS segment_processing_started_at, segment.indexing_completed_at AS segment_indexing_completed_at, segment.completed_at AS segment_completed_at, segment.stopped_at AS segment_stopped_at, segment.error AS segment_error, segment.status AS segment_status, segment.updated_at AS segment_updated_at, segment.created_at AS segment_created_at 
FROM segment 
WHERE segment.id = %(pk_1)s::UUID
[2024-10-13 17:52:10,460.460] base.py -> _exec_single_context line:1908 [INFO]: [generated in 0.00022s] {'pk_1': UUID('3fe79dd6-14ea-474b-9c42-86565daf858f')}
[2024-10-13 17:52:10,520.520] base.py -> _exec_single_context line:1903 [INFO]: SELECT coalesce(sum(segment.character_count), %(coalesce_2)s) AS coalesce_1, coalesce(sum(segment.token_count), %(coalesce_4)s) AS coalesce_3 
FROM segment 
 LIMIT %(param_1)s
[2024-10-13 17:52:10,521.521] base.py -> _exec_single_context line:1908 [INFO]: [cached since 726.5s ago] {'coalesce_2': 0, 'coalesce_4': 0, 'param_1': 1}
[2024-10-13 17:52:10,522.522] base.py -> _exec_single_context line:1903 [INFO]: UPDATE document SET character_count=%(character_count)s, token_count=%(token_count)s WHERE document.id = %(document_id)s::UUID
[2024-10-13 17:52:10,522.522] base.py -> _exec_single_context line:1908 [INFO]: [cached since 726.5s ago] {'character_count': 48319, 'token_count': 25428, 'document_id': UUID('d4b902e3-a013-4780-93fa-6fc300ab6bf8')}
[2024-10-13 17:52:10,523.523] base.py -> _commit_impl line:1146 [INFO]: COMMIT
[2024-10-13 17:52:10,524.524] base.py -> _begin_impl line:1103 [INFO]: BEGIN (implicit)
[2024-10-13 17:52:10,525.525] base.py -> _exec_single_context line:1903 [INFO]: SELECT document.id AS document_id, document.account_id AS document_account_id, document.dataset_id AS document_dataset_id, document.upload_file_id AS document_upload_file_id, document.process_rule_id AS document_process_rule_id, document.batch AS document_batch, document.name AS document_name, document.position AS document_position, document.character_count AS document_character_count, document.token_count AS document_token_count, document.processing_started_at AS document_processing_started_at, document.parsing_completed_at AS document_parsing_completed_at, document.splitting_completed_at AS document_splitting_completed_at, document.indexing_completed_at AS document_indexing_completed_at, document.completed_at AS document_completed_at, document.stopped_at AS document_stopped_at, document.error AS document_error, document.enabled AS document_enabled, document.disabled_at AS document_disabled_at, document.status AS document_status, document.updated_at AS document_updated_at, document.created_at AS document_created_at 
FROM document 
WHERE document.id = %(pk_1)s::UUID
[2024-10-13 17:52:10,525.525] base.py -> _exec_single_context line:1908 [INFO]: [cached since 726.5s ago] {'pk_1': UUID('d4b902e3-a013-4780-93fa-6fc300ab6bf8')}
[2024-10-13 17:52:10,526.526] base.py -> _exec_single_context line:1903 [INFO]: SELECT segment.id AS segment_id, segment.account_id AS segment_account_id, segment.dataset_id AS segment_dataset_id, segment.document_id AS segment_document_id, segment.node_id AS segment_node_id, segment.position AS segment_position, segment.content AS segment_content, segment.character_count AS segment_character_count, segment.token_count AS segment_token_count, segment.keywords AS segment_keywords, segment.hash AS segment_hash, segment.hit_count AS segment_hit_count, segment.enabled AS segment_enabled, segment.disabled_at AS segment_disabled_at, segment.processing_started_at AS segment_processing_started_at, segment.indexing_completed_at AS segment_indexing_completed_at, segment.completed_at AS segment_completed_at, segment.stopped_at AS segment_stopped_at, segment.error AS segment_error, segment.status AS segment_status, segment.updated_at AS segment_updated_at, segment.created_at AS segment_created_at 
FROM segment 
WHERE segment.id = %(pk_1)s::UUID
[2024-10-13 17:52:10,526.526] base.py -> _exec_single_context line:1908 [INFO]: [cached since 0.06657s ago] {'pk_1': UUID('3fe79dd6-14ea-474b-9c42-86565daf858f')}
[2024-10-13 17:52:10,527.527] base.py -> _exec_single_context line:1903 [INFO]: SELECT keyword_table.id AS keyword_table_id, keyword_table.dataset_id AS keyword_table_dataset_id, keyword_table.keyword_table AS keyword_table_keyword_table, keyword_table.updated_at AS keyword_table_updated_at, keyword_table.created_at AS keyword_table_created_at 
FROM keyword_table 
WHERE keyword_table.dataset_id = %(dataset_id_1)s::UUID
[2024-10-13 17:52:10,527.527] base.py -> _exec_single_context line:1908 [INFO]: [cached since 726.5s ago] {'dataset_id_1': UUID('f3f28f75-8e60-4eba-b6df-4d1b390bbd89')}
[2024-10-13 17:52:10,530.530] base.py -> _exec_single_context line:1903 [INFO]: SELECT segment.id AS segment_id, segment.keywords AS segment_keywords 
FROM segment 
WHERE segment.id IN (%(id_1_1)s::UUID)
[2024-10-13 17:52:10,530.530] base.py -> _exec_single_context line:1908 [INFO]: [generated in 0.00026s] {'id_1_1': UUID('3fe79dd6-14ea-474b-9c42-86565daf858f')}
[2024-10-13 17:52:10,531.531] base.py -> _exec_single_context line:1903 [INFO]: UPDATE keyword_table SET keyword_table=%(keyword_table)s WHERE keyword_table.id = %(keyword_table_id)s::UUID
[2024-10-13 17:52:10,531.531] base.py -> _exec_single_context line:1908 [INFO]: [cached since 726.5s ago] {'keyword_table': '{"10": ["c81d9e46-a567-40d7-8bdb-e9abad764ca9"], "23": ["5a7ab6b7-5cf7-424a-adaa-8e181549f487"], "24": ["5a7ab6b7-5cf7-424a-adaa-8e181549f487"], "25" ... (27198 characters truncated) ... 86565daf858f"], "\\u7a0b\\u5e8f\\u5458": ["3fe79dd6-14ea-474b-9c42-86565daf858f"], "\\u68a6\\u5de5\\u5382": ["3fe79dd6-14ea-474b-9c42-86565daf858f"]}', 'keyword_table_id': UUID('2619c055-4d83-40f0-b0ed-6e7c75ebe0a9')}
[2024-10-13 17:52:10,533.533] base.py -> _commit_impl line:1146 [INFO]: COMMIT
[2024-10-13 17:52:10,534.534] _internal.py -> _log line:96 [INFO]: 127.0.0.1 - - [13/Oct/2024 17:52:10] "POST /datasets/f3f28f75-8e60-4eba-b6df-4d1b390bbd89/documents/d4b902e3-a013-4780-93fa-6fc300ab6bf8/segments HTTP/1.1" 200 -
[2024-10-13 17:52:20,214.214] base.py -> _begin_impl line:1103 [INFO]: BEGIN (implicit)
[2024-10-13 17:52:20,214.214] base.py -> _exec_single_context line:1903 [INFO]: SELECT document.id AS document_id, document.account_id AS document_account_id, document.dataset_id AS document_dataset_id, document.upload_file_id AS document_upload_file_id, document.process_rule_id AS document_process_rule_id, document.batch AS document_batch, document.name AS document_name, document.position AS document_position, document.character_count AS document_character_count, document.token_count AS document_token_count, document.processing_started_at AS document_processing_started_at, document.parsing_completed_at AS document_parsing_completed_at, document.splitting_completed_at AS document_splitting_completed_at, document.indexing_completed_at AS document_indexing_completed_at, document.completed_at AS document_completed_at, document.stopped_at AS document_stopped_at, document.error AS document_error, document.enabled AS document_enabled, document.disabled_at AS document_disabled_at, document.status AS document_status, document.updated_at AS document_updated_at, document.created_at AS document_created_at 
FROM document 
WHERE document.id = %(pk_1)s::UUID
[2024-10-13 17:52:20,215.215] base.py -> _exec_single_context line:1908 [INFO]: [cached since 736.2s ago] {'pk_1': UUID('d4b902e3-a013-4780-93fa-6fc300ab6bf8')}
[2024-10-13 17:52:20,216.216] base.py -> _exec_single_context line:1903 [INFO]: SELECT segment.id AS segment_id, segment.account_id AS segment_account_id, segment.dataset_id AS segment_dataset_id, segment.document_id AS segment_document_id, segment.node_id AS segment_node_id, segment.position AS segment_position, segment.content AS segment_content, segment.character_count AS segment_character_count, segment.token_count AS segment_token_count, segment.keywords AS segment_keywords, segment.hash AS segment_hash, segment.hit_count AS segment_hit_count, segment.enabled AS segment_enabled, segment.disabled_at AS segment_disabled_at, segment.processing_started_at AS segment_processing_started_at, segment.indexing_completed_at AS segment_indexing_completed_at, segment.completed_at AS segment_completed_at, segment.stopped_at AS segment_stopped_at, segment.error AS segment_error, segment.status AS segment_status, segment.updated_at AS segment_updated_at, segment.created_at AS segment_created_at 
FROM segment 
WHERE segment.document_id = %(document_id_1)s::UUID AND segment.content ILIKE %(content_1)s ORDER BY segment.position ASC 
 LIMIT %(param_1)s OFFSET %(param_2)s
[2024-10-13 17:52:20,216.216] base.py -> _exec_single_context line:1908 [INFO]: [cached since 731.6s ago] {'document_id_1': UUID('d4b902e3-a013-4780-93fa-6fc300ab6bf8'), 'content_1': '%梦工厂%', 'param_1': 20, 'param_2': 0}
[2024-10-13 17:52:20,218.218] base.py -> _exec_single_context line:1903 [INFO]: SELECT count(*) AS count_1 
FROM (SELECT segment.id AS id, segment.account_id AS account_id, segment.dataset_id AS dataset_id, segment.document_id AS document_id, segment.node_id AS node_id, segment.position AS position, segment.content AS content, segment.character_count AS character_count, segment.token_count AS token_count, segment.keywords AS keywords, segment.hash AS hash, segment.hit_count AS hit_count, segment.enabled AS enabled, segment.disabled_at AS disabled_at, segment.processing_started_at AS processing_started_at, segment.indexing_completed_at AS indexing_completed_at, segment.completed_at AS completed_at, segment.stopped_at AS stopped_at, segment.error AS error, segment.status AS status, segment.updated_at AS updated_at, segment.created_at AS created_at 
FROM segment 
WHERE segment.document_id = %(document_id_1)s::UUID AND segment.content ILIKE %(content_1)s) AS anon_1
[2024-10-13 17:52:20,218.218] base.py -> _exec_single_context line:1908 [INFO]: [cached since 731.6s ago] {'document_id_1': UUID('d4b902e3-a013-4780-93fa-6fc300ab6bf8'), 'content_1': '%梦工厂%'}
[2024-10-13 17:52:20,220.220] base.py -> _rollback_impl line:1129 [INFO]: ROLLBACK
[2024-10-13 17:52:20,221.221] _internal.py -> _log line:96 [INFO]: 127.0.0.1 - - [13/Oct/2024 17:52:20] "GET /datasets/f3f28f75-8e60-4eba-b6df-4d1b390bbd89/documents/d4b902e3-a013-4780-93fa-6fc300ab6bf8/segments?current_page=1&page_size=20&search_word=梦工厂 HTTP/1.1" 200 -
[2024-10-13 17:58:32,915.915] base.py -> _begin_impl line:1103 [INFO]: BEGIN (implicit)
[2024-10-13 17:58:32,916.916] base.py -> _exec_single_context line:1903 [INFO]: SELECT segment.id AS segment_id, segment.account_id AS segment_account_id, segment.dataset_id AS segment_dataset_id, segment.document_id AS segment_document_id, segment.node_id AS segment_node_id, segment.position AS segment_position, segment.content AS segment_content, segment.character_count AS segment_character_count, segment.token_count AS segment_token_count, segment.keywords AS segment_keywords, segment.hash AS segment_hash, segment.hit_count AS segment_hit_count, segment.enabled AS segment_enabled, segment.disabled_at AS segment_disabled_at, segment.processing_started_at AS segment_processing_started_at, segment.indexing_completed_at AS segment_indexing_completed_at, segment.completed_at AS segment_completed_at, segment.stopped_at AS segment_stopped_at, segment.error AS segment_error, segment.status AS segment_status, segment.updated_at AS segment_updated_at, segment.created_at AS segment_created_at 
FROM segment 
WHERE segment.id = %(pk_1)s::UUID
[2024-10-13 17:58:32,916.916] base.py -> _exec_single_context line:1908 [INFO]: [cached since 1109s ago] {'pk_1': UUID('3fe79dd6-14ea-474b-9c42-86565daf858f')}
[2024-10-13 17:58:32,918.918] base.py -> _exec_single_context line:1903 [INFO]: SELECT document.id AS document_id, document.account_id AS document_account_id, document.dataset_id AS document_dataset_id, document.upload_file_id AS document_upload_file_id, document.process_rule_id AS document_process_rule_id, document.batch AS document_batch, document.name AS document_name, document.position AS document_position, document.character_count AS document_character_count, document.token_count AS document_token_count, document.processing_started_at AS document_processing_started_at, document.parsing_completed_at AS document_parsing_completed_at, document.splitting_completed_at AS document_splitting_completed_at, document.indexing_completed_at AS document_indexing_completed_at, document.completed_at AS document_completed_at, document.stopped_at AS document_stopped_at, document.error AS document_error, document.enabled AS document_enabled, document.disabled_at AS document_disabled_at, document.status AS document_status, document.updated_at AS document_updated_at, document.created_at AS document_created_at 
FROM document 
WHERE document.id = %(pk_1)s::UUID
[2024-10-13 17:58:32,918.918] base.py -> _exec_single_context line:1908 [INFO]: [cached since 1109s ago] {'pk_1': UUID('d4b902e3-a013-4780-93fa-6fc300ab6bf8')}
[2024-10-13 17:58:32,919.919] base.py -> _exec_single_context line:1903 [INFO]: DELETE FROM segment WHERE segment.id = %(id)s::UUID
[2024-10-13 17:58:32,919.919] base.py -> _exec_single_context line:1908 [INFO]: [cached since 1109s ago] {'id': UUID('3fe79dd6-14ea-474b-9c42-86565daf858f')}
[2024-10-13 17:58:32,919.919] base.py -> _commit_impl line:1146 [INFO]: COMMIT
[2024-10-13 17:58:32,924.924] base.py -> _begin_impl line:1103 [INFO]: BEGIN (implicit)
[2024-10-13 17:58:32,924.924] base.py -> _exec_single_context line:1903 [INFO]: SELECT keyword_table.id AS keyword_table_id, keyword_table.dataset_id AS keyword_table_dataset_id, keyword_table.keyword_table AS keyword_table_keyword_table, keyword_table.updated_at AS keyword_table_updated_at, keyword_table.created_at AS keyword_table_created_at 
FROM keyword_table 
WHERE keyword_table.dataset_id = %(dataset_id_1)s::UUID
[2024-10-13 17:58:32,924.924] base.py -> _exec_single_context line:1908 [INFO]: [cached since 1109s ago] {'dataset_id_1': UUID('f3f28f75-8e60-4eba-b6df-4d1b390bbd89')}
[2024-10-13 17:58:32,925.925] base.py -> _exec_single_context line:1903 [INFO]: UPDATE keyword_table SET keyword_table=%(keyword_table)s WHERE keyword_table.id = %(keyword_table_id)s::UUID
[2024-10-13 17:58:32,926.926] base.py -> _exec_single_context line:1908 [INFO]: [cached since 1109s ago] {'keyword_table': '{"10": ["c81d9e46-a567-40d7-8bdb-e9abad764ca9"], "23": ["5a7ab6b7-5cf7-424a-adaa-8e181549f487"], "24": ["5a7ab6b7-5cf7-424a-adaa-8e181549f487"], "25" ... (26997 characters truncated) ... , "\\u82f1\\u6587\\u5355\\u8bcd": ["7bec2cf6-db6c-4c37-91fa-b197f836c7f8"], "\\u9519\\u8bef\\u4fe1\\u606f": ["f93e4395-74b2-4420-afd8-dad834ba34b8"]}', 'keyword_table_id': UUID('2619c055-4d83-40f0-b0ed-6e7c75ebe0a9')}
[2024-10-13 17:58:32,927.927] base.py -> _commit_impl line:1146 [INFO]: COMMIT
[2024-10-13 17:58:32,933.933] base.py -> _begin_impl line:1103 [INFO]: BEGIN (implicit)
[2024-10-13 17:58:32,934.934] base.py -> _exec_single_context line:1903 [INFO]: SELECT coalesce(sum(segment.character_count), %(coalesce_2)s) AS coalesce_1, coalesce(sum(segment.token_count), %(coalesce_4)s) AS coalesce_3 
FROM segment 
 LIMIT %(param_1)s
[2024-10-13 17:58:32,934.934] base.py -> _exec_single_context line:1908 [INFO]: [cached since 1109s ago] {'coalesce_2': 0, 'coalesce_4': 0, 'param_1': 1}
[2024-10-13 17:58:32,934.934] base.py -> _exec_single_context line:1903 [INFO]: SELECT document.id AS document_id, document.account_id AS document_account_id, document.dataset_id AS document_dataset_id, document.upload_file_id AS document_upload_file_id, document.process_rule_id AS document_process_rule_id, document.batch AS document_batch, document.name AS document_name, document.position AS document_position, document.character_count AS document_character_count, document.token_count AS document_token_count, document.processing_started_at AS document_processing_started_at, document.parsing_completed_at AS document_parsing_completed_at, document.splitting_completed_at AS document_splitting_completed_at, document.indexing_completed_at AS document_indexing_completed_at, document.completed_at AS document_completed_at, document.stopped_at AS document_stopped_at, document.error AS document_error, document.enabled AS document_enabled, document.disabled_at AS document_disabled_at, document.status AS document_status, document.updated_at AS document_updated_at, document.created_at AS document_created_at 
FROM document 
WHERE document.id = %(pk_1)s::UUID
[2024-10-13 17:58:32,934.934] base.py -> _exec_single_context line:1908 [INFO]: [cached since 1109s ago] {'pk_1': UUID('d4b902e3-a013-4780-93fa-6fc300ab6bf8')}
[2024-10-13 17:58:32,935.935] base.py -> _exec_single_context line:1903 [INFO]: UPDATE document SET character_count=%(character_count)s, token_count=%(token_count)s WHERE document.id = %(document_id)s::UUID
[2024-10-13 17:58:32,935.935] base.py -> _exec_single_context line:1908 [INFO]: [cached since 1109s ago] {'character_count': 48308, 'token_count': 25412, 'document_id': UUID('d4b902e3-a013-4780-93fa-6fc300ab6bf8')}
[2024-10-13 17:58:32,936.936] base.py -> _commit_impl line:1146 [INFO]: COMMIT
[2024-10-13 17:58:32,937.937] _internal.py -> _log line:96 [INFO]: 127.0.0.1 - - [13/Oct/2024 17:58:32] "POST /datasets/f3f28f75-8e60-4eba-b6df-4d1b390bbd89/documents/d4b902e3-a013-4780-93fa-6fc300ab6bf8/segments/3fe79dd6-14ea-474b-9c42-86565daf858f/delete HTTP/1.1" 200 -
[2024-10-13 18:00:44,455.455] _internal.py -> _log line:96 [INFO]:  * Detected change in 'D:\\Code\\llmops\\llmops-api\\internal\\handler\\dataset_handler.py', reloading
[2024-10-13 18:00:44,800.800] _internal.py -> _log line:96 [INFO]:  * Restarting with stat
[2024-10-13 18:00:50,274.274] _internal.py -> _log line:96 [WARNING]:  * Debugger is active!
[2024-10-13 18:00:50,276.276] _internal.py -> _log line:96 [INFO]:  * Debugger PIN: 102-324-223
[2024-10-13 18:01:41,159.159] _internal.py -> _log line:96 [INFO]:  * Detected change in 'D:\\Code\\llmops\\llmops-api\\internal\\handler\\dataset_handler.py', reloading
[2024-10-13 18:01:41,453.453] _internal.py -> _log line:96 [INFO]:  * Restarting with stat
[2024-10-13 18:01:46,071.071] _internal.py -> _log line:96 [WARNING]:  * Debugger is active!
[2024-10-13 18:01:46,074.074] _internal.py -> _log line:96 [INFO]:  * Debugger PIN: 102-324-223
[2024-10-13 18:02:23,098.098] _internal.py -> _log line:96 [INFO]:  * Detected change in 'D:\\Code\\llmops\\llmops-api\\internal\\router\\router.py', reloading
[2024-10-13 18:02:23,396.396] _internal.py -> _log line:96 [INFO]:  * Restarting with stat
[2024-10-13 18:02:27,945.945] _internal.py -> _log line:96 [WARNING]:  * Debugger is active!
[2024-10-13 18:02:27,948.948] _internal.py -> _log line:96 [INFO]:  * Debugger PIN: 102-324-223
[2024-10-13 18:02:29,386.386] _internal.py -> _log line:96 [INFO]:  * Detected change in 'D:\\Code\\llmops\\llmops-api\\internal\\router\\router.py', reloading
[2024-10-13 18:02:29,710.710] _internal.py -> _log line:96 [INFO]:  * Restarting with stat
[2024-10-13 18:02:34,100.100] _internal.py -> _log line:96 [WARNING]:  * Debugger is active!
[2024-10-13 18:02:34,102.102] _internal.py -> _log line:96 [INFO]:  * Debugger PIN: 102-324-223
[2024-10-13 18:03:05,475.475] _internal.py -> _log line:96 [INFO]:  * Detected change in 'D:\\Code\\llmops\\llmops-api\\internal\\service\\dataset_service.py', reloading
[2024-10-13 18:03:05,795.795] _internal.py -> _log line:96 [INFO]:  * Restarting with stat
[2024-10-13 18:03:10,149.149] _internal.py -> _log line:96 [WARNING]:  * Debugger is active!
[2024-10-13 18:03:10,151.151] _internal.py -> _log line:96 [INFO]:  * Debugger PIN: 102-324-223
[2024-10-13 18:04:47,898.898] _internal.py -> _log line:96 [INFO]:  * Detected change in 'D:\\Code\\llmops\\llmops-api\\internal\\service\\dataset_service.py', reloading
[2024-10-13 18:04:48,189.189] _internal.py -> _log line:96 [INFO]:  * Restarting with stat
[2024-10-13 18:04:52,970.970] _internal.py -> _log line:96 [WARNING]:  * Debugger is active!
[2024-10-13 18:04:52,972.972] _internal.py -> _log line:96 [INFO]:  * Debugger PIN: 102-324-223
[2024-10-13 18:05:24,423.423] _internal.py -> _log line:96 [INFO]:  * Detected change in 'D:\\Code\\llmops\\llmops-api\\internal\\service\\dataset_service.py', reloading
[2024-10-13 18:05:24,698.698] _internal.py -> _log line:96 [INFO]:  * Restarting with stat
[2024-10-13 18:05:29,173.173] _internal.py -> _log line:96 [WARNING]:  * Debugger is active!
[2024-10-13 18:05:29,175.175] _internal.py -> _log line:96 [INFO]:  * Debugger PIN: 102-324-223
[2024-10-13 18:05:45,524.524] _internal.py -> _log line:96 [INFO]:  * Detected change in 'D:\\Code\\llmops\\llmops-api\\internal\\service\\dataset_service.py', reloading
[2024-10-13 18:05:45,790.790] _internal.py -> _log line:96 [INFO]:  * Restarting with stat
[2024-10-13 18:05:50,219.219] _internal.py -> _log line:96 [WARNING]:  * Debugger is active!
[2024-10-13 18:05:50,222.222] _internal.py -> _log line:96 [INFO]:  * Debugger PIN: 102-324-223
[2024-10-13 18:07:34,949.949] _internal.py -> _log line:96 [INFO]:  * Detected change in 'D:\\Code\\llmops\\llmops-api\\internal\\service\\dataset_service.py', reloading
[2024-10-13 18:07:35,219.219] _internal.py -> _log line:96 [INFO]:  * Restarting with stat
[2024-10-13 18:07:39,805.805] _internal.py -> _log line:96 [WARNING]:  * Debugger is active!
[2024-10-13 18:07:39,807.807] _internal.py -> _log line:96 [INFO]:  * Debugger PIN: 102-324-223
[2024-10-13 18:07:46,989.989] _internal.py -> _log line:96 [INFO]:  * Detected change in 'D:\\Code\\llmops\\llmops-api\\internal\\service\\dataset_service.py', reloading
[2024-10-13 18:07:47,259.259] _internal.py -> _log line:96 [INFO]:  * Restarting with stat
[2024-10-13 18:08:20,020.020] _internal.py -> _log line:96 [INFO]:  * Restarting with stat
[2024-10-13 18:08:24,405.405] _internal.py -> _log line:96 [WARNING]:  * Debugger is active!
[2024-10-13 18:08:24,408.408] _internal.py -> _log line:96 [INFO]:  * Debugger PIN: 102-324-223
[2024-10-13 18:09:04,981.981] _internal.py -> _log line:96 [INFO]:  * Detected change in 'D:\\Code\\llmops\\llmops-api\\internal\\service\\dataset_service.py', reloading
[2024-10-13 18:09:05,242.242] _internal.py -> _log line:96 [INFO]:  * Restarting with stat
[2024-10-13 18:09:09,669.669] _internal.py -> _log line:96 [WARNING]:  * Debugger is active!
[2024-10-13 18:09:09,672.672] _internal.py -> _log line:96 [INFO]:  * Debugger PIN: 102-324-223
[2024-10-13 18:09:19,187.187] _internal.py -> _log line:96 [INFO]:  * Detected change in 'D:\\Code\\llmops\\llmops-api\\internal\\service\\dataset_service.py', reloading
[2024-10-13 18:09:19,477.477] _internal.py -> _log line:96 [INFO]:  * Restarting with stat
[2024-10-13 18:09:23,982.982] _internal.py -> _log line:96 [WARNING]:  * Debugger is active!
[2024-10-13 18:09:23,984.984] _internal.py -> _log line:96 [INFO]:  * Debugger PIN: 102-324-223
[2024-10-13 18:09:25,235.235] _internal.py -> _log line:96 [INFO]:  * Detected change in 'D:\\Code\\llmops\\llmops-api\\internal\\service\\dataset_service.py', reloading
[2024-10-13 18:09:25,571.571] _internal.py -> _log line:96 [INFO]:  * Restarting with stat
[2024-10-13 18:09:29,631.631] _internal.py -> _log line:96 [WARNING]:  * Debugger is active!
[2024-10-13 18:09:29,633.633] _internal.py -> _log line:96 [INFO]:  * Debugger PIN: 102-324-223
[2024-10-13 18:11:21,343.343] _internal.py -> _log line:96 [INFO]:  * Detected change in 'D:\\Code\\llmops\\llmops-api\\internal\\task\\dataset_task.py', reloading
[2024-10-13 18:11:21,643.643] _internal.py -> _log line:96 [INFO]:  * Restarting with stat
[2024-10-13 18:11:26,091.091] _internal.py -> _log line:96 [WARNING]:  * Debugger is active!
[2024-10-13 18:11:26,094.094] _internal.py -> _log line:96 [INFO]:  * Debugger PIN: 102-324-223
[2024-10-13 18:12:18,379.379] _internal.py -> _log line:96 [INFO]:  * Detected change in 'D:\\Code\\llmops\\llmops-api\\internal\\service\\dataset_service.py', reloading
[2024-10-13 18:12:18,672.672] _internal.py -> _log line:96 [INFO]:  * Restarting with stat
[2024-10-13 18:12:23,182.182] _internal.py -> _log line:96 [WARNING]:  * Debugger is active!
[2024-10-13 18:12:23,185.185] _internal.py -> _log line:96 [INFO]:  * Debugger PIN: 102-324-223
[2024-10-13 18:12:54,454.454] _internal.py -> _log line:96 [INFO]:  * Detected change in 'D:\\Code\\llmops\\llmops-api\\internal\\service\\indexing_service.py', reloading
[2024-10-13 18:12:54,742.742] _internal.py -> _log line:96 [INFO]:  * Restarting with stat
[2024-10-13 18:12:59,089.089] _internal.py -> _log line:96 [WARNING]:  * Debugger is active!
[2024-10-13 18:12:59,092.092] _internal.py -> _log line:96 [INFO]:  * Debugger PIN: 102-324-223
[2024-10-13 18:14:27,044.044] _internal.py -> _log line:96 [INFO]:  * Detected change in 'D:\\Code\\llmops\\llmops-api\\internal\\service\\indexing_service.py', reloading
[2024-10-13 18:14:27,337.337] _internal.py -> _log line:96 [INFO]:  * Restarting with stat
[2024-10-13 18:14:31,868.868] _internal.py -> _log line:96 [WARNING]:  * Debugger is active!
[2024-10-13 18:14:31,871.871] _internal.py -> _log line:96 [INFO]:  * Debugger PIN: 102-324-223
[2024-10-13 18:14:47,228.228] _internal.py -> _log line:96 [INFO]:  * Detected change in 'D:\\Code\\llmops\\llmops-api\\internal\\service\\indexing_service.py', reloading
[2024-10-13 18:14:47,501.501] _internal.py -> _log line:96 [INFO]:  * Restarting with stat
[2024-10-13 18:15:21,355.355] _internal.py -> _log line:96 [INFO]:  * Restarting with stat
[2024-10-13 18:15:25,780.780] _internal.py -> _log line:96 [WARNING]:  * Debugger is active!
[2024-10-13 18:15:25,782.782] _internal.py -> _log line:96 [INFO]:  * Debugger PIN: 102-324-223
[2024-10-13 18:15:30,728.728] _internal.py -> _log line:96 [INFO]:  * Detected change in 'D:\\Code\\llmops\\llmops-api\\internal\\service\\indexing_service.py', reloading
[2024-10-13 18:15:31,012.012] _internal.py -> _log line:96 [INFO]:  * Restarting with stat
[2024-10-13 18:15:35,331.331] _internal.py -> _log line:96 [WARNING]:  * Debugger is active!
[2024-10-13 18:15:35,333.333] _internal.py -> _log line:96 [INFO]:  * Debugger PIN: 102-324-223
[2024-10-13 18:16:29,725.725] _internal.py -> _log line:96 [INFO]:  * Detected change in 'D:\\Code\\llmops\\llmops-api\\internal\\service\\keyword_table_service.py', reloading
[2024-10-13 18:16:30,033.033] _internal.py -> _log line:96 [INFO]:  * Restarting with stat
[2024-10-13 18:16:34,624.624] _internal.py -> _log line:96 [WARNING]:  * Debugger is active!
[2024-10-13 18:16:34,626.626] _internal.py -> _log line:96 [INFO]:  * Debugger PIN: 102-324-223
[2024-10-13 18:16:56,889.889] _internal.py -> _log line:96 [INFO]:  * Detected change in 'D:\\Code\\llmops\\llmops-api\\internal\\service\\indexing_service.py', reloading
[2024-10-13 18:16:57,183.183] _internal.py -> _log line:96 [INFO]:  * Restarting with stat
[2024-10-13 18:17:01,718.718] _internal.py -> _log line:96 [WARNING]:  * Debugger is active!
[2024-10-13 18:17:01,721.721] _internal.py -> _log line:96 [INFO]:  * Debugger PIN: 102-324-223
[2024-10-13 18:17:27,391.391] _internal.py -> _log line:96 [INFO]:  * Detected change in 'D:\\Code\\llmops\\llmops-api\\internal\\service\\indexing_service.py', reloading
[2024-10-13 18:17:27,678.678] _internal.py -> _log line:96 [INFO]:  * Restarting with stat
[2024-10-13 18:17:32,133.133] _internal.py -> _log line:96 [WARNING]:  * Debugger is active!
[2024-10-13 18:17:32,136.136] _internal.py -> _log line:96 [INFO]:  * Debugger PIN: 102-324-223
[2024-10-13 18:18:16,103.103] _internal.py -> _log line:96 [INFO]:  * Detected change in 'D:\\Code\\llmops\\llmops-api\\internal\\service\\indexing_service.py', reloading
[2024-10-13 18:18:16,497.497] _internal.py -> _log line:96 [INFO]:  * Restarting with stat
[2024-10-13 18:18:21,206.206] _internal.py -> _log line:96 [WARNING]:  * Debugger is active!
[2024-10-13 18:18:21,209.209] _internal.py -> _log line:96 [INFO]:  * Debugger PIN: 102-324-223
[2024-10-13 18:20:30,302.302] _internal.py -> _log line:96 [INFO]:  * Detected change in 'D:\\Code\\llmops\\llmops-api\\internal\\task\\dataset_task.py', reloading
[2024-10-13 18:20:30,598.598] _internal.py -> _log line:96 [INFO]:  * Restarting with stat
[2024-10-13 18:20:34,976.976] _internal.py -> _log line:96 [WARNING]:  * Debugger is active!
[2024-10-13 18:20:34,978.978] _internal.py -> _log line:96 [INFO]:  * Debugger PIN: 102-324-223
[2024-10-13 18:22:43,075.075] _internal.py -> _log line:96 [INFO]:  * Detected change in 'D:\\Code\\llmops\\llmops-api\\internal\\service\\dataset_service.py', reloading
[2024-10-13 18:22:43,408.408] _internal.py -> _log line:96 [INFO]:  * Restarting with stat
[2024-10-13 18:22:47,671.671] _internal.py -> _log line:96 [WARNING]:  * Debugger is active!
[2024-10-13 18:22:47,672.672] _internal.py -> _log line:96 [INFO]:  * Debugger PIN: 102-324-223
[2024-10-13 18:23:42,845.845] base.py -> _exec_single_context line:1903 [INFO]: select pg_catalog.version()
[2024-10-13 18:23:42,845.845] base.py -> _exec_single_context line:1908 [INFO]: [raw sql] {}
[2024-10-13 18:23:42,846.846] base.py -> _exec_single_context line:1903 [INFO]: select current_schema()
[2024-10-13 18:23:42,847.847] base.py -> _exec_single_context line:1908 [INFO]: [raw sql] {}
[2024-10-13 18:23:42,847.847] base.py -> _exec_single_context line:1903 [INFO]: show standard_conforming_strings
[2024-10-13 18:23:42,847.847] base.py -> _exec_single_context line:1908 [INFO]: [raw sql] {}
[2024-10-13 18:23:42,848.848] base.py -> _begin_impl line:1103 [INFO]: BEGIN (implicit)
[2024-10-13 18:23:42,850.850] base.py -> _exec_single_context line:1903 [INFO]: SELECT dataset.id AS dataset_id, dataset.account_id AS dataset_account_id, dataset.name AS dataset_name, dataset.icon AS dataset_icon, dataset.description AS dataset_description, dataset.updated_at AS dataset_updated_at, dataset.created_at AS dataset_created_at 
FROM dataset 
WHERE dataset.account_id = %(account_id_1)s::UUID AND dataset.name = %(name_1)s
[2024-10-13 18:23:42,850.850] base.py -> _exec_single_context line:1908 [INFO]: [generated in 0.00023s] {'account_id_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f', 'name_1': '慕课LLMOps项目'}
[2024-10-13 18:23:42,852.852] http.py -> _register_error_handler line:66 [ERROR]: An error occurred: 
Traceback (most recent call last):
  File "D:\Code\llmops\llmops-api\venv\lib\site-packages\flask\app.py", line 870, in full_dispatch_request
    rv = self.dispatch_request()
  File "D:\Code\llmops\llmops-api\venv\lib\site-packages\flask\app.py", line 855, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
  File "D:\Code\llmops\llmops-api\internal\handler\dataset_handler.py", line 72, in create_dataset
    self.dataset_service.create_dataset(req)
  File "D:\Code\llmops\llmops-api\internal\service\dataset_service.py", line 50, in create_dataset
    raise ValidateErrorException(f"该知识库{req.name.data}已存在")
internal.exception.exception.ValidateErrorException
[2024-10-13 18:23:42,854.854] base.py -> _rollback_impl line:1129 [INFO]: ROLLBACK
[2024-10-13 18:23:42,855.855] _internal.py -> _log line:96 [INFO]: 127.0.0.1 - - [13/Oct/2024 18:23:42] "POST /datasets HTTP/1.1" 200 -
[2024-10-13 18:23:49,545.545] base.py -> _begin_impl line:1103 [INFO]: BEGIN (implicit)
[2024-10-13 18:23:49,546.546] base.py -> _exec_single_context line:1903 [INFO]: SELECT dataset.id AS dataset_id, dataset.account_id AS dataset_account_id, dataset.name AS dataset_name, dataset.icon AS dataset_icon, dataset.description AS dataset_description, dataset.updated_at AS dataset_updated_at, dataset.created_at AS dataset_created_at 
FROM dataset 
WHERE dataset.account_id = %(account_id_1)s::UUID AND dataset.name = %(name_1)s
[2024-10-13 18:23:49,546.546] base.py -> _exec_single_context line:1908 [INFO]: [cached since 6.696s ago] {'account_id_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f', 'name_1': '测试删除知识库'}
[2024-10-13 18:23:49,549.549] base.py -> _exec_single_context line:1903 [INFO]: INSERT INTO dataset (account_id, name, icon, description) VALUES (%(account_id)s::UUID, %(name)s, %(icon)s, %(description)s) RETURNING dataset.id, dataset.updated_at, dataset.created_at
[2024-10-13 18:23:49,549.549] base.py -> _exec_single_context line:1908 [INFO]: [generated in 0.00022s] {'account_id': '46db30d1-3199-4e79-a0cd-abf12fa6858f', 'name': '测试删除知识库', 'icon': 'https://imooc-llmops-1304251364.cos.ap-guangzhou.myqcloud.com/2024/09/29/9f5e42d4-e184-4e2c-88f2-0ef843749e3f.jpg', 'description': '当你需要回答管理《测试删除知识库》的时候可以引用该知识库。'}
[2024-10-13 18:23:49,551.551] base.py -> _commit_impl line:1146 [INFO]: COMMIT
[2024-10-13 18:23:49,589.589] _internal.py -> _log line:96 [INFO]: 127.0.0.1 - - [13/Oct/2024 18:23:49] "POST /datasets HTTP/1.1" 200 -
[2024-10-13 18:23:57,426.426] base.py -> _begin_impl line:1103 [INFO]: BEGIN (implicit)
[2024-10-13 18:23:57,427.427] base.py -> _exec_single_context line:1903 [INFO]: SELECT dataset.id AS dataset_id, dataset.account_id AS dataset_account_id, dataset.name AS dataset_name, dataset.icon AS dataset_icon, dataset.description AS dataset_description, dataset.updated_at AS dataset_updated_at, dataset.created_at AS dataset_created_at 
FROM dataset 
WHERE dataset.account_id = %(account_id_1)s::UUID ORDER BY dataset.created_at DESC 
 LIMIT %(param_1)s OFFSET %(param_2)s
[2024-10-13 18:23:57,427.427] base.py -> _exec_single_context line:1908 [INFO]: [generated in 0.00023s] {'account_id_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f', 'param_1': 20, 'param_2': 0}
[2024-10-13 18:23:57,431.431] base.py -> _exec_single_context line:1903 [INFO]: SELECT count(*) AS count_1 
FROM (SELECT dataset.id AS id, dataset.account_id AS account_id, dataset.name AS name, dataset.icon AS icon, dataset.description AS description, dataset.updated_at AS updated_at, dataset.created_at AS created_at 
FROM dataset 
WHERE dataset.account_id = %(account_id_1)s::UUID) AS anon_1
[2024-10-13 18:23:57,431.431] base.py -> _exec_single_context line:1908 [INFO]: [generated in 0.00033s] {'account_id_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2024-10-13 18:23:57,434.434] base.py -> _exec_single_context line:1903 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2024-10-13 18:23:57,434.434] base.py -> _exec_single_context line:1908 [INFO]: [generated in 0.00027s] {'dataset_id_1': UUID('49f92c21-19cc-46a8-ba38-df6121e51caa')}
[2024-10-13 18:23:57,436.436] base.py -> _exec_single_context line:1903 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2024-10-13 18:23:57,436.436] base.py -> _exec_single_context line:1908 [INFO]: [generated in 0.00023s] {'dataset_id_1': UUID('49f92c21-19cc-46a8-ba38-df6121e51caa')}
[2024-10-13 18:23:57,450.450] base.py -> _exec_single_context line:1903 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2024-10-13 18:23:57,450.450] base.py -> _exec_single_context line:1908 [INFO]: [generated in 0.00025s] {'coalesce_2': 0, 'dataset_id_1': UUID('49f92c21-19cc-46a8-ba38-df6121e51caa')}
[2024-10-13 18:23:57,451.451] base.py -> _exec_single_context line:1903 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2024-10-13 18:23:57,451.451] base.py -> _exec_single_context line:1908 [INFO]: [cached since 0.01747s ago] {'dataset_id_1': UUID('f3f28f75-8e60-4eba-b6df-4d1b390bbd89')}
[2024-10-13 18:23:57,452.452] base.py -> _exec_single_context line:1903 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2024-10-13 18:23:57,452.452] base.py -> _exec_single_context line:1908 [INFO]: [cached since 0.0162s ago] {'dataset_id_1': UUID('f3f28f75-8e60-4eba-b6df-4d1b390bbd89')}
[2024-10-13 18:23:57,453.453] base.py -> _exec_single_context line:1903 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2024-10-13 18:23:57,454.454] base.py -> _exec_single_context line:1908 [INFO]: [cached since 0.003522s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('f3f28f75-8e60-4eba-b6df-4d1b390bbd89')}
[2024-10-13 18:23:57,455.455] base.py -> _rollback_impl line:1129 [INFO]: ROLLBACK
[2024-10-13 18:23:57,455.455] _internal.py -> _log line:96 [INFO]: 127.0.0.1 - - [13/Oct/2024 18:23:57] "GET /datasets?search_word=&current_page=1&page_size=20 HTTP/1.1" 200 -
[2024-10-13 18:24:04,686.686] base.py -> _begin_impl line:1103 [INFO]: BEGIN (implicit)
[2024-10-13 18:24:04,687.687] base.py -> _exec_single_context line:1903 [INFO]: SELECT dataset.id AS dataset_id, dataset.account_id AS dataset_account_id, dataset.name AS dataset_name, dataset.icon AS dataset_icon, dataset.description AS dataset_description, dataset.updated_at AS dataset_updated_at, dataset.created_at AS dataset_created_at 
FROM dataset 
WHERE dataset.account_id = %(account_id_1)s::UUID ORDER BY dataset.created_at DESC 
 LIMIT %(param_1)s OFFSET %(param_2)s
[2024-10-13 18:24:04,687.687] base.py -> _exec_single_context line:1908 [INFO]: [cached since 7.26s ago] {'account_id_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f', 'param_1': 20, 'param_2': 0}
[2024-10-13 18:24:04,689.689] base.py -> _exec_single_context line:1903 [INFO]: SELECT count(*) AS count_1 
FROM (SELECT dataset.id AS id, dataset.account_id AS account_id, dataset.name AS name, dataset.icon AS icon, dataset.description AS description, dataset.updated_at AS updated_at, dataset.created_at AS created_at 
FROM dataset 
WHERE dataset.account_id = %(account_id_1)s::UUID) AS anon_1
[2024-10-13 18:24:04,689.689] base.py -> _exec_single_context line:1908 [INFO]: [cached since 7.258s ago] {'account_id_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2024-10-13 18:24:04,690.690] base.py -> _exec_single_context line:1903 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2024-10-13 18:24:04,690.690] base.py -> _exec_single_context line:1908 [INFO]: [cached since 7.256s ago] {'dataset_id_1': UUID('49f92c21-19cc-46a8-ba38-df6121e51caa')}
[2024-10-13 18:24:04,691.691] base.py -> _exec_single_context line:1903 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2024-10-13 18:24:04,691.691] base.py -> _exec_single_context line:1908 [INFO]: [cached since 7.255s ago] {'dataset_id_1': UUID('49f92c21-19cc-46a8-ba38-df6121e51caa')}
[2024-10-13 18:24:04,692.692] base.py -> _exec_single_context line:1903 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2024-10-13 18:24:04,692.692] base.py -> _exec_single_context line:1908 [INFO]: [cached since 7.242s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('49f92c21-19cc-46a8-ba38-df6121e51caa')}
[2024-10-13 18:24:04,693.693] base.py -> _exec_single_context line:1903 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2024-10-13 18:24:04,693.693] base.py -> _exec_single_context line:1908 [INFO]: [cached since 7.259s ago] {'dataset_id_1': UUID('f3f28f75-8e60-4eba-b6df-4d1b390bbd89')}
[2024-10-13 18:24:04,694.694] base.py -> _exec_single_context line:1903 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2024-10-13 18:24:04,694.694] base.py -> _exec_single_context line:1908 [INFO]: [cached since 7.258s ago] {'dataset_id_1': UUID('f3f28f75-8e60-4eba-b6df-4d1b390bbd89')}
[2024-10-13 18:24:04,695.695] base.py -> _exec_single_context line:1903 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2024-10-13 18:24:04,695.695] base.py -> _exec_single_context line:1908 [INFO]: [cached since 7.245s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('f3f28f75-8e60-4eba-b6df-4d1b390bbd89')}
[2024-10-13 18:24:04,696.696] base.py -> _rollback_impl line:1129 [INFO]: ROLLBACK
[2024-10-13 18:24:04,697.697] _internal.py -> _log line:96 [INFO]: 127.0.0.1 - - [13/Oct/2024 18:24:04] "GET /datasets?search_word=&current_page=1&page_size=20 HTTP/1.1" 200 -
[2024-10-13 18:24:16,732.732] base.py -> _begin_impl line:1103 [INFO]: BEGIN (implicit)
[2024-10-13 18:24:16,733.733] base.py -> _exec_single_context line:1903 [INFO]: SELECT dataset.id AS dataset_id, dataset.account_id AS dataset_account_id, dataset.name AS dataset_name, dataset.icon AS dataset_icon, dataset.description AS dataset_description, dataset.updated_at AS dataset_updated_at, dataset.created_at AS dataset_created_at 
FROM dataset 
WHERE dataset.id = %(pk_1)s::UUID
[2024-10-13 18:24:16,734.734] base.py -> _exec_single_context line:1908 [INFO]: [generated in 0.00024s] {'pk_1': UUID('49f92c21-19cc-46a8-ba38-df6121e51caa')}
[2024-10-13 18:24:16,736.736] base.py -> _exec_single_context line:1903 [INFO]: SELECT upload_file.id AS upload_file_id, upload_file.account_id AS upload_file_account_id, upload_file.name AS upload_file_name, upload_file.key AS upload_file_key, upload_file.size AS upload_file_size, upload_file.extension AS upload_file_extension, upload_file.mime_type AS upload_file_mime_type, upload_file.hash AS upload_file_hash, upload_file.updated_at AS upload_file_updated_at, upload_file.created_at AS upload_file_created_at 
FROM upload_file 
WHERE upload_file.account_id = %(account_id_1)s::UUID AND upload_file.id IN (%(id_1_1)s::UUID)
[2024-10-13 18:24:16,737.737] base.py -> _exec_single_context line:1908 [INFO]: [generated in 0.00031s] {'account_id_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f', 'id_1_1': '4cdddf4d-6642-4bb3-87be-63dc77408c7e'}
[2024-10-13 18:24:16,739.739] base.py -> _exec_single_context line:1903 [INFO]: INSERT INTO process_rule (account_id, dataset_id, mode, rule) VALUES (%(account_id)s::UUID, %(dataset_id)s::UUID, %(mode)s, %(rule)s) RETURNING process_rule.id, process_rule.updated_at, process_rule.created_at
[2024-10-13 18:24:16,739.739] base.py -> _exec_single_context line:1908 [INFO]: [generated in 0.00025s] {'account_id': '46db30d1-3199-4e79-a0cd-abf12fa6858f', 'dataset_id': UUID('49f92c21-19cc-46a8-ba38-df6121e51caa'), 'mode': 'automatic', 'rule': '{"pre_process_rules": [{"id": "remove_extra_space", "enabled": true}, {"id": "remove_url_and_email", "enabled": true}], "segment": {"separators": ["\ ... (15 characters truncated) ... "\\u3002|\\uff01|\\uff1f", "\\\\.\\\\s|\\\\!\\\\s|\\\\?\\\\s", "\\uff1b|;\\\\s", "\\uff0c|,\\\\s", " ", ""], "chunk_size": 500, "chunk_overlap": 50}}'}
[2024-10-13 18:24:16,753.753] base.py -> _commit_impl line:1146 [INFO]: COMMIT
[2024-10-13 18:24:16,766.766] base.py -> _begin_impl line:1103 [INFO]: BEGIN (implicit)
[2024-10-13 18:24:16,769.769] base.py -> _exec_single_context line:1903 [INFO]: SELECT document.id AS document_id, document.account_id AS document_account_id, document.dataset_id AS document_dataset_id, document.upload_file_id AS document_upload_file_id, document.process_rule_id AS document_process_rule_id, document.batch AS document_batch, document.name AS document_name, document.position AS document_position, document.character_count AS document_character_count, document.token_count AS document_token_count, document.processing_started_at AS document_processing_started_at, document.parsing_completed_at AS document_parsing_completed_at, document.splitting_completed_at AS document_splitting_completed_at, document.indexing_completed_at AS document_indexing_completed_at, document.completed_at AS document_completed_at, document.stopped_at AS document_stopped_at, document.error AS document_error, document.enabled AS document_enabled, document.disabled_at AS document_disabled_at, document.status AS document_status, document.updated_at AS document_updated_at, document.created_at AS document_created_at 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID ORDER BY document.position DESC 
 LIMIT %(param_1)s
[2024-10-13 18:24:16,769.769] base.py -> _exec_single_context line:1908 [INFO]: [generated in 0.00024s] {'dataset_id_1': UUID('49f92c21-19cc-46a8-ba38-df6121e51caa'), 'param_1': 1}
[2024-10-13 18:24:16,771.771] base.py -> _exec_single_context line:1903 [INFO]: SELECT upload_file.id AS upload_file_id, upload_file.account_id AS upload_file_account_id, upload_file.name AS upload_file_name, upload_file.key AS upload_file_key, upload_file.size AS upload_file_size, upload_file.extension AS upload_file_extension, upload_file.mime_type AS upload_file_mime_type, upload_file.hash AS upload_file_hash, upload_file.updated_at AS upload_file_updated_at, upload_file.created_at AS upload_file_created_at 
FROM upload_file 
WHERE upload_file.id = %(pk_1)s::UUID
[2024-10-13 18:24:16,771.771] base.py -> _exec_single_context line:1908 [INFO]: [generated in 0.00021s] {'pk_1': UUID('4cdddf4d-6642-4bb3-87be-63dc77408c7e')}
[2024-10-13 18:24:16,773.773] base.py -> _exec_single_context line:1903 [INFO]: SELECT process_rule.id AS process_rule_id, process_rule.account_id AS process_rule_account_id, process_rule.dataset_id AS process_rule_dataset_id, process_rule.mode AS process_rule_mode, process_rule.rule AS process_rule_rule, process_rule.updated_at AS process_rule_updated_at, process_rule.created_at AS process_rule_created_at 
FROM process_rule 
WHERE process_rule.id = %(pk_1)s::UUID
[2024-10-13 18:24:16,773.773] base.py -> _exec_single_context line:1908 [INFO]: [generated in 0.00025s] {'pk_1': UUID('e7e4c953-fc47-4050-a38e-5f1907a867d4')}
[2024-10-13 18:24:16,775.775] base.py -> _exec_single_context line:1903 [INFO]: INSERT INTO document (account_id, dataset_id, upload_file_id, process_rule_id, batch, name, position, processing_started_at, parsing_completed_at, splitting_completed_at, indexing_completed_at, completed_at, stopped_at, disabled_at) VALUES (%(account_id)s::UUID, %(dataset_id)s::UUID, %(upload_file_id)s::UUID, %(process_rule_id)s::UUID, %(batch)s, %(name)s, %(position)s, %(processing_started_at)s, %(parsing_completed_at)s, %(splitting_completed_at)s, %(indexing_completed_at)s, %(completed_at)s, %(stopped_at)s, %(disabled_at)s) RETURNING document.id, document.character_count, document.token_count, document.error, document.enabled, document.status, document.updated_at, document.created_at
[2024-10-13 18:24:16,775.775] base.py -> _exec_single_context line:1908 [INFO]: [generated in 0.00026s] {'account_id': '46db30d1-3199-4e79-a0cd-abf12fa6858f', 'dataset_id': UUID('49f92c21-19cc-46a8-ba38-df6121e51caa'), 'upload_file_id': UUID('4cdddf4d-6642-4bb3-87be-63dc77408c7e'), 'process_rule_id': UUID('e7e4c953-fc47-4050-a38e-5f1907a867d4'), 'batch': '20241013182416548480', 'name': '项目API文档-完整.md', 'position': 1, 'processing_started_at': None, 'parsing_completed_at': None, 'splitting_completed_at': None, 'indexing_completed_at': None, 'completed_at': None, 'stopped_at': None, 'disabled_at': None}
[2024-10-13 18:24:16,776.776] base.py -> _commit_impl line:1146 [INFO]: COMMIT
[2024-10-13 18:24:16,795.795] base.py -> _begin_impl line:1103 [INFO]: BEGIN (implicit)
[2024-10-13 18:24:16,796.796] base.py -> _exec_single_context line:1903 [INFO]: SELECT document.id AS document_id, document.account_id AS document_account_id, document.dataset_id AS document_dataset_id, document.upload_file_id AS document_upload_file_id, document.process_rule_id AS document_process_rule_id, document.batch AS document_batch, document.name AS document_name, document.position AS document_position, document.character_count AS document_character_count, document.token_count AS document_token_count, document.processing_started_at AS document_processing_started_at, document.parsing_completed_at AS document_parsing_completed_at, document.splitting_completed_at AS document_splitting_completed_at, document.indexing_completed_at AS document_indexing_completed_at, document.completed_at AS document_completed_at, document.stopped_at AS document_stopped_at, document.error AS document_error, document.enabled AS document_enabled, document.disabled_at AS document_disabled_at, document.status AS document_status, document.updated_at AS document_updated_at, document.created_at AS document_created_at 
FROM document 
WHERE document.id = %(pk_1)s::UUID
[2024-10-13 18:24:16,797.797] base.py -> _exec_single_context line:1908 [INFO]: [generated in 0.00022s] {'pk_1': UUID('627de918-baea-4d6e-b46b-8f1824c9731b')}
[2024-10-13 18:24:16,862.862] base.py -> _rollback_impl line:1129 [INFO]: ROLLBACK
[2024-10-13 18:24:16,862.862] _internal.py -> _log line:96 [INFO]: 127.0.0.1 - - [13/Oct/2024 18:24:16] "POST /datasets/49f92c21-19cc-46a8-ba38-df6121e51caa/documents HTTP/1.1" 200 -
[2024-10-13 18:24:56,820.820] base.py -> _begin_impl line:1103 [INFO]: BEGIN (implicit)
[2024-10-13 18:24:56,820.820] base.py -> _exec_single_context line:1903 [INFO]: SELECT dataset.id AS dataset_id, dataset.account_id AS dataset_account_id, dataset.name AS dataset_name, dataset.icon AS dataset_icon, dataset.description AS dataset_description, dataset.updated_at AS dataset_updated_at, dataset.created_at AS dataset_created_at 
FROM dataset 
WHERE dataset.id = %(pk_1)s::UUID
[2024-10-13 18:24:56,820.820] base.py -> _exec_single_context line:1908 [INFO]: [cached since 40.09s ago] {'pk_1': UUID('49f92c21-19cc-46a8-ba38-df6121e51caa')}
[2024-10-13 18:24:56,822.822] base.py -> _exec_single_context line:1903 [INFO]: SELECT dataset.id AS dataset_id, dataset.account_id AS dataset_account_id, dataset.name AS dataset_name, dataset.icon AS dataset_icon, dataset.description AS dataset_description, dataset.updated_at AS dataset_updated_at, dataset.created_at AS dataset_created_at 
FROM dataset 
WHERE dataset.id IN (%(id_1_1)s::UUID) AND dataset.account_id = %(account_id_1)s::UUID
[2024-10-13 18:24:56,822.822] base.py -> _exec_single_context line:1908 [INFO]: [generated in 0.00026s] {'account_id_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f', 'id_1_1': UUID('49f92c21-19cc-46a8-ba38-df6121e51caa')}
[2024-10-13 18:24:58,857.857] __init__.py -> initialize line:113 [DEBUG]: Building prefix dict from the default dictionary ...
[2024-10-13 18:24:58,858.858] __init__.py -> initialize line:132 [DEBUG]: Loading model from cache C:\Users\Administrator\AppData\Local\Temp\jieba.cache
[2024-10-13 18:24:59,375.375] __init__.py -> initialize line:164 [DEBUG]: Loading model cost 0.518 seconds.
[2024-10-13 18:24:59,375.375] __init__.py -> initialize line:166 [DEBUG]: Prefix dict has been built successfully.
[2024-10-13 18:24:59,376.376] base.py -> _exec_single_context line:1903 [INFO]: SELECT keyword_table.keyword_table AS keyword_table_keyword_table 
FROM keyword_table 
WHERE keyword_table.dataset_id IN (%(dataset_id_1_1)s::UUID)
[2024-10-13 18:24:59,377.377] base.py -> _exec_single_context line:1908 [INFO]: [generated in 0.00028s] {'dataset_id_1_1': UUID('49f92c21-19cc-46a8-ba38-df6121e51caa')}
[2024-10-13 18:24:59,381.381] base.py -> _exec_single_context line:1903 [INFO]: SELECT segment.id AS segment_id, segment.account_id AS segment_account_id, segment.dataset_id AS segment_dataset_id, segment.document_id AS segment_document_id, segment.node_id AS segment_node_id, segment.position AS segment_position, segment.content AS segment_content, segment.character_count AS segment_character_count, segment.token_count AS segment_token_count, segment.keywords AS segment_keywords, segment.hash AS segment_hash, segment.hit_count AS segment_hit_count, segment.enabled AS segment_enabled, segment.disabled_at AS segment_disabled_at, segment.processing_started_at AS segment_processing_started_at, segment.indexing_completed_at AS segment_indexing_completed_at, segment.completed_at AS segment_completed_at, segment.stopped_at AS segment_stopped_at, segment.error AS segment_error, segment.status AS segment_status, segment.updated_at AS segment_updated_at, segment.created_at AS segment_created_at 
FROM segment 
WHERE segment.id IN (NULL) AND (1 != 1)
[2024-10-13 18:24:59,381.381] base.py -> _exec_single_context line:1908 [INFO]: [generated in 0.00034s] {}
[2024-10-13 18:24:59,384.384] base.py -> _exec_single_context line:1903 [INFO]: INSERT INTO dataset_query (dataset_id, query, source, source_app_id, created_by) VALUES (%(dataset_id)s::UUID, %(query)s, %(source)s, %(source_app_id)s::UUID, %(created_by)s::UUID) RETURNING dataset_query.id, dataset_query.updated_at, dataset_query.created_at
[2024-10-13 18:24:59,385.385] base.py -> _exec_single_context line:1908 [INFO]: [generated in 0.00031s] {'dataset_id': UUID('49f92c21-19cc-46a8-ba38-df6121e51caa'), 'query': '想学习flask，有什么建议么？', 'source': <RetrievalSource.HIT_TESTING: 'hit_testing'>, 'source_app_id': None, 'created_by': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2024-10-13 18:24:59,386.386] base.py -> _commit_impl line:1146 [INFO]: COMMIT
[2024-10-13 18:24:59,388.388] base.py -> _begin_impl line:1103 [INFO]: BEGIN (implicit)
[2024-10-13 18:24:59,388.388] base.py -> _exec_single_context line:1903 [INFO]: INSERT INTO dataset_query (dataset_id, query, source, source_app_id, created_by) VALUES (%(dataset_id)s::UUID, %(query)s, %(source)s, %(source_app_id)s::UUID, %(created_by)s::UUID) RETURNING dataset_query.id, dataset_query.updated_at, dataset_query.created_at
[2024-10-13 18:24:59,389.389] base.py -> _exec_single_context line:1908 [INFO]: [cached since 0.004164s ago] {'dataset_id': UUID('49f92c21-19cc-46a8-ba38-df6121e51caa'), 'query': '想学习flask，有什么建议么？', 'source': <RetrievalSource.HIT_TESTING: 'hit_testing'>, 'source_app_id': None, 'created_by': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2024-10-13 18:24:59,389.389] base.py -> _commit_impl line:1146 [INFO]: COMMIT
[2024-10-13 18:24:59,390.390] base.py -> _begin_impl line:1103 [INFO]: BEGIN (implicit)
[2024-10-13 18:24:59,391.391] base.py -> _exec_single_context line:1903 [INFO]: INSERT INTO dataset_query (dataset_id, query, source, source_app_id, created_by) VALUES (%(dataset_id)s::UUID, %(query)s, %(source)s, %(source_app_id)s::UUID, %(created_by)s::UUID) RETURNING dataset_query.id, dataset_query.updated_at, dataset_query.created_at
[2024-10-13 18:24:59,391.391] base.py -> _exec_single_context line:1908 [INFO]: [cached since 0.006516s ago] {'dataset_id': UUID('49f92c21-19cc-46a8-ba38-df6121e51caa'), 'query': '想学习flask，有什么建议么？', 'source': <RetrievalSource.HIT_TESTING: 'hit_testing'>, 'source_app_id': None, 'created_by': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2024-10-13 18:24:59,392.392] base.py -> _commit_impl line:1146 [INFO]: COMMIT
[2024-10-13 18:24:59,392.392] base.py -> _begin_impl line:1103 [INFO]: BEGIN (implicit)
[2024-10-13 18:24:59,393.393] base.py -> _exec_single_context line:1903 [INFO]: INSERT INTO dataset_query (dataset_id, query, source, source_app_id, created_by) VALUES (%(dataset_id)s::UUID, %(query)s, %(source)s, %(source_app_id)s::UUID, %(created_by)s::UUID) RETURNING dataset_query.id, dataset_query.updated_at, dataset_query.created_at
[2024-10-13 18:24:59,393.393] base.py -> _exec_single_context line:1908 [INFO]: [cached since 0.00891s ago] {'dataset_id': UUID('49f92c21-19cc-46a8-ba38-df6121e51caa'), 'query': '想学习flask，有什么建议么？', 'source': <RetrievalSource.HIT_TESTING: 'hit_testing'>, 'source_app_id': None, 'created_by': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2024-10-13 18:24:59,394.394] base.py -> _commit_impl line:1146 [INFO]: COMMIT
[2024-10-13 18:24:59,395.395] base.py -> _begin_impl line:1103 [INFO]: BEGIN (implicit)
[2024-10-13 18:24:59,396.396] base.py -> _exec_single_context line:1903 [INFO]: INSERT INTO dataset_query (dataset_id, query, source, source_app_id, created_by) VALUES (%(dataset_id)s::UUID, %(query)s, %(source)s, %(source_app_id)s::UUID, %(created_by)s::UUID) RETURNING dataset_query.id, dataset_query.updated_at, dataset_query.created_at
[2024-10-13 18:24:59,396.396] base.py -> _exec_single_context line:1908 [INFO]: [cached since 0.01187s ago] {'dataset_id': UUID('49f92c21-19cc-46a8-ba38-df6121e51caa'), 'query': '想学习flask，有什么建议么？', 'source': <RetrievalSource.HIT_TESTING: 'hit_testing'>, 'source_app_id': None, 'created_by': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2024-10-13 18:24:59,397.397] base.py -> _commit_impl line:1146 [INFO]: COMMIT
[2024-10-13 18:24:59,398.398] base.py -> _begin_impl line:1103 [INFO]: BEGIN (implicit)
[2024-10-13 18:24:59,398.398] base.py -> _exec_single_context line:1903 [INFO]: INSERT INTO dataset_query (dataset_id, query, source, source_app_id, created_by) VALUES (%(dataset_id)s::UUID, %(query)s, %(source)s, %(source_app_id)s::UUID, %(created_by)s::UUID) RETURNING dataset_query.id, dataset_query.updated_at, dataset_query.created_at
[2024-10-13 18:24:59,398.398] base.py -> _exec_single_context line:1908 [INFO]: [cached since 0.01427s ago] {'dataset_id': UUID('49f92c21-19cc-46a8-ba38-df6121e51caa'), 'query': '想学习flask，有什么建议么？', 'source': <RetrievalSource.HIT_TESTING: 'hit_testing'>, 'source_app_id': None, 'created_by': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2024-10-13 18:24:59,399.399] base.py -> _commit_impl line:1146 [INFO]: COMMIT
[2024-10-13 18:24:59,400.400] base.py -> _begin_impl line:1103 [INFO]: BEGIN (implicit)
[2024-10-13 18:24:59,401.401] base.py -> _exec_single_context line:1903 [INFO]: INSERT INTO dataset_query (dataset_id, query, source, source_app_id, created_by) VALUES (%(dataset_id)s::UUID, %(query)s, %(source)s, %(source_app_id)s::UUID, %(created_by)s::UUID) RETURNING dataset_query.id, dataset_query.updated_at, dataset_query.created_at
[2024-10-13 18:24:59,401.401] base.py -> _exec_single_context line:1908 [INFO]: [cached since 0.01666s ago] {'dataset_id': UUID('49f92c21-19cc-46a8-ba38-df6121e51caa'), 'query': '想学习flask，有什么建议么？', 'source': <RetrievalSource.HIT_TESTING: 'hit_testing'>, 'source_app_id': None, 'created_by': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2024-10-13 18:24:59,402.402] base.py -> _commit_impl line:1146 [INFO]: COMMIT
[2024-10-13 18:24:59,403.403] base.py -> _begin_impl line:1103 [INFO]: BEGIN (implicit)
[2024-10-13 18:24:59,403.403] base.py -> _exec_single_context line:1903 [INFO]: INSERT INTO dataset_query (dataset_id, query, source, source_app_id, created_by) VALUES (%(dataset_id)s::UUID, %(query)s, %(source)s, %(source_app_id)s::UUID, %(created_by)s::UUID) RETURNING dataset_query.id, dataset_query.updated_at, dataset_query.created_at
[2024-10-13 18:24:59,403.403] base.py -> _exec_single_context line:1908 [INFO]: [cached since 0.01908s ago] {'dataset_id': UUID('49f92c21-19cc-46a8-ba38-df6121e51caa'), 'query': '想学习flask，有什么建议么？', 'source': <RetrievalSource.HIT_TESTING: 'hit_testing'>, 'source_app_id': None, 'created_by': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2024-10-13 18:24:59,404.404] base.py -> _commit_impl line:1146 [INFO]: COMMIT
[2024-10-13 18:24:59,406.406] base.py -> _begin_impl line:1103 [INFO]: BEGIN (implicit)
[2024-10-13 18:24:59,406.406] base.py -> _exec_single_context line:1903 [INFO]: INSERT INTO dataset_query (dataset_id, query, source, source_app_id, created_by) VALUES (%(dataset_id)s::UUID, %(query)s, %(source)s, %(source_app_id)s::UUID, %(created_by)s::UUID) RETURNING dataset_query.id, dataset_query.updated_at, dataset_query.created_at
[2024-10-13 18:24:59,406.406] base.py -> _exec_single_context line:1908 [INFO]: [cached since 0.02172s ago] {'dataset_id': UUID('49f92c21-19cc-46a8-ba38-df6121e51caa'), 'query': '想学习flask，有什么建议么？', 'source': <RetrievalSource.HIT_TESTING: 'hit_testing'>, 'source_app_id': None, 'created_by': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2024-10-13 18:24:59,407.407] base.py -> _commit_impl line:1146 [INFO]: COMMIT
[2024-10-13 18:24:59,408.408] base.py -> _begin_impl line:1103 [INFO]: BEGIN (implicit)
[2024-10-13 18:24:59,408.408] base.py -> _exec_single_context line:1903 [INFO]: INSERT INTO dataset_query (dataset_id, query, source, source_app_id, created_by) VALUES (%(dataset_id)s::UUID, %(query)s, %(source)s, %(source_app_id)s::UUID, %(created_by)s::UUID) RETURNING dataset_query.id, dataset_query.updated_at, dataset_query.created_at
[2024-10-13 18:24:59,409.409] base.py -> _exec_single_context line:1908 [INFO]: [cached since 0.02416s ago] {'dataset_id': UUID('49f92c21-19cc-46a8-ba38-df6121e51caa'), 'query': '想学习flask，有什么建议么？', 'source': <RetrievalSource.HIT_TESTING: 'hit_testing'>, 'source_app_id': None, 'created_by': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2024-10-13 18:24:59,409.409] base.py -> _commit_impl line:1146 [INFO]: COMMIT
[2024-10-13 18:24:59,411.411] base.py -> _begin_impl line:1103 [INFO]: BEGIN (implicit)
[2024-10-13 18:24:59,412.412] base.py -> _exec_single_context line:1903 [INFO]: UPDATE segment SET hit_count=(segment.hit_count + %(hit_count_1)s) WHERE segment.id IN (%(id_1_1)s::UUID, %(id_1_2)s::UUID, %(id_1_3)s::UUID, %(id_1_4)s::UUID, %(id_1_5)s::UUID, %(id_1_6)s::UUID, %(id_1_7)s::UUID, %(id_1_8)s::UUID, %(id_1_9)s::UUID, %(id_1_10)s::UUID)
[2024-10-13 18:24:59,412.412] base.py -> _exec_single_context line:1908 [INFO]: [generated in 0.00032s] {'hit_count_1': 1, 'id_1_1': UUID('17ddf5e3-99c5-438c-9eac-a97c8706f7af'), 'id_1_2': UUID('02e5275a-ec43-4a2c-a1bc-619fdf222cf5'), 'id_1_3': UUID('281edbcb-3a9f-43e8-9eef-e92719460ba1'), 'id_1_4': UUID('11db87cd-4b52-4d50-ab96-b461ab71a11a'), 'id_1_5': UUID('fa11c5ce-f86b-444a-babf-482b493d54a0'), 'id_1_6': UUID('7cfb2a19-36dc-49f8-aa7d-8e5c0413d2dc'), 'id_1_7': UUID('de62a83a-e584-4f80-98c6-fb6ab79f2a47'), 'id_1_8': UUID('93b49450-2212-4f51-a392-6c178e511d6b'), 'id_1_9': UUID('d7385b03-7aac-457f-a857-62a4f5aea84b'), 'id_1_10': UUID('d1007c13-1631-47ef-9b08-5dde5ea02413')}
[2024-10-13 18:24:59,414.414] base.py -> _commit_impl line:1146 [INFO]: COMMIT
[2024-10-13 18:24:59,446.446] base.py -> _begin_impl line:1103 [INFO]: BEGIN (implicit)
[2024-10-13 18:24:59,446.446] base.py -> _exec_single_context line:1903 [INFO]: SELECT segment.id AS segment_id, segment.account_id AS segment_account_id, segment.dataset_id AS segment_dataset_id, segment.document_id AS segment_document_id, segment.node_id AS segment_node_id, segment.position AS segment_position, segment.content AS segment_content, segment.character_count AS segment_character_count, segment.token_count AS segment_token_count, segment.keywords AS segment_keywords, segment.hash AS segment_hash, segment.hit_count AS segment_hit_count, segment.enabled AS segment_enabled, segment.disabled_at AS segment_disabled_at, segment.processing_started_at AS segment_processing_started_at, segment.indexing_completed_at AS segment_indexing_completed_at, segment.completed_at AS segment_completed_at, segment.stopped_at AS segment_stopped_at, segment.error AS segment_error, segment.status AS segment_status, segment.updated_at AS segment_updated_at, segment.created_at AS segment_created_at 
FROM segment 
WHERE segment.id IN (%(id_1_1)s::UUID, %(id_1_2)s::UUID, %(id_1_3)s::UUID, %(id_1_4)s::UUID, %(id_1_5)s::UUID, %(id_1_6)s::UUID, %(id_1_7)s::UUID, %(id_1_8)s::UUID, %(id_1_9)s::UUID, %(id_1_10)s::UUID)
[2024-10-13 18:24:59,446.446] base.py -> _exec_single_context line:1908 [INFO]: [cached since 0.06563s ago] {'id_1_1': '17ddf5e3-99c5-438c-9eac-a97c8706f7af', 'id_1_2': '02e5275a-ec43-4a2c-a1bc-619fdf222cf5', 'id_1_3': '281edbcb-3a9f-43e8-9eef-e92719460ba1', 'id_1_4': '11db87cd-4b52-4d50-ab96-b461ab71a11a', 'id_1_5': 'fa11c5ce-f86b-444a-babf-482b493d54a0', 'id_1_6': '7cfb2a19-36dc-49f8-aa7d-8e5c0413d2dc', 'id_1_7': 'de62a83a-e584-4f80-98c6-fb6ab79f2a47', 'id_1_8': '93b49450-2212-4f51-a392-6c178e511d6b', 'id_1_9': 'd7385b03-7aac-457f-a857-62a4f5aea84b', 'id_1_10': 'd1007c13-1631-47ef-9b08-5dde5ea02413'}
[2024-10-13 18:24:59,450.450] base.py -> _exec_single_context line:1903 [INFO]: SELECT document.id AS document_id, document.account_id AS document_account_id, document.dataset_id AS document_dataset_id, document.upload_file_id AS document_upload_file_id, document.process_rule_id AS document_process_rule_id, document.batch AS document_batch, document.name AS document_name, document.position AS document_position, document.character_count AS document_character_count, document.token_count AS document_token_count, document.processing_started_at AS document_processing_started_at, document.parsing_completed_at AS document_parsing_completed_at, document.splitting_completed_at AS document_splitting_completed_at, document.indexing_completed_at AS document_indexing_completed_at, document.completed_at AS document_completed_at, document.stopped_at AS document_stopped_at, document.error AS document_error, document.enabled AS document_enabled, document.disabled_at AS document_disabled_at, document.status AS document_status, document.updated_at AS document_updated_at, document.created_at AS document_created_at 
FROM document 
WHERE document.id = %(pk_1)s::UUID
[2024-10-13 18:24:59,450.450] base.py -> _exec_single_context line:1908 [INFO]: [generated in 0.00027s] {'pk_1': UUID('627de918-baea-4d6e-b46b-8f1824c9731b')}
[2024-10-13 18:24:59,452.452] base.py -> _exec_single_context line:1903 [INFO]: SELECT upload_file.id AS upload_file_id, upload_file.account_id AS upload_file_account_id, upload_file.name AS upload_file_name, upload_file.key AS upload_file_key, upload_file.size AS upload_file_size, upload_file.extension AS upload_file_extension, upload_file.mime_type AS upload_file_mime_type, upload_file.hash AS upload_file_hash, upload_file.updated_at AS upload_file_updated_at, upload_file.created_at AS upload_file_created_at 
FROM upload_file 
WHERE upload_file.id = %(id_1)s::UUID
[2024-10-13 18:24:59,452.452] base.py -> _exec_single_context line:1908 [INFO]: [generated in 0.00030s] {'id_1': UUID('4cdddf4d-6642-4bb3-87be-63dc77408c7e')}
[2024-10-13 18:24:59,453.453] base.py -> _exec_single_context line:1903 [INFO]: SELECT upload_file.id AS upload_file_id, upload_file.account_id AS upload_file_account_id, upload_file.name AS upload_file_name, upload_file.key AS upload_file_key, upload_file.size AS upload_file_size, upload_file.extension AS upload_file_extension, upload_file.mime_type AS upload_file_mime_type, upload_file.hash AS upload_file_hash, upload_file.updated_at AS upload_file_updated_at, upload_file.created_at AS upload_file_created_at 
FROM upload_file 
WHERE upload_file.id = %(id_1)s::UUID
[2024-10-13 18:24:59,453.453] base.py -> _exec_single_context line:1908 [INFO]: [cached since 0.001436s ago] {'id_1': UUID('4cdddf4d-6642-4bb3-87be-63dc77408c7e')}
[2024-10-13 18:24:59,454.454] base.py -> _exec_single_context line:1903 [INFO]: SELECT upload_file.id AS upload_file_id, upload_file.account_id AS upload_file_account_id, upload_file.name AS upload_file_name, upload_file.key AS upload_file_key, upload_file.size AS upload_file_size, upload_file.extension AS upload_file_extension, upload_file.mime_type AS upload_file_mime_type, upload_file.hash AS upload_file_hash, upload_file.updated_at AS upload_file_updated_at, upload_file.created_at AS upload_file_created_at 
FROM upload_file 
WHERE upload_file.id = %(id_1)s::UUID
[2024-10-13 18:24:59,454.454] base.py -> _exec_single_context line:1908 [INFO]: [cached since 0.002439s ago] {'id_1': UUID('4cdddf4d-6642-4bb3-87be-63dc77408c7e')}
[2024-10-13 18:24:59,456.456] base.py -> _exec_single_context line:1903 [INFO]: SELECT upload_file.id AS upload_file_id, upload_file.account_id AS upload_file_account_id, upload_file.name AS upload_file_name, upload_file.key AS upload_file_key, upload_file.size AS upload_file_size, upload_file.extension AS upload_file_extension, upload_file.mime_type AS upload_file_mime_type, upload_file.hash AS upload_file_hash, upload_file.updated_at AS upload_file_updated_at, upload_file.created_at AS upload_file_created_at 
FROM upload_file 
WHERE upload_file.id = %(id_1)s::UUID
[2024-10-13 18:24:59,456.456] base.py -> _exec_single_context line:1908 [INFO]: [cached since 0.003512s ago] {'id_1': UUID('4cdddf4d-6642-4bb3-87be-63dc77408c7e')}
[2024-10-13 18:24:59,457.457] base.py -> _exec_single_context line:1903 [INFO]: SELECT upload_file.id AS upload_file_id, upload_file.account_id AS upload_file_account_id, upload_file.name AS upload_file_name, upload_file.key AS upload_file_key, upload_file.size AS upload_file_size, upload_file.extension AS upload_file_extension, upload_file.mime_type AS upload_file_mime_type, upload_file.hash AS upload_file_hash, upload_file.updated_at AS upload_file_updated_at, upload_file.created_at AS upload_file_created_at 
FROM upload_file 
WHERE upload_file.id = %(id_1)s::UUID
[2024-10-13 18:24:59,457.457] base.py -> _exec_single_context line:1908 [INFO]: [cached since 0.004491s ago] {'id_1': UUID('4cdddf4d-6642-4bb3-87be-63dc77408c7e')}
[2024-10-13 18:24:59,457.457] base.py -> _exec_single_context line:1903 [INFO]: SELECT upload_file.id AS upload_file_id, upload_file.account_id AS upload_file_account_id, upload_file.name AS upload_file_name, upload_file.key AS upload_file_key, upload_file.size AS upload_file_size, upload_file.extension AS upload_file_extension, upload_file.mime_type AS upload_file_mime_type, upload_file.hash AS upload_file_hash, upload_file.updated_at AS upload_file_updated_at, upload_file.created_at AS upload_file_created_at 
FROM upload_file 
WHERE upload_file.id = %(id_1)s::UUID
[2024-10-13 18:24:59,458.458] base.py -> _exec_single_context line:1908 [INFO]: [cached since 0.005508s ago] {'id_1': UUID('4cdddf4d-6642-4bb3-87be-63dc77408c7e')}
[2024-10-13 18:24:59,458.458] base.py -> _exec_single_context line:1903 [INFO]: SELECT upload_file.id AS upload_file_id, upload_file.account_id AS upload_file_account_id, upload_file.name AS upload_file_name, upload_file.key AS upload_file_key, upload_file.size AS upload_file_size, upload_file.extension AS upload_file_extension, upload_file.mime_type AS upload_file_mime_type, upload_file.hash AS upload_file_hash, upload_file.updated_at AS upload_file_updated_at, upload_file.created_at AS upload_file_created_at 
FROM upload_file 
WHERE upload_file.id = %(id_1)s::UUID
[2024-10-13 18:24:59,459.459] base.py -> _exec_single_context line:1908 [INFO]: [cached since 0.006538s ago] {'id_1': UUID('4cdddf4d-6642-4bb3-87be-63dc77408c7e')}
[2024-10-13 18:24:59,459.459] base.py -> _exec_single_context line:1903 [INFO]: SELECT upload_file.id AS upload_file_id, upload_file.account_id AS upload_file_account_id, upload_file.name AS upload_file_name, upload_file.key AS upload_file_key, upload_file.size AS upload_file_size, upload_file.extension AS upload_file_extension, upload_file.mime_type AS upload_file_mime_type, upload_file.hash AS upload_file_hash, upload_file.updated_at AS upload_file_updated_at, upload_file.created_at AS upload_file_created_at 
FROM upload_file 
WHERE upload_file.id = %(id_1)s::UUID
[2024-10-13 18:24:59,459.459] base.py -> _exec_single_context line:1908 [INFO]: [cached since 0.007484s ago] {'id_1': UUID('4cdddf4d-6642-4bb3-87be-63dc77408c7e')}
[2024-10-13 18:24:59,461.461] base.py -> _exec_single_context line:1903 [INFO]: SELECT upload_file.id AS upload_file_id, upload_file.account_id AS upload_file_account_id, upload_file.name AS upload_file_name, upload_file.key AS upload_file_key, upload_file.size AS upload_file_size, upload_file.extension AS upload_file_extension, upload_file.mime_type AS upload_file_mime_type, upload_file.hash AS upload_file_hash, upload_file.updated_at AS upload_file_updated_at, upload_file.created_at AS upload_file_created_at 
FROM upload_file 
WHERE upload_file.id = %(id_1)s::UUID
[2024-10-13 18:24:59,461.461] base.py -> _exec_single_context line:1908 [INFO]: [cached since 0.008709s ago] {'id_1': UUID('4cdddf4d-6642-4bb3-87be-63dc77408c7e')}
[2024-10-13 18:24:59,462.462] base.py -> _exec_single_context line:1903 [INFO]: SELECT upload_file.id AS upload_file_id, upload_file.account_id AS upload_file_account_id, upload_file.name AS upload_file_name, upload_file.key AS upload_file_key, upload_file.size AS upload_file_size, upload_file.extension AS upload_file_extension, upload_file.mime_type AS upload_file_mime_type, upload_file.hash AS upload_file_hash, upload_file.updated_at AS upload_file_updated_at, upload_file.created_at AS upload_file_created_at 
FROM upload_file 
WHERE upload_file.id = %(id_1)s::UUID
[2024-10-13 18:24:59,462.462] base.py -> _exec_single_context line:1908 [INFO]: [cached since 0.01019s ago] {'id_1': UUID('4cdddf4d-6642-4bb3-87be-63dc77408c7e')}
[2024-10-13 18:24:59,465.465] base.py -> _rollback_impl line:1129 [INFO]: ROLLBACK
[2024-10-13 18:24:59,465.465] _internal.py -> _log line:96 [INFO]: 127.0.0.1 - - [13/Oct/2024 18:24:59] "POST /datasets/49f92c21-19cc-46a8-ba38-df6121e51caa/hit HTTP/1.1" 200 -
[2024-10-13 18:25:24,029.029] base.py -> _begin_impl line:1103 [INFO]: BEGIN (implicit)
[2024-10-13 18:25:24,029.029] base.py -> _exec_single_context line:1903 [INFO]: SELECT dataset.id AS dataset_id, dataset.account_id AS dataset_account_id, dataset.name AS dataset_name, dataset.icon AS dataset_icon, dataset.description AS dataset_description, dataset.updated_at AS dataset_updated_at, dataset.created_at AS dataset_created_at 
FROM dataset 
WHERE dataset.id = %(pk_1)s::UUID
[2024-10-13 18:25:24,029.029] base.py -> _exec_single_context line:1908 [INFO]: [cached since 67.3s ago] {'pk_1': UUID('49f92c21-19cc-46a8-ba38-df6121e51caa')}
[2024-10-13 18:25:24,031.031] base.py -> _exec_single_context line:1903 [INFO]: DELETE FROM dataset WHERE dataset.id = %(id)s::UUID
[2024-10-13 18:25:24,031.031] base.py -> _exec_single_context line:1908 [INFO]: [generated in 0.00021s] {'id': UUID('49f92c21-19cc-46a8-ba38-df6121e51caa')}
[2024-10-13 18:25:24,031.031] base.py -> _commit_impl line:1146 [INFO]: COMMIT
[2024-10-13 18:25:24,033.033] base.py -> _begin_impl line:1103 [INFO]: BEGIN (implicit)
[2024-10-13 18:25:24,033.033] base.py -> _exec_single_context line:1903 [INFO]: DELETE FROM app_dataset_join WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2024-10-13 18:25:24,033.033] base.py -> _exec_single_context line:1908 [INFO]: [generated in 0.00019s] {'dataset_id_1': UUID('49f92c21-19cc-46a8-ba38-df6121e51caa')}
[2024-10-13 18:25:24,034.034] base.py -> _commit_impl line:1146 [INFO]: COMMIT
[2024-10-13 18:25:24,072.072] _internal.py -> _log line:96 [INFO]: 127.0.0.1 - - [13/Oct/2024 18:25:24] "POST /datasets/49f92c21-19cc-46a8-ba38-df6121e51caa/delete HTTP/1.1" 200 -
[2024-10-13 18:26:04,831.831] base.py -> _begin_impl line:1103 [INFO]: BEGIN (implicit)
[2024-10-13 18:26:04,832.832] base.py -> _exec_single_context line:1903 [INFO]: SELECT dataset.id AS dataset_id, dataset.account_id AS dataset_account_id, dataset.name AS dataset_name, dataset.icon AS dataset_icon, dataset.description AS dataset_description, dataset.updated_at AS dataset_updated_at, dataset.created_at AS dataset_created_at 
FROM dataset 
WHERE dataset.id = %(pk_1)s::UUID
[2024-10-13 18:26:04,832.832] base.py -> _exec_single_context line:1908 [INFO]: [cached since 108.1s ago] {'pk_1': UUID('49f92c21-19cc-46a8-ba38-df6121e51caa')}
[2024-10-13 18:26:04,833.833] http.py -> _register_error_handler line:66 [ERROR]: An error occurred: 
Traceback (most recent call last):
  File "D:\Code\llmops\llmops-api\venv\lib\site-packages\flask\app.py", line 870, in full_dispatch_request
    rv = self.dispatch_request()
  File "D:\Code\llmops\llmops-api\venv\lib\site-packages\flask\app.py", line 855, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
  File "D:\Code\llmops\llmops-api\internal\handler\dataset_handler.py", line 54, in hit
    hit_result = self.dataset_service.hit(dataset_id, req)
  File "D:\Code\llmops\llmops-api\internal\service\dataset_service.py", line 154, in hit
    raise NotFoundException("该知识库不存在")
internal.exception.exception.NotFoundException
[2024-10-13 18:26:04,834.834] base.py -> _rollback_impl line:1129 [INFO]: ROLLBACK
[2024-10-13 18:26:04,834.834] _internal.py -> _log line:96 [INFO]: 127.0.0.1 - - [13/Oct/2024 18:26:04] "POST /datasets/49f92c21-19cc-46a8-ba38-df6121e51caa/hit HTTP/1.1" 200 -
[2024-10-13 22:40:57,862.862] _internal.py -> _log line:96 [INFO]:  * Detected change in 'D:\\Code\\llmops\\llmops-api\\internal\\router\\router.py', reloading
[2024-10-13 22:40:58,358.358] _internal.py -> _log line:96 [INFO]:  * Restarting with stat
[2024-10-13 22:41:03,072.072] _internal.py -> _log line:96 [WARNING]:  * Debugger is active!
[2024-10-13 22:41:03,074.074] _internal.py -> _log line:96 [INFO]:  * Debugger PIN: 102-324-223
[2024-10-13 22:41:10,250.250] _internal.py -> _log line:96 [INFO]:  * Detected change in 'D:\\Code\\llmops\\llmops-api\\internal\\handler\\dataset_handler.py', reloading
[2024-10-13 22:41:10,594.594] _internal.py -> _log line:96 [INFO]:  * Restarting with stat
[2024-10-13 22:41:15,212.212] _internal.py -> _log line:96 [WARNING]:  * Debugger is active!
[2024-10-13 22:41:15,214.214] _internal.py -> _log line:96 [INFO]:  * Debugger PIN: 102-324-223
[2024-10-13 22:41:28,097.097] _internal.py -> _log line:96 [INFO]:  * Detected change in 'D:\\Code\\llmops\\llmops-api\\internal\\service\\dataset_service.py', reloading
[2024-10-13 22:41:28,365.365] _internal.py -> _log line:96 [INFO]:  * Restarting with stat
[2024-10-13 22:41:34,222.222] _internal.py -> _log line:96 [WARNING]:  * Debugger is active!
[2024-10-13 22:41:34,226.226] _internal.py -> _log line:96 [INFO]:  * Debugger PIN: 102-324-223
[2024-10-13 22:41:37,992.992] _internal.py -> _log line:96 [INFO]:  * Detected change in 'D:\\Code\\llmops\\llmops-api\\internal\\service\\indexing_service.py', reloading
[2024-10-13 22:41:38,297.297] _internal.py -> _log line:96 [INFO]:  * Restarting with stat
[2024-10-13 22:41:43,154.154] _internal.py -> _log line:96 [WARNING]:  * Debugger is active!
[2024-10-13 22:41:43,157.157] _internal.py -> _log line:96 [INFO]:  * Debugger PIN: 102-324-223
[2024-10-13 22:41:44,542.542] _internal.py -> _log line:96 [INFO]:  * Detected change in 'D:\\Code\\llmops\\llmops-api\\internal\\service\\segment_service.py', reloading
[2024-10-13 22:41:44,820.820] _internal.py -> _log line:96 [INFO]:  * Restarting with stat
[2024-10-13 22:41:49,362.362] _internal.py -> _log line:96 [WARNING]:  * Debugger is active!
[2024-10-13 22:41:49,365.365] _internal.py -> _log line:96 [INFO]:  * Debugger PIN: 102-324-223
[2024-10-13 22:42:06,714.714] _internal.py -> _log line:96 [INFO]: [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5000
[2024-10-13 22:42:06,715.715] _internal.py -> _log line:96 [INFO]: [33mPress CTRL+C to quit[0m
[2024-10-13 22:42:06,716.716] _internal.py -> _log line:96 [INFO]:  * Restarting with stat
[2024-10-13 22:42:11,169.169] _internal.py -> _log line:96 [WARNING]:  * Debugger is active!
[2024-10-13 22:42:11,171.171] _internal.py -> _log line:96 [INFO]:  * Debugger PIN: 102-324-223
[2024-10-13 22:49:31,705.705] _internal.py -> _log line:96 [INFO]:  * Detected change in 'D:\\Code\\llmops\\llmops-api\\internal\\handler\\segment_handler.py', reloading
[2024-10-13 22:49:32,018.018] _internal.py -> _log line:96 [INFO]:  * Restarting with stat
[2024-10-13 22:49:36,739.739] _internal.py -> _log line:96 [WARNING]:  * Debugger is active!
[2024-10-13 22:49:36,742.742] _internal.py -> _log line:96 [INFO]:  * Debugger PIN: 102-324-223
[2024-10-13 22:50:02,517.517] _internal.py -> _log line:96 [INFO]:  * Detected change in 'D:\\Code\\llmops\\llmops-api\\internal\\router\\router.py', reloading
[2024-10-13 22:50:02,800.800] _internal.py -> _log line:96 [INFO]:  * Restarting with stat
[2024-10-13 22:50:07,599.599] _internal.py -> _log line:96 [WARNING]:  * Debugger is active!
[2024-10-13 22:50:07,602.602] _internal.py -> _log line:96 [INFO]:  * Debugger PIN: 102-324-223
[2024-10-13 22:50:54,015.015] _internal.py -> _log line:96 [INFO]:  * Detected change in 'D:\\Code\\llmops\\llmops-api\\internal\\service\\segment_service.py', reloading
[2024-10-13 22:50:54,309.309] _internal.py -> _log line:96 [INFO]:  * Restarting with stat
[2024-10-13 22:50:58,970.970] _internal.py -> _log line:96 [WARNING]:  * Debugger is active!
[2024-10-13 22:50:58,973.973] _internal.py -> _log line:96 [INFO]:  * Debugger PIN: 102-324-223
[2024-10-13 22:53:34,581.581] _internal.py -> _log line:96 [INFO]:  * Detected change in 'D:\\Code\\llmops\\llmops-api\\internal\\service\\segment_service.py', reloading
[2024-10-13 22:53:34,868.868] _internal.py -> _log line:96 [INFO]:  * Restarting with stat
[2024-10-13 22:53:39,470.470] _internal.py -> _log line:96 [WARNING]:  * Debugger is active!
[2024-10-13 22:53:39,473.473] _internal.py -> _log line:96 [INFO]:  * Debugger PIN: 102-324-223
[2024-10-13 22:55:00,632.632] _internal.py -> _log line:96 [INFO]:  * Detected change in 'D:\\Code\\llmops\\llmops-api\\internal\\service\\segment_service.py', reloading
[2024-10-13 22:55:00,942.942] _internal.py -> _log line:96 [INFO]:  * Restarting with stat
[2024-10-13 22:55:05,576.576] _internal.py -> _log line:96 [WARNING]:  * Debugger is active!
[2024-10-13 22:55:05,579.579] _internal.py -> _log line:96 [INFO]:  * Debugger PIN: 102-324-223
[2024-10-13 22:56:21,915.915] _internal.py -> _log line:96 [INFO]:  * Detected change in 'D:\\Code\\llmops\\llmops-api\\internal\\service\\segment_service.py', reloading
[2024-10-13 22:56:22,226.226] _internal.py -> _log line:96 [INFO]:  * Restarting with stat
[2024-10-13 22:56:26,809.809] _internal.py -> _log line:96 [WARNING]:  * Debugger is active!
[2024-10-13 22:56:26,812.812] _internal.py -> _log line:96 [INFO]:  * Debugger PIN: 102-324-223
[2024-10-13 22:56:54,728.728] _internal.py -> _log line:96 [INFO]:  * Detected change in 'D:\\Code\\llmops\\llmops-api\\internal\\service\\segment_service.py', reloading
[2024-10-13 22:56:55,054.054] _internal.py -> _log line:96 [INFO]:  * Restarting with stat
[2024-10-13 22:56:59,620.620] _internal.py -> _log line:96 [WARNING]:  * Debugger is active!
[2024-10-13 22:56:59,622.622] _internal.py -> _log line:96 [INFO]:  * Debugger PIN: 102-324-223
[2024-10-13 22:57:29,075.075] base.py -> _exec_single_context line:1903 [INFO]: select pg_catalog.version()
[2024-10-13 22:57:29,076.076] base.py -> _exec_single_context line:1908 [INFO]: [raw sql] {}
[2024-10-13 22:57:29,077.077] base.py -> _exec_single_context line:1903 [INFO]: select current_schema()
[2024-10-13 22:57:29,077.077] base.py -> _exec_single_context line:1908 [INFO]: [raw sql] {}
[2024-10-13 22:57:29,077.077] base.py -> _exec_single_context line:1903 [INFO]: show standard_conforming_strings
[2024-10-13 22:57:29,078.078] base.py -> _exec_single_context line:1908 [INFO]: [raw sql] {}
[2024-10-13 22:57:29,078.078] base.py -> _begin_impl line:1103 [INFO]: BEGIN (implicit)
[2024-10-13 22:57:29,081.081] base.py -> _exec_single_context line:1903 [INFO]: SELECT document.id AS document_id, document.account_id AS document_account_id, document.dataset_id AS document_dataset_id, document.upload_file_id AS document_upload_file_id, document.process_rule_id AS document_process_rule_id, document.batch AS document_batch, document.name AS document_name, document.position AS document_position, document.character_count AS document_character_count, document.token_count AS document_token_count, document.processing_started_at AS document_processing_started_at, document.parsing_completed_at AS document_parsing_completed_at, document.splitting_completed_at AS document_splitting_completed_at, document.indexing_completed_at AS document_indexing_completed_at, document.completed_at AS document_completed_at, document.stopped_at AS document_stopped_at, document.error AS document_error, document.enabled AS document_enabled, document.disabled_at AS document_disabled_at, document.status AS document_status, document.updated_at AS document_updated_at, document.created_at AS document_created_at 
FROM document 
WHERE document.id = %(pk_1)s::UUID
[2024-10-13 22:57:29,082.082] base.py -> _exec_single_context line:1908 [INFO]: [generated in 0.00032s] {'pk_1': UUID('d4b902e3-a013-4780-93fa-6fc300ab6bf8')}
[2024-10-13 22:57:29,085.085] base.py -> _exec_single_context line:1903 [INFO]: SELECT coalesce(max(segment.position), %(coalesce_2)s) AS coalesce_1 
FROM segment 
WHERE segment.document_id = %(document_id_1)s::UUID
[2024-10-13 22:57:29,085.085] base.py -> _exec_single_context line:1908 [INFO]: [generated in 0.00021s] {'coalesce_2': 0, 'document_id_1': UUID('d4b902e3-a013-4780-93fa-6fc300ab6bf8')}
[2024-10-13 22:57:29,089.089] base.py -> _exec_single_context line:1903 [INFO]: INSERT INTO segment (account_id, dataset_id, document_id, node_id, position, content, character_count, token_count, keywords, hash, enabled, disabled_at, processing_started_at, indexing_completed_at, completed_at, stopped_at, status) VALUES (%(account_id)s::UUID, %(dataset_id)s::UUID, %(document_id)s::UUID, %(node_id)s::UUID, %(position)s, %(content)s, %(character_count)s, %(token_count)s, %(keywords)s, %(hash)s, %(enabled)s, %(disabled_at)s, %(processing_started_at)s, %(indexing_completed_at)s, %(completed_at)s, %(stopped_at)s, %(status)s) RETURNING segment.id, segment.hit_count, segment.error, segment.updated_at, segment.created_at
[2024-10-13 22:57:29,089.089] base.py -> _exec_single_context line:1908 [INFO]: [generated in 0.00028s] {'account_id': '46db30d1-3199-4e79-a0cd-abf12fa6858f', 'dataset_id': UUID('f3f28f75-8e60-4eba-b6df-4d1b390bbd89'), 'document_id': UUID('d4b902e3-a013-4780-93fa-6fc300ab6bf8'), 'node_id': UUID('d3d124b6-d542-48f3-a4fe-f292476d817f'), 'position': 62, 'content': '这是一条用于删除的测试数据，来源于慕课网', 'character_count': 20, 'token_count': 19, 'keywords': '["\\u6155\\u8bfe\\u7f51", "\\u7a0b\\u5e8f\\u5458", "\\u68a6\\u5de5\\u5382"]', 'hash': '89a7b8c68bb1af1d993de70c2b3d17ba1fb1fa85b67b3688e077bee593a1beb2', 'enabled': True, 'disabled_at': None, 'processing_started_at': datetime.datetime(2024, 10, 13, 22, 57, 29, 86704), 'indexing_completed_at': datetime.datetime(2024, 10, 13, 22, 57, 29, 86704), 'completed_at': datetime.datetime(2024, 10, 13, 22, 57, 29, 86704), 'stopped_at': None, 'status': <SegmentStatus.COMPLETED: 'completed'>}
[2024-10-13 22:57:29,090.090] base.py -> _commit_impl line:1146 [INFO]: COMMIT
[2024-10-13 22:57:29,102.102] base.py -> _begin_impl line:1103 [INFO]: BEGIN (implicit)
[2024-10-13 22:57:29,104.104] base.py -> _exec_single_context line:1903 [INFO]: SELECT document.id AS document_id, document.account_id AS document_account_id, document.dataset_id AS document_dataset_id, document.upload_file_id AS document_upload_file_id, document.process_rule_id AS document_process_rule_id, document.batch AS document_batch, document.name AS document_name, document.position AS document_position, document.character_count AS document_character_count, document.token_count AS document_token_count, document.processing_started_at AS document_processing_started_at, document.parsing_completed_at AS document_parsing_completed_at, document.splitting_completed_at AS document_splitting_completed_at, document.indexing_completed_at AS document_indexing_completed_at, document.completed_at AS document_completed_at, document.stopped_at AS document_stopped_at, document.error AS document_error, document.enabled AS document_enabled, document.disabled_at AS document_disabled_at, document.status AS document_status, document.updated_at AS document_updated_at, document.created_at AS document_created_at 
FROM document 
WHERE document.id = %(pk_1)s::UUID
[2024-10-13 22:57:29,104.104] base.py -> _exec_single_context line:1908 [INFO]: [generated in 0.00027s] {'pk_1': UUID('d4b902e3-a013-4780-93fa-6fc300ab6bf8')}
[2024-10-13 22:57:29,107.107] base.py -> _exec_single_context line:1903 [INFO]: SELECT segment.id AS segment_id, segment.account_id AS segment_account_id, segment.dataset_id AS segment_dataset_id, segment.document_id AS segment_document_id, segment.node_id AS segment_node_id, segment.position AS segment_position, segment.content AS segment_content, segment.character_count AS segment_character_count, segment.token_count AS segment_token_count, segment.keywords AS segment_keywords, segment.hash AS segment_hash, segment.hit_count AS segment_hit_count, segment.enabled AS segment_enabled, segment.disabled_at AS segment_disabled_at, segment.processing_started_at AS segment_processing_started_at, segment.indexing_completed_at AS segment_indexing_completed_at, segment.completed_at AS segment_completed_at, segment.stopped_at AS segment_stopped_at, segment.error AS segment_error, segment.status AS segment_status, segment.updated_at AS segment_updated_at, segment.created_at AS segment_created_at 
FROM segment 
WHERE segment.id = %(pk_1)s::UUID
[2024-10-13 22:57:29,107.107] base.py -> _exec_single_context line:1908 [INFO]: [generated in 0.00026s] {'pk_1': UUID('1b257fb5-d324-403e-a058-6892ad0de2b9')}
[2024-10-13 22:57:30,755.755] base.py -> _exec_single_context line:1903 [INFO]: SELECT coalesce(sum(segment.character_count), %(coalesce_2)s) AS coalesce_1, coalesce(sum(segment.token_count), %(coalesce_4)s) AS coalesce_3 
FROM segment 
 LIMIT %(param_1)s
[2024-10-13 22:57:30,755.755] base.py -> _exec_single_context line:1908 [INFO]: [generated in 0.00028s] {'coalesce_2': 0, 'coalesce_4': 0, 'param_1': 1}
[2024-10-13 22:57:30,758.758] base.py -> _exec_single_context line:1903 [INFO]: UPDATE document SET character_count=%(character_count)s, token_count=%(token_count)s WHERE document.id = %(document_id)s::UUID
[2024-10-13 22:57:30,758.758] base.py -> _exec_single_context line:1908 [INFO]: [generated in 0.00023s] {'character_count': 96636, 'token_count': 50843, 'document_id': UUID('d4b902e3-a013-4780-93fa-6fc300ab6bf8')}
[2024-10-13 22:57:30,759.759] base.py -> _commit_impl line:1146 [INFO]: COMMIT
[2024-10-13 22:57:30,762.762] base.py -> _begin_impl line:1103 [INFO]: BEGIN (implicit)
[2024-10-13 22:57:30,762.762] base.py -> _exec_single_context line:1903 [INFO]: SELECT document.id AS document_id, document.account_id AS document_account_id, document.dataset_id AS document_dataset_id, document.upload_file_id AS document_upload_file_id, document.process_rule_id AS document_process_rule_id, document.batch AS document_batch, document.name AS document_name, document.position AS document_position, document.character_count AS document_character_count, document.token_count AS document_token_count, document.processing_started_at AS document_processing_started_at, document.parsing_completed_at AS document_parsing_completed_at, document.splitting_completed_at AS document_splitting_completed_at, document.indexing_completed_at AS document_indexing_completed_at, document.completed_at AS document_completed_at, document.stopped_at AS document_stopped_at, document.error AS document_error, document.enabled AS document_enabled, document.disabled_at AS document_disabled_at, document.status AS document_status, document.updated_at AS document_updated_at, document.created_at AS document_created_at 
FROM document 
WHERE document.id = %(pk_1)s::UUID
[2024-10-13 22:57:30,762.762] base.py -> _exec_single_context line:1908 [INFO]: [cached since 1.659s ago] {'pk_1': UUID('d4b902e3-a013-4780-93fa-6fc300ab6bf8')}
[2024-10-13 22:57:30,763.763] base.py -> _exec_single_context line:1903 [INFO]: SELECT segment.id AS segment_id, segment.account_id AS segment_account_id, segment.dataset_id AS segment_dataset_id, segment.document_id AS segment_document_id, segment.node_id AS segment_node_id, segment.position AS segment_position, segment.content AS segment_content, segment.character_count AS segment_character_count, segment.token_count AS segment_token_count, segment.keywords AS segment_keywords, segment.hash AS segment_hash, segment.hit_count AS segment_hit_count, segment.enabled AS segment_enabled, segment.disabled_at AS segment_disabled_at, segment.processing_started_at AS segment_processing_started_at, segment.indexing_completed_at AS segment_indexing_completed_at, segment.completed_at AS segment_completed_at, segment.stopped_at AS segment_stopped_at, segment.error AS segment_error, segment.status AS segment_status, segment.updated_at AS segment_updated_at, segment.created_at AS segment_created_at 
FROM segment 
WHERE segment.id = %(pk_1)s::UUID
[2024-10-13 22:57:30,763.763] base.py -> _exec_single_context line:1908 [INFO]: [cached since 1.657s ago] {'pk_1': UUID('1b257fb5-d324-403e-a058-6892ad0de2b9')}
[2024-10-13 22:57:30,766.766] base.py -> _exec_single_context line:1903 [INFO]: SELECT keyword_table.id AS keyword_table_id, keyword_table.dataset_id AS keyword_table_dataset_id, keyword_table.keyword_table AS keyword_table_keyword_table, keyword_table.updated_at AS keyword_table_updated_at, keyword_table.created_at AS keyword_table_created_at 
FROM keyword_table 
WHERE keyword_table.dataset_id = %(dataset_id_1)s::UUID
[2024-10-13 22:57:30,766.766] base.py -> _exec_single_context line:1908 [INFO]: [generated in 0.00021s] {'dataset_id_1': UUID('f3f28f75-8e60-4eba-b6df-4d1b390bbd89')}
[2024-10-13 22:57:30,768.768] base.py -> _exec_single_context line:1903 [INFO]: SELECT segment.id AS segment_id, segment.keywords AS segment_keywords 
FROM segment 
WHERE segment.id IN (%(id_1_1)s::UUID)
[2024-10-13 22:57:30,768.768] base.py -> _exec_single_context line:1908 [INFO]: [generated in 0.00023s] {'id_1_1': UUID('1b257fb5-d324-403e-a058-6892ad0de2b9')}
[2024-10-13 22:57:30,769.769] base.py -> _exec_single_context line:1903 [INFO]: UPDATE keyword_table SET keyword_table=%(keyword_table)s WHERE keyword_table.id = %(keyword_table_id)s::UUID
[2024-10-13 22:57:30,770.770] base.py -> _exec_single_context line:1908 [INFO]: [generated in 0.00040s] {'keyword_table': '{"10": ["c81d9e46-a567-40d7-8bdb-e9abad764ca9"], "23": ["5a7ab6b7-5cf7-424a-adaa-8e181549f487"], "24": ["5a7ab6b7-5cf7-424a-adaa-8e181549f487"], "25" ... (27198 characters truncated) ... 6892ad0de2b9"], "\\u7a0b\\u5e8f\\u5458": ["1b257fb5-d324-403e-a058-6892ad0de2b9"], "\\u68a6\\u5de5\\u5382": ["1b257fb5-d324-403e-a058-6892ad0de2b9"]}', 'keyword_table_id': UUID('2619c055-4d83-40f0-b0ed-6e7c75ebe0a9')}
[2024-10-13 22:57:30,772.772] base.py -> _commit_impl line:1146 [INFO]: COMMIT
[2024-10-13 22:57:30,774.774] _internal.py -> _log line:96 [INFO]: 127.0.0.1 - - [13/Oct/2024 22:57:30] "POST /datasets/f3f28f75-8e60-4eba-b6df-4d1b390bbd89/documents/d4b902e3-a013-4780-93fa-6fc300ab6bf8/segments HTTP/1.1" 200 -
[2024-10-13 22:57:54,449.449] base.py -> _begin_impl line:1103 [INFO]: BEGIN (implicit)
[2024-10-13 22:57:54,449.449] base.py -> _exec_single_context line:1903 [INFO]: SELECT document.id AS document_id, document.account_id AS document_account_id, document.dataset_id AS document_dataset_id, document.upload_file_id AS document_upload_file_id, document.process_rule_id AS document_process_rule_id, document.batch AS document_batch, document.name AS document_name, document.position AS document_position, document.character_count AS document_character_count, document.token_count AS document_token_count, document.processing_started_at AS document_processing_started_at, document.parsing_completed_at AS document_parsing_completed_at, document.splitting_completed_at AS document_splitting_completed_at, document.indexing_completed_at AS document_indexing_completed_at, document.completed_at AS document_completed_at, document.stopped_at AS document_stopped_at, document.error AS document_error, document.enabled AS document_enabled, document.disabled_at AS document_disabled_at, document.status AS document_status, document.updated_at AS document_updated_at, document.created_at AS document_created_at 
FROM document 
WHERE document.id = %(pk_1)s::UUID
[2024-10-13 22:57:54,449.449] base.py -> _exec_single_context line:1908 [INFO]: [cached since 25.37s ago] {'pk_1': UUID('d4b902e3-a013-4780-93fa-6fc300ab6bf8')}
[2024-10-13 22:57:54,452.452] base.py -> _exec_single_context line:1903 [INFO]: SELECT segment.id AS segment_id, segment.account_id AS segment_account_id, segment.dataset_id AS segment_dataset_id, segment.document_id AS segment_document_id, segment.node_id AS segment_node_id, segment.position AS segment_position, segment.content AS segment_content, segment.character_count AS segment_character_count, segment.token_count AS segment_token_count, segment.keywords AS segment_keywords, segment.hash AS segment_hash, segment.hit_count AS segment_hit_count, segment.enabled AS segment_enabled, segment.disabled_at AS segment_disabled_at, segment.processing_started_at AS segment_processing_started_at, segment.indexing_completed_at AS segment_indexing_completed_at, segment.completed_at AS segment_completed_at, segment.stopped_at AS segment_stopped_at, segment.error AS segment_error, segment.status AS segment_status, segment.updated_at AS segment_updated_at, segment.created_at AS segment_created_at 
FROM segment 
WHERE segment.document_id = %(document_id_1)s::UUID AND segment.content ILIKE %(content_1)s ORDER BY segment.position ASC 
 LIMIT %(param_1)s OFFSET %(param_2)s
[2024-10-13 22:57:54,453.453] base.py -> _exec_single_context line:1908 [INFO]: [generated in 0.00025s] {'document_id_1': UUID('d4b902e3-a013-4780-93fa-6fc300ab6bf8'), 'content_1': '%梦工厂%', 'param_1': 20, 'param_2': 0}
[2024-10-13 22:57:54,457.457] base.py -> _exec_single_context line:1903 [INFO]: SELECT count(*) AS count_1 
FROM (SELECT segment.id AS id, segment.account_id AS account_id, segment.dataset_id AS dataset_id, segment.document_id AS document_id, segment.node_id AS node_id, segment.position AS position, segment.content AS content, segment.character_count AS character_count, segment.token_count AS token_count, segment.keywords AS keywords, segment.hash AS hash, segment.hit_count AS hit_count, segment.enabled AS enabled, segment.disabled_at AS disabled_at, segment.processing_started_at AS processing_started_at, segment.indexing_completed_at AS indexing_completed_at, segment.completed_at AS completed_at, segment.stopped_at AS stopped_at, segment.error AS error, segment.status AS status, segment.updated_at AS updated_at, segment.created_at AS created_at 
FROM segment 
WHERE segment.document_id = %(document_id_1)s::UUID AND segment.content ILIKE %(content_1)s) AS anon_1
[2024-10-13 22:57:54,457.457] base.py -> _exec_single_context line:1908 [INFO]: [generated in 0.00025s] {'document_id_1': UUID('d4b902e3-a013-4780-93fa-6fc300ab6bf8'), 'content_1': '%梦工厂%'}
[2024-10-13 22:57:54,460.460] base.py -> _rollback_impl line:1129 [INFO]: ROLLBACK
[2024-10-13 22:57:54,461.461] _internal.py -> _log line:96 [INFO]: 127.0.0.1 - - [13/Oct/2024 22:57:54] "GET /datasets/f3f28f75-8e60-4eba-b6df-4d1b390bbd89/documents/d4b902e3-a013-4780-93fa-6fc300ab6bf8/segments?current_page=1&page_size=20&search_word=梦工厂 HTTP/1.1" 200 -
[2024-10-13 22:57:59,945.945] base.py -> _begin_impl line:1103 [INFO]: BEGIN (implicit)
[2024-10-13 22:57:59,945.945] base.py -> _exec_single_context line:1903 [INFO]: SELECT document.id AS document_id, document.account_id AS document_account_id, document.dataset_id AS document_dataset_id, document.upload_file_id AS document_upload_file_id, document.process_rule_id AS document_process_rule_id, document.batch AS document_batch, document.name AS document_name, document.position AS document_position, document.character_count AS document_character_count, document.token_count AS document_token_count, document.processing_started_at AS document_processing_started_at, document.parsing_completed_at AS document_parsing_completed_at, document.splitting_completed_at AS document_splitting_completed_at, document.indexing_completed_at AS document_indexing_completed_at, document.completed_at AS document_completed_at, document.stopped_at AS document_stopped_at, document.error AS document_error, document.enabled AS document_enabled, document.disabled_at AS document_disabled_at, document.status AS document_status, document.updated_at AS document_updated_at, document.created_at AS document_created_at 
FROM document 
WHERE document.id = %(pk_1)s::UUID
[2024-10-13 22:57:59,945.945] base.py -> _exec_single_context line:1908 [INFO]: [cached since 30.86s ago] {'pk_1': UUID('d4b902e3-a013-4780-93fa-6fc300ab6bf8')}
[2024-10-13 22:57:59,948.948] base.py -> _exec_single_context line:1903 [INFO]: SELECT segment.id AS segment_id, segment.account_id AS segment_account_id, segment.dataset_id AS segment_dataset_id, segment.document_id AS segment_document_id, segment.node_id AS segment_node_id, segment.position AS segment_position, segment.content AS segment_content, segment.character_count AS segment_character_count, segment.token_count AS segment_token_count, segment.keywords AS segment_keywords, segment.hash AS segment_hash, segment.hit_count AS segment_hit_count, segment.enabled AS segment_enabled, segment.disabled_at AS segment_disabled_at, segment.processing_started_at AS segment_processing_started_at, segment.indexing_completed_at AS segment_indexing_completed_at, segment.completed_at AS segment_completed_at, segment.stopped_at AS segment_stopped_at, segment.error AS segment_error, segment.status AS segment_status, segment.updated_at AS segment_updated_at, segment.created_at AS segment_created_at 
FROM segment 
WHERE segment.document_id = %(document_id_1)s::UUID AND segment.content ILIKE %(content_1)s ORDER BY segment.position ASC 
 LIMIT %(param_1)s OFFSET %(param_2)s
[2024-10-13 22:57:59,948.948] base.py -> _exec_single_context line:1908 [INFO]: [cached since 5.495s ago] {'document_id_1': UUID('d4b902e3-a013-4780-93fa-6fc300ab6bf8'), 'content_1': '%慕课网%', 'param_1': 20, 'param_2': 0}
[2024-10-13 22:57:59,950.950] base.py -> _exec_single_context line:1903 [INFO]: SELECT count(*) AS count_1 
FROM (SELECT segment.id AS id, segment.account_id AS account_id, segment.dataset_id AS dataset_id, segment.document_id AS document_id, segment.node_id AS node_id, segment.position AS position, segment.content AS content, segment.character_count AS character_count, segment.token_count AS token_count, segment.keywords AS keywords, segment.hash AS hash, segment.hit_count AS hit_count, segment.enabled AS enabled, segment.disabled_at AS disabled_at, segment.processing_started_at AS processing_started_at, segment.indexing_completed_at AS indexing_completed_at, segment.completed_at AS completed_at, segment.stopped_at AS stopped_at, segment.error AS error, segment.status AS status, segment.updated_at AS updated_at, segment.created_at AS created_at 
FROM segment 
WHERE segment.document_id = %(document_id_1)s::UUID AND segment.content ILIKE %(content_1)s) AS anon_1
[2024-10-13 22:57:59,951.951] base.py -> _exec_single_context line:1908 [INFO]: [cached since 5.493s ago] {'document_id_1': UUID('d4b902e3-a013-4780-93fa-6fc300ab6bf8'), 'content_1': '%慕课网%'}
[2024-10-13 22:57:59,953.953] base.py -> _rollback_impl line:1129 [INFO]: ROLLBACK
[2024-10-13 22:57:59,955.955] _internal.py -> _log line:96 [INFO]: 127.0.0.1 - - [13/Oct/2024 22:57:59] "GET /datasets/f3f28f75-8e60-4eba-b6df-4d1b390bbd89/documents/d4b902e3-a013-4780-93fa-6fc300ab6bf8/segments?current_page=1&page_size=20&search_word=慕课网 HTTP/1.1" 200 -
[2024-10-13 22:58:39,006.006] base.py -> _begin_impl line:1103 [INFO]: BEGIN (implicit)
[2024-10-13 22:58:39,007.007] base.py -> _exec_single_context line:1903 [INFO]: SELECT segment.id AS segment_id, segment.account_id AS segment_account_id, segment.dataset_id AS segment_dataset_id, segment.document_id AS segment_document_id, segment.node_id AS segment_node_id, segment.position AS segment_position, segment.content AS segment_content, segment.character_count AS segment_character_count, segment.token_count AS segment_token_count, segment.keywords AS segment_keywords, segment.hash AS segment_hash, segment.hit_count AS segment_hit_count, segment.enabled AS segment_enabled, segment.disabled_at AS segment_disabled_at, segment.processing_started_at AS segment_processing_started_at, segment.indexing_completed_at AS segment_indexing_completed_at, segment.completed_at AS segment_completed_at, segment.stopped_at AS segment_stopped_at, segment.error AS segment_error, segment.status AS segment_status, segment.updated_at AS segment_updated_at, segment.created_at AS segment_created_at 
FROM segment 
WHERE segment.id = %(pk_1)s::UUID
[2024-10-13 22:58:39,007.007] base.py -> _exec_single_context line:1908 [INFO]: [generated in 0.00023s] {'pk_1': UUID('1b257fb5-d324-403e-a058-6892ad0de2b9')}
[2024-10-13 22:58:39,009.009] base.py -> _exec_single_context line:1903 [INFO]: SELECT document.id AS document_id, document.account_id AS document_account_id, document.dataset_id AS document_dataset_id, document.upload_file_id AS document_upload_file_id, document.process_rule_id AS document_process_rule_id, document.batch AS document_batch, document.name AS document_name, document.position AS document_position, document.character_count AS document_character_count, document.token_count AS document_token_count, document.processing_started_at AS document_processing_started_at, document.parsing_completed_at AS document_parsing_completed_at, document.splitting_completed_at AS document_splitting_completed_at, document.indexing_completed_at AS document_indexing_completed_at, document.completed_at AS document_completed_at, document.stopped_at AS document_stopped_at, document.error AS document_error, document.enabled AS document_enabled, document.disabled_at AS document_disabled_at, document.status AS document_status, document.updated_at AS document_updated_at, document.created_at AS document_created_at 
FROM document 
WHERE document.id = %(pk_1)s::UUID
[2024-10-13 22:58:39,010.010] base.py -> _exec_single_context line:1908 [INFO]: [cached since 69.93s ago] {'pk_1': UUID('d4b902e3-a013-4780-93fa-6fc300ab6bf8')}
[2024-10-13 22:58:39,012.012] base.py -> _exec_single_context line:1903 [INFO]: DELETE FROM segment WHERE segment.id = %(id)s::UUID
[2024-10-13 22:58:39,012.012] base.py -> _exec_single_context line:1908 [INFO]: [generated in 0.00020s] {'id': UUID('1b257fb5-d324-403e-a058-6892ad0de2b9')}
[2024-10-13 22:58:39,012.012] base.py -> _commit_impl line:1146 [INFO]: COMMIT
[2024-10-13 22:58:39,015.015] base.py -> _begin_impl line:1103 [INFO]: BEGIN (implicit)
[2024-10-13 22:58:39,015.015] base.py -> _exec_single_context line:1903 [INFO]: SELECT keyword_table.id AS keyword_table_id, keyword_table.dataset_id AS keyword_table_dataset_id, keyword_table.keyword_table AS keyword_table_keyword_table, keyword_table.updated_at AS keyword_table_updated_at, keyword_table.created_at AS keyword_table_created_at 
FROM keyword_table 
WHERE keyword_table.dataset_id = %(dataset_id_1)s::UUID
[2024-10-13 22:58:39,015.015] base.py -> _exec_single_context line:1908 [INFO]: [cached since 68.25s ago] {'dataset_id_1': UUID('f3f28f75-8e60-4eba-b6df-4d1b390bbd89')}
[2024-10-13 22:58:39,018.018] base.py -> _exec_single_context line:1903 [INFO]: UPDATE keyword_table SET keyword_table=%(keyword_table)s WHERE keyword_table.id = %(keyword_table_id)s::UUID
[2024-10-13 22:58:39,018.018] base.py -> _exec_single_context line:1908 [INFO]: [cached since 68.25s ago] {'keyword_table': '{"10": ["c81d9e46-a567-40d7-8bdb-e9abad764ca9"], "23": ["5a7ab6b7-5cf7-424a-adaa-8e181549f487"], "24": ["5a7ab6b7-5cf7-424a-adaa-8e181549f487"], "25" ... (26997 characters truncated) ... , "\\u82f1\\u6587\\u5355\\u8bcd": ["7bec2cf6-db6c-4c37-91fa-b197f836c7f8"], "\\u9519\\u8bef\\u4fe1\\u606f": ["f93e4395-74b2-4420-afd8-dad834ba34b8"]}', 'keyword_table_id': UUID('2619c055-4d83-40f0-b0ed-6e7c75ebe0a9')}
[2024-10-13 22:58:39,020.020] base.py -> _commit_impl line:1146 [INFO]: COMMIT
[2024-10-13 22:58:39,049.049] base.py -> _begin_impl line:1103 [INFO]: BEGIN (implicit)
[2024-10-13 22:58:39,049.049] base.py -> _exec_single_context line:1903 [INFO]: SELECT coalesce(sum(segment.character_count), %(coalesce_2)s) AS coalesce_1, coalesce(sum(segment.token_count), %(coalesce_4)s) AS coalesce_3 
FROM segment 
 LIMIT %(param_1)s
[2024-10-13 22:58:39,049.049] base.py -> _exec_single_context line:1908 [INFO]: [cached since 68.29s ago] {'coalesce_2': 0, 'coalesce_4': 0, 'param_1': 1}
[2024-10-13 22:58:39,051.051] base.py -> _exec_single_context line:1903 [INFO]: SELECT document.id AS document_id, document.account_id AS document_account_id, document.dataset_id AS document_dataset_id, document.upload_file_id AS document_upload_file_id, document.process_rule_id AS document_process_rule_id, document.batch AS document_batch, document.name AS document_name, document.position AS document_position, document.character_count AS document_character_count, document.token_count AS document_token_count, document.processing_started_at AS document_processing_started_at, document.parsing_completed_at AS document_parsing_completed_at, document.splitting_completed_at AS document_splitting_completed_at, document.indexing_completed_at AS document_indexing_completed_at, document.completed_at AS document_completed_at, document.stopped_at AS document_stopped_at, document.error AS document_error, document.enabled AS document_enabled, document.disabled_at AS document_disabled_at, document.status AS document_status, document.updated_at AS document_updated_at, document.created_at AS document_created_at 
FROM document 
WHERE document.id = %(pk_1)s::UUID
[2024-10-13 22:58:39,051.051] base.py -> _exec_single_context line:1908 [INFO]: [cached since 69.95s ago] {'pk_1': UUID('d4b902e3-a013-4780-93fa-6fc300ab6bf8')}
[2024-10-13 22:58:39,052.052] base.py -> _exec_single_context line:1903 [INFO]: UPDATE document SET character_count=%(character_count)s, token_count=%(token_count)s WHERE document.id = %(document_id)s::UUID
[2024-10-13 22:58:39,052.052] base.py -> _exec_single_context line:1908 [INFO]: [cached since 68.29s ago] {'character_count': 96616, 'token_count': 50824, 'document_id': UUID('d4b902e3-a013-4780-93fa-6fc300ab6bf8')}
[2024-10-13 22:58:39,053.053] base.py -> _commit_impl line:1146 [INFO]: COMMIT
[2024-10-13 22:58:39,055.055] _internal.py -> _log line:96 [INFO]: 127.0.0.1 - - [13/Oct/2024 22:58:39] "POST /datasets/f3f28f75-8e60-4eba-b6df-4d1b390bbd89/documents/d4b902e3-a013-4780-93fa-6fc300ab6bf8/segments/1b257fb5-d324-403e-a058-6892ad0de2b9/delete HTTP/1.1" 200 -
[2024-10-13 22:58:50,724.724] base.py -> _begin_impl line:1103 [INFO]: BEGIN (implicit)
[2024-10-13 22:58:50,724.724] base.py -> _exec_single_context line:1903 [INFO]: SELECT document.id AS document_id, document.account_id AS document_account_id, document.dataset_id AS document_dataset_id, document.upload_file_id AS document_upload_file_id, document.process_rule_id AS document_process_rule_id, document.batch AS document_batch, document.name AS document_name, document.position AS document_position, document.character_count AS document_character_count, document.token_count AS document_token_count, document.processing_started_at AS document_processing_started_at, document.parsing_completed_at AS document_parsing_completed_at, document.splitting_completed_at AS document_splitting_completed_at, document.indexing_completed_at AS document_indexing_completed_at, document.completed_at AS document_completed_at, document.stopped_at AS document_stopped_at, document.error AS document_error, document.enabled AS document_enabled, document.disabled_at AS document_disabled_at, document.status AS document_status, document.updated_at AS document_updated_at, document.created_at AS document_created_at 
FROM document 
WHERE document.id = %(pk_1)s::UUID
[2024-10-13 22:58:50,724.724] base.py -> _exec_single_context line:1908 [INFO]: [cached since 81.64s ago] {'pk_1': UUID('d4b902e3-a013-4780-93fa-6fc300ab6bf8')}
[2024-10-13 22:58:50,726.726] base.py -> _exec_single_context line:1903 [INFO]: SELECT segment.id AS segment_id, segment.account_id AS segment_account_id, segment.dataset_id AS segment_dataset_id, segment.document_id AS segment_document_id, segment.node_id AS segment_node_id, segment.position AS segment_position, segment.content AS segment_content, segment.character_count AS segment_character_count, segment.token_count AS segment_token_count, segment.keywords AS segment_keywords, segment.hash AS segment_hash, segment.hit_count AS segment_hit_count, segment.enabled AS segment_enabled, segment.disabled_at AS segment_disabled_at, segment.processing_started_at AS segment_processing_started_at, segment.indexing_completed_at AS segment_indexing_completed_at, segment.completed_at AS segment_completed_at, segment.stopped_at AS segment_stopped_at, segment.error AS segment_error, segment.status AS segment_status, segment.updated_at AS segment_updated_at, segment.created_at AS segment_created_at 
FROM segment 
WHERE segment.document_id = %(document_id_1)s::UUID AND segment.content ILIKE %(content_1)s ORDER BY segment.position ASC 
 LIMIT %(param_1)s OFFSET %(param_2)s
[2024-10-13 22:58:50,726.726] base.py -> _exec_single_context line:1908 [INFO]: [cached since 56.27s ago] {'document_id_1': UUID('d4b902e3-a013-4780-93fa-6fc300ab6bf8'), 'content_1': '%慕课网%', 'param_1': 20, 'param_2': 0}
[2024-10-13 22:58:50,728.728] base.py -> _exec_single_context line:1903 [INFO]: SELECT count(*) AS count_1 
FROM (SELECT segment.id AS id, segment.account_id AS account_id, segment.dataset_id AS dataset_id, segment.document_id AS document_id, segment.node_id AS node_id, segment.position AS position, segment.content AS content, segment.character_count AS character_count, segment.token_count AS token_count, segment.keywords AS keywords, segment.hash AS hash, segment.hit_count AS hit_count, segment.enabled AS enabled, segment.disabled_at AS disabled_at, segment.processing_started_at AS processing_started_at, segment.indexing_completed_at AS indexing_completed_at, segment.completed_at AS completed_at, segment.stopped_at AS stopped_at, segment.error AS error, segment.status AS status, segment.updated_at AS updated_at, segment.created_at AS created_at 
FROM segment 
WHERE segment.document_id = %(document_id_1)s::UUID AND segment.content ILIKE %(content_1)s) AS anon_1
[2024-10-13 22:58:50,728.728] base.py -> _exec_single_context line:1908 [INFO]: [cached since 56.27s ago] {'document_id_1': UUID('d4b902e3-a013-4780-93fa-6fc300ab6bf8'), 'content_1': '%慕课网%'}
[2024-10-13 22:58:50,731.731] base.py -> _rollback_impl line:1129 [INFO]: ROLLBACK
[2024-10-13 22:58:50,731.731] _internal.py -> _log line:96 [INFO]: 127.0.0.1 - - [13/Oct/2024 22:58:50] "GET /datasets/f3f28f75-8e60-4eba-b6df-4d1b390bbd89/documents/d4b902e3-a013-4780-93fa-6fc300ab6bf8/segments?current_page=1&page_size=20&search_word=慕课网 HTTP/1.1" 200 -
[2024-10-13 22:58:57,282.282] base.py -> _begin_impl line:1103 [INFO]: BEGIN (implicit)
[2024-10-13 22:58:57,282.282] base.py -> _exec_single_context line:1903 [INFO]: SELECT segment.id AS segment_id, segment.account_id AS segment_account_id, segment.dataset_id AS segment_dataset_id, segment.document_id AS segment_document_id, segment.node_id AS segment_node_id, segment.position AS segment_position, segment.content AS segment_content, segment.character_count AS segment_character_count, segment.token_count AS segment_token_count, segment.keywords AS segment_keywords, segment.hash AS segment_hash, segment.hit_count AS segment_hit_count, segment.enabled AS segment_enabled, segment.disabled_at AS segment_disabled_at, segment.processing_started_at AS segment_processing_started_at, segment.indexing_completed_at AS segment_indexing_completed_at, segment.completed_at AS segment_completed_at, segment.stopped_at AS segment_stopped_at, segment.error AS segment_error, segment.status AS segment_status, segment.updated_at AS segment_updated_at, segment.created_at AS segment_created_at 
FROM segment 
WHERE segment.id = %(pk_1)s::UUID
[2024-10-13 22:58:57,283.283] base.py -> _exec_single_context line:1908 [INFO]: [cached since 18.28s ago] {'pk_1': UUID('1b257fb5-d324-403e-a058-6892ad0de2b9')}
[2024-10-13 22:58:57,284.284] base.py -> _rollback_impl line:1129 [INFO]: ROLLBACK
[2024-10-13 22:58:57,284.284] _internal.py -> _log line:96 [INFO]: 127.0.0.1 - - [13/Oct/2024 22:58:57] "POST /datasets/f3f28f75-8e60-4eba-b6df-4d1b390bbd89/documents/d4b902e3-a013-4780-93fa-6fc300ab6bf8/segments/1b257fb5-d324-403e-a058-6892ad0de2b9/delete HTTP/1.1" 200 -
[2024-10-13 22:59:03,348.348] base.py -> _begin_impl line:1103 [INFO]: BEGIN (implicit)
[2024-10-13 22:59:03,349.349] base.py -> _exec_single_context line:1903 [INFO]: SELECT segment.id AS segment_id, segment.account_id AS segment_account_id, segment.dataset_id AS segment_dataset_id, segment.document_id AS segment_document_id, segment.node_id AS segment_node_id, segment.position AS segment_position, segment.content AS segment_content, segment.character_count AS segment_character_count, segment.token_count AS segment_token_count, segment.keywords AS segment_keywords, segment.hash AS segment_hash, segment.hit_count AS segment_hit_count, segment.enabled AS segment_enabled, segment.disabled_at AS segment_disabled_at, segment.processing_started_at AS segment_processing_started_at, segment.indexing_completed_at AS segment_indexing_completed_at, segment.completed_at AS segment_completed_at, segment.stopped_at AS segment_stopped_at, segment.error AS segment_error, segment.status AS segment_status, segment.updated_at AS segment_updated_at, segment.created_at AS segment_created_at 
FROM segment 
WHERE segment.id = %(pk_1)s::UUID
[2024-10-13 22:59:03,349.349] base.py -> _exec_single_context line:1908 [INFO]: [cached since 24.34s ago] {'pk_1': UUID('1b257fb5-d324-403e-a058-6892ad0de2b9')}
[2024-10-13 22:59:03,350.350] base.py -> _rollback_impl line:1129 [INFO]: ROLLBACK
[2024-10-13 22:59:03,351.351] _internal.py -> _log line:96 [INFO]: 127.0.0.1 - - [13/Oct/2024 22:59:03] "POST /datasets/f3f28f75-8e60-4eba-b6df-4d1b390bbd89/documents/d4b902e3-a013-4780-93fa-6fc300ab6bf8/segments/1b257fb5-d324-403e-a058-6892ad0de2b9/delete HTTP/1.1" 200 -
[2024-10-13 22:59:54,206.206] _internal.py -> _log line:96 [INFO]:  * Detected change in 'D:\\Code\\llmops\\llmops-api\\internal\\service\\segment_service.py', reloading
[2024-10-13 22:59:54,557.557] _internal.py -> _log line:96 [INFO]:  * Restarting with stat
[2024-10-13 22:59:59,433.433] _internal.py -> _log line:96 [WARNING]:  * Debugger is active!
[2024-10-13 22:59:59,435.435] _internal.py -> _log line:96 [INFO]:  * Debugger PIN: 102-324-223
[2024-10-13 23:00:06,528.528] base.py -> _exec_single_context line:1903 [INFO]: select pg_catalog.version()
[2024-10-13 23:00:06,528.528] base.py -> _exec_single_context line:1908 [INFO]: [raw sql] {}
[2024-10-13 23:00:06,529.529] base.py -> _exec_single_context line:1903 [INFO]: select current_schema()
[2024-10-13 23:00:06,529.529] base.py -> _exec_single_context line:1908 [INFO]: [raw sql] {}
[2024-10-13 23:00:06,530.530] base.py -> _exec_single_context line:1903 [INFO]: show standard_conforming_strings
[2024-10-13 23:00:06,530.530] base.py -> _exec_single_context line:1908 [INFO]: [raw sql] {}
[2024-10-13 23:00:06,531.531] base.py -> _begin_impl line:1103 [INFO]: BEGIN (implicit)
[2024-10-13 23:00:06,532.532] base.py -> _exec_single_context line:1903 [INFO]: SELECT segment.id AS segment_id, segment.account_id AS segment_account_id, segment.dataset_id AS segment_dataset_id, segment.document_id AS segment_document_id, segment.node_id AS segment_node_id, segment.position AS segment_position, segment.content AS segment_content, segment.character_count AS segment_character_count, segment.token_count AS segment_token_count, segment.keywords AS segment_keywords, segment.hash AS segment_hash, segment.hit_count AS segment_hit_count, segment.enabled AS segment_enabled, segment.disabled_at AS segment_disabled_at, segment.processing_started_at AS segment_processing_started_at, segment.indexing_completed_at AS segment_indexing_completed_at, segment.completed_at AS segment_completed_at, segment.stopped_at AS segment_stopped_at, segment.error AS segment_error, segment.status AS segment_status, segment.updated_at AS segment_updated_at, segment.created_at AS segment_created_at 
FROM segment 
WHERE segment.id = %(pk_1)s::UUID
[2024-10-13 23:00:06,533.533] base.py -> _exec_single_context line:1908 [INFO]: [generated in 0.00014s] {'pk_1': UUID('1b257fb5-d324-403e-a058-6892ad0de2b9')}
[2024-10-13 23:00:06,534.534] base.py -> _rollback_impl line:1129 [INFO]: ROLLBACK
[2024-10-13 23:00:06,534.534] _internal.py -> _log line:96 [INFO]: 127.0.0.1 - - [13/Oct/2024 23:00:06] "POST /datasets/f3f28f75-8e60-4eba-b6df-4d1b390bbd89/documents/d4b902e3-a013-4780-93fa-6fc300ab6bf8/segments/1b257fb5-d324-403e-a058-6892ad0de2b9/delete HTTP/1.1" 200 -
[2024-10-13 23:00:37,722.722] _internal.py -> _log line:96 [INFO]:  * Detected change in 'D:\\Code\\llmops\\llmops-api\\internal\\service\\segment_service.py', reloading
[2024-10-13 23:00:38,055.055] _internal.py -> _log line:96 [INFO]:  * Restarting with stat
[2024-10-13 23:00:42,833.833] _internal.py -> _log line:96 [WARNING]:  * Debugger is active!
[2024-10-13 23:00:42,836.836] _internal.py -> _log line:96 [INFO]:  * Debugger PIN: 102-324-223
[2024-10-13 23:01:03,767.767] _internal.py -> _log line:96 [INFO]:  * Detected change in 'D:\\Code\\llmops\\llmops-api\\internal\\service\\segment_service.py', reloading
[2024-10-13 23:01:04,114.114] _internal.py -> _log line:96 [INFO]:  * Restarting with stat
[2024-10-13 23:01:09,034.034] _internal.py -> _log line:96 [WARNING]:  * Debugger is active!
[2024-10-13 23:01:09,036.036] _internal.py -> _log line:96 [INFO]:  * Debugger PIN: 102-324-223
[2024-10-13 23:01:11,563.563] _internal.py -> _log line:96 [INFO]:  * Detected change in 'D:\\Code\\llmops\\llmops-api\\internal\\service\\segment_service.py', reloading
[2024-10-13 23:01:11,887.887] _internal.py -> _log line:96 [INFO]:  * Restarting with stat
[2024-10-13 23:01:16,882.882] _internal.py -> _log line:96 [WARNING]:  * Debugger is active!
[2024-10-13 23:01:16,885.885] _internal.py -> _log line:96 [INFO]:  * Debugger PIN: 102-324-223
[2024-10-13 23:02:51,636.636] base.py -> _exec_single_context line:1903 [INFO]: select pg_catalog.version()
[2024-10-13 23:02:51,637.637] base.py -> _exec_single_context line:1908 [INFO]: [raw sql] {}
[2024-10-13 23:02:51,638.638] base.py -> _exec_single_context line:1903 [INFO]: select current_schema()
[2024-10-13 23:02:51,638.638] base.py -> _exec_single_context line:1908 [INFO]: [raw sql] {}
[2024-10-13 23:02:51,638.638] base.py -> _exec_single_context line:1903 [INFO]: show standard_conforming_strings
[2024-10-13 23:02:51,638.638] base.py -> _exec_single_context line:1908 [INFO]: [raw sql] {}
[2024-10-13 23:02:51,638.638] base.py -> _begin_impl line:1103 [INFO]: BEGIN (implicit)
[2024-10-13 23:02:51,641.641] base.py -> _exec_single_context line:1903 [INFO]: SELECT document.id AS document_id, document.account_id AS document_account_id, document.dataset_id AS document_dataset_id, document.upload_file_id AS document_upload_file_id, document.process_rule_id AS document_process_rule_id, document.batch AS document_batch, document.name AS document_name, document.position AS document_position, document.character_count AS document_character_count, document.token_count AS document_token_count, document.processing_started_at AS document_processing_started_at, document.parsing_completed_at AS document_parsing_completed_at, document.splitting_completed_at AS document_splitting_completed_at, document.indexing_completed_at AS document_indexing_completed_at, document.completed_at AS document_completed_at, document.stopped_at AS document_stopped_at, document.error AS document_error, document.enabled AS document_enabled, document.disabled_at AS document_disabled_at, document.status AS document_status, document.updated_at AS document_updated_at, document.created_at AS document_created_at 
FROM document 
WHERE document.id = %(pk_1)s::UUID
[2024-10-13 23:02:51,641.641] base.py -> _exec_single_context line:1908 [INFO]: [generated in 0.00025s] {'pk_1': UUID('d4b902e3-a013-4780-93fa-6fc300ab6bf8')}
[2024-10-13 23:02:51,645.645] base.py -> _exec_single_context line:1903 [INFO]: SELECT coalesce(max(segment.position), %(coalesce_2)s) AS coalesce_1 
FROM segment 
WHERE segment.document_id = %(document_id_1)s::UUID
[2024-10-13 23:02:51,645.645] base.py -> _exec_single_context line:1908 [INFO]: [generated in 0.00027s] {'coalesce_2': 0, 'document_id_1': UUID('d4b902e3-a013-4780-93fa-6fc300ab6bf8')}
[2024-10-13 23:02:51,649.649] base.py -> _exec_single_context line:1903 [INFO]: INSERT INTO segment (account_id, dataset_id, document_id, node_id, position, content, character_count, token_count, keywords, hash, enabled, disabled_at, processing_started_at, indexing_completed_at, completed_at, stopped_at, status) VALUES (%(account_id)s::UUID, %(dataset_id)s::UUID, %(document_id)s::UUID, %(node_id)s::UUID, %(position)s, %(content)s, %(character_count)s, %(token_count)s, %(keywords)s, %(hash)s, %(enabled)s, %(disabled_at)s, %(processing_started_at)s, %(indexing_completed_at)s, %(completed_at)s, %(stopped_at)s, %(status)s) RETURNING segment.id, segment.hit_count, segment.error, segment.updated_at, segment.created_at
[2024-10-13 23:02:51,649.649] base.py -> _exec_single_context line:1908 [INFO]: [generated in 0.00031s] {'account_id': '46db30d1-3199-4e79-a0cd-abf12fa6858f', 'dataset_id': UUID('f3f28f75-8e60-4eba-b6df-4d1b390bbd89'), 'document_id': UUID('d4b902e3-a013-4780-93fa-6fc300ab6bf8'), 'node_id': UUID('dfa19bbc-4310-4fed-988b-b88ec6396aec'), 'position': 62, 'content': '这是一条用于删除的测试数据，来源于慕课网', 'character_count': 20, 'token_count': 19, 'keywords': '["\\u6155\\u8bfe\\u7f51", "\\u7a0b\\u5e8f\\u5458", "\\u68a6\\u5de5\\u5382"]', 'hash': '89a7b8c68bb1af1d993de70c2b3d17ba1fb1fa85b67b3688e077bee593a1beb2', 'enabled': True, 'disabled_at': None, 'processing_started_at': datetime.datetime(2024, 10, 13, 23, 2, 51, 646777), 'indexing_completed_at': datetime.datetime(2024, 10, 13, 23, 2, 51, 646777), 'completed_at': datetime.datetime(2024, 10, 13, 23, 2, 51, 646777), 'stopped_at': None, 'status': <SegmentStatus.COMPLETED: 'completed'>}
[2024-10-13 23:02:51,651.651] base.py -> _commit_impl line:1146 [INFO]: COMMIT
[2024-10-13 23:02:51,654.654] base.py -> _begin_impl line:1103 [INFO]: BEGIN (implicit)
[2024-10-13 23:02:51,655.655] base.py -> _exec_single_context line:1903 [INFO]: SELECT document.id AS document_id, document.account_id AS document_account_id, document.dataset_id AS document_dataset_id, document.upload_file_id AS document_upload_file_id, document.process_rule_id AS document_process_rule_id, document.batch AS document_batch, document.name AS document_name, document.position AS document_position, document.character_count AS document_character_count, document.token_count AS document_token_count, document.processing_started_at AS document_processing_started_at, document.parsing_completed_at AS document_parsing_completed_at, document.splitting_completed_at AS document_splitting_completed_at, document.indexing_completed_at AS document_indexing_completed_at, document.completed_at AS document_completed_at, document.stopped_at AS document_stopped_at, document.error AS document_error, document.enabled AS document_enabled, document.disabled_at AS document_disabled_at, document.status AS document_status, document.updated_at AS document_updated_at, document.created_at AS document_created_at 
FROM document 
WHERE document.id = %(pk_1)s::UUID
[2024-10-13 23:02:51,655.655] base.py -> _exec_single_context line:1908 [INFO]: [generated in 0.00022s] {'pk_1': UUID('d4b902e3-a013-4780-93fa-6fc300ab6bf8')}
[2024-10-13 23:02:51,658.658] base.py -> _exec_single_context line:1903 [INFO]: SELECT segment.id AS segment_id, segment.account_id AS segment_account_id, segment.dataset_id AS segment_dataset_id, segment.document_id AS segment_document_id, segment.node_id AS segment_node_id, segment.position AS segment_position, segment.content AS segment_content, segment.character_count AS segment_character_count, segment.token_count AS segment_token_count, segment.keywords AS segment_keywords, segment.hash AS segment_hash, segment.hit_count AS segment_hit_count, segment.enabled AS segment_enabled, segment.disabled_at AS segment_disabled_at, segment.processing_started_at AS segment_processing_started_at, segment.indexing_completed_at AS segment_indexing_completed_at, segment.completed_at AS segment_completed_at, segment.stopped_at AS segment_stopped_at, segment.error AS segment_error, segment.status AS segment_status, segment.updated_at AS segment_updated_at, segment.created_at AS segment_created_at 
FROM segment 
WHERE segment.id = %(pk_1)s::UUID
[2024-10-13 23:02:51,658.658] base.py -> _exec_single_context line:1908 [INFO]: [generated in 0.00022s] {'pk_1': UUID('e911a929-9376-4eda-9e78-5b856925e9df')}
[2024-10-13 23:02:51,742.742] base.py -> _exec_single_context line:1903 [INFO]: SELECT coalesce(sum(segment.character_count), %(coalesce_2)s) AS coalesce_1, coalesce(sum(segment.token_count), %(coalesce_4)s) AS coalesce_3 
FROM segment 
 LIMIT %(param_1)s
[2024-10-13 23:02:51,742.742] base.py -> _exec_single_context line:1908 [INFO]: [generated in 0.00030s] {'coalesce_2': 0, 'coalesce_4': 0, 'param_1': 1}
[2024-10-13 23:02:51,745.745] base.py -> _exec_single_context line:1903 [INFO]: UPDATE document SET character_count=%(character_count)s, token_count=%(token_count)s WHERE document.id = %(document_id)s::UUID
[2024-10-13 23:02:51,745.745] base.py -> _exec_single_context line:1908 [INFO]: [generated in 0.00022s] {'character_count': 96636, 'token_count': 50843, 'document_id': UUID('d4b902e3-a013-4780-93fa-6fc300ab6bf8')}
[2024-10-13 23:02:51,746.746] base.py -> _commit_impl line:1146 [INFO]: COMMIT
[2024-10-13 23:02:51,747.747] base.py -> _begin_impl line:1103 [INFO]: BEGIN (implicit)
[2024-10-13 23:02:51,747.747] base.py -> _exec_single_context line:1903 [INFO]: SELECT document.id AS document_id, document.account_id AS document_account_id, document.dataset_id AS document_dataset_id, document.upload_file_id AS document_upload_file_id, document.process_rule_id AS document_process_rule_id, document.batch AS document_batch, document.name AS document_name, document.position AS document_position, document.character_count AS document_character_count, document.token_count AS document_token_count, document.processing_started_at AS document_processing_started_at, document.parsing_completed_at AS document_parsing_completed_at, document.splitting_completed_at AS document_splitting_completed_at, document.indexing_completed_at AS document_indexing_completed_at, document.completed_at AS document_completed_at, document.stopped_at AS document_stopped_at, document.error AS document_error, document.enabled AS document_enabled, document.disabled_at AS document_disabled_at, document.status AS document_status, document.updated_at AS document_updated_at, document.created_at AS document_created_at 
FROM document 
WHERE document.id = %(pk_1)s::UUID
[2024-10-13 23:02:51,748.748] base.py -> _exec_single_context line:1908 [INFO]: [cached since 0.09237s ago] {'pk_1': UUID('d4b902e3-a013-4780-93fa-6fc300ab6bf8')}
[2024-10-13 23:02:51,749.749] base.py -> _exec_single_context line:1903 [INFO]: SELECT segment.id AS segment_id, segment.account_id AS segment_account_id, segment.dataset_id AS segment_dataset_id, segment.document_id AS segment_document_id, segment.node_id AS segment_node_id, segment.position AS segment_position, segment.content AS segment_content, segment.character_count AS segment_character_count, segment.token_count AS segment_token_count, segment.keywords AS segment_keywords, segment.hash AS segment_hash, segment.hit_count AS segment_hit_count, segment.enabled AS segment_enabled, segment.disabled_at AS segment_disabled_at, segment.processing_started_at AS segment_processing_started_at, segment.indexing_completed_at AS segment_indexing_completed_at, segment.completed_at AS segment_completed_at, segment.stopped_at AS segment_stopped_at, segment.error AS segment_error, segment.status AS segment_status, segment.updated_at AS segment_updated_at, segment.created_at AS segment_created_at 
FROM segment 
WHERE segment.id = %(pk_1)s::UUID
[2024-10-13 23:02:51,749.749] base.py -> _exec_single_context line:1908 [INFO]: [cached since 0.09078s ago] {'pk_1': UUID('e911a929-9376-4eda-9e78-5b856925e9df')}
[2024-10-13 23:02:51,751.751] base.py -> _exec_single_context line:1903 [INFO]: SELECT keyword_table.id AS keyword_table_id, keyword_table.dataset_id AS keyword_table_dataset_id, keyword_table.keyword_table AS keyword_table_keyword_table, keyword_table.updated_at AS keyword_table_updated_at, keyword_table.created_at AS keyword_table_created_at 
FROM keyword_table 
WHERE keyword_table.dataset_id = %(dataset_id_1)s::UUID
[2024-10-13 23:02:51,751.751] base.py -> _exec_single_context line:1908 [INFO]: [generated in 0.00020s] {'dataset_id_1': UUID('f3f28f75-8e60-4eba-b6df-4d1b390bbd89')}
[2024-10-13 23:02:51,753.753] base.py -> _exec_single_context line:1903 [INFO]: SELECT segment.id AS segment_id, segment.keywords AS segment_keywords 
FROM segment 
WHERE segment.id IN (%(id_1_1)s::UUID)
[2024-10-13 23:02:51,753.753] base.py -> _exec_single_context line:1908 [INFO]: [generated in 0.00025s] {'id_1_1': UUID('e911a929-9376-4eda-9e78-5b856925e9df')}
[2024-10-13 23:02:51,755.755] base.py -> _exec_single_context line:1903 [INFO]: UPDATE keyword_table SET keyword_table=%(keyword_table)s WHERE keyword_table.id = %(keyword_table_id)s::UUID
[2024-10-13 23:02:51,755.755] base.py -> _exec_single_context line:1908 [INFO]: [generated in 0.00038s] {'keyword_table': '{"10": ["c81d9e46-a567-40d7-8bdb-e9abad764ca9"], "23": ["5a7ab6b7-5cf7-424a-adaa-8e181549f487"], "24": ["5a7ab6b7-5cf7-424a-adaa-8e181549f487"], "25" ... (27198 characters truncated) ... 5b856925e9df"], "\\u7a0b\\u5e8f\\u5458": ["e911a929-9376-4eda-9e78-5b856925e9df"], "\\u68a6\\u5de5\\u5382": ["e911a929-9376-4eda-9e78-5b856925e9df"]}', 'keyword_table_id': UUID('2619c055-4d83-40f0-b0ed-6e7c75ebe0a9')}
[2024-10-13 23:02:51,757.757] base.py -> _commit_impl line:1146 [INFO]: COMMIT
[2024-10-13 23:02:51,771.771] _internal.py -> _log line:96 [INFO]: 127.0.0.1 - - [13/Oct/2024 23:02:51] "POST /datasets/f3f28f75-8e60-4eba-b6df-4d1b390bbd89/documents/d4b902e3-a013-4780-93fa-6fc300ab6bf8/segments HTTP/1.1" 200 -
[2024-10-13 23:03:02,789.789] base.py -> _begin_impl line:1103 [INFO]: BEGIN (implicit)
[2024-10-13 23:03:02,790.790] base.py -> _exec_single_context line:1903 [INFO]: SELECT document.id AS document_id, document.account_id AS document_account_id, document.dataset_id AS document_dataset_id, document.upload_file_id AS document_upload_file_id, document.process_rule_id AS document_process_rule_id, document.batch AS document_batch, document.name AS document_name, document.position AS document_position, document.character_count AS document_character_count, document.token_count AS document_token_count, document.processing_started_at AS document_processing_started_at, document.parsing_completed_at AS document_parsing_completed_at, document.splitting_completed_at AS document_splitting_completed_at, document.indexing_completed_at AS document_indexing_completed_at, document.completed_at AS document_completed_at, document.stopped_at AS document_stopped_at, document.error AS document_error, document.enabled AS document_enabled, document.disabled_at AS document_disabled_at, document.status AS document_status, document.updated_at AS document_updated_at, document.created_at AS document_created_at 
FROM document 
WHERE document.id = %(pk_1)s::UUID
[2024-10-13 23:03:02,790.790] base.py -> _exec_single_context line:1908 [INFO]: [cached since 11.15s ago] {'pk_1': UUID('d4b902e3-a013-4780-93fa-6fc300ab6bf8')}
[2024-10-13 23:03:02,792.792] base.py -> _exec_single_context line:1903 [INFO]: SELECT segment.id AS segment_id, segment.account_id AS segment_account_id, segment.dataset_id AS segment_dataset_id, segment.document_id AS segment_document_id, segment.node_id AS segment_node_id, segment.position AS segment_position, segment.content AS segment_content, segment.character_count AS segment_character_count, segment.token_count AS segment_token_count, segment.keywords AS segment_keywords, segment.hash AS segment_hash, segment.hit_count AS segment_hit_count, segment.enabled AS segment_enabled, segment.disabled_at AS segment_disabled_at, segment.processing_started_at AS segment_processing_started_at, segment.indexing_completed_at AS segment_indexing_completed_at, segment.completed_at AS segment_completed_at, segment.stopped_at AS segment_stopped_at, segment.error AS segment_error, segment.status AS segment_status, segment.updated_at AS segment_updated_at, segment.created_at AS segment_created_at 
FROM segment 
WHERE segment.document_id = %(document_id_1)s::UUID AND segment.content ILIKE %(content_1)s ORDER BY segment.position ASC 
 LIMIT %(param_1)s OFFSET %(param_2)s
[2024-10-13 23:03:02,793.793] base.py -> _exec_single_context line:1908 [INFO]: [generated in 0.00031s] {'document_id_1': UUID('d4b902e3-a013-4780-93fa-6fc300ab6bf8'), 'content_1': '%慕课网%', 'param_1': 20, 'param_2': 0}
[2024-10-13 23:03:02,797.797] base.py -> _exec_single_context line:1903 [INFO]: SELECT count(*) AS count_1 
FROM (SELECT segment.id AS id, segment.account_id AS account_id, segment.dataset_id AS dataset_id, segment.document_id AS document_id, segment.node_id AS node_id, segment.position AS position, segment.content AS content, segment.character_count AS character_count, segment.token_count AS token_count, segment.keywords AS keywords, segment.hash AS hash, segment.hit_count AS hit_count, segment.enabled AS enabled, segment.disabled_at AS disabled_at, segment.processing_started_at AS processing_started_at, segment.indexing_completed_at AS indexing_completed_at, segment.completed_at AS completed_at, segment.stopped_at AS stopped_at, segment.error AS error, segment.status AS status, segment.updated_at AS updated_at, segment.created_at AS created_at 
FROM segment 
WHERE segment.document_id = %(document_id_1)s::UUID AND segment.content ILIKE %(content_1)s) AS anon_1
[2024-10-13 23:03:02,797.797] base.py -> _exec_single_context line:1908 [INFO]: [generated in 0.00023s] {'document_id_1': UUID('d4b902e3-a013-4780-93fa-6fc300ab6bf8'), 'content_1': '%慕课网%'}
[2024-10-13 23:03:02,800.800] base.py -> _rollback_impl line:1129 [INFO]: ROLLBACK
[2024-10-13 23:03:02,801.801] _internal.py -> _log line:96 [INFO]: 127.0.0.1 - - [13/Oct/2024 23:03:02] "GET /datasets/f3f28f75-8e60-4eba-b6df-4d1b390bbd89/documents/d4b902e3-a013-4780-93fa-6fc300ab6bf8/segments?current_page=1&page_size=20&search_word=慕课网 HTTP/1.1" 200 -
[2024-10-13 23:03:16,338.338] base.py -> _begin_impl line:1103 [INFO]: BEGIN (implicit)
[2024-10-13 23:03:16,340.340] base.py -> _exec_single_context line:1903 [INFO]: SELECT segment.id AS segment_id, segment.account_id AS segment_account_id, segment.dataset_id AS segment_dataset_id, segment.document_id AS segment_document_id, segment.node_id AS segment_node_id, segment.position AS segment_position, segment.content AS segment_content, segment.character_count AS segment_character_count, segment.token_count AS segment_token_count, segment.keywords AS segment_keywords, segment.hash AS segment_hash, segment.hit_count AS segment_hit_count, segment.enabled AS segment_enabled, segment.disabled_at AS segment_disabled_at, segment.processing_started_at AS segment_processing_started_at, segment.indexing_completed_at AS segment_indexing_completed_at, segment.completed_at AS segment_completed_at, segment.stopped_at AS segment_stopped_at, segment.error AS segment_error, segment.status AS segment_status, segment.updated_at AS segment_updated_at, segment.created_at AS segment_created_at 
FROM segment 
WHERE segment.id = %(pk_1)s::UUID
[2024-10-13 23:03:16,340.340] base.py -> _exec_single_context line:1908 [INFO]: [generated in 0.00023s] {'pk_1': UUID('e911a929-9376-4eda-9e78-5b856925e9df')}
[2024-10-13 23:03:16,341.341] base.py -> _exec_single_context line:1903 [INFO]: SELECT document.id AS document_id, document.account_id AS document_account_id, document.dataset_id AS document_dataset_id, document.upload_file_id AS document_upload_file_id, document.process_rule_id AS document_process_rule_id, document.batch AS document_batch, document.name AS document_name, document.position AS document_position, document.character_count AS document_character_count, document.token_count AS document_token_count, document.processing_started_at AS document_processing_started_at, document.parsing_completed_at AS document_parsing_completed_at, document.splitting_completed_at AS document_splitting_completed_at, document.indexing_completed_at AS document_indexing_completed_at, document.completed_at AS document_completed_at, document.stopped_at AS document_stopped_at, document.error AS document_error, document.enabled AS document_enabled, document.disabled_at AS document_disabled_at, document.status AS document_status, document.updated_at AS document_updated_at, document.created_at AS document_created_at 
FROM document 
WHERE document.id = %(pk_1)s::UUID
[2024-10-13 23:03:16,341.341] base.py -> _exec_single_context line:1908 [INFO]: [cached since 24.7s ago] {'pk_1': UUID('d4b902e3-a013-4780-93fa-6fc300ab6bf8')}
[2024-10-13 23:03:16,343.343] base.py -> _exec_single_context line:1903 [INFO]: DELETE FROM segment WHERE segment.id = %(id)s::UUID
[2024-10-13 23:03:16,343.343] base.py -> _exec_single_context line:1908 [INFO]: [generated in 0.00020s] {'id': UUID('e911a929-9376-4eda-9e78-5b856925e9df')}
[2024-10-13 23:03:16,343.343] base.py -> _commit_impl line:1146 [INFO]: COMMIT
[2024-10-13 23:03:16,347.347] base.py -> _begin_impl line:1103 [INFO]: BEGIN (implicit)
[2024-10-13 23:03:16,347.347] base.py -> _exec_single_context line:1903 [INFO]: SELECT keyword_table.id AS keyword_table_id, keyword_table.dataset_id AS keyword_table_dataset_id, keyword_table.keyword_table AS keyword_table_keyword_table, keyword_table.updated_at AS keyword_table_updated_at, keyword_table.created_at AS keyword_table_created_at 
FROM keyword_table 
WHERE keyword_table.dataset_id = %(dataset_id_1)s::UUID
[2024-10-13 23:03:16,348.348] base.py -> _exec_single_context line:1908 [INFO]: [cached since 24.6s ago] {'dataset_id_1': UUID('f3f28f75-8e60-4eba-b6df-4d1b390bbd89')}
[2024-10-13 23:03:16,349.349] base.py -> _exec_single_context line:1903 [INFO]: UPDATE keyword_table SET keyword_table=%(keyword_table)s WHERE keyword_table.id = %(keyword_table_id)s::UUID
[2024-10-13 23:03:16,350.350] base.py -> _exec_single_context line:1908 [INFO]: [cached since 24.6s ago] {'keyword_table': '{"10": ["c81d9e46-a567-40d7-8bdb-e9abad764ca9"], "23": ["5a7ab6b7-5cf7-424a-adaa-8e181549f487"], "24": ["5a7ab6b7-5cf7-424a-adaa-8e181549f487"], "25" ... (26997 characters truncated) ... , "\\u82f1\\u6587\\u5355\\u8bcd": ["7bec2cf6-db6c-4c37-91fa-b197f836c7f8"], "\\u9519\\u8bef\\u4fe1\\u606f": ["f93e4395-74b2-4420-afd8-dad834ba34b8"]}', 'keyword_table_id': UUID('2619c055-4d83-40f0-b0ed-6e7c75ebe0a9')}
[2024-10-13 23:03:16,352.352] base.py -> _commit_impl line:1146 [INFO]: COMMIT
[2024-10-13 23:03:16,368.368] base.py -> _begin_impl line:1103 [INFO]: BEGIN (implicit)
[2024-10-13 23:03:16,368.368] base.py -> _exec_single_context line:1903 [INFO]: SELECT coalesce(sum(segment.character_count), %(coalesce_2)s) AS coalesce_1, coalesce(sum(segment.token_count), %(coalesce_4)s) AS coalesce_3 
FROM segment 
 LIMIT %(param_1)s
[2024-10-13 23:03:16,368.368] base.py -> _exec_single_context line:1908 [INFO]: [cached since 24.63s ago] {'coalesce_2': 0, 'coalesce_4': 0, 'param_1': 1}
[2024-10-13 23:03:16,369.369] base.py -> _exec_single_context line:1903 [INFO]: SELECT document.id AS document_id, document.account_id AS document_account_id, document.dataset_id AS document_dataset_id, document.upload_file_id AS document_upload_file_id, document.process_rule_id AS document_process_rule_id, document.batch AS document_batch, document.name AS document_name, document.position AS document_position, document.character_count AS document_character_count, document.token_count AS document_token_count, document.processing_started_at AS document_processing_started_at, document.parsing_completed_at AS document_parsing_completed_at, document.splitting_completed_at AS document_splitting_completed_at, document.indexing_completed_at AS document_indexing_completed_at, document.completed_at AS document_completed_at, document.stopped_at AS document_stopped_at, document.error AS document_error, document.enabled AS document_enabled, document.disabled_at AS document_disabled_at, document.status AS document_status, document.updated_at AS document_updated_at, document.created_at AS document_created_at 
FROM document 
WHERE document.id = %(pk_1)s::UUID
[2024-10-13 23:03:16,370.370] base.py -> _exec_single_context line:1908 [INFO]: [cached since 24.71s ago] {'pk_1': UUID('d4b902e3-a013-4780-93fa-6fc300ab6bf8')}
[2024-10-13 23:03:16,370.370] base.py -> _exec_single_context line:1903 [INFO]: UPDATE document SET character_count=%(character_count)s, token_count=%(token_count)s WHERE document.id = %(document_id)s::UUID
[2024-10-13 23:03:16,371.371] base.py -> _exec_single_context line:1908 [INFO]: [cached since 24.63s ago] {'character_count': 96616, 'token_count': 50824, 'document_id': UUID('d4b902e3-a013-4780-93fa-6fc300ab6bf8')}
[2024-10-13 23:03:16,371.371] base.py -> _commit_impl line:1146 [INFO]: COMMIT
[2024-10-13 23:03:16,382.382] _internal.py -> _log line:96 [INFO]: 127.0.0.1 - - [13/Oct/2024 23:03:16] "POST /datasets/f3f28f75-8e60-4eba-b6df-4d1b390bbd89/documents/d4b902e3-a013-4780-93fa-6fc300ab6bf8/segments/e911a929-9376-4eda-9e78-5b856925e9df/delete HTTP/1.1" 200 -
[2024-10-13 23:03:24,108.108] base.py -> _begin_impl line:1103 [INFO]: BEGIN (implicit)
[2024-10-13 23:03:24,108.108] base.py -> _exec_single_context line:1903 [INFO]: SELECT document.id AS document_id, document.account_id AS document_account_id, document.dataset_id AS document_dataset_id, document.upload_file_id AS document_upload_file_id, document.process_rule_id AS document_process_rule_id, document.batch AS document_batch, document.name AS document_name, document.position AS document_position, document.character_count AS document_character_count, document.token_count AS document_token_count, document.processing_started_at AS document_processing_started_at, document.parsing_completed_at AS document_parsing_completed_at, document.splitting_completed_at AS document_splitting_completed_at, document.indexing_completed_at AS document_indexing_completed_at, document.completed_at AS document_completed_at, document.stopped_at AS document_stopped_at, document.error AS document_error, document.enabled AS document_enabled, document.disabled_at AS document_disabled_at, document.status AS document_status, document.updated_at AS document_updated_at, document.created_at AS document_created_at 
FROM document 
WHERE document.id = %(pk_1)s::UUID
[2024-10-13 23:03:24,109.109] base.py -> _exec_single_context line:1908 [INFO]: [cached since 32.47s ago] {'pk_1': UUID('d4b902e3-a013-4780-93fa-6fc300ab6bf8')}
[2024-10-13 23:03:24,110.110] base.py -> _exec_single_context line:1903 [INFO]: SELECT segment.id AS segment_id, segment.account_id AS segment_account_id, segment.dataset_id AS segment_dataset_id, segment.document_id AS segment_document_id, segment.node_id AS segment_node_id, segment.position AS segment_position, segment.content AS segment_content, segment.character_count AS segment_character_count, segment.token_count AS segment_token_count, segment.keywords AS segment_keywords, segment.hash AS segment_hash, segment.hit_count AS segment_hit_count, segment.enabled AS segment_enabled, segment.disabled_at AS segment_disabled_at, segment.processing_started_at AS segment_processing_started_at, segment.indexing_completed_at AS segment_indexing_completed_at, segment.completed_at AS segment_completed_at, segment.stopped_at AS segment_stopped_at, segment.error AS segment_error, segment.status AS segment_status, segment.updated_at AS segment_updated_at, segment.created_at AS segment_created_at 
FROM segment 
WHERE segment.document_id = %(document_id_1)s::UUID AND segment.content ILIKE %(content_1)s ORDER BY segment.position ASC 
 LIMIT %(param_1)s OFFSET %(param_2)s
[2024-10-13 23:03:24,111.111] base.py -> _exec_single_context line:1908 [INFO]: [cached since 21.32s ago] {'document_id_1': UUID('d4b902e3-a013-4780-93fa-6fc300ab6bf8'), 'content_1': '%慕课网%', 'param_1': 20, 'param_2': 0}
[2024-10-13 23:03:24,113.113] base.py -> _exec_single_context line:1903 [INFO]: SELECT count(*) AS count_1 
FROM (SELECT segment.id AS id, segment.account_id AS account_id, segment.dataset_id AS dataset_id, segment.document_id AS document_id, segment.node_id AS node_id, segment.position AS position, segment.content AS content, segment.character_count AS character_count, segment.token_count AS token_count, segment.keywords AS keywords, segment.hash AS hash, segment.hit_count AS hit_count, segment.enabled AS enabled, segment.disabled_at AS disabled_at, segment.processing_started_at AS processing_started_at, segment.indexing_completed_at AS indexing_completed_at, segment.completed_at AS completed_at, segment.stopped_at AS stopped_at, segment.error AS error, segment.status AS status, segment.updated_at AS updated_at, segment.created_at AS created_at 
FROM segment 
WHERE segment.document_id = %(document_id_1)s::UUID AND segment.content ILIKE %(content_1)s) AS anon_1
[2024-10-13 23:03:24,113.113] base.py -> _exec_single_context line:1908 [INFO]: [cached since 21.32s ago] {'document_id_1': UUID('d4b902e3-a013-4780-93fa-6fc300ab6bf8'), 'content_1': '%慕课网%'}
[2024-10-13 23:03:24,115.115] base.py -> _rollback_impl line:1129 [INFO]: ROLLBACK
[2024-10-13 23:03:24,116.116] _internal.py -> _log line:96 [INFO]: 127.0.0.1 - - [13/Oct/2024 23:03:24] "GET /datasets/f3f28f75-8e60-4eba-b6df-4d1b390bbd89/documents/d4b902e3-a013-4780-93fa-6fc300ab6bf8/segments?current_page=1&page_size=20&search_word=慕课网 HTTP/1.1" 200 -
[2024-10-13 23:03:30,143.143] base.py -> _begin_impl line:1103 [INFO]: BEGIN (implicit)
[2024-10-13 23:03:30,143.143] base.py -> _exec_single_context line:1903 [INFO]: SELECT segment.id AS segment_id, segment.account_id AS segment_account_id, segment.dataset_id AS segment_dataset_id, segment.document_id AS segment_document_id, segment.node_id AS segment_node_id, segment.position AS segment_position, segment.content AS segment_content, segment.character_count AS segment_character_count, segment.token_count AS segment_token_count, segment.keywords AS segment_keywords, segment.hash AS segment_hash, segment.hit_count AS segment_hit_count, segment.enabled AS segment_enabled, segment.disabled_at AS segment_disabled_at, segment.processing_started_at AS segment_processing_started_at, segment.indexing_completed_at AS segment_indexing_completed_at, segment.completed_at AS segment_completed_at, segment.stopped_at AS segment_stopped_at, segment.error AS segment_error, segment.status AS segment_status, segment.updated_at AS segment_updated_at, segment.created_at AS segment_created_at 
FROM segment 
WHERE segment.id = %(pk_1)s::UUID
[2024-10-13 23:03:30,143.143] base.py -> _exec_single_context line:1908 [INFO]: [cached since 13.8s ago] {'pk_1': UUID('e911a929-9376-4eda-9e78-5b856925e9df')}
[2024-10-13 23:03:30,145.145] http.py -> _register_error_handler line:66 [ERROR]: An error occurred: 
Traceback (most recent call last):
  File "D:\Code\llmops\llmops-api\venv\lib\site-packages\flask\app.py", line 870, in full_dispatch_request
    rv = self.dispatch_request()
  File "D:\Code\llmops\llmops-api\venv\lib\site-packages\flask\app.py", line 855, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
  File "D:\Code\llmops\llmops-api\internal\handler\segment_handler.py", line 79, in delete_segment
    self.segment_service.delete_segment(dataset_id, document_id, segment_id)
  File "D:\Code\llmops\llmops-api\internal\service\segment_service.py", line 273, in delete_segment
    raise NotFoundException("该文档片段不存在，或无权限修改，请核实后重试")
internal.exception.exception.NotFoundException
[2024-10-13 23:03:30,146.146] base.py -> _rollback_impl line:1129 [INFO]: ROLLBACK
[2024-10-13 23:03:30,146.146] _internal.py -> _log line:96 [INFO]: 127.0.0.1 - - [13/Oct/2024 23:03:30] "POST /datasets/f3f28f75-8e60-4eba-b6df-4d1b390bbd89/documents/d4b902e3-a013-4780-93fa-6fc300ab6bf8/segments/e911a929-9376-4eda-9e78-5b856925e9df/delete HTTP/1.1" 200 -
[2024-10-13 23:04:17,697.697] _internal.py -> _log line:96 [INFO]:  * Detected change in 'D:\\Code\\llmops\\llmops-api\\internal\\handler\\dataset_handler.py', reloading
[2024-10-13 23:04:18,112.112] _internal.py -> _log line:96 [INFO]:  * Restarting with stat
[2024-10-13 23:04:22,893.893] _internal.py -> _log line:96 [WARNING]:  * Debugger is active!
[2024-10-13 23:04:22,897.897] _internal.py -> _log line:96 [INFO]:  * Debugger PIN: 102-324-223
[2024-10-13 23:04:33,513.513] _internal.py -> _log line:96 [INFO]:  * Detected change in 'D:\\Code\\llmops\\llmops-api\\internal\\router\\router.py', reloading
[2024-10-13 23:04:33,808.808] _internal.py -> _log line:96 [INFO]:  * Restarting with stat
[2024-10-13 23:04:38,741.741] _internal.py -> _log line:96 [WARNING]:  * Debugger is active!
[2024-10-13 23:04:38,744.744] _internal.py -> _log line:96 [INFO]:  * Debugger PIN: 139-858-996
[2024-10-13 23:04:58,517.517] _internal.py -> _log line:96 [INFO]:  * Detected change in 'D:\\Code\\llmops\\llmops-api\\internal\\router\\router.py', reloading
[2024-10-13 23:04:58,811.811] _internal.py -> _log line:96 [INFO]:  * Restarting with stat
[2024-10-13 23:05:03,503.503] _internal.py -> _log line:96 [WARNING]:  * Debugger is active!
[2024-10-13 23:05:03,504.504] _internal.py -> _log line:96 [INFO]:  * Debugger PIN: 102-324-223
[2024-10-13 23:05:42,947.947] _internal.py -> _log line:96 [INFO]:  * Detected change in 'D:\\Code\\llmops\\llmops-api\\internal\\handler\\dataset_handler.py', reloading
[2024-10-13 23:05:43,259.259] _internal.py -> _log line:96 [INFO]:  * Restarting with stat
[2024-10-13 23:05:47,880.880] _internal.py -> _log line:96 [WARNING]:  * Debugger is active!
[2024-10-13 23:05:47,882.882] _internal.py -> _log line:96 [INFO]:  * Debugger PIN: 102-324-223
[2024-10-13 23:09:50,716.716] _internal.py -> _log line:96 [INFO]:  * Detected change in 'D:\\Code\\llmops\\llmops-api\\internal\\service\\dataset_service.py', reloading
[2024-10-13 23:09:51,027.027] _internal.py -> _log line:96 [INFO]:  * Restarting with stat
[2024-10-13 23:09:55,599.599] _internal.py -> _log line:96 [WARNING]:  * Debugger is active!
[2024-10-13 23:09:55,602.602] _internal.py -> _log line:96 [INFO]:  * Debugger PIN: 102-324-223
[2024-10-13 23:11:33,026.026] _internal.py -> _log line:96 [INFO]:  * Detected change in 'D:\\Code\\llmops\\llmops-api\\internal\\task\\dataset_task.py', reloading
[2024-10-13 23:11:33,391.391] _internal.py -> _log line:96 [INFO]:  * Restarting with stat
[2024-10-13 23:11:38,082.082] _internal.py -> _log line:96 [WARNING]:  * Debugger is active!
[2024-10-13 23:11:38,085.085] _internal.py -> _log line:96 [INFO]:  * Debugger PIN: 102-324-223
[2024-10-13 23:12:02,527.527] _internal.py -> _log line:96 [INFO]:  * Detected change in 'D:\\Code\\llmops\\llmops-api\\internal\\task\\dataset_task.py', reloading
[2024-10-13 23:12:02,810.810] _internal.py -> _log line:96 [INFO]:  * Restarting with stat
[2024-10-13 23:12:07,566.566] _internal.py -> _log line:96 [WARNING]:  * Debugger is active!
[2024-10-13 23:12:07,569.569] _internal.py -> _log line:96 [INFO]:  * Debugger PIN: 102-324-223
[2024-10-13 23:12:25,274.274] _internal.py -> _log line:96 [INFO]:  * Detected change in 'D:\\Code\\llmops\\llmops-api\\internal\\service\\dataset_service.py', reloading
[2024-10-13 23:12:25,575.575] _internal.py -> _log line:96 [INFO]:  * Restarting with stat
[2024-10-13 23:12:30,299.299] _internal.py -> _log line:96 [WARNING]:  * Debugger is active!
[2024-10-13 23:12:30,305.305] _internal.py -> _log line:96 [INFO]:  * Debugger PIN: 102-324-223
[2024-10-13 23:13:22,458.458] _internal.py -> _log line:96 [INFO]:  * Detected change in 'D:\\Code\\llmops\\llmops-api\\internal\\service\\indexing_service.py', reloading
[2024-10-13 23:13:22,731.731] _internal.py -> _log line:96 [INFO]:  * Restarting with stat
[2024-10-13 23:13:27,237.237] _internal.py -> _log line:96 [WARNING]:  * Debugger is active!
[2024-10-13 23:13:27,240.240] _internal.py -> _log line:96 [INFO]:  * Debugger PIN: 102-324-223
[2024-10-13 23:17:35,117.117] _internal.py -> _log line:96 [INFO]:  * Detected change in 'D:\\Code\\llmops\\llmops-api\\internal\\service\\indexing_service.py', reloading
[2024-10-13 23:17:35,419.419] _internal.py -> _log line:96 [INFO]:  * Restarting with stat
[2024-10-13 23:17:40,147.147] _internal.py -> _log line:96 [WARNING]:  * Debugger is active!
[2024-10-13 23:17:40,149.149] _internal.py -> _log line:96 [INFO]:  * Debugger PIN: 102-324-223
[2024-10-13 23:18:18,944.944] base.py -> _exec_single_context line:1903 [INFO]: select pg_catalog.version()
[2024-10-13 23:18:18,944.944] base.py -> _exec_single_context line:1908 [INFO]: [raw sql] {}
[2024-10-13 23:18:18,946.946] base.py -> _exec_single_context line:1903 [INFO]: select current_schema()
[2024-10-13 23:18:18,946.946] base.py -> _exec_single_context line:1908 [INFO]: [raw sql] {}
[2024-10-13 23:18:18,946.946] base.py -> _exec_single_context line:1903 [INFO]: show standard_conforming_strings
[2024-10-13 23:18:18,946.946] base.py -> _exec_single_context line:1908 [INFO]: [raw sql] {}
[2024-10-13 23:18:18,947.947] base.py -> _begin_impl line:1103 [INFO]: BEGIN (implicit)
[2024-10-13 23:18:18,950.950] base.py -> _exec_single_context line:1903 [INFO]: SELECT dataset.id AS dataset_id, dataset.account_id AS dataset_account_id, dataset.name AS dataset_name, dataset.icon AS dataset_icon, dataset.description AS dataset_description, dataset.updated_at AS dataset_updated_at, dataset.created_at AS dataset_created_at 
FROM dataset 
WHERE dataset.account_id = %(account_id_1)s::UUID AND dataset.name = %(name_1)s
[2024-10-13 23:18:18,950.950] base.py -> _exec_single_context line:1908 [INFO]: [generated in 0.00022s] {'account_id_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f', 'name_1': '测试删除知识库'}
[2024-10-13 23:18:18,953.953] base.py -> _exec_single_context line:1903 [INFO]: INSERT INTO dataset (account_id, name, icon, description) VALUES (%(account_id)s::UUID, %(name)s, %(icon)s, %(description)s) RETURNING dataset.id, dataset.updated_at, dataset.created_at
[2024-10-13 23:18:18,953.953] base.py -> _exec_single_context line:1908 [INFO]: [generated in 0.00028s] {'account_id': '46db30d1-3199-4e79-a0cd-abf12fa6858f', 'name': '测试删除知识库', 'icon': 'https://imooc-llmops-1304251364.cos.ap-guangzhou.myqcloud.com/2024/09/29/9f5e42d4-e184-4e2c-88f2-0ef843749e3f.jpg', 'description': '当你需要回答管理《测试删除知识库》的时候可以引用该知识库。'}
[2024-10-13 23:18:18,954.954] base.py -> _commit_impl line:1146 [INFO]: COMMIT
[2024-10-13 23:18:19,024.024] _internal.py -> _log line:96 [INFO]: 127.0.0.1 - - [13/Oct/2024 23:18:19] "POST /datasets HTTP/1.1" 200 -
[2024-10-13 23:18:23,649.649] base.py -> _begin_impl line:1103 [INFO]: BEGIN (implicit)
[2024-10-13 23:18:23,650.650] base.py -> _exec_single_context line:1903 [INFO]: SELECT dataset.id AS dataset_id, dataset.account_id AS dataset_account_id, dataset.name AS dataset_name, dataset.icon AS dataset_icon, dataset.description AS dataset_description, dataset.updated_at AS dataset_updated_at, dataset.created_at AS dataset_created_at 
FROM dataset 
WHERE dataset.account_id = %(account_id_1)s::UUID ORDER BY dataset.created_at DESC 
 LIMIT %(param_1)s OFFSET %(param_2)s
[2024-10-13 23:18:23,650.650] base.py -> _exec_single_context line:1908 [INFO]: [generated in 0.00030s] {'account_id_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f', 'param_1': 20, 'param_2': 0}
[2024-10-13 23:18:23,655.655] base.py -> _exec_single_context line:1903 [INFO]: SELECT count(*) AS count_1 
FROM (SELECT dataset.id AS id, dataset.account_id AS account_id, dataset.name AS name, dataset.icon AS icon, dataset.description AS description, dataset.updated_at AS updated_at, dataset.created_at AS created_at 
FROM dataset 
WHERE dataset.account_id = %(account_id_1)s::UUID) AS anon_1
[2024-10-13 23:18:23,655.655] base.py -> _exec_single_context line:1908 [INFO]: [generated in 0.00026s] {'account_id_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2024-10-13 23:18:23,656.656] base.py -> _exec_single_context line:1903 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2024-10-13 23:18:23,656.656] base.py -> _exec_single_context line:1908 [INFO]: [generated in 0.00025s] {'dataset_id_1': UUID('6347c9df-7a30-4ea4-9965-a0f368f007fc')}
[2024-10-13 23:18:23,658.658] base.py -> _exec_single_context line:1903 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2024-10-13 23:18:23,658.658] base.py -> _exec_single_context line:1908 [INFO]: [generated in 0.00020s] {'dataset_id_1': UUID('6347c9df-7a30-4ea4-9965-a0f368f007fc')}
[2024-10-13 23:18:23,660.660] base.py -> _exec_single_context line:1903 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2024-10-13 23:18:23,660.660] base.py -> _exec_single_context line:1908 [INFO]: [generated in 0.00020s] {'coalesce_2': 0, 'dataset_id_1': UUID('6347c9df-7a30-4ea4-9965-a0f368f007fc')}
[2024-10-13 23:18:23,661.661] base.py -> _exec_single_context line:1903 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2024-10-13 23:18:23,661.661] base.py -> _exec_single_context line:1908 [INFO]: [cached since 0.005213s ago] {'dataset_id_1': UUID('f3f28f75-8e60-4eba-b6df-4d1b390bbd89')}
[2024-10-13 23:18:23,662.662] base.py -> _exec_single_context line:1903 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2024-10-13 23:18:23,662.662] base.py -> _exec_single_context line:1908 [INFO]: [cached since 0.004615s ago] {'dataset_id_1': UUID('f3f28f75-8e60-4eba-b6df-4d1b390bbd89')}
[2024-10-13 23:18:23,663.663] base.py -> _exec_single_context line:1903 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2024-10-13 23:18:23,663.663] base.py -> _exec_single_context line:1908 [INFO]: [cached since 0.003504s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('f3f28f75-8e60-4eba-b6df-4d1b390bbd89')}
[2024-10-13 23:18:23,665.665] base.py -> _rollback_impl line:1129 [INFO]: ROLLBACK
[2024-10-13 23:18:23,665.665] _internal.py -> _log line:96 [INFO]: 127.0.0.1 - - [13/Oct/2024 23:18:23] "GET /datasets?search_word=&current_page=1&page_size=20 HTTP/1.1" 200 -
[2024-10-13 23:18:43,364.364] base.py -> _begin_impl line:1103 [INFO]: BEGIN (implicit)
[2024-10-13 23:18:43,365.365] base.py -> _exec_single_context line:1903 [INFO]: SELECT dataset.id AS dataset_id, dataset.account_id AS dataset_account_id, dataset.name AS dataset_name, dataset.icon AS dataset_icon, dataset.description AS dataset_description, dataset.updated_at AS dataset_updated_at, dataset.created_at AS dataset_created_at 
FROM dataset 
WHERE dataset.id = %(pk_1)s::UUID
[2024-10-13 23:18:43,365.365] base.py -> _exec_single_context line:1908 [INFO]: [generated in 0.00022s] {'pk_1': UUID('6347c9df-7a30-4ea4-9965-a0f368f007fc')}
[2024-10-13 23:18:43,368.368] base.py -> _exec_single_context line:1903 [INFO]: SELECT upload_file.id AS upload_file_id, upload_file.account_id AS upload_file_account_id, upload_file.name AS upload_file_name, upload_file.key AS upload_file_key, upload_file.size AS upload_file_size, upload_file.extension AS upload_file_extension, upload_file.mime_type AS upload_file_mime_type, upload_file.hash AS upload_file_hash, upload_file.updated_at AS upload_file_updated_at, upload_file.created_at AS upload_file_created_at 
FROM upload_file 
WHERE upload_file.account_id = %(account_id_1)s::UUID AND upload_file.id IN (%(id_1_1)s::UUID)
[2024-10-13 23:18:43,369.369] base.py -> _exec_single_context line:1908 [INFO]: [generated in 0.00031s] {'account_id_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f', 'id_1_1': '4cdddf4d-6642-4bb3-87be-63dc77408c7e'}
[2024-10-13 23:18:43,371.371] base.py -> _exec_single_context line:1903 [INFO]: INSERT INTO process_rule (account_id, dataset_id, mode, rule) VALUES (%(account_id)s::UUID, %(dataset_id)s::UUID, %(mode)s, %(rule)s) RETURNING process_rule.id, process_rule.updated_at, process_rule.created_at
[2024-10-13 23:18:43,371.371] base.py -> _exec_single_context line:1908 [INFO]: [generated in 0.00027s] {'account_id': '46db30d1-3199-4e79-a0cd-abf12fa6858f', 'dataset_id': UUID('6347c9df-7a30-4ea4-9965-a0f368f007fc'), 'mode': 'automatic', 'rule': '{"pre_process_rules": [{"id": "remove_extra_space", "enabled": true}, {"id": "remove_url_and_email", "enabled": true}], "segment": {"separators": ["\ ... (15 characters truncated) ... "\\u3002|\\uff01|\\uff1f", "\\\\.\\\\s|\\\\!\\\\s|\\\\?\\\\s", "\\uff1b|;\\\\s", "\\uff0c|,\\\\s", " ", ""], "chunk_size": 500, "chunk_overlap": 50}}'}
[2024-10-13 23:18:43,372.372] base.py -> _commit_impl line:1146 [INFO]: COMMIT
[2024-10-13 23:18:43,376.376] base.py -> _begin_impl line:1103 [INFO]: BEGIN (implicit)
[2024-10-13 23:18:43,378.378] base.py -> _exec_single_context line:1903 [INFO]: SELECT document.id AS document_id, document.account_id AS document_account_id, document.dataset_id AS document_dataset_id, document.upload_file_id AS document_upload_file_id, document.process_rule_id AS document_process_rule_id, document.batch AS document_batch, document.name AS document_name, document.position AS document_position, document.character_count AS document_character_count, document.token_count AS document_token_count, document.processing_started_at AS document_processing_started_at, document.parsing_completed_at AS document_parsing_completed_at, document.splitting_completed_at AS document_splitting_completed_at, document.indexing_completed_at AS document_indexing_completed_at, document.completed_at AS document_completed_at, document.stopped_at AS document_stopped_at, document.error AS document_error, document.enabled AS document_enabled, document.disabled_at AS document_disabled_at, document.status AS document_status, document.updated_at AS document_updated_at, document.created_at AS document_created_at 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID ORDER BY document.position DESC 
 LIMIT %(param_1)s
[2024-10-13 23:18:43,378.378] base.py -> _exec_single_context line:1908 [INFO]: [generated in 0.00025s] {'dataset_id_1': UUID('6347c9df-7a30-4ea4-9965-a0f368f007fc'), 'param_1': 1}
[2024-10-13 23:18:43,380.380] base.py -> _exec_single_context line:1903 [INFO]: SELECT upload_file.id AS upload_file_id, upload_file.account_id AS upload_file_account_id, upload_file.name AS upload_file_name, upload_file.key AS upload_file_key, upload_file.size AS upload_file_size, upload_file.extension AS upload_file_extension, upload_file.mime_type AS upload_file_mime_type, upload_file.hash AS upload_file_hash, upload_file.updated_at AS upload_file_updated_at, upload_file.created_at AS upload_file_created_at 
FROM upload_file 
WHERE upload_file.id = %(pk_1)s::UUID
[2024-10-13 23:18:43,380.380] base.py -> _exec_single_context line:1908 [INFO]: [generated in 0.00021s] {'pk_1': UUID('4cdddf4d-6642-4bb3-87be-63dc77408c7e')}
[2024-10-13 23:18:43,382.382] base.py -> _exec_single_context line:1903 [INFO]: SELECT process_rule.id AS process_rule_id, process_rule.account_id AS process_rule_account_id, process_rule.dataset_id AS process_rule_dataset_id, process_rule.mode AS process_rule_mode, process_rule.rule AS process_rule_rule, process_rule.updated_at AS process_rule_updated_at, process_rule.created_at AS process_rule_created_at 
FROM process_rule 
WHERE process_rule.id = %(pk_1)s::UUID
[2024-10-13 23:18:43,383.383] base.py -> _exec_single_context line:1908 [INFO]: [generated in 0.00026s] {'pk_1': UUID('33c88942-8a92-4e1a-88b1-c0917bbb528a')}
[2024-10-13 23:18:43,385.385] base.py -> _exec_single_context line:1903 [INFO]: INSERT INTO document (account_id, dataset_id, upload_file_id, process_rule_id, batch, name, position, processing_started_at, parsing_completed_at, splitting_completed_at, indexing_completed_at, completed_at, stopped_at, disabled_at) VALUES (%(account_id)s::UUID, %(dataset_id)s::UUID, %(upload_file_id)s::UUID, %(process_rule_id)s::UUID, %(batch)s, %(name)s, %(position)s, %(processing_started_at)s, %(parsing_completed_at)s, %(splitting_completed_at)s, %(indexing_completed_at)s, %(completed_at)s, %(stopped_at)s, %(disabled_at)s) RETURNING document.id, document.character_count, document.token_count, document.error, document.enabled, document.status, document.updated_at, document.created_at
[2024-10-13 23:18:43,385.385] base.py -> _exec_single_context line:1908 [INFO]: [generated in 0.00029s] {'account_id': '46db30d1-3199-4e79-a0cd-abf12fa6858f', 'dataset_id': UUID('6347c9df-7a30-4ea4-9965-a0f368f007fc'), 'upload_file_id': UUID('4cdddf4d-6642-4bb3-87be-63dc77408c7e'), 'process_rule_id': UUID('33c88942-8a92-4e1a-88b1-c0917bbb528a'), 'batch': '20241013231843387624', 'name': '项目API文档-完整.md', 'position': 1, 'processing_started_at': None, 'parsing_completed_at': None, 'splitting_completed_at': None, 'indexing_completed_at': None, 'completed_at': None, 'stopped_at': None, 'disabled_at': None}
[2024-10-13 23:18:43,386.386] base.py -> _commit_impl line:1146 [INFO]: COMMIT
[2024-10-13 23:18:43,399.399] base.py -> _begin_impl line:1103 [INFO]: BEGIN (implicit)
[2024-10-13 23:18:43,400.400] base.py -> _exec_single_context line:1903 [INFO]: SELECT document.id AS document_id, document.account_id AS document_account_id, document.dataset_id AS document_dataset_id, document.upload_file_id AS document_upload_file_id, document.process_rule_id AS document_process_rule_id, document.batch AS document_batch, document.name AS document_name, document.position AS document_position, document.character_count AS document_character_count, document.token_count AS document_token_count, document.processing_started_at AS document_processing_started_at, document.parsing_completed_at AS document_parsing_completed_at, document.splitting_completed_at AS document_splitting_completed_at, document.indexing_completed_at AS document_indexing_completed_at, document.completed_at AS document_completed_at, document.stopped_at AS document_stopped_at, document.error AS document_error, document.enabled AS document_enabled, document.disabled_at AS document_disabled_at, document.status AS document_status, document.updated_at AS document_updated_at, document.created_at AS document_created_at 
FROM document 
WHERE document.id = %(pk_1)s::UUID
[2024-10-13 23:18:43,400.400] base.py -> _exec_single_context line:1908 [INFO]: [generated in 0.00023s] {'pk_1': UUID('06a8c11f-83e9-4456-af7d-51ad48e06766')}
[2024-10-13 23:18:43,477.477] base.py -> _rollback_impl line:1129 [INFO]: ROLLBACK
[2024-10-13 23:18:43,478.478] _internal.py -> _log line:96 [INFO]: 127.0.0.1 - - [13/Oct/2024 23:18:43] "POST /datasets/6347c9df-7a30-4ea4-9965-a0f368f007fc/documents HTTP/1.1" 200 -
[2024-10-13 23:19:17,027.027] base.py -> _begin_impl line:1103 [INFO]: BEGIN (implicit)
[2024-10-13 23:19:17,027.027] base.py -> _exec_single_context line:1903 [INFO]: SELECT dataset.id AS dataset_id, dataset.account_id AS dataset_account_id, dataset.name AS dataset_name, dataset.icon AS dataset_icon, dataset.description AS dataset_description, dataset.updated_at AS dataset_updated_at, dataset.created_at AS dataset_created_at 
FROM dataset 
WHERE dataset.id = %(pk_1)s::UUID
[2024-10-13 23:19:17,028.028] base.py -> _exec_single_context line:1908 [INFO]: [cached since 33.66s ago] {'pk_1': UUID('6347c9df-7a30-4ea4-9965-a0f368f007fc')}
[2024-10-13 23:19:17,030.030] base.py -> _exec_single_context line:1903 [INFO]: SELECT document.id AS document_id, document.account_id AS document_account_id, document.dataset_id AS document_dataset_id, document.upload_file_id AS document_upload_file_id, document.process_rule_id AS document_process_rule_id, document.batch AS document_batch, document.name AS document_name, document.position AS document_position, document.character_count AS document_character_count, document.token_count AS document_token_count, document.processing_started_at AS document_processing_started_at, document.parsing_completed_at AS document_parsing_completed_at, document.splitting_completed_at AS document_splitting_completed_at, document.indexing_completed_at AS document_indexing_completed_at, document.completed_at AS document_completed_at, document.stopped_at AS document_stopped_at, document.error AS document_error, document.enabled AS document_enabled, document.disabled_at AS document_disabled_at, document.status AS document_status, document.updated_at AS document_updated_at, document.created_at AS document_created_at 
FROM document 
WHERE document.account_id = %(account_id_1)s::UUID AND document.dataset_id = %(dataset_id_1)s::UUID ORDER BY document.created_at DESC 
 LIMIT %(param_1)s OFFSET %(param_2)s
[2024-10-13 23:19:17,031.031] base.py -> _exec_single_context line:1908 [INFO]: [generated in 0.00033s] {'account_id_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f', 'dataset_id_1': UUID('6347c9df-7a30-4ea4-9965-a0f368f007fc'), 'param_1': 20, 'param_2': 0}
[2024-10-13 23:19:17,033.033] base.py -> _exec_single_context line:1903 [INFO]: SELECT count(*) AS count_1 
FROM (SELECT document.id AS id, document.account_id AS account_id, document.dataset_id AS dataset_id, document.upload_file_id AS upload_file_id, document.process_rule_id AS process_rule_id, document.batch AS batch, document.name AS name, document.position AS position, document.character_count AS character_count, document.token_count AS token_count, document.processing_started_at AS processing_started_at, document.parsing_completed_at AS parsing_completed_at, document.splitting_completed_at AS splitting_completed_at, document.indexing_completed_at AS indexing_completed_at, document.completed_at AS completed_at, document.stopped_at AS stopped_at, document.error AS error, document.enabled AS enabled, document.disabled_at AS disabled_at, document.status AS status, document.updated_at AS updated_at, document.created_at AS created_at 
FROM document 
WHERE document.account_id = %(account_id_1)s::UUID AND document.dataset_id = %(dataset_id_1)s::UUID) AS anon_1
[2024-10-13 23:19:17,034.034] base.py -> _exec_single_context line:1908 [INFO]: [generated in 0.00025s] {'account_id_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f', 'dataset_id_1': UUID('6347c9df-7a30-4ea4-9965-a0f368f007fc')}
[2024-10-13 23:19:17,036.036] base.py -> _exec_single_context line:1903 [INFO]: SELECT coalesce(sum(segment.hit_count), %(coalesce_2)s) AS coalesce_1 
FROM segment 
WHERE segment.document_id = %(document_id_1)s::UUID
[2024-10-13 23:19:17,036.036] base.py -> _exec_single_context line:1908 [INFO]: [generated in 0.00022s] {'coalesce_2': 0, 'document_id_1': UUID('06a8c11f-83e9-4456-af7d-51ad48e06766')}
[2024-10-13 23:19:17,037.037] base.py -> _rollback_impl line:1129 [INFO]: ROLLBACK
[2024-10-13 23:19:17,038.038] _internal.py -> _log line:96 [INFO]: 127.0.0.1 - - [13/Oct/2024 23:19:17] "GET /datasets/6347c9df-7a30-4ea4-9965-a0f368f007fc/documents?current_page=1&page_size=20 HTTP/1.1" 200 -
[2024-10-13 23:19:34,342.342] base.py -> _begin_impl line:1103 [INFO]: BEGIN (implicit)
[2024-10-13 23:19:34,342.342] base.py -> _exec_single_context line:1903 [INFO]: SELECT dataset.id AS dataset_id, dataset.account_id AS dataset_account_id, dataset.name AS dataset_name, dataset.icon AS dataset_icon, dataset.description AS dataset_description, dataset.updated_at AS dataset_updated_at, dataset.created_at AS dataset_created_at 
FROM dataset 
WHERE dataset.id = %(pk_1)s::UUID
[2024-10-13 23:19:34,342.342] base.py -> _exec_single_context line:1908 [INFO]: [cached since 50.98s ago] {'pk_1': UUID('6347c9df-7a30-4ea4-9965-a0f368f007fc')}
[2024-10-13 23:19:34,345.345] base.py -> _exec_single_context line:1903 [INFO]: SELECT dataset.id AS dataset_id, dataset.account_id AS dataset_account_id, dataset.name AS dataset_name, dataset.icon AS dataset_icon, dataset.description AS dataset_description, dataset.updated_at AS dataset_updated_at, dataset.created_at AS dataset_created_at 
FROM dataset 
WHERE dataset.id IN (%(id_1_1)s::UUID) AND dataset.account_id = %(account_id_1)s::UUID
[2024-10-13 23:19:34,345.345] base.py -> _exec_single_context line:1908 [INFO]: [generated in 0.00030s] {'account_id_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f', 'id_1_1': UUID('6347c9df-7a30-4ea4-9965-a0f368f007fc')}
[2024-10-13 23:19:37,299.299] __init__.py -> initialize line:113 [DEBUG]: Building prefix dict from the default dictionary ...
[2024-10-13 23:19:37,299.299] __init__.py -> initialize line:132 [DEBUG]: Loading model from cache C:\Users\Administrator\AppData\Local\Temp\jieba.cache
[2024-10-13 23:19:37,823.823] __init__.py -> initialize line:164 [DEBUG]: Loading model cost 0.524 seconds.
[2024-10-13 23:19:37,824.824] __init__.py -> initialize line:166 [DEBUG]: Prefix dict has been built successfully.
[2024-10-13 23:19:37,825.825] base.py -> _exec_single_context line:1903 [INFO]: SELECT keyword_table.keyword_table AS keyword_table_keyword_table 
FROM keyword_table 
WHERE keyword_table.dataset_id IN (%(dataset_id_1_1)s::UUID)
[2024-10-13 23:19:37,826.826] base.py -> _exec_single_context line:1908 [INFO]: [generated in 0.00034s] {'dataset_id_1_1': UUID('6347c9df-7a30-4ea4-9965-a0f368f007fc')}
[2024-10-13 23:19:37,830.830] base.py -> _exec_single_context line:1903 [INFO]: SELECT segment.id AS segment_id, segment.account_id AS segment_account_id, segment.dataset_id AS segment_dataset_id, segment.document_id AS segment_document_id, segment.node_id AS segment_node_id, segment.position AS segment_position, segment.content AS segment_content, segment.character_count AS segment_character_count, segment.token_count AS segment_token_count, segment.keywords AS segment_keywords, segment.hash AS segment_hash, segment.hit_count AS segment_hit_count, segment.enabled AS segment_enabled, segment.disabled_at AS segment_disabled_at, segment.processing_started_at AS segment_processing_started_at, segment.indexing_completed_at AS segment_indexing_completed_at, segment.completed_at AS segment_completed_at, segment.stopped_at AS segment_stopped_at, segment.error AS segment_error, segment.status AS segment_status, segment.updated_at AS segment_updated_at, segment.created_at AS segment_created_at 
FROM segment 
WHERE segment.id IN (NULL) AND (1 != 1)
[2024-10-13 23:19:37,830.830] base.py -> _exec_single_context line:1908 [INFO]: [generated in 0.00029s] {}
[2024-10-13 23:19:37,833.833] base.py -> _exec_single_context line:1903 [INFO]: INSERT INTO dataset_query (dataset_id, query, source, source_app_id, created_by) VALUES (%(dataset_id)s::UUID, %(query)s, %(source)s, %(source_app_id)s::UUID, %(created_by)s::UUID) RETURNING dataset_query.id, dataset_query.updated_at, dataset_query.created_at
[2024-10-13 23:19:37,833.833] base.py -> _exec_single_context line:1908 [INFO]: [generated in 0.00030s] {'dataset_id': UUID('6347c9df-7a30-4ea4-9965-a0f368f007fc'), 'query': '想学习flask，有什么建议么？', 'source': <RetrievalSource.HIT_TESTING: 'hit_testing'>, 'source_app_id': None, 'created_by': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2024-10-13 23:19:37,835.835] base.py -> _commit_impl line:1146 [INFO]: COMMIT
[2024-10-13 23:19:37,836.836] base.py -> _begin_impl line:1103 [INFO]: BEGIN (implicit)
[2024-10-13 23:19:37,837.837] base.py -> _exec_single_context line:1903 [INFO]: INSERT INTO dataset_query (dataset_id, query, source, source_app_id, created_by) VALUES (%(dataset_id)s::UUID, %(query)s, %(source)s, %(source_app_id)s::UUID, %(created_by)s::UUID) RETURNING dataset_query.id, dataset_query.updated_at, dataset_query.created_at
[2024-10-13 23:19:37,837.837] base.py -> _exec_single_context line:1908 [INFO]: [cached since 0.004062s ago] {'dataset_id': UUID('6347c9df-7a30-4ea4-9965-a0f368f007fc'), 'query': '想学习flask，有什么建议么？', 'source': <RetrievalSource.HIT_TESTING: 'hit_testing'>, 'source_app_id': None, 'created_by': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2024-10-13 23:19:37,838.838] base.py -> _commit_impl line:1146 [INFO]: COMMIT
[2024-10-13 23:19:37,840.840] base.py -> _begin_impl line:1103 [INFO]: BEGIN (implicit)
[2024-10-13 23:19:37,840.840] base.py -> _exec_single_context line:1903 [INFO]: INSERT INTO dataset_query (dataset_id, query, source, source_app_id, created_by) VALUES (%(dataset_id)s::UUID, %(query)s, %(source)s, %(source_app_id)s::UUID, %(created_by)s::UUID) RETURNING dataset_query.id, dataset_query.updated_at, dataset_query.created_at
[2024-10-13 23:19:37,840.840] base.py -> _exec_single_context line:1908 [INFO]: [cached since 0.007243s ago] {'dataset_id': UUID('6347c9df-7a30-4ea4-9965-a0f368f007fc'), 'query': '想学习flask，有什么建议么？', 'source': <RetrievalSource.HIT_TESTING: 'hit_testing'>, 'source_app_id': None, 'created_by': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2024-10-13 23:19:37,841.841] base.py -> _commit_impl line:1146 [INFO]: COMMIT
[2024-10-13 23:19:37,842.842] base.py -> _begin_impl line:1103 [INFO]: BEGIN (implicit)
[2024-10-13 23:19:37,843.843] base.py -> _exec_single_context line:1903 [INFO]: INSERT INTO dataset_query (dataset_id, query, source, source_app_id, created_by) VALUES (%(dataset_id)s::UUID, %(query)s, %(source)s, %(source_app_id)s::UUID, %(created_by)s::UUID) RETURNING dataset_query.id, dataset_query.updated_at, dataset_query.created_at
[2024-10-13 23:19:37,843.843] base.py -> _exec_single_context line:1908 [INFO]: [cached since 0.01007s ago] {'dataset_id': UUID('6347c9df-7a30-4ea4-9965-a0f368f007fc'), 'query': '想学习flask，有什么建议么？', 'source': <RetrievalSource.HIT_TESTING: 'hit_testing'>, 'source_app_id': None, 'created_by': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2024-10-13 23:19:37,844.844] base.py -> _commit_impl line:1146 [INFO]: COMMIT
[2024-10-13 23:19:37,846.846] base.py -> _begin_impl line:1103 [INFO]: BEGIN (implicit)
[2024-10-13 23:19:37,846.846] base.py -> _exec_single_context line:1903 [INFO]: INSERT INTO dataset_query (dataset_id, query, source, source_app_id, created_by) VALUES (%(dataset_id)s::UUID, %(query)s, %(source)s, %(source_app_id)s::UUID, %(created_by)s::UUID) RETURNING dataset_query.id, dataset_query.updated_at, dataset_query.created_at
[2024-10-13 23:19:37,846.846] base.py -> _exec_single_context line:1908 [INFO]: [cached since 0.01312s ago] {'dataset_id': UUID('6347c9df-7a30-4ea4-9965-a0f368f007fc'), 'query': '想学习flask，有什么建议么？', 'source': <RetrievalSource.HIT_TESTING: 'hit_testing'>, 'source_app_id': None, 'created_by': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2024-10-13 23:19:37,847.847] base.py -> _commit_impl line:1146 [INFO]: COMMIT
[2024-10-13 23:19:37,848.848] base.py -> _begin_impl line:1103 [INFO]: BEGIN (implicit)
[2024-10-13 23:19:37,849.849] base.py -> _exec_single_context line:1903 [INFO]: INSERT INTO dataset_query (dataset_id, query, source, source_app_id, created_by) VALUES (%(dataset_id)s::UUID, %(query)s, %(source)s, %(source_app_id)s::UUID, %(created_by)s::UUID) RETURNING dataset_query.id, dataset_query.updated_at, dataset_query.created_at
[2024-10-13 23:19:37,849.849] base.py -> _exec_single_context line:1908 [INFO]: [cached since 0.01579s ago] {'dataset_id': UUID('6347c9df-7a30-4ea4-9965-a0f368f007fc'), 'query': '想学习flask，有什么建议么？', 'source': <RetrievalSource.HIT_TESTING: 'hit_testing'>, 'source_app_id': None, 'created_by': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2024-10-13 23:19:37,850.850] base.py -> _commit_impl line:1146 [INFO]: COMMIT
[2024-10-13 23:19:37,850.850] base.py -> _begin_impl line:1103 [INFO]: BEGIN (implicit)
[2024-10-13 23:19:37,851.851] base.py -> _exec_single_context line:1903 [INFO]: INSERT INTO dataset_query (dataset_id, query, source, source_app_id, created_by) VALUES (%(dataset_id)s::UUID, %(query)s, %(source)s, %(source_app_id)s::UUID, %(created_by)s::UUID) RETURNING dataset_query.id, dataset_query.updated_at, dataset_query.created_at
[2024-10-13 23:19:37,851.851] base.py -> _exec_single_context line:1908 [INFO]: [cached since 0.01851s ago] {'dataset_id': UUID('6347c9df-7a30-4ea4-9965-a0f368f007fc'), 'query': '想学习flask，有什么建议么？', 'source': <RetrievalSource.HIT_TESTING: 'hit_testing'>, 'source_app_id': None, 'created_by': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2024-10-13 23:19:37,852.852] base.py -> _commit_impl line:1146 [INFO]: COMMIT
[2024-10-13 23:19:37,853.853] base.py -> _begin_impl line:1103 [INFO]: BEGIN (implicit)
[2024-10-13 23:19:37,853.853] base.py -> _exec_single_context line:1903 [INFO]: INSERT INTO dataset_query (dataset_id, query, source, source_app_id, created_by) VALUES (%(dataset_id)s::UUID, %(query)s, %(source)s, %(source_app_id)s::UUID, %(created_by)s::UUID) RETURNING dataset_query.id, dataset_query.updated_at, dataset_query.created_at
[2024-10-13 23:19:37,854.854] base.py -> _exec_single_context line:1908 [INFO]: [cached since 0.02116s ago] {'dataset_id': UUID('6347c9df-7a30-4ea4-9965-a0f368f007fc'), 'query': '想学习flask，有什么建议么？', 'source': <RetrievalSource.HIT_TESTING: 'hit_testing'>, 'source_app_id': None, 'created_by': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2024-10-13 23:19:37,854.854] base.py -> _commit_impl line:1146 [INFO]: COMMIT
[2024-10-13 23:19:37,856.856] base.py -> _begin_impl line:1103 [INFO]: BEGIN (implicit)
[2024-10-13 23:19:37,856.856] base.py -> _exec_single_context line:1903 [INFO]: INSERT INTO dataset_query (dataset_id, query, source, source_app_id, created_by) VALUES (%(dataset_id)s::UUID, %(query)s, %(source)s, %(source_app_id)s::UUID, %(created_by)s::UUID) RETURNING dataset_query.id, dataset_query.updated_at, dataset_query.created_at
[2024-10-13 23:19:37,856.856] base.py -> _exec_single_context line:1908 [INFO]: [cached since 0.0236s ago] {'dataset_id': UUID('6347c9df-7a30-4ea4-9965-a0f368f007fc'), 'query': '想学习flask，有什么建议么？', 'source': <RetrievalSource.HIT_TESTING: 'hit_testing'>, 'source_app_id': None, 'created_by': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2024-10-13 23:19:37,857.857] base.py -> _commit_impl line:1146 [INFO]: COMMIT
[2024-10-13 23:19:37,858.858] base.py -> _begin_impl line:1103 [INFO]: BEGIN (implicit)
[2024-10-13 23:19:37,859.859] base.py -> _exec_single_context line:1903 [INFO]: INSERT INTO dataset_query (dataset_id, query, source, source_app_id, created_by) VALUES (%(dataset_id)s::UUID, %(query)s, %(source)s, %(source_app_id)s::UUID, %(created_by)s::UUID) RETURNING dataset_query.id, dataset_query.updated_at, dataset_query.created_at
[2024-10-13 23:19:37,859.859] base.py -> _exec_single_context line:1908 [INFO]: [cached since 0.02619s ago] {'dataset_id': UUID('6347c9df-7a30-4ea4-9965-a0f368f007fc'), 'query': '想学习flask，有什么建议么？', 'source': <RetrievalSource.HIT_TESTING: 'hit_testing'>, 'source_app_id': None, 'created_by': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2024-10-13 23:19:37,860.860] base.py -> _commit_impl line:1146 [INFO]: COMMIT
[2024-10-13 23:19:37,862.862] base.py -> _begin_impl line:1103 [INFO]: BEGIN (implicit)
[2024-10-13 23:19:37,863.863] base.py -> _exec_single_context line:1903 [INFO]: UPDATE segment SET hit_count=(segment.hit_count + %(hit_count_1)s) WHERE segment.id IN (%(id_1_1)s::UUID, %(id_1_2)s::UUID, %(id_1_3)s::UUID, %(id_1_4)s::UUID, %(id_1_5)s::UUID, %(id_1_6)s::UUID, %(id_1_7)s::UUID, %(id_1_8)s::UUID, %(id_1_9)s::UUID, %(id_1_10)s::UUID)
[2024-10-13 23:19:37,863.863] base.py -> _exec_single_context line:1908 [INFO]: [generated in 0.00031s] {'hit_count_1': 1, 'id_1_1': UUID('0f9e5c49-42db-4ddc-9b84-3c0a98f848e0'), 'id_1_2': UUID('e7606272-55d3-4e79-8b04-79eeede40c45'), 'id_1_3': UUID('78522a8a-049b-41dd-a3a5-4f5d20645923'), 'id_1_4': UUID('6253fd38-440b-403e-9326-a10ee066f6db'), 'id_1_5': UUID('5ba1c092-9910-4d7e-a752-6acb84dce979'), 'id_1_6': UUID('532fdb31-9dd2-47b7-8f69-cd7e42a7f29e'), 'id_1_7': UUID('3ce26384-6922-4936-ac2e-2e980f199c5e'), 'id_1_8': UUID('ac6f899a-19a1-4981-a843-51a217e67207'), 'id_1_9': UUID('246c9316-3c2b-49dd-9936-18347df8d0da'), 'id_1_10': UUID('2dca7d53-1b54-4efc-833e-b41d7ae0cf01')}
[2024-10-13 23:19:37,864.864] base.py -> _commit_impl line:1146 [INFO]: COMMIT
[2024-10-13 23:19:37,865.865] base.py -> _begin_impl line:1103 [INFO]: BEGIN (implicit)
[2024-10-13 23:19:37,866.866] base.py -> _exec_single_context line:1903 [INFO]: SELECT segment.id AS segment_id, segment.account_id AS segment_account_id, segment.dataset_id AS segment_dataset_id, segment.document_id AS segment_document_id, segment.node_id AS segment_node_id, segment.position AS segment_position, segment.content AS segment_content, segment.character_count AS segment_character_count, segment.token_count AS segment_token_count, segment.keywords AS segment_keywords, segment.hash AS segment_hash, segment.hit_count AS segment_hit_count, segment.enabled AS segment_enabled, segment.disabled_at AS segment_disabled_at, segment.processing_started_at AS segment_processing_started_at, segment.indexing_completed_at AS segment_indexing_completed_at, segment.completed_at AS segment_completed_at, segment.stopped_at AS segment_stopped_at, segment.error AS segment_error, segment.status AS segment_status, segment.updated_at AS segment_updated_at, segment.created_at AS segment_created_at 
FROM segment 
WHERE segment.id IN (%(id_1_1)s::UUID, %(id_1_2)s::UUID, %(id_1_3)s::UUID, %(id_1_4)s::UUID, %(id_1_5)s::UUID, %(id_1_6)s::UUID, %(id_1_7)s::UUID, %(id_1_8)s::UUID, %(id_1_9)s::UUID, %(id_1_10)s::UUID)
[2024-10-13 23:19:37,866.866] base.py -> _exec_single_context line:1908 [INFO]: [cached since 0.03671s ago] {'id_1_1': '0f9e5c49-42db-4ddc-9b84-3c0a98f848e0', 'id_1_2': 'e7606272-55d3-4e79-8b04-79eeede40c45', 'id_1_3': '78522a8a-049b-41dd-a3a5-4f5d20645923', 'id_1_4': '6253fd38-440b-403e-9326-a10ee066f6db', 'id_1_5': '5ba1c092-9910-4d7e-a752-6acb84dce979', 'id_1_6': '532fdb31-9dd2-47b7-8f69-cd7e42a7f29e', 'id_1_7': '3ce26384-6922-4936-ac2e-2e980f199c5e', 'id_1_8': 'ac6f899a-19a1-4981-a843-51a217e67207', 'id_1_9': '246c9316-3c2b-49dd-9936-18347df8d0da', 'id_1_10': '2dca7d53-1b54-4efc-833e-b41d7ae0cf01'}
[2024-10-13 23:19:37,871.871] base.py -> _exec_single_context line:1903 [INFO]: SELECT document.id AS document_id, document.account_id AS document_account_id, document.dataset_id AS document_dataset_id, document.upload_file_id AS document_upload_file_id, document.process_rule_id AS document_process_rule_id, document.batch AS document_batch, document.name AS document_name, document.position AS document_position, document.character_count AS document_character_count, document.token_count AS document_token_count, document.processing_started_at AS document_processing_started_at, document.parsing_completed_at AS document_parsing_completed_at, document.splitting_completed_at AS document_splitting_completed_at, document.indexing_completed_at AS document_indexing_completed_at, document.completed_at AS document_completed_at, document.stopped_at AS document_stopped_at, document.error AS document_error, document.enabled AS document_enabled, document.disabled_at AS document_disabled_at, document.status AS document_status, document.updated_at AS document_updated_at, document.created_at AS document_created_at 
FROM document 
WHERE document.id = %(pk_1)s::UUID
[2024-10-13 23:19:37,871.871] base.py -> _exec_single_context line:1908 [INFO]: [generated in 0.00027s] {'pk_1': UUID('06a8c11f-83e9-4456-af7d-51ad48e06766')}
[2024-10-13 23:19:37,872.872] base.py -> _exec_single_context line:1903 [INFO]: SELECT upload_file.id AS upload_file_id, upload_file.account_id AS upload_file_account_id, upload_file.name AS upload_file_name, upload_file.key AS upload_file_key, upload_file.size AS upload_file_size, upload_file.extension AS upload_file_extension, upload_file.mime_type AS upload_file_mime_type, upload_file.hash AS upload_file_hash, upload_file.updated_at AS upload_file_updated_at, upload_file.created_at AS upload_file_created_at 
FROM upload_file 
WHERE upload_file.id = %(id_1)s::UUID
[2024-10-13 23:19:37,873.873] base.py -> _exec_single_context line:1908 [INFO]: [generated in 0.00021s] {'id_1': UUID('4cdddf4d-6642-4bb3-87be-63dc77408c7e')}
[2024-10-13 23:19:37,874.874] base.py -> _exec_single_context line:1903 [INFO]: SELECT upload_file.id AS upload_file_id, upload_file.account_id AS upload_file_account_id, upload_file.name AS upload_file_name, upload_file.key AS upload_file_key, upload_file.size AS upload_file_size, upload_file.extension AS upload_file_extension, upload_file.mime_type AS upload_file_mime_type, upload_file.hash AS upload_file_hash, upload_file.updated_at AS upload_file_updated_at, upload_file.created_at AS upload_file_created_at 
FROM upload_file 
WHERE upload_file.id = %(id_1)s::UUID
[2024-10-13 23:19:37,874.874] base.py -> _exec_single_context line:1908 [INFO]: [cached since 0.00138s ago] {'id_1': UUID('4cdddf4d-6642-4bb3-87be-63dc77408c7e')}
[2024-10-13 23:19:37,875.875] base.py -> _exec_single_context line:1903 [INFO]: SELECT upload_file.id AS upload_file_id, upload_file.account_id AS upload_file_account_id, upload_file.name AS upload_file_name, upload_file.key AS upload_file_key, upload_file.size AS upload_file_size, upload_file.extension AS upload_file_extension, upload_file.mime_type AS upload_file_mime_type, upload_file.hash AS upload_file_hash, upload_file.updated_at AS upload_file_updated_at, upload_file.created_at AS upload_file_created_at 
FROM upload_file 
WHERE upload_file.id = %(id_1)s::UUID
[2024-10-13 23:19:37,875.875] base.py -> _exec_single_context line:1908 [INFO]: [cached since 0.002497s ago] {'id_1': UUID('4cdddf4d-6642-4bb3-87be-63dc77408c7e')}
[2024-10-13 23:19:37,876.876] base.py -> _exec_single_context line:1903 [INFO]: SELECT upload_file.id AS upload_file_id, upload_file.account_id AS upload_file_account_id, upload_file.name AS upload_file_name, upload_file.key AS upload_file_key, upload_file.size AS upload_file_size, upload_file.extension AS upload_file_extension, upload_file.mime_type AS upload_file_mime_type, upload_file.hash AS upload_file_hash, upload_file.updated_at AS upload_file_updated_at, upload_file.created_at AS upload_file_created_at 
FROM upload_file 
WHERE upload_file.id = %(id_1)s::UUID
[2024-10-13 23:19:37,876.876] base.py -> _exec_single_context line:1908 [INFO]: [cached since 0.003587s ago] {'id_1': UUID('4cdddf4d-6642-4bb3-87be-63dc77408c7e')}
[2024-10-13 23:19:37,877.877] base.py -> _exec_single_context line:1903 [INFO]: SELECT upload_file.id AS upload_file_id, upload_file.account_id AS upload_file_account_id, upload_file.name AS upload_file_name, upload_file.key AS upload_file_key, upload_file.size AS upload_file_size, upload_file.extension AS upload_file_extension, upload_file.mime_type AS upload_file_mime_type, upload_file.hash AS upload_file_hash, upload_file.updated_at AS upload_file_updated_at, upload_file.created_at AS upload_file_created_at 
FROM upload_file 
WHERE upload_file.id = %(id_1)s::UUID
[2024-10-13 23:19:37,878.878] base.py -> _exec_single_context line:1908 [INFO]: [cached since 0.004994s ago] {'id_1': UUID('4cdddf4d-6642-4bb3-87be-63dc77408c7e')}
[2024-10-13 23:19:37,879.879] base.py -> _exec_single_context line:1903 [INFO]: SELECT upload_file.id AS upload_file_id, upload_file.account_id AS upload_file_account_id, upload_file.name AS upload_file_name, upload_file.key AS upload_file_key, upload_file.size AS upload_file_size, upload_file.extension AS upload_file_extension, upload_file.mime_type AS upload_file_mime_type, upload_file.hash AS upload_file_hash, upload_file.updated_at AS upload_file_updated_at, upload_file.created_at AS upload_file_created_at 
FROM upload_file 
WHERE upload_file.id = %(id_1)s::UUID
[2024-10-13 23:19:37,879.879] base.py -> _exec_single_context line:1908 [INFO]: [cached since 0.006249s ago] {'id_1': UUID('4cdddf4d-6642-4bb3-87be-63dc77408c7e')}
[2024-10-13 23:19:37,880.880] base.py -> _exec_single_context line:1903 [INFO]: SELECT upload_file.id AS upload_file_id, upload_file.account_id AS upload_file_account_id, upload_file.name AS upload_file_name, upload_file.key AS upload_file_key, upload_file.size AS upload_file_size, upload_file.extension AS upload_file_extension, upload_file.mime_type AS upload_file_mime_type, upload_file.hash AS upload_file_hash, upload_file.updated_at AS upload_file_updated_at, upload_file.created_at AS upload_file_created_at 
FROM upload_file 
WHERE upload_file.id = %(id_1)s::UUID
[2024-10-13 23:19:37,880.880] base.py -> _exec_single_context line:1908 [INFO]: [cached since 0.00757s ago] {'id_1': UUID('4cdddf4d-6642-4bb3-87be-63dc77408c7e')}
[2024-10-13 23:19:37,881.881] base.py -> _exec_single_context line:1903 [INFO]: SELECT upload_file.id AS upload_file_id, upload_file.account_id AS upload_file_account_id, upload_file.name AS upload_file_name, upload_file.key AS upload_file_key, upload_file.size AS upload_file_size, upload_file.extension AS upload_file_extension, upload_file.mime_type AS upload_file_mime_type, upload_file.hash AS upload_file_hash, upload_file.updated_at AS upload_file_updated_at, upload_file.created_at AS upload_file_created_at 
FROM upload_file 
WHERE upload_file.id = %(id_1)s::UUID
[2024-10-13 23:19:37,881.881] base.py -> _exec_single_context line:1908 [INFO]: [cached since 0.008863s ago] {'id_1': UUID('4cdddf4d-6642-4bb3-87be-63dc77408c7e')}
[2024-10-13 23:19:37,882.882] base.py -> _exec_single_context line:1903 [INFO]: SELECT upload_file.id AS upload_file_id, upload_file.account_id AS upload_file_account_id, upload_file.name AS upload_file_name, upload_file.key AS upload_file_key, upload_file.size AS upload_file_size, upload_file.extension AS upload_file_extension, upload_file.mime_type AS upload_file_mime_type, upload_file.hash AS upload_file_hash, upload_file.updated_at AS upload_file_updated_at, upload_file.created_at AS upload_file_created_at 
FROM upload_file 
WHERE upload_file.id = %(id_1)s::UUID
[2024-10-13 23:19:37,883.883] base.py -> _exec_single_context line:1908 [INFO]: [cached since 0.01002s ago] {'id_1': UUID('4cdddf4d-6642-4bb3-87be-63dc77408c7e')}
[2024-10-13 23:19:37,884.884] base.py -> _exec_single_context line:1903 [INFO]: SELECT upload_file.id AS upload_file_id, upload_file.account_id AS upload_file_account_id, upload_file.name AS upload_file_name, upload_file.key AS upload_file_key, upload_file.size AS upload_file_size, upload_file.extension AS upload_file_extension, upload_file.mime_type AS upload_file_mime_type, upload_file.hash AS upload_file_hash, upload_file.updated_at AS upload_file_updated_at, upload_file.created_at AS upload_file_created_at 
FROM upload_file 
WHERE upload_file.id = %(id_1)s::UUID
[2024-10-13 23:19:37,884.884] base.py -> _exec_single_context line:1908 [INFO]: [cached since 0.01108s ago] {'id_1': UUID('4cdddf4d-6642-4bb3-87be-63dc77408c7e')}
[2024-10-13 23:19:37,886.886] base.py -> _rollback_impl line:1129 [INFO]: ROLLBACK
[2024-10-13 23:19:37,886.886] _internal.py -> _log line:96 [INFO]: 127.0.0.1 - - [13/Oct/2024 23:19:37] "POST /datasets/6347c9df-7a30-4ea4-9965-a0f368f007fc/hit HTTP/1.1" 200 -
[2024-10-13 23:19:57,056.056] base.py -> _begin_impl line:1103 [INFO]: BEGIN (implicit)
[2024-10-13 23:19:57,056.056] base.py -> _exec_single_context line:1903 [INFO]: SELECT dataset.id AS dataset_id, dataset.account_id AS dataset_account_id, dataset.name AS dataset_name, dataset.icon AS dataset_icon, dataset.description AS dataset_description, dataset.updated_at AS dataset_updated_at, dataset.created_at AS dataset_created_at 
FROM dataset 
WHERE dataset.id = %(pk_1)s::UUID
[2024-10-13 23:19:57,057.057] base.py -> _exec_single_context line:1908 [INFO]: [cached since 73.69s ago] {'pk_1': UUID('6347c9df-7a30-4ea4-9965-a0f368f007fc')}
[2024-10-13 23:19:57,058.058] base.py -> _exec_single_context line:1903 [INFO]: DELETE FROM dataset WHERE dataset.id = %(id)s::UUID
[2024-10-13 23:19:57,058.058] base.py -> _exec_single_context line:1908 [INFO]: [generated in 0.00026s] {'id': UUID('6347c9df-7a30-4ea4-9965-a0f368f007fc')}
[2024-10-13 23:19:57,059.059] base.py -> _commit_impl line:1146 [INFO]: COMMIT
[2024-10-13 23:19:57,061.061] base.py -> _begin_impl line:1103 [INFO]: BEGIN (implicit)
[2024-10-13 23:19:57,061.061] base.py -> _exec_single_context line:1903 [INFO]: DELETE FROM app_dataset_join WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2024-10-13 23:19:57,062.062] base.py -> _exec_single_context line:1908 [INFO]: [generated in 0.00019s] {'dataset_id_1': UUID('6347c9df-7a30-4ea4-9965-a0f368f007fc')}
[2024-10-13 23:19:57,062.062] base.py -> _commit_impl line:1146 [INFO]: COMMIT
[2024-10-13 23:19:57,105.105] _internal.py -> _log line:96 [INFO]: 127.0.0.1 - - [13/Oct/2024 23:19:57] "POST /datasets/6347c9df-7a30-4ea4-9965-a0f368f007fc/delete HTTP/1.1" 200 -
[2024-10-13 23:20:01,172.172] base.py -> _begin_impl line:1103 [INFO]: BEGIN (implicit)
[2024-10-13 23:20:01,173.173] base.py -> _exec_single_context line:1903 [INFO]: SELECT dataset.id AS dataset_id, dataset.account_id AS dataset_account_id, dataset.name AS dataset_name, dataset.icon AS dataset_icon, dataset.description AS dataset_description, dataset.updated_at AS dataset_updated_at, dataset.created_at AS dataset_created_at 
FROM dataset 
WHERE dataset.account_id = %(account_id_1)s::UUID ORDER BY dataset.created_at DESC 
 LIMIT %(param_1)s OFFSET %(param_2)s
[2024-10-13 23:20:01,173.173] base.py -> _exec_single_context line:1908 [INFO]: [cached since 97.52s ago] {'account_id_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f', 'param_1': 20, 'param_2': 0}
[2024-10-13 23:20:01,175.175] base.py -> _exec_single_context line:1903 [INFO]: SELECT count(*) AS count_1 
FROM (SELECT dataset.id AS id, dataset.account_id AS account_id, dataset.name AS name, dataset.icon AS icon, dataset.description AS description, dataset.updated_at AS updated_at, dataset.created_at AS created_at 
FROM dataset 
WHERE dataset.account_id = %(account_id_1)s::UUID) AS anon_1
[2024-10-13 23:20:01,175.175] base.py -> _exec_single_context line:1908 [INFO]: [cached since 97.52s ago] {'account_id_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2024-10-13 23:20:01,176.176] base.py -> _exec_single_context line:1903 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2024-10-13 23:20:01,176.176] base.py -> _exec_single_context line:1908 [INFO]: [cached since 97.52s ago] {'dataset_id_1': UUID('f3f28f75-8e60-4eba-b6df-4d1b390bbd89')}
[2024-10-13 23:20:01,177.177] base.py -> _exec_single_context line:1903 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2024-10-13 23:20:01,177.177] base.py -> _exec_single_context line:1908 [INFO]: [cached since 97.52s ago] {'dataset_id_1': UUID('f3f28f75-8e60-4eba-b6df-4d1b390bbd89')}
[2024-10-13 23:20:01,179.179] base.py -> _exec_single_context line:1903 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2024-10-13 23:20:01,179.179] base.py -> _exec_single_context line:1908 [INFO]: [cached since 97.52s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('f3f28f75-8e60-4eba-b6df-4d1b390bbd89')}
[2024-10-13 23:20:01,180.180] base.py -> _rollback_impl line:1129 [INFO]: ROLLBACK
[2024-10-13 23:20:01,180.180] _internal.py -> _log line:96 [INFO]: 127.0.0.1 - - [13/Oct/2024 23:20:01] "GET /datasets?search_word=&current_page=1&page_size=20 HTTP/1.1" 200 -
[2024-10-13 23:20:18,449.449] base.py -> _begin_impl line:1103 [INFO]: BEGIN (implicit)
[2024-10-13 23:20:18,449.449] base.py -> _exec_single_context line:1903 [INFO]: SELECT dataset.id AS dataset_id, dataset.account_id AS dataset_account_id, dataset.name AS dataset_name, dataset.icon AS dataset_icon, dataset.description AS dataset_description, dataset.updated_at AS dataset_updated_at, dataset.created_at AS dataset_created_at 
FROM dataset 
WHERE dataset.id = %(pk_1)s::UUID
[2024-10-13 23:20:18,449.449] base.py -> _exec_single_context line:1908 [INFO]: [cached since 95.08s ago] {'pk_1': UUID('6347c9df-7a30-4ea4-9965-a0f368f007fc')}
[2024-10-13 23:20:18,450.450] http.py -> _register_error_handler line:66 [ERROR]: An error occurred: 
Traceback (most recent call last):
  File "D:\Code\llmops\llmops-api\venv\lib\site-packages\flask\app.py", line 870, in full_dispatch_request
    rv = self.dispatch_request()
  File "D:\Code\llmops\llmops-api\venv\lib\site-packages\flask\app.py", line 855, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
  File "D:\Code\llmops\llmops-api\internal\handler\document_handler.py", line 95, in get_documents_with_page
    documents, paginator = self.document_service.get_documents_with_page(dataset_id, req)
  File "D:\Code\llmops\llmops-api\internal\service\document_service.py", line 259, in get_documents_with_page
    raise NotFoundException("该知识库不存在，或无权限")
internal.exception.exception.NotFoundException
[2024-10-13 23:20:18,453.453] base.py -> _rollback_impl line:1129 [INFO]: ROLLBACK
[2024-10-13 23:20:18,454.454] _internal.py -> _log line:96 [INFO]: 127.0.0.1 - - [13/Oct/2024 23:20:18] "GET /datasets/6347c9df-7a30-4ea4-9965-a0f368f007fc/documents?current_page=1&page_size=20 HTTP/1.1" 200 -
[2024-10-13 23:20:24,818.818] base.py -> _begin_impl line:1103 [INFO]: BEGIN (implicit)
[2024-10-13 23:20:24,819.819] base.py -> _exec_single_context line:1903 [INFO]: SELECT dataset.id AS dataset_id, dataset.account_id AS dataset_account_id, dataset.name AS dataset_name, dataset.icon AS dataset_icon, dataset.description AS dataset_description, dataset.updated_at AS dataset_updated_at, dataset.created_at AS dataset_created_at 
FROM dataset 
WHERE dataset.id = %(pk_1)s::UUID
[2024-10-13 23:20:24,819.819] base.py -> _exec_single_context line:1908 [INFO]: [cached since 101.5s ago] {'pk_1': UUID('6347c9df-7a30-4ea4-9965-a0f368f007fc')}
[2024-10-13 23:20:24,820.820] http.py -> _register_error_handler line:66 [ERROR]: An error occurred: 
Traceback (most recent call last):
  File "D:\Code\llmops\llmops-api\venv\lib\site-packages\flask\app.py", line 870, in full_dispatch_request
    rv = self.dispatch_request()
  File "D:\Code\llmops\llmops-api\venv\lib\site-packages\flask\app.py", line 855, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
  File "D:\Code\llmops\llmops-api\internal\handler\dataset_handler.py", line 54, in hit
    hit_result = self.dataset_service.hit(dataset_id, req)
  File "D:\Code\llmops\llmops-api\internal\service\dataset_service.py", line 154, in hit
    raise NotFoundException("该知识库不存在")
internal.exception.exception.NotFoundException
[2024-10-13 23:20:24,822.822] base.py -> _rollback_impl line:1129 [INFO]: ROLLBACK
[2024-10-13 23:20:24,822.822] _internal.py -> _log line:96 [INFO]: 127.0.0.1 - - [13/Oct/2024 23:20:24] "POST /datasets/6347c9df-7a30-4ea4-9965-a0f368f007fc/hit HTTP/1.1" 200 -
